"use strict";const a19_0x44e6=["shape","pointerUp","1.1","then","altKey","_onStateChange","_cursorOrigin","sign","blendMode","removeChild","onHistoryUnset","topleft","min","873915HYrLTO","options","fire","overlay","floor","screen","shiftKey","move","top","_rectangleOtherPoint","position","topright","bottomright","flipX","_sizeInfo","key","var(--luna-focusColor)","currentState","_model","Draw Rectangle","transparent","step","currentLayer","setVisible","_imageService","3kqLUHV","_svgPath","_topLeftInfo","_svg","setRange","push","triggerRequestRender","onLayerChange","1658861hvcKXB","range","difference","primaryColor","bottomleft","appendChild","stroke","_createRange","onStateChange","div","MoveImageRangeRenderer","_container","secondaryColor"," y=","_cursorCurrent","rectLayer","block","strokeWidth","hasRectLayer","_getStyleValue","webpackChunkluna","_cursorOriginalRectangle","_directionalMoveZones","onRequestRender","bottom","abs","ArrowRight","_viewportService","_setupActiveTemporaryLayer","viewportService","normal","replace","round","render","createElement","right","state","_onUpdate","Set Rectangle Style","_updateRectangle","max","devicePixelRatio","pointerMove","set","registerTemporaryLayer","type","_getLayer","darken","fill","keyDown","Fill and outline","rectangle","version","visible","Resize Rectangle","width","_getRange","name","onUpdate","linearBurn","_blendModeOption","handleOptionUpdate","95oxNINa","display","onTemporaryLayerRegistered","imageService","linearDodgeAdd"," x ","selectionService","338392FJJVSz","includes","433004BackAr","left","new","getDetailedInfo","761052BJiuRL","dispose","temporaryLayer","Set Rectangle Outline Size","flipY","_refreshInfo","get","Set Rectangle Blend Mode","Style","clientWidth","toString","_onOptionsChange","rightTriangle","_styleOption","multiply","1FUKpdG","createElementNS","79829GZIRkq","allowUnchecking","ArrowLeft","prepend","number","_sc","_finish","_range","getInfo","taskService","order","setColors","path","Blend Mode","zoom","register","_isVisible","value","_clearRectLayer","event","primary","lighten","historyService","onCommit","style","_svgPath2","setValueFromHistoryChange","_rectangleOrigin"," pixels wide by ","add","getOutlineSvgPath","Rectangle top left position is x=","_updateColors","secondary","deserialize","onBeforeRunLayerTask","default","Fill","clientHeight","outlineSize","_renderer","height","getCoordsFromEvent","ArrowDown","_outlineSizeOption","triangle","setAttribute","_outlineModel","ctrlKey","Set Rectangle Color","pointerDownMove","onHistoryUpdateValue","_value","_setState","Outline Size","Outline","_onRequestRender","exclusion","rgba","_directionalMoveElements","Rectangle size is ","move-handle","buttons","commit","none","string","diamond","offsetY","_allowNewState","paletteService","_onHistoryUpdateValue","_elementContainer","ArrowUp","1758210HkZSoB","boolean","bind","Shift Rectangle","hasImage","onHistoryAction"],a19_0x59f2=function(t,e){return a19_0x44e6[t-=171]},a19_0x180d7e=a19_0x59f2;!function(t,e){const s=a19_0x59f2;for(;;)try{if(894313==-parseInt(s(387))*parseInt(s(249))-parseInt(s(253))-parseInt(s(343))-parseInt(s(362))-parseInt(s(178))+-parseInt(s(268))*parseInt(s(247))+-parseInt(s(270))*-parseInt(s(240)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a19_0x44e6),(self[a19_0x180d7e(198)]=self.webpackChunkluna||[])[a19_0x180d7e(175)]([[7440,504],{3315:(t,e,s)=>{const i=a19_0x180d7e;s.d(e,{d:()=>c});var h=s(5120),r=s(1003),n=s(1674);let o,a;class c extends h.JT{constructor(t,e,s,i){const h=a19_0x59f2;super(),this[h(189)]=t,this[h(386)]=e,this[h(205)]=s,this._model=i,this[h(280)]=2,this._svg=document.createElementNS(n.q,"svg"),this[h(173)].setAttribute(h(230),h(351)),this[h(173)][h(294)][h(372)]="absolute",this[h(171)]=document[h(269)](n.q,h(282)),this._svgPath.style[h(184)]=h(378),this[h(171)][h(294)][h(226)]=h(382),this[h(171)][h(294)][h(195)]="1",this[h(295)]=document[h(269)](n.q,h(282)),this[h(295)].style[h(184)]=h(378),this[h(295)].style[h(226)]=h(382),this[h(295)].style[h(195)]="1",this[h(173)].append(this[h(171)],this._svgPath2),this[h(189)][h(273)](this[h(173)]),this[h(285)]({dispose:()=>this[h(189)][h(358)](this[h(173)])})}async[i(211)](){const t=i,e=this[t(380)][t(179)],h=this._viewportService;if(!e)return void(this._svg[t(294)].display=t(334));if(this[t(173)][t(294)][t(241)]=t(194),!this[t(386)][t(384)])return;if(o!==this[t(380)][t(349)]){let e;switch(o=this[t(380)][t(349)],o){case t(336):e=s.e(727)[t(352)](s[t(345)](s,727));break;case"ellipse":e=s.e(8459)[t(352)](s[t(345)](s,8459));break;case t(315):e=s.e(4012)[t(352)](s[t(345)](s,4012));break;case t(265):e=s.e(6243)[t(352)](s[t(345)](s,6243));break;default:e=void 0}a=e?new Promise((async s=>{const i=t;s(new((await e)[i(306)]))})):e}const n=await a,c=Math.round(this[t(189)][t(262)]/2)-this[t(386)].width/2*h[t(284)]+h.x*h[t(284)],l=Math[t(210)](this._container[t(308)]/2)-this[t(386)][t(311)]/2*h[t(284)]+h.y*h[t(284)],u=(0,r.Oq)(e)*h[t(284)],d=(0,r.rY)(e)*h.zoom;this._svg[t(294)][t(250)]=c+e[t(250)]*h[t(284)]-2+"px",this[t(173)].style.top=l+e[t(370)]*h.zoom-2+"px",this[t(173)][t(316)](t(233),(u+5).toString()),this[t(173)].setAttribute(t(311),(d+5)[t(263)]()),this[t(171)][t(316)]("d","M2.5 2.5 h"+u+" v"+d+" h"+-u+" v"+-d),n?.[t(300)]?(this[t(295)][t(294)][t(241)]="block",this[t(295)].setAttribute("d",n[t(300)](u,d,this._model[t(375)],this[t(380)][t(257)]))):this[t(295)].style[t(241)]=t(334)}}},9865:(t,e,s)=>{s.d(e,{q:()=>r});var i=s(1815),h=s(5120);class r extends h.JT{constructor(){const t=a19_0x59f2;super(...arguments),this[t(215)]=this[t(285)](new i.v),this[t(236)]=this[t(215)][t(289)]}}},9904:(t,e,s)=>{const i=a19_0x180d7e;s.d(e,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>u,qv:()=>d});var h=s(1815),r=s(5120),n=s(2939);class o extends r.JT{constructor(t,e,s,i=!0){const r=a19_0x59f2;super(),this[r(235)]=t,this[r(347)]=e,this._value=s,this[r(271)]=i,this[r(223)]=r(344),this[r(340)]=this[r(285)](new h.v),this[r(321)]=this._onHistoryUpdateValue[r(289)],this._onUpdate=this[r(285)](new h.v),this.onUpdate=this._onUpdate.event}get[i(287)](){return this[i(322)]}set[i(287)](t){const e=i;this._value=t,this[e(215)][e(364)](t)}setValueFromHistoryChange(t){const e=i;this[e(322)]=t,this[e(340)][e(364)](t)}}class a extends r.JT{constructor(t,e,s){const r=i;super(),this[r(235)]=t,this.options=e,this[r(322)]=s,this.type=r(335),this[r(340)]=this[r(285)](new h.v),this.onHistoryUpdateValue=this[r(340)][r(289)],this[r(215)]=this[r(285)](new h.v),this[r(236)]=this[r(215)].event}get[i(287)](){return this[i(322)]}set[i(287)](t){const e=i;this[e(322)]=t,this[e(215)][e(364)](t)}[i(296)](t){this._value=t,this._onHistoryUpdateValue.fire(t)}}class c extends r.JT{constructor(t,e,s){const r=i;super(),this[r(235)]=t,this[r(363)]=e,this[r(322)]=s,this[r(223)]="string-combo",this._onHistoryUpdateValue=this[r(285)](new h.v),this[r(321)]=this[r(340)][r(289)],this._onUpdate=this.register(new h.v),this[r(236)]=this[r(215)][r(289)]}get[i(287)](){return this[i(322)]}set value(t){const e=i;this[e(322)]=t,this[e(215)][e(364)](t)}[i(296)](t){const e=i;this[e(322)]=t,this[e(340)][e(364)](t)}}class l extends a{constructor(){const t=i;super(t(283),[t(208),t(209),"darken",t(267),"linearBurn",t(291),t(367),"linearDodgeAdd",t(365),"softLight",t(180),"exclusion"],t(208))}}class u extends r.JT{constructor(t,e,s,r){const n=i;super(),this[n(235)]=t,this[n(322)]=e,this[n(361)]=s,this[n(218)]=r,this[n(223)]=n(274),this[n(340)]=this[n(285)](new h.v),this[n(321)]=this[n(340)][n(289)],this[n(215)]=this[n(285)](new h.v),this[n(236)]=this._onUpdate[n(289)]}get value(){const t=i;return(0,n.u)(this._value,this.max,this[t(361)])}set[i(287)](t){const e=i;this[e(322)]=t,this[e(215)][e(364)](t)}[i(296)](t){const e=i;this[e(322)]=t,this[e(340)].fire(t)}}class d extends u{constructor(t,e,s,h){const r=i;super(t,e,s,h),this[r(223)]="number"}get[i(287)](){const t=i;return(0,n.u)(this._value,this[t(218)],this.min)}set[i(287)](t){const e=i;this[e(322)]=Math[e(366)](t),this[e(215)][e(364)](t)}}},504:(t,e,s)=>{const i=a19_0x180d7e;s.r(e),s.d(e,{MoveImageRangeRenderer:()=>n});var h=s(5120),r=s(1003);class n extends h.JT{constructor(t,e,s,i,h){const n=a19_0x59f2;super(),this._container=t,this[n(234)]=e,this._allowNewState=s,this._viewportService=i,this[n(386)]=h,this[n(280)]=2,this[n(329)]=new Map,this[n(200)]=new Map,this[n(286)]=!0,this._elementContainer=document[n(212)](n(187));const o=["topleft",n(373),n(182),n(374),n(370),n(202),n(250),n(213)];for(const t of o){const e=document[n(212)]("div");e.classList[n(299)](n(331),t),this._elementContainer[n(183)](e),this._directionalMoveElements[n(221)](t,e),this._directionalMoveZones[n(221)](t,(0,r.Pq)())}this[n(189)][n(183)](this[n(341)]),this[n(285)]({dispose:()=>{const t=n;this[t(189)][t(358)](this._elementContainer)}})}[i(385)](t){const e=i;t!==this._isVisible&&(this[e(341)][e(294)][e(241)]=t?"":e(334),this._isVisible=t)}[i(174)](t){}[i(211)](){const t=i,e=this._getRange();if(!e)return;const s=this._imageService.currentLayer;if(!s)return;const h=this[t(205)],r=Math[t(210)](this._container[t(262)]/2)-s[t(233)]/2*h[t(284)],n=Math.round(this[t(189)].clientHeight/2)-s[t(311)]/2*h[t(284)],o=r+(h.x+e[t(250)])*h[t(284)],a=n+(h.y+e[t(370)])*h[t(284)],c=r+(h.x+e.right)*h[t(284)],l=n+(h.y+e[t(202)])*h[t(284)],u=Math.round((o+c)/2),d=Math[t(210)]((a+l)/2),p=10*window[t(219)],g={left:Math[t(361)](o+p,Math[t(218)](o,u-p)),top:Math[t(361)](a+p,Math[t(218)](a,d-p)),right:Math[t(218)](c-p,Math[t(361)](c,u+p)),bottom:Math[t(218)](l-p,Math[t(361)](l,d+p))},_={left:o-p,top:a-p,right:c+p,bottom:l+p},f=this[t(200)].get(t(360));f[t(250)]=_[t(250)],f[t(213)]=g[t(250)],f[t(370)]=_.top,f[t(202)]=g.top;const v=this._directionalMoveElements[t(259)](t(360));v[t(294)][t(250)]=o+"px",v[t(294)][t(370)]=a+"px";const y=this[t(200)][t(259)]("topright");y[t(250)]=g[t(213)],y[t(213)]=_.right,y[t(370)]=_.top,y[t(202)]=g[t(370)];const m=this[t(329)][t(259)]("topright");m[t(294)][t(250)]=c+"px",m.style[t(370)]=a+"px";const w=this[t(200)][t(259)](t(182));w[t(250)]=_.left,w.right=g.left,w[t(370)]=g[t(202)],w[t(202)]=_.bottom;const M=this._directionalMoveElements.get(t(182));M[t(294)].left=o+"px",M.style[t(370)]=l+"px";const b=this[t(200)][t(259)](t(374));b[t(250)]=g[t(213)],b[t(213)]=_[t(213)],b[t(370)]=g[t(202)],b[t(202)]=_[t(202)];const x=this[t(329)][t(259)](t(374));x[t(294)][t(250)]=c+"px",x.style[t(370)]=l+"px";const S=this[t(200)][t(259)](t(370));S.left=g[t(250)],S.right=g[t(213)],S[t(370)]=_[t(370)],S[t(202)]=g[t(370)];const R=this[t(329)][t(259)](t(370));R.style[t(250)]=u+"px",R[t(294)][t(370)]=a+"px";const k=this._directionalMoveZones.get(t(202));k[t(250)]=g.left,k[t(213)]=g[t(213)],k[t(370)]=g[t(202)],k.bottom=_.bottom;const C=this._directionalMoveElements[t(259)](t(202));C[t(294)].left=u+"px",C[t(294)][t(370)]=l+"px";const L=this._directionalMoveZones[t(259)](t(250));L[t(250)]=_[t(250)],L[t(213)]=g[t(250)],L.top=g[t(370)],L.bottom=g.bottom;const O=this[t(329)][t(259)]("left");O[t(294)][t(250)]=o+"px",O[t(294)][t(370)]=d+"px";const U=this._directionalMoveZones[t(259)](t(213));U[t(250)]=g[t(213)],U[t(213)]=_[t(213)],U[t(370)]=g[t(370)],U[t(202)]=g[t(202)];const I=this[t(329)].get(t(213));I[t(294)].left=c+"px",I.style.top=d+"px"}getPointerState(t){const e=i;if(!this[e(234)]())return this[e(338)]?"new":e(369);for(const[s,i]of this[e(200)])if((0,r.RB)(i,t.offsetX,t[e(337)]))return s;const s=this._directionalMoveZones.get(e(360)),h=this._directionalMoveZones[e(259)](e(374)),n={left:s.left,top:s[e(370)],right:h[e(213)],bottom:h[e(202)]};return(0,r.RB)(n,t.offsetX,t[e(337)])?e(369):this[e(338)]?e(251):e(369)}}},7440:(t,e,s)=>{const i=a19_0x180d7e;s.r(e),s.d(e,{default:()=>_});var h=s(8752),r=s(1815),n=s(5120),o=s(7896),a=s(1003),c=s(807),l=s(3315),u=s(9865),d=s(9904),p=s(504);class g extends n.JT{constructor(t){const e=a19_0x59f2;super(),this._sc=t,this.id="rectangle",this[e(214)]=e(251),this[e(317)]=new f((()=>this.rectLayer)),this._blendModeOption=new d.Jp,this[e(266)]=new d.rP(e(261),["Outline",e(307),e(228)],"Outline"),this[e(314)]=new d.qv(e(324),1,1,1e3),this[e(363)]=[this._blendModeOption,this._styleOption,this[e(314)]],this[e(376)]=new v,this[e(172)]=new y,this.info=[this._topLeftInfo,this[e(376)]],this[e(326)]=this.register(new r.v),this[e(201)]=this[e(326)][e(289)],this._onStateChange=this[e(285)](new r.v),this[e(186)]=this._onStateChange[e(289)],this[e(285)](this[e(275)][e(339)][e(236)]((()=>this[e(302)]()))),this[e(285)](this._styleOption.onUpdate((t=>this.rectLayer?.[e(239)](this[e(197)](),e(294),e(216))))),this.register(this[e(314)][e(236)]((t=>this[e(193)]?.[e(239)](t,"outlineSize",e(256),!0)))),this.register(this._blendModeOption[e(236)]((t=>this[e(193)]?.[e(239)](t,e(357),e(260))))),this.register(this._sc[e(243)][e(177)]((()=>this[e(276)]()))),this[e(285)](this[e(275)][e(279)][e(305)]((()=>this[e(276)]()))),this.register({dispose:()=>this[e(276)]()}),this[e(285)](this[e(275)][e(243)][e(242)]((t=>this[e(206)](t)))),this[e(275)][e(243)][e(384)]?.[e(255)]&&this._setupActiveTemporaryLayer(this[e(275)][e(243)].currentLayer[e(255)])}[i(206)](t){const e=i;t[e(223)]===e(229)&&(this[e(193)]=t,this[e(285)](this[e(193)][e(293)]((()=>this[e(288)]()))),this.register(this[e(193)][e(348)]((()=>{const t=e;this._onOptionsChange(),this[t(258)]()}))),this[e(285)](this[e(193)][e(359)]((()=>this[e(288)]()))),this[e(297)]=[this[e(193)][e(379)].range.left,this.rectLayer[e(379)].range[e(370)]],this._rectangleOtherPoint=[this[e(193)][e(379)][e(179)].right,this[e(193)][e(379)][e(179)][e(202)]],this[e(310)]?.[e(385)](!0),this[e(326)][e(364)]())}[i(227)](t,e){const s=i;if(this[s(217)](t,e),this[s(193)]&&!e&&[s(342),"ArrowLeft","ArrowDown",s(204)][s(248)](t[s(377)])){const e=(0,a.BN)(this[s(193)].currentState[s(179)]),i=(o.V5?t.metaKey:t[s(318)])?10:1;switch(t.key){case"ArrowUp":(0,a.Hd)(e,e[s(250)],e[s(370)]-i);break;case s(313):(0,a.Hd)(e,e.left,e[s(370)]+i);break;case s(272):(0,a.Hd)(e,e[s(250)]-i,e[s(370)]);break;case"ArrowRight":(0,a.Hd)(e,e[s(250)]+i,e[s(370)])}this[s(193)].currentState[s(179)]=e,this[s(193)][s(383)](s(346))}}keyUp(t,e){this[i(217)](t,e)}async pointerDown(t){const e=i,s=this[e(275)].imageService[e(384)];if(!s)return;const h=!(1&t[e(332)]),r=this[e(275)][e(207)][e(312)](t);if(this[e(355)]=r,this._cursorCurrent=r,!r)return;if("new"!==this[e(214)])return this[e(199)]=(0,a.BN)(this[e(193)]?.[e(379)].range),void(this[e(199)]&&(("top"===this.state||this[e(214)]===e(360)||this[e(214)]===e(373))&&(this[e(355)][1]=this[e(199)].top),("bottom"===this[e(214)]||this.state===e(182)||"bottomright"===this[e(214)])&&(this[e(355)][1]=this[e(199)][e(202)]-1),(this[e(214)]===e(250)||this[e(214)]===e(360)||this[e(214)]===e(182))&&(this[e(355)][0]=this[e(199)][e(250)]),(this[e(214)]===e(213)||this[e(214)]===e(373)||this[e(214)]===e(374))&&(this[e(355)][0]=this._cursorOriginalRectangle[e(213)]-1)));await this[e(276)](),this[e(297)]=r,this[e(371)]=r;const n=this[e(185)](this[e(297)],this[e(371)]);this[e(199)]=(0,a.BN)(n),this[e(193)]=new c.F(s,{invertColors:h},{primaryColor:this[e(275)].paletteService.primary[e(328)],secondaryColor:this[e(275)].paletteService[e(303)][e(328)],blendMode:this[e(238)][e(287)],range:n,outlineSize:this[e(314)].value,style:this[e(197)]()},this[e(275)][e(292)],this[e(275)][e(246)],this._sc.taskWorkerService),this[e(258)](),await s[e(222)](this[e(193)]),this[e(310)]?.[e(385)](!1),this[e(193)][e(176)]()}async[i(350)](t,e){const s=i;if("new"===this[s(214)]&&(e||this[s(192)]?.[0]===this[s(355)]?.[0]&&this._cursorCurrent?.[1]===this[s(355)]?.[1]))return this[s(193)]&&this[s(275)][s(243)].currentLayer?.unregisterTemporaryLayer(this[s(193)]),this[s(193)]?.[s(254)](),void this[s(288)]();if(this[s(193)]){let t;switch(this[s(214)]){case s(251):t=s(381);break;case"move":t="Move Rectangle";break;case s(360):case"topright":case"bottomleft":case s(374):case s(370):case s(250):case"right":case s(202):t=s(232)}this[s(193)].step(t)}this[s(310)]?.[s(385)](!0),this[s(220)](t,!1)}[i(320)](t){const e=i;if(!(this._rectangleOrigin&&this[e(371)]&&this[e(355)]&&this[e(199)]))return;if(!this[e(275)][e(243)][e(384)])return;const s=this._sc[e(207)][e(312)](t);if(this[e(192)]&&s[0]===this[e(192)][0]&&s[1]===this._cursorCurrent[1])return;if(this[e(192)]=s,!this[e(193)])return;const h=this[e(192)][0]-this._cursorOrigin[0],r=this._cursorCurrent[1]-this._cursorOrigin[1];switch(this[e(214)]){case"new":return this[e(371)]=s,void this[e(217)](t,!0);case"move":{const t=(0,a.BN)(this._cursorOriginalRectangle);t[e(250)]+=h,t.top+=r,t[e(213)]+=h,t[e(202)]+=r,(0,a.FJ)(t),this[e(193)][e(379)][e(179)]=t;break}default:{let s;if(!t[e(368)]||"topleft"!==this[e(214)]&&this[e(214)]!==e(373)&&"bottomleft"!==this[e(214)]&&"bottomright"!==this.state)s=(0,a.BN)(this[e(199)]),("top"===this[e(214)]||this.state===e(360)||this[e(214)]===e(373))&&(s[e(370)]+=r,s[e(202)]<=s.top&&s[e(370)]++,t.altKey&&(s[e(202)]-=r)),("bottom"===this[e(214)]||this[e(214)]===e(182)||this[e(214)]===e(374))&&(s[e(202)]+=r,s.bottom<=s[e(370)]&&s[e(202)]--,t[e(353)]&&(s[e(370)]-=r)),(this[e(214)]===e(250)||this[e(214)]===e(360)||"bottomleft"===this[e(214)])&&(s[e(250)]+=h,s[e(213)]<=s.left&&s[e(250)]++,t[e(353)]&&(s[e(213)]-=h)),(this.state===e(213)||"topright"===this[e(214)]||this[e(214)]===e(374))&&(s[e(213)]+=h,s[e(213)]<=s[e(250)]&&s[e(213)]--,t.altKey&&(s[e(250)]-=h));else{const i=(0,a.n3)(this[e(199)]);let n;switch(s=(0,a.BN)(this[e(199)]),this[e(214)]){case e(360):n=(1/i*-h-r)/2,s.left-=Math[e(210)](n*i),s[e(370)]-=Math.round(n),t[e(353)]&&(s[e(213)]+=Math[e(210)](n*i),s.bottom+=Math[e(210)](n));break;case e(373):n=(h*(1/i)-r)/2,s[e(213)]+=Math.round(n*i),s[e(370)]-=Math[e(210)](n),t.altKey&&(s.left-=Math[e(210)](n*i),s[e(202)]+=Math[e(210)](n));break;case e(182):n=(1/i*-h+r)/2,s.left-=Math[e(210)](n*i),s[e(202)]+=Math[e(210)](n),t.altKey&&(s[e(213)]+=Math[e(210)](n*i),s.top-=Math[e(210)](n));break;case e(374):n=(h*(1/i)+r)/2,s[e(213)]+=Math[e(210)](n*i),s.bottom+=Math.round(n),t[e(353)]&&(s[e(250)]-=Math[e(210)](n*i),s.top-=Math.round(n))}}this[e(193)][e(379)][e(179)]=(0,a.FJ)(s);break}}this[e(258)](),this[e(193)].triggerRequestRender()}[i(220)](t,e){const s=i;this[s(310)]&&!e&&this[s(323)](this[s(310)].getPointerState(t))}[i(217)](t,e){const s=i;if(!(e&&this.rectLayer&&this._rectangleOrigin&&this[s(371)]&&this.state===s(251)))return;let h=this[s(297)][0]-this[s(371)][0],r=this[s(297)][1]-this._rectangleOtherPoint[1];t.shiftKey&&(Math[s(203)](h)>Math[s(203)](r)?h=r*(Math.sign(h)!==Math.sign(r)?-1:1):r=h*(Math[s(356)](h)!==Math[s(356)](r)?-1:1));const n=t[s(353)]?[this[s(297)][0]+h,this[s(297)][1]+r]:this[s(297)];this[s(193)][s(379)].range=this[s(185)](n,[this[s(297)][0]-h,this[s(297)][1]-r]),this[s(258)](),this.rectLayer[s(176)]()}[i(302)](){const t=i;if(!this[t(193)])return;const e=this._sc[t(339)][t(290)][t(328)],s=this._sc[t(339)].secondary[t(328)];(0,h.WC)(this[t(193)][t(379)][t(181)],e)&&(0,h.WC)(this[t(193)][t(379)].secondaryColor,s)||(this.rectLayer[t(379)][t(181)]=e,this.rectLayer[t(379)][t(190)]=s,this[t(193)].step(t(319),!0),this[t(193)][t(176)]())}[i(197)](){const t=i;switch(this[t(266)][t(287)]){case t(325):return 1;case"Fill":return 2;case t(228):return 3}}_getStyleString(t){const e=i;switch(t){case 1:return e(325);case 2:return e(307);case 3:return"Fill and outline"}}[i(264)](){const t=i;this[t(193)]&&(this[t(238)][t(296)](this[t(193)].currentState[t(357)]),this[t(314)][t(296)](this[t(193)].currentState[t(309)]),this[t(266)][t(296)](this._getStyleString(this[t(193)][t(379)][t(294)])),(!(0,h.WC)(this[t(275)][t(339)].primary[t(328)],this[t(193)][t(379)][t(181)])||!(0,h.WC)(this[t(275)].paletteService.secondary[t(328)],this[t(193)].currentState[t(190)]))&&this._sc[t(339)][t(281)](this[t(193)][t(379)][t(181)],this[t(193)][t(379)][t(190)]))}async[i(276)](){const t=i;await(this[t(193)]?.[t(333)]()),this[t(288)]()}[i(288)](){const t=i;this[t(193)]=void 0,this[t(199)]=void 0,this[t(310)]?.[t(385)](!1),this[t(258)](),this[t(326)][t(364)]()}[i(185)](t,e){return(0,a.tH)(t[0],t[1],e[0],e[1])}_refreshInfo(){const t=i;this[t(376)][t(179)]=this.rectLayer?.[t(379)].range,this._topLeftInfo[t(179)]=this.rectLayer?.[t(379)][t(179)]}[i(323)](t){const e=i;this[e(214)]!==t&&(this[e(214)]=t,this[e(354)][e(364)]())}createDomRenderProgram(t){const e=i;return this._renderer=new(p[e(188)])(t,(()=>this.rectLayer?.currentState[e(179)]),!0,this[e(275)][e(207)],this[e(275)].imageService),this._renderer[e(385)]("new"!==this[e(214)]),[this[e(310)],new l.d(t,this[e(275)][e(243)],this[e(275)][e(207)],this[e(317)])]}serialize(){const t=i;return{state:this.state,hasRectLayer:!!this[t(193)]}}[i(304)](t){const e=i;t[e(196)]?this[e(310)]?.[e(385)](!0):this[e(288)](),this[e(323)](t.state),this[e(264)](),this[e(258)]()}}const _=g;class f{constructor(t){this[i(224)]=t}get[i(179)](){const t=i;return this._getLayer()?.[t(379)][t(179)]}}class v extends u.q{constructor(){const t=i;super(...arguments),this[t(223)]="size"}get[i(179)](){return this[i(277)]}set[i(179)](t){const e=i;this._range=t,this._onUpdate[e(364)]()}get[i(231)](){return!!this[i(277)]}[i(278)](){const t=i;if(!this._range)return"";const e=(0,a.Oq)(this[t(277)]),s=(0,a.rY)(this[t(277)]);return e+t(245)+s}getDetailedInfo(){const t=i;if(!this[t(277)])return"";const e=(0,a.Oq)(this[t(277)]),s=(0,a.rY)(this[t(277)]);return t(330)+e+t(298)+s+" pixels tall"}}class y extends u.q{constructor(){const t=i;super(...arguments),this[t(223)]=t(360)}get[i(179)](){return this._range}set range(t){this[i(277)]=t,this._onUpdate.fire()}get[i(231)](){return!!this[i(277)]}[i(278)](){const t=i;return this._range?this[t(277)][t(250)]+", "+this[t(277)][t(370)]:""}[i(252)](){const t=i;return this._range?t(301)+this._range[t(250)]+t(191)+this[t(277)].top:""}}},1674:(t,e,s)=>{s.d(e,{q:()=>i});const i="http://www.w3.org/2000/svg"}}]);