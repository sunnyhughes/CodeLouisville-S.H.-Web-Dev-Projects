"use strict";const a9_0x3093=["div","_directionalMoveZones","move","top","none","topleft","zoom","217601jxLwqJ","546229fDoqFI","12059lnfbYV","388350DMueGn","1347Hwmmzl","createElement","bottomleft","offsetY","max","removeChild","render","_elementContainer","min","_allowNewState","display","clientWidth","order","appendChild","width","new","classList","_getRange","offsetX","_directionalMoveElements","round","getPointerState","_container","push","setVisible","topright","setRange","get","bottomright","_imageService","_viewportService","left","height","29BDuElj","bottom","clientHeight","webpackChunkluna","set","_isVisible","385824iGHtdZ","right","style","103BADQrG","devicePixelRatio","537572HewbHU"],a9_0x247b=function(t,e){return a9_0x3093[t-=145]},a9_0x2a6f55=a9_0x247b;!function(t,e){const o=a9_0x247b;for(;;)try{if(276982===-parseInt(o(148))+parseInt(o(157))+-parseInt(o(159))+-parseInt(o(160))*-parseInt(o(146))+parseInt(o(193))*parseInt(o(158))+parseInt(o(199))+-parseInt(o(156)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a9_0x3093),(self[a9_0x2a6f55(196)]=self.webpackChunkluna||[])[a9_0x2a6f55(183)]([[504],{504:(t,e,o)=>{const s=a9_0x2a6f55;o.r(e),o.d(e,{MoveImageRangeRenderer:()=>h});var i=o(5120),n=o(1003);class h extends i.JT{constructor(t,e,o,s,i){const h=a9_0x247b;super(),this._container=t,this._getRange=e,this[h(169)]=o,this[h(190)]=s,this[h(189)]=i,this[h(172)]=2,this._directionalMoveElements=new Map,this._directionalMoveZones=new Map,this[h(198)]=!0,this[h(167)]=document.createElement("div");const a=["topleft",h(185),h(162),h(188),"top",h(194),h(191),h(200)];for(const t of a){const e=document[h(161)](h(149));e[h(176)].add("move-handle",t),this[h(167)].appendChild(e),this[h(179)][h(197)](t,e),this[h(150)][h(197)](t,(0,n.Pq)())}this._container[h(173)](this[h(167)]),this.register({dispose:()=>{const t=h;this[t(182)][t(165)](this[t(167)])}})}[s(184)](t){const e=s;t!==this[e(198)]&&(this._elementContainer[e(145)][e(170)]=t?"":e(153),this[e(198)]=t)}[s(186)](t){}[s(166)](){const t=s,e=this._getRange();if(!e)return;const o=this._imageService.currentLayer;if(!o)return;const i=this[t(190)],n=Math[t(180)](this._container[t(171)]/2)-o[t(174)]/2*i.zoom,h=Math[t(180)](this[t(182)][t(195)]/2)-o[t(192)]/2*i[t(155)],a=n+(i.x+e[t(191)])*i.zoom,r=h+(i.y+e[t(152)])*i[t(155)],c=n+(i.x+e[t(200)])*i[t(155)],p=h+(i.y+e.bottom)*i.zoom,l=Math[t(180)]((a+c)/2),f=Math[t(180)]((r+p)/2),m=10*window[t(147)],x={left:Math.min(a+m,Math[t(164)](a,l-m)),top:Math[t(168)](r+m,Math.max(r,f-m)),right:Math[t(164)](c-m,Math[t(168)](c,l+m)),bottom:Math[t(164)](p-m,Math[t(168)](p,f+m))},g={left:a-m,top:r-m,right:c+m,bottom:p+m},d=this[t(150)][t(187)](t(154));d.left=g[t(191)],d[t(200)]=x[t(191)],d[t(152)]=g.top,d[t(194)]=x.top;const _=this._directionalMoveElements[t(187)](t(154));_[t(145)][t(191)]=a+"px",_[t(145)].top=r+"px";const b=this[t(150)][t(187)](t(185));b[t(191)]=x[t(200)],b[t(200)]=g.right,b[t(152)]=g[t(152)],b[t(194)]=x[t(152)];const u=this[t(179)][t(187)](t(185));u[t(145)][t(191)]=c+"px",u[t(145)][t(152)]=r+"px";const M=this[t(150)][t(187)](t(162));M[t(191)]=g[t(191)],M.right=x[t(191)],M[t(152)]=x[t(194)],M[t(194)]=g[t(194)];const v=this[t(179)][t(187)](t(162));v[t(145)][t(191)]=a+"px",v[t(145)][t(152)]=p+"px";const w=this[t(150)][t(187)](t(188));w.left=x[t(200)],w[t(200)]=g.right,w.top=x.bottom,w.bottom=g[t(194)];const I=this[t(179)].get(t(188));I[t(145)][t(191)]=c+"px",I[t(145)][t(152)]=p+"px";const y=this[t(150)][t(187)](t(152));y.left=x[t(191)],y[t(200)]=x[t(200)],y.top=g[t(152)],y[t(194)]=x[t(152)];const R=this[t(179)][t(187)]("top");R[t(145)][t(191)]=l+"px",R.style[t(152)]=r+"px";const C=this[t(150)][t(187)]("bottom");C[t(191)]=x.left,C.right=x.right,C[t(152)]=x[t(194)],C.bottom=g[t(194)];const E=this[t(179)][t(187)](t(194));E[t(145)].left=l+"px",E[t(145)][t(152)]=p+"px";const k=this[t(150)][t(187)](t(191));k[t(191)]=g[t(191)],k.right=x[t(191)],k[t(152)]=x[t(152)],k[t(194)]=x[t(194)];const z=this[t(179)][t(187)](t(191));z.style[t(191)]=a+"px",z[t(145)][t(152)]=f+"px";const H=this[t(150)][t(187)]("right");H.left=x.right,H[t(200)]=g[t(200)],H.top=x[t(152)],H.bottom=x.bottom;const S=this[t(179)][t(187)]("right");S[t(145)][t(191)]=c+"px",S.style.top=f+"px"}[s(181)](t){const e=s;if(!this[e(177)]())return this[e(169)]?"new":"move";for(const[o,s]of this[e(150)])if((0,n.RB)(s,t[e(178)],t[e(163)]))return o;const o=this[e(150)][e(187)]("topleft"),i=this[e(150)][e(187)](e(188)),h={left:o.left,top:o[e(152)],right:i[e(200)],bottom:i[e(194)]};return(0,n.RB)(h,t[e(178)],t.offsetY)?"move":this[e(169)]?e(175):e(151)}}}}]);