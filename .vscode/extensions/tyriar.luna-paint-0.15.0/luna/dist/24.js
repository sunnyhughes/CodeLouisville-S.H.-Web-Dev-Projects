"use strict";(self.webpackChunkluna=self.webpackChunkluna||[]).push([[24],{62:(e,t,n)=>{n.r(t),n.d(t,{parseChunk:()=>h,Palette:()=>s});var a=n(6);function h(e,t,n){(0,a.assertChunkSinglular)(e,n),(0,a.assertChunkPrecedes)(e,n,"bKGD"),(0,a.assertChunkPrecedes)(e,n,"hIST"),(0,a.assertChunkPrecedes)(e,n,"tRNS"),(0,a.assertChunkPrecedes)(e,n,"IDAT");let h=n.offset+4;if(0===t.colorType||4===t.colorType)throw(0,a.createChunkDecodeWarning)(n,`Color type "${t.colorType}" cannot have a palette`,h);if(h+=4,0===n.dataLength)throw(0,a.createChunkDecodeWarning)(n,"Cannot have 0 entries",h);if(n.dataLength%3!=0)throw(0,a.createChunkDecodeWarning)(n,`Chunk length must be divisible by 3 (actual "${n.dataLength}")`,h);return n.dataLength/3>256&&(0,a.handleWarning)(e,(0,a.createChunkDecodeWarning)(n,`Too many entries (${n.dataLength/3} > 256)`,h)),n.dataLength/3>Math.pow(2,t.bitDepth)&&(0,a.handleWarning)(e,(0,a.createChunkDecodeWarning)(n,`Too many entries for bit depth (${n.dataLength/3} > 2^${t.bitDepth})`,h)),new s(e.view,n.offset+4+4,n.dataLength)}class s{constructor(e,t,n){this._view=e,this._paletteOffset=t,this._length=n}get size(){return this._length/3}getRgb(e){return this._checkIndex(e),new Uint8Array(this._view.buffer.slice(this._view.byteOffset+this._paletteOffset+3*e,this._view.byteOffset+this._paletteOffset+3*e+3))}setRgba(e,t,n){this._checkIndex(n);const a=this._paletteOffset+3*n;e[t]=this._view.getUint8(a),e[t+1]=this._view.getUint8(a+1),e[t+2]=this._view.getUint8(a+2),e[t+3]=255}_checkIndex(e){if(e<0||3*e>this._length-3)throw new Error(`Palette does not contain color index "${e}"`)}}}}]);