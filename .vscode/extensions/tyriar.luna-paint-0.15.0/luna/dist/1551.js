"use strict";const a7_0xe47f=["assertAtEnd","charCodeAt","36953WjjyXJ","min","78150ARYDle","type","tEXt","BYTES_PER_ELEMENT","useTransparencyChunk","width","encodeChunk","4WSZPkp","size","keyword","316970ZHimpo","Software","byteLength","writeUint32","height","length","data","IEND","3jMorzO","floor","2WhvuUa","Cannot encode a chunk type of length ","buffer","options","interlaceMethod","add","122295bSXoDt","Writing finished before expected length of stream","byteOffset","view",'Could not get encoder for chunk type "',"151540acvdnW","writeArray","info","webpackChunkluna","push","filterPattern","values","150167HGDoKG","3eBWWua","abs","palette","Cannot encode indexed file from 16-bit image","writeUint16","tRNS","bitDepth","Cannot encode indexed file without palette","Only interlace method 0 is supported currently","colorType","set","259277RBdGdq","get","array","4fxRfeY","then","reduce","offset","writeUint8","IDAT","bind","Invalid dimensions ","ancillaryChunks"],a7_0x41ec=function(t,e){return a7_0xe47f[t-=136]},a7_0x5a229f=a7_0x41ec;!function(t,e){const n=a7_0x41ec;for(;;)try{if(289987===parseInt(n(172))*-parseInt(n(161))+parseInt(n(167))+-parseInt(n(180))*parseInt(n(179))+parseInt(n(148))*parseInt(n(139))+parseInt(n(141))*parseInt(n(194))+-parseInt(n(151))+-parseInt(n(191))*-parseInt(n(159)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a7_0xe47f),(self[a7_0x5a229f(175)]=self.webpackChunkluna||[])[a7_0x5a229f(176)]([[1551],{8763:(t,e,n)=>{const r=a7_0x5a229f;n.d(e,{$:()=>o});class o{constructor(t){const e=a7_0x41ec;this.offset=0,this[e(193)]=new Uint8Array(t),this.view=new DataView(this[e(193)].buffer,this[e(193)][e(169)],this[e(193)][e(153)])}[r(198)](t){const e=r;this.view.setUint8(this[e(197)],t),this[e(197)]+=1}[r(184)](t){const e=r;this[e(170)].setUint16(this.offset,t),this[e(197)]+=2}[r(154)](t){this[r(170)].setUint32(this.offset,t),this.offset+=4}[r(173)](t){const e=r;this.array.set(t,this[e(193)][e(169)]+this[e(197)]),this[e(197)]+=t[e(156)]}assertAtEnd(){const t=r;if(this[t(197)]!==this.array[t(156)])throw new Error(t(168))}}},1551:(t,e,n)=>{n.r(e),n.d(e,{encodePng:()=>u});var r=n(8763),o=n(7885),a=n(5857),i=n(750);function s(t,e,n,r){const o=a7_0x41ec,a=[];e[o(157)][o(144)];for(const i of[0,1,2,3,4]){let s=0;const c=f(t),h=new Uint8Array(e.data[o(163)],e[o(157)][o(169)],e[o(157)][o(153)]);let u=0,w=0;for(let t=n;t<n+4*e[o(146)];t+=4)for(u of c)for(w=e[o(157)][o(144)]-1;w>=0;w--)s+=r[i](h,(t+u)*e[o(157)][o(144)]+w,t===n);a[i]=s}let i=0,s=a[0];for(const t of[1,2,3,4])a[t]<s&&(i=t,s=a[t]);return i}function c(t,e,n){let r=0,o=0,i=0;switch(n){case 0:return(t,e)=>t[e];case 1:return(e,n,o)=>(r=o?-1:n-t,(e[n]-(r<0?0:e[n-t])+256)%256);case 2:return(t,n)=>(o=n-e,(t[n]-(o<0?0:t[o])+256)%256);case 3:return(n,a,i)=>{const s=a7_0x41ec;return r=i?-1:a-t,o=a-e,(n[a]-Math[s(160)](((r<0?0:n[r])+(o<0?0:n[o]))/2)+256)%256};case 4:return(n,s,c)=>(r=c?-1:s-t,o=s-e,i=c?-1:s-t-e,(n[s]-(0,a.a)(r<0?0:n[r],o<0?0:n[o],i<0?0:n[i])+256)%256)}}function f(t){switch(t){case 0:return[0];case 2:return[0,1,2];case 4:return[0,3];case 6:return[0,1,2,3]}}var h=n(473);async function u(t,e={}){const a=a7_0x41ec;if(t.data[a(156)]!==t[a(146)]*t[a(155)]*4)throw new h.v8("Provided image data length ("+t[a(157)][a(156)]+") is not expected length ("+t.width*t.height*4+")",Math[a(140)](t.data[a(156)],t[a(146)]*t.height*4)-1);const u=[];u.push(function(){const t=a7_0x41ec,e=new r.$(8);return e[t(198)](137),e[t(198)](80),e[t(198)](78),e.writeUint8(71),e[t(198)](13),e[t(198)](10),e[t(198)](26),e.writeUint8(10),e[t(137)](),e[t(193)]}());const w=function(t,e={}){const n=a7_0x41ec,r=[],o=[],a=t.width*t[n(155)]*4,i=new Set,s=new Set;let c=0;if(2===t[n(157)][n(144)])for(let e=0;e<a;e+=4)c=t[n(157)][e]<<48|t.data[e+1]<<32|t[n(157)][e+2]<<16|t.data[e+3],t.data[e+3]<65535&&s[n(166)](c),i[n(166)](c);else for(let e=0;e<a;e+=4)c=t[n(157)][e]<<24|t[n(157)][e+1]<<16|t[n(157)][e+2]<<8|t[n(157)][e+3],t.data[e+3]<255&&s.add(c),i[n(166)](c);let f,u=e[n(189)];switch(void 0===u&&(u=i[n(149)]>256||2===t[n(157)].BYTES_PER_ELEMENT?2:3),u){case 0:case 2:f=1===s[n(149)],!f&&s[n(149)]>1&&(u=2===u?6:4,2===e.colorType&&(0,h.pP)({options:e,warnings:r},new h.E("Cannot encode image as color type Truecolor as it contains "+s[n(149)]+" transparent colors",0)));break;case 3:f=s.size>0;break;default:f=!1}return void 0===e[n(189)]&&o[n(176)]("Using color type "+u),{colorType:u,bitDepth:2===t[n(157)][n(144)]?16:8,interlaceMethod:0,colorSet:i,transparentColorCount:s[n(149)],firstTransparentColor:s.size>0?s[n(178)]().next().value:void 0,useTransparencyChunk:f,options:e,warnings:r,info:o}}(t,e);if(u.push(function(t,e){const n=a7_0x41ec;if(e.width<=0||e[n(155)]<=0)throw new Error(n(201)+e[n(146)]+"x"+e[n(155)]);return(0,i.pU)("IHDR",13,(r=>{const o=n;r.writeUint32(e[o(146)]),r[o(154)](e[o(155)]),r[o(198)](t[o(186)]),r[o(198)](t[o(189)]),r[o(198)](0),r[o(198)](0),r[o(198)](t.interlaceMethod)}))}(w,t)),3===w.colorType){const e=(await n.e(6150)[a(195)](n.bind(n,6150)))[a(147)](w,t);w[a(182)]=e[a(182)],u[a(176)](e.chunkData)}if(w[a(145)]&&u[a(176)]((await function(t){const e=a7_0x41ec;if("tRNS"===t)return n.e(4232)[e(195)](n[e(200)](n,4232));throw new Error(e(171)+t+'"')}(a(185)))[a(147)](w,t)),u.push(function(t,e){const n=a7_0x41ec,a=function(t,e){const n=a7_0x41ec;if(t[n(186)]<8)throw new Error("Only bit depth 8 and 16 is supported currently");if(2===e[n(157)][n(144)]&&8===t[n(186)])throw new Error("16 to 8 bit conversion isn't supported yet");if(0!==t[n(165)])throw new Error(n(188));let r;switch(t[n(189)]){case 0:case 3:r=1;break;case 2:r=3;break;case 4:r=2;break;case 6:r=4}return(1+r*(16===t[n(186)]?2:1)*e[n(146)])*e[n(155)]}(t,e),h=new r.$(a);!function(t,e,n){const r=a7_0x41ec;let o,a=0,i=0,h=0;if(3===t[r(189)]){if(!t[r(182)])throw new Error(r(187));if(2===e[r(157)].BYTES_PER_ELEMENT)throw new Error(r(183));for(;h<e.height;h++)for(n[r(198)](0),i=0;i<e.width;i++)n[r(198)](t[r(182)][r(192)](e[r(157)][a]<<24|e[r(157)][a+1]<<16|e[r(157)][a+2]<<8|e[r(157)][a+3])),a+=4;return}if(t[r(164)][r(177)]){if(0===t[r(164)][r(177)].length)throw new Error("Filter pattern with 0 entries");o=t[r(164)][r(177)]}const u=4*e[r(157)].BYTES_PER_ELEMENT,w=[];for(const t of[0,1,2,3,4])w[t]=c(u,u*e[r(146)],t);const d=f(t[r(189)]);for(;h<e.height;h++){const c=o?o[h%o.length]:s(t[r(189)],e,h*e.width*4,w),f=new Uint8Array(e.data[r(163)],e.data[r(169)],e[r(157)][r(153)]);n[r(198)](c);let u=0,l=0;for(i=0;i<e[r(146)];i++){for(l of d)for(u=e[r(157)][r(144)]-1;u>=0;u--)n.writeUint8(w[c](f,(a+l)*e[r(157)][r(144)]+u,0===i));a+=4}}}(t,e,h);const u=o.Wt(h[n(193)]);return(0,i.FA)(n(199),u)}(w,t)),void 0===(null==e?void 0:e[a(136)]))u[a(176)]((await n.e(3438)[a(195)](n[a(200)](n,3438)))[a(147)](w,t,a(152),"@lunapaint/png-codec"));else for(const r of e[a(136)]){if(r[a(142)]!==a(143))throw new Error('Cannot encode chunk type "'+r[a(142)]+'"');u[a(176)]((await n.e(3438).then(n[a(200)](n,3438)))[a(147)](w,t,r[a(150)],r.text))}u[a(176)](function(){const t=a7_0x41ec;return(0,i.FA)(t(158),new Uint8Array(0))}());const d=u[a(196)](((t,e)=>t+e[a(156)]),0),l=new Uint8Array(d);let p=0;for(const t of u)l[a(190)](t,p),p+=t[a(156)];return{data:l,warnings:w.warnings,info:w[a(174)]}}},750:(t,e,n)=>{n.d(e,{FA:()=>i,pU:()=>s});var r=n(8763),o=n(7868);function a(t,e){const n=a7_0x41ec;t.writeUint8(e[n(138)](0)),t[n(198)](e.charCodeAt(1)),t.writeUint8(e.charCodeAt(2)),t[n(198)](e[n(138)](3))}function i(t,e){const n=a7_0x41ec,i=new r.$(8+e.length+4);if(i[n(154)](e[n(156)]),4!==t[n(156)])throw new Error(n(162)+t[n(156)]);return a(i,t),i[n(173)](e),i[n(154)]((0,o.k)(i[n(170)],4,4+e.length)),i.assertAtEnd(),i[n(193)]}function s(t,e,n){const i=a7_0x41ec,s=new r.$(8+e+4);if(s[i(154)](e),4!==t[i(156)])throw new Error(i(162)+t[i(156)]);return a(s,t),n(s),s[i(154)]((0,o.k)(s[i(170)],4,4+e)),s[i(137)](),s[i(193)]}},7868:(t,e,n)=>{let r;function o(t,e,n){return(4294967295^function(t,e,n,o){const a=function(){if(r)return r;r=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;r[t]=e>>>0}return r}();let i=t;for(let t=0;t<o;t++)i=a[255&(i^e.getUint8(n+t))]^i>>>8;return i}(4294967295,t,e,n))>>>0}n.d(e,{k:()=>o})},5857:(t,e,n)=>{function r(t,e,n){const r=a7_0x41ec,o=t+e-n,a=Math[r(181)](o-t),i=Math.abs(o-e),s=Math[r(181)](o-n);return a<=i&&a<=s?t:i<=s?e:n}n.d(e,{a:()=>r})}}]);