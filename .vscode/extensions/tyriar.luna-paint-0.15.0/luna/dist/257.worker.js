"use strict";const a8_0x4927=["targetImage","webpackChunkluna","top","bottom","floor","left","round","pow","toFixed","length","push","selection","53158dVtodZ","sqrt","width","ceil","4889JwkQMx","number","slice","buffer","2VZrxlp"," x ","color","74216HgFkFd","right","tolerance","69506eOmGqP","24GkqBNa","min","subarray","set",'" dimensions differ',"Unrecognized array type","replace",'" and "',"293vuOEUr","349JLcEQN",'Range "',"update",")->(",'Images "'," must be contained within ","1GdibcF","SharedArrayBuffer","129148WPlVls","max","height","abs","1OfejeH","data","isInteger","245177tCvkwe"],a8_0x26a3=function(t,n){return a8_0x4927[t-=360]},a8_0x530b49=a8_0x26a3;!function(t,n){const r=a8_0x26a3;for(;;)try{if(194920===parseInt(r(366))+-parseInt(r(370))*parseInt(r(381))+parseInt(r(389))*parseInt(r(390))+-parseInt(r(396))*-parseInt(r(377))+parseInt(r(374))*parseInt(r(398))+parseInt(r(405))*-parseInt(r(402))+parseInt(r(380)))break;t.push(t.shift())}catch(n){t.push(t.shift())}}(a8_0x4927),(self[a8_0x530b49(407)]=self[a8_0x530b49(407)]||[])[a8_0x530b49(364)]([[257],{257:(t,n,r)=>{r.r(n),r.d(n,{run:()=>f});var a=r(517),e=r(166),o=r(3),i=r(742);const f=async(t,n,r)=>{const f=a8_0x26a3;(0,i.ap)(r,"targetImage");const s=r[f(406)].data,h=r[f(406)][f(368)],u=r[f(406)][f(400)],l=r[f(376)],d=4*(r.y*h+r.x),M=s[f(383)](d,d+4)[f(372)](),x=r.selection||(0,o.DI)(h,u),g=r[f(379)]*r[f(379)]*4,p=(0,e.Qf)(r[f(406)],x);if(n[f(392)](.1),r[f(365)]){const t=Math.ceil(x.bottom+(0,o.rY)(x)*(2/8));let e=0;for(let o=x[f(408)];o<x.bottom;o++){for(let t=x[f(411)];t<x[f(378)];t++)e=4*(o*h+t),c(s,e,M,g)&&(0,a.B)(r.blendMode,s,e,l,0);n[f(392)](+((o-x.top)/t)[f(362)](2)+.1)}}else{const t=Math[f(369)](1.25*s[f(363)]);for(let e=0;e<s[f(363)];e+=4)c(s,e,M,g)&&(0,a.B)(r.blendMode,s,e,l,0),e%5e3==0&&n[f(392)](+(e/t)[f(362)](2)+.1)}return n[f(392)](.9),{undoData:p,redoData:(0,e.Qf)(r.targetImage,x),range:x}},s=new Int32Array(5);function c(t,n,r,a){return a>0?(s[0]=r[0]-t[n],s[1]=r[1]-t[n+1],s[2]=r[2]-t[n+2],s[3]=r[3]-t[n+3],s[4]=(1+s[0]*s[0])*r[3]/256+(1+s[1]*s[1])*r[3]/256+(1+s[2]*s[2])*r[3]/256+s[3]*s[3],s[4]<=a):t[n]===r[0]&&t[n+1]===r[1]&&t[n+2]===r[2]&&t[n+3]===r[3]}},742:(t,n,r)=>{r.d(n,{ap:()=>e,TO:()=>o,zg:()=>i});var a=r(3);function e(t,n){const r=a8_0x26a3,a=t[n];if(a.width<1||a[r(400)]<1)throw new Error('Invalid dimensions for image "'+n+'": '+a[r(368)]+r(375)+a.height)}function o(t,n,r){const a=a8_0x26a3,e=t[n],o=t[r];if(e[a(368)]===o[a(368)]&&e[a(400)]===o[a(400)])throw new Error(a(394)+n+a(388)+r+'" dimensions are equal')}function i(t,n,r){const e=a8_0x26a3,o=t[n];if(!(0,a.ur)(r,o))throw new Error(e(391)+n+'" '+(0,a.PW)(o)+e(395)+(0,a.PW)(r))}},371:(t,n,r)=>{const a=a8_0x530b49;function e(t,n=2*t[a(363)]){const r=a;let e;if(t instanceof Float32Array)e=new Float32Array(n);else if(t instanceof Uint8Array)e=new Uint8Array(n);else if(t instanceof Uint16Array)e=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(r(386));e=new Uint32Array(n)}return e.set(t),e}function o(t,n,r=!1){const e=a;return n<Math[e(361)](2,8)?r?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math[e(361)](2,16)?r?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):r?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,r,a){t[n]=r[a],t[n+1]=r[a+1],t[n+2]=r[a+2],t[n+3]=r[a+3]}r.d(n,{Rs:()=>e,X$:()=>o,Yr:()=>i})},517:(t,n,r)=>{const a=a8_0x530b49;r.d(n,{B:()=>s});var e=r(371);const o=new Float32Array(6);let i;const f={normal:(t,n)=>n,darken:(t,n)=>Math[a(382)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[a(399)](t+n-1,0),lighten:(t,n)=>Math[a(399)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[a(382)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[a(367)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[a(401)](t-n),exclusion:(t,n)=>t+n-2*t*n};function s(t,n,r,s,h,u=n,l=r){const d=a;if(t!==d(387)){if(o[0]=s[h+3]/255,0===o[0])return n[r]=u[l],n[r+1]=u[l+1],n[r+2]=u[l+2],void(n[r+3]=u[l+3]);if(o[1]=u[l+3]/255,0===o[1])return n[r]=s[h],n[r+1]=s[h+1],n[r+2]=s[h+2],void(n[r+3]=s[h+3]);i=f[t],o[3]=i(u[l]/255,s[h]/255),o[4]=i(u[l+1]/255,s[h+1]/255),o[5]=i(u[l+2]/255,s[h+2]/255),o[2]=o[0]+o[1]*(1-o[0]),n[r]=Math[d(360)](c(u[l]/255,o[1],s[h]/255,o[0],o[3])/o[2]*255),n[r+1]=Math.round(c(u[l+1]/255,o[1],s[h+1]/255,o[0],o[4])/o[2]*255),n[r+2]=Math[d(360)](c(u[l+2]/255,o[1],s[h+2]/255,o[0],o[5])/o[2]*255),n[r+3]=Math[d(360)](255*o[2])}else(0,e.Yr)(n,r,s,h)}function c(t,n,r,a,e){return(n-n*a)*t+(a-n*a)*r+n*a*e}},166:(t,n,r)=>{r.d(n,{Qf:()=>e,M_:()=>o});var a=r(3);function e(t,n){const r=a8_0x26a3,e=(0,a.Oq)(n),o=(0,a.rY)(n),i=new Uint8Array(e*o*4);let f=0,s=0;for(let a=0;a<o;a++)s=a+n[r(408)],f=4*(s*t[r(368)]+n[r(411)]),i[r(384)](t[r(403)][r(383)](f,f+4*e),a*e*4);return i}function o(t,n,r,a,e=!0){const o=a8_0x26a3;if(!e&&n<a&&t<r)return{left:Math[o(360)]((r-t)/2),top:Math[o(360)]((a-n)/2),width:t,height:n};const i={left:0,top:0,width:r,height:a};if(n>t){const a=t/n;i[o(411)]=Math[o(360)](r*(.5-a/2)),i[o(368)]=Math.round(r*a)}else if(t>n){const r=n/t;i[o(408)]=Math[o(360)](a*(.5-r/2)),i[o(400)]=Math[o(360)](a*r)}return i}},3:(t,n,r)=>{function a(t){const n=a8_0x26a3;if(t)return{left:t[n(411)],top:t.top,right:t.right,bottom:t[n(409)]}}function e(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function o(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,r,a){const e=a8_0x26a3,o=function(t){const n=a8_0x26a3;if(t.left>t.right){const n=t.right;t.right=t.left,t.left=n}if(t.top>t[n(409)]){const r=t.bottom;t[n(409)]=t[n(408)],t[n(408)]=r}if(t[n(378)]<t[n(411)]){const r=t[n(411)];t[n(411)]=t.right,t.right=r}if(t[n(409)]<t.top){const r=t[n(408)];t[n(408)]=t[n(409)],t[n(409)]=r}return t}({left:t,top:n,right:r,bottom:a});return o[e(378)]++,o[e(409)]++,o}function f(t,n){const r=a8_0x26a3;return t[r(411)]=Math[r(382)](Math[r(399)](t[r(411)],n.left),n[r(378)]),t[r(408)]=Math[r(382)](Math[r(399)](t[r(408)],n[r(408)]),n[r(409)]),t.right=Math[r(399)](Math[r(382)](t[r(378)],n[r(378)]),n.left),t[r(409)]=Math.max(Math[r(382)](t[r(409)],n.bottom),n[r(408)]),t}function s(t){const n=a8_0x26a3;return t[n(411)]=Math[n(410)](t[n(411)]),t.right=Math.ceil(t[n(378)]),t[n(408)]=Math[n(410)](t[n(408)]),t[n(409)]=Math[n(369)](t[n(409)]),t}function c(t,n,r){const a=a8_0x26a3;if(function(t){const n=a8_0x26a3;return t.left===t.right||t[n(408)]===t[n(409)]}(t))return t.left=n,t[a(378)]=n+1,t.top=r,void(t[a(409)]=r+1);t[a(411)]=Math[a(382)](t.left,n),t.top=Math.min(t[a(408)],r),t.right=Math.max(t[a(378)],n+1),t[a(409)]=Math[a(399)](t[a(409)],r+1)}function h(t,n,r){const a=a8_0x26a3;return n>=t[a(411)]&&n<t[a(378)]&&r>=t[a(408)]&&r<t[a(409)]}function u(t,n){const r=a8_0x26a3;return n.left>=t[r(411)]&&n[r(378)]<=t[r(378)]&&n[r(408)]>=t[r(408)]&&n[r(409)]<=t[r(409)]}function l(t){const n=a8_0x26a3;return"("+t.left+","+t[n(408)]+n(393)+t.right+","+t[n(409)]+")"}function d(t){const n=a8_0x26a3;return t[n(378)]-t[n(411)]}function M(t){return t[a8_0x26a3(409)]-t.top}r.d(n,{BN:()=>a,Re:()=>e,DI:()=>o,tH:()=>i,l$:()=>f,kq:()=>s,Hv:()=>c,RB:()=>h,ur:()=>u,PW:()=>l,Oq:()=>d,rY:()=>M})}}]);