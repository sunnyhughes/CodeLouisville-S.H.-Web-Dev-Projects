"use strict";const a55_0x3882=["356326gYekzw","update","1236OxuVSx","push",'Images "','" and "',"438241zUJHTQ",'" dimensions are equal',"blendMode","selection","width","29446CbeRiT","subarray","max","targetImage","webpackChunkluna","1324470hOkIPE","tolerance","971ZquwBT",'" dimensions differ',"5142937TFLpcf","1401ItURHy","data",'": ','Invalid dimensions for image "',"height","751QqnurH"],a55_0x2d5e=function(n,t){return a55_0x3882[n-=353]},a55_0xa07f31=a55_0x2d5e;!function(n,t){const e=a55_0x2d5e;for(;;)try{if(705847===-parseInt(e(361))*parseInt(e(358))-parseInt(e(378))-parseInt(e(367))-parseInt(e(356))-parseInt(e(373))+parseInt(e(369))*-parseInt(e(366))+parseInt(e(360)))break;n.push(n.shift())}catch(t){n.push(n.shift())}}(a55_0x3882),(self[a55_0xa07f31(355)]=self[a55_0xa07f31(355)]||[])[a55_0xa07f31(370)]([[5584],{5584:(n,t,e)=>{e.r(t),e.d(t,{run:()=>i});var a=e(4371),r=e(1003),o=e(7742),s=e(7517);const i=async(n,t,e)=>{const i=a55_0x2d5e;(0,o.ap)(e,i(354));const u=e[i(354)][i(362)],d=e.targetImage[i(377)],h=e[i(354)][i(365)],l=e.x,x=e.y,p=4*(x*d+l),w=u[i(379)](p,p+4),I=e[i(357)]*e[i(357)]*4,g=(0,a.X$)(d*h*2,Math[i(353)](d,h));let _=0;g[_++]=l,g[_++]=x;const R=new Uint8Array(d*h);R[x*d+l]=1;const B=(0,a.X$)(d*h,d*h*4,!0);let m=0;const y=(0,r.Re)(l,x),b=(0,r.DI)(d,h),k=e[i(376)]||b;let v=0,T=0,A=0,C=0;for(;_>0;)T=g[--_],v=g[--_],A=T*d+v,C=4*A,E=u,H=C,U=w,((q=I)>0?(c[0]=U[0]-E[H],c[1]=U[1]-E[H+1],c[2]=U[2]-E[H+2],c[3]=U[3]-E[H+3],c[4]=(1+c[0]*c[0])*U[3]/256+(1+c[1]*c[1])*U[3]/256+(1+c[2]*c[2])*U[3]/256+c[3]*c[3],c[4]<=q):E[H]===U[0]&&E[H+1]===U[1]&&E[H+2]===U[2]&&E[H+3]===U[3])&&(B[m++]=C,(0,r.Hv)(y,v,T),(0,r.RB)(b,v+1,T)&&0===R[A+1]&&((0,r.RB)(k,v+1,T)&&(g[_++]=v+1,g[_++]=T),R[A+1]=1),(0,r.RB)(b,v-1,T)&&0===R[A-1]&&((0,r.RB)(k,v-1,T)&&(g[_++]=v-1,g[_++]=T),R[A-1]=1),(0,r.RB)(b,v,T+1)&&0===R[A+d]&&((0,r.RB)(k,v,T+1)&&(g[_++]=v,g[_++]=T+1),R[A+d]=1),(0,r.RB)(b,v,T-1)&&0===R[A-d]&&((0,r.RB)(k,v,T-1)&&(g[_++]=v,g[_++]=T-1),R[A-d]=1));var E,H,U,q;const z=B[i(379)](0,m);t[i(368)](.25);const D=f(u,z);t[i(368)](.5),function(n,t,e,a){let r=0;for(let o=0;o<t.length;o++)r=t[o],(0,s.B)(a,n,r,e,0)}(u,z,e.color,e[i(375)]),t[i(368)](.75);const O=f(u,z);return t[i(368)](1),{indexList:z,undoColorData:D,redoColorData:O,range:y}},c=new Int32Array(5);function f(n,t){const e=new Uint8Array(new SharedArrayBuffer(4*t.length));for(let a=0;a<t.length;a++)e[4*a]=n[t[a]],e[4*a+1]=n[t[a]+1],e[4*a+2]=n[t[a]+2],e[4*a+3]=n[t[a]+3];return e}},7742:(n,t,e)=>{e.d(t,{ap:()=>r,TO:()=>o,zg:()=>s});var a=e(1003);function r(n,t){const e=a55_0x2d5e,a=n[t];if(a.width<1||a[e(365)]<1)throw new Error(e(364)+t+e(363)+a[e(377)]+" x "+a[e(365)])}function o(n,t,e){const a=a55_0x2d5e,r=n[t],o=n[e];if(r[a(377)]===o.width&&r[a(365)]===o[a(365)])throw new Error(a(371)+t+a(372)+e+a(374))}function s(n,t,e){const r=n[t];if(!(0,a.ur)(e,r))throw new Error('Range "'+t+'" '+(0,a.PW)(r)+" must be contained within "+(0,a.PW)(e))}}}]);