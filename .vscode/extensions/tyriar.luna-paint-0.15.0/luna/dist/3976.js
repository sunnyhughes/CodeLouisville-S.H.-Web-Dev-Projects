"use strict";const a11_0x2994=["pointerDownMove","height","right","_originX","getCoordsFromEvent","altKey","taskService","webpackChunkluna","executeOnAllLayers","2179xLYxVK","left","_targetY","selectionService","isSelectionTool","bottom","layer/cropToSelection","467508Dlslvz","Deselect","_sc","Crop","crop","199PsBJGW","328870wBBCVn","imageService","abs","_originY","119109mUosjV","top","keyDown","sign","viewportService","pointerDown","shiftKey","historyService","348526apUvuf","_updateSelection","27nAnxvn","width","3CHigPU","16ateuvT","Rectangle Selection","range","pointerUp","push","14527xkAOwg","commit","createCompositeEntry","_targetX","keyUp","19335OaknlW","1eJdTrr"],a11_0x5a64=function(t,i){return a11_0x2994[t-=258]},a11_0xae6e71=a11_0x5a64;!function(t,i){const e=a11_0x5a64;for(;;)try{if(260227==parseInt(e(308))*parseInt(e(296))+-parseInt(e(272))*parseInt(e(280))+parseInt(e(275))*parseInt(e(285))+parseInt(e(262))*parseInt(e(274))-parseInt(e(303))+-parseInt(e(270))*-parseInt(e(286))-parseInt(e(258)))break;t.push(t.shift())}catch(i){t.push(t.shift())}}(a11_0x2994),(self.webpackChunkluna=self[a11_0xae6e71(294)]||[])[a11_0xae6e71(279)]([[3976],{3976:(t,i,e)=>{const s=a11_0xae6e71;e.r(i),e.d(i,{default:()=>r});var o=e(5120),n=e(2939),a=e(1003);class h extends o.JT{constructor(t){const i=a11_0x5a64;super(),this[i(305)]=t,this.id=i(307),this[i(300)]=!0,this._originX=0,this[i(261)]=0}[s(264)](t,i){this[s(271)](t,i)}[s(284)](t,i){this._updateSelection(t,i)}[s(267)](t){const i=s;(this[i(305)][i(299)][i(277)]||void 0!==this[i(283)]||void 0!==this._targetY)&&(this[i(283)]=void 0,this[i(298)]=void 0,this[i(305)][i(299)][i(277)]=void 0),[this[i(290)],this[i(261)]]=this[i(305)][i(266)][i(291)](t)}async[s(278)](t,i){const e=s;if(i||void 0===this[e(283)]||void 0===this[e(298)]){this[e(305)][e(299)][e(277)]=void 0;const t=void 0===this[e(305)].selectionService.range?e(304):e(276);this._sc[e(299)][e(281)](t)}else this[e(271)](t,!1),this[e(305)][e(269)][e(282)](e(306),(async()=>{const t=e;await this[t(305)][t(293)][t(295)](t(302),{selection:this[t(305)].selectionService[t(277)]}),this[t(305)][t(266)].fitToWindow()}))}[s(287)](t){const i=s;[this[i(283)],this[i(298)]]=this[i(305)][i(266)].getCoordsFromEvent(t),this._updateSelection(t,!0)}[s(271)](t,i){const e=s;if(!i||void 0===this[e(283)]||void 0===this[e(298)])return;let o=this[e(283)]-this[e(290)],h=this[e(298)]-this[e(261)];t[e(268)]&&(Math[e(260)](o)>Math[e(260)](h)?o=h*(Math.sign(o)!==Math[e(265)](h)?-1:1):h=o*(Math[e(265)](o)!==Math[e(265)](h)?-1:1));const r=this[e(305)][e(259)][e(273)],c=this[e(305)].imageService[e(288)],p=(0,a.Pq)();h<0?(p[e(263)]=(0,n.u)(this[e(261)]+h,c),p[e(301)]=(0,n.u)(this._originY+1+(t[e(292)]?-h:0),c)):(p.bottom=(0,n.u)(this[e(261)]+h+1,c),p.top=(0,n.u)(this[e(261)]+(t[e(292)]?-h:0),c)),o<0?(p[e(297)]=(0,n.u)(this[e(290)]+o,r),p.right=(0,n.u)(this._originX+1+(t[e(292)]?-o:0),r)):(p[e(289)]=(0,n.u)(this[e(290)]+o+1,r),p[e(297)]=(0,n.u)(this[e(290)]+(t[e(292)]?-o:0),r)),this._sc.selectionService[e(277)]=p,this[e(305)][e(299)].validate(r,c)}}const r=h}}]);