"use strict";const a10_0x2782=["1muWabR","_imageService","pointerUp","then","_onRequestRender","block","49204cKVDLI","717359YmDDSR","11 x 11 Average","difference","round","_sc","setAttribute","style","display","svg","event","string","onHistoryUpdateValue","_container","transparent","hasImage","_updateOutline","getCoordsFromEvent","webpackChunkluna","position","onRequestRender","getOutlineSvgPath","left","replace","31 x 31 Average","options","Point","createDomRenderProgram","ellipse","setValueFromHistoryChange","push","render","_svg","_model","value","containsCoord","clientWidth","multiply","width","70647VcWbBm","absolute","flipX","max","Sampling","paletteService","createReadonlyRgbaColor","diamond","fill","3 x 3 Average","buttons","rightTriangle","5 x 5 Average","shape","_outlineModel","_svgPath","range","overlay","lighten","strokeWidth","_lastCoord","781037HDeUoF","darken","21CFPuQm","none","101 x 101 Average","top","linearBurn","pointerDown","onUpdate","1107986dRRfPA","http://www.w3.org/2000/svg","pointerMove","toString","_svgPath2","register","_setColor","path","get","string-combo","name","screen","853947GwcDYc","currentLayer","_onHistoryUpdateValue","prepend","_value","height","exclusion","normal","floor","default","rgba","min","imageService","append","stroke","secondary","primary","boolean","zoom","614652NQxpFo","type","order","fire","_viewportService","51 x 51 Average","_samplingOption","flipY","viewportService","linearDodgeAdd","createElementNS","bind","_onUpdate"],a10_0x4c50=function(t,s){return a10_0x2782[t-=494]},a10_0x2d9593=a10_0x4c50;!function(t,s){const e=a10_0x4c50;for(;;)try{if(811522===parseInt(e(565))+-parseInt(e(544))+parseInt(e(604))*-parseInt(e(597))+-parseInt(e(584))+-parseInt(e(603))*-parseInt(e(546))+parseInt(e(553))+-parseInt(e(523)))break;t.push(t.shift())}catch(s){t.push(t.shift())}}(a10_0x2782),(self[a10_0x2d9593(502)]=self[a10_0x2d9593(502)]||[])[a10_0x2d9593(514)]([[6471],{3315:(t,s,e)=>{const i=a10_0x2d9593;e.d(s,{d:()=>c});var h=e(5120),n=e(1003),r=e(1674);let o,a;class c extends h.JT{constructor(t,s,e,i){const h=a10_0x4c50;super(),this[h(497)]=t,this[h(598)]=s,this[h(588)]=e,this[h(517)]=i,this[h(586)]=2,this._svg=document[h(594)](r.q,h(612)),this._svg[h(609)]("version","1.1"),this[h(516)][h(610)][h(503)]=h(524),this._svgPath=document.createElementNS(r.q,h(560)),this[h(538)][h(610)][h(579)]="var(--luna-focusColor)",this._svgPath.style[h(531)]=h(498),this[h(538)][h(610)].strokeWidth="1",this[h(557)]=document[h(594)](r.q,h(560)),this._svgPath2[h(610)][h(579)]="var(--luna-focusColor)",this._svgPath2[h(610)][h(531)]="transparent",this._svgPath2[h(610)][h(542)]="1",this[h(516)][h(578)](this[h(538)],this._svgPath2),this._container[h(568)](this[h(516)]),this[h(558)]({dispose:()=>this[h(497)].removeChild(this[h(516)])})}async[i(515)](){const t=i,s=this[t(517)][t(539)],h=this[t(588)];if(!s)return void(this[t(516)][t(610)][t(611)]="none");if(this[t(516)][t(610)][t(611)]=t(602),!this[t(598)][t(566)])return;if(o!==this[t(517)][t(536)]){let s;switch(o=this[t(517)].shape,o){case t(530):s=e.e(727)[t(600)](e[t(595)](e,727));break;case t(512):s=e.e(8459)[t(600)](e.bind(e,8459));break;case"triangle":s=e.e(4012).then(e[t(595)](e,4012));break;case t(534):s=e.e(6243)[t(600)](e.bind(e,6243));break;default:s=void 0}a=s?new Promise((async e=>{const i=t;e(new((await s)[i(574)]))})):s}const r=await a,c=Math[t(607)](this[t(497)][t(520)]/2)-this[t(598)][t(522)]/2*h[t(583)]+h.x*h[t(583)],l=Math[t(607)](this._container.clientHeight/2)-this[t(598)][t(570)]/2*h[t(583)]+h.y*h[t(583)],d=(0,n.Oq)(s)*h.zoom,u=(0,n.rY)(s)*h[t(583)];this[t(516)].style.left=c+s[t(506)]*h[t(583)]-2+"px",this[t(516)][t(610)][t(549)]=l+s[t(549)]*h[t(583)]-2+"px",this[t(516)].setAttribute(t(522),(d+5).toString()),this[t(516)][t(609)]("height",(u+5)[t(556)]()),this[t(538)][t(609)]("d","M2.5 2.5 h"+d+" v"+u+" h"+-d+" v"+-u),r?.[t(505)]?(this._svgPath2[t(610)][t(611)]="block",this._svgPath2.setAttribute("d",r[t(505)](d,u,this[t(517)][t(525)],this._model[t(591)]))):this._svgPath2.style.display=t(547)}}},9904:(t,s,e)=>{const i=a10_0x2d9593;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>d,qv:()=>u});var h=e(1815),n=e(5120),r=e(2939);class o extends n.JT{constructor(t,s,e,i=!0){const n=a10_0x4c50;super(),this[n(563)]=t,this[n(499)]=s,this[n(569)]=e,this.allowUnchecking=i,this[n(585)]=n(582),this[n(567)]=this[n(558)](new h.v),this[n(496)]=this[n(567)][n(494)],this[n(596)]=this[n(558)](new h.v),this.onUpdate=this[n(596)][n(494)]}get[i(518)](){return this[i(569)]}set[i(518)](t){const s=i;this[s(569)]=t,this[s(596)][s(587)](t)}[i(513)](t){const s=i;this[s(569)]=t,this[s(567)].fire(t)}}class a extends n.JT{constructor(t,s,e){const n=i;super(),this.name=t,this[n(509)]=s,this[n(569)]=e,this.type=n(495),this._onHistoryUpdateValue=this.register(new h.v),this[n(496)]=this[n(567)][n(494)],this[n(596)]=this[n(558)](new h.v),this[n(552)]=this[n(596)][n(494)]}get[i(518)](){return this[i(569)]}set[i(518)](t){const s=i;this[s(569)]=t,this[s(596)][s(587)](t)}[i(513)](t){const s=i;this[s(569)]=t,this[s(567)][s(587)](t)}}class c extends n.JT{constructor(t,s,e){const n=i;super(),this[n(563)]=t,this[n(509)]=s,this[n(569)]=e,this.type=n(562),this[n(567)]=this[n(558)](new h.v),this.onHistoryUpdateValue=this[n(567)].event,this[n(596)]=this.register(new h.v),this[n(552)]=this[n(596)][n(494)]}get[i(518)](){return this._value}set[i(518)](t){const s=i;this._value=t,this[s(596)].fire(t)}[i(513)](t){const s=i;this[s(569)]=t,this[s(567)][s(587)](t)}}class l extends a{constructor(){const t=i;super("Blend Mode",[t(572),t(507),t(545),t(521),"linearBurn",t(541),t(564),t(593),t(540),"softLight",t(606),t(571)],"normal")}}class d extends n.JT{constructor(t,s,e,n){const r=i;super(),this[r(563)]=t,this[r(569)]=s,this.min=e,this[r(526)]=n,this[r(585)]="number",this[r(567)]=this[r(558)](new h.v),this.onHistoryUpdateValue=this[r(567)][r(494)],this._onUpdate=this[r(558)](new h.v),this[r(552)]=this[r(596)][r(494)]}get[i(518)](){const t=i;return(0,r.u)(this._value,this[t(526)],this[t(576)])}set[i(518)](t){const s=i;this[s(569)]=t,this[s(596)][s(587)](t)}[i(513)](t){const s=i;this[s(569)]=t,this[s(567)][s(587)](t)}}class u extends d{constructor(t,s,e,h){const n=i;super(t,s,e,h),this[n(585)]="number"}get[i(518)](){const t=i;return(0,r.u)(this[t(569)],this.max,this[t(576)])}set value(t){const s=i;this._value=Math[s(573)](t),this[s(596)][s(587)](t)}}},6471:(t,s,e)=>{const i=a10_0x2d9593;e.r(s),e.d(s,{default:()=>d});var h=e(8752),n=e(1815),r=e(5120),o=e(3315),a=e(9904);const c=new Map([["Point",0],[i(532),1],["5 x 5 Average",2],[i(605),5],[i(508),15],[i(589),25],[i(548),50]]);class l extends r.JT{constructor(t){const s=i;super(),this[s(608)]=t,this.id="colorPicker",this[s(590)]=new a.rP(s(527),[s(510),"3 x 3 Average",s(535),s(605),s(508),s(589),"101 x 101 Average"],s(510)),this[s(509)]=[this._samplingOption],this[s(537)]={range:void 0},this[s(601)]=this.register(new n.v),this[s(504)]=this[s(601)][s(494)]}[i(511)](t){const s=i;return new o.d(t,this[s(608)].imageService,this._sc[s(592)],this._outlineModel)}[i(551)](t){const s=i;if(!this[s(608)][s(577)].currentLayer)return;const e=this[s(608)][s(592)][s(501)](t);this._updateOutline(e),this._sc[s(577)][s(519)](e[0],e[1])&&this[s(559)](e,t),this[s(543)]=e}[i(599)](){const t=i;this._sc[t(577)][t(566)]&&(this[t(543)]=void 0)}[i(555)](t,s){const e=i;if(!this[e(608)][e(577)][e(566)])return;const h=this._sc[e(592)][e(501)](t);this[e(500)](h),s&&this[e(543)]&&(this[e(608)][e(577)][e(519)](h[0],h[1])&&(this._lastCoord[0]!==h[0]||this[e(543)][1]!==h[1])&&this[e(559)](h,t),this[e(543)]=h)}[i(500)](t){const s=i;if(this[s(608)][s(577)][s(566)]&&(this[s(537)][s(539)]?.left!==t[0]||this[s(537)][s(539)]?.[s(549)]!==t[1])){if(this[s(608)].imageService[s(519)](t[0],t[1])){const e=c[s(561)](this._samplingOption.value);this[s(537)][s(539)]={left:t[0]-e,top:t[1]-e,right:t[0]+e+1,bottom:t[1]+e+1}}else this[s(537)][s(539)]=void 0;this[s(601)].fire()}}[i(559)](t,s){const e=i,n=this[e(608)].imageService[e(566)];if(!n)return;const r=n.data;let o;if("Point"===this._samplingOption.value){const s=4*(t[1]*n[e(522)]+t[0]);o=h.m4[e(529)](r[s],r[s+1],r[s+2],r[s+3])}else{const s=c[e(561)](this._samplingOption[e(518)]);let i=0,a=0,l=0,d=0;const u=Math[e(526)](t[0]-s,0),p=Math[e(526)](t[1]-s,0),v=Math.min(t[0]+s,n.width-1),g=Math[e(576)](t[1]+s,n[e(570)]-1);let _=0;for(let t=p;t<=g;t++)for(let s=u;s<=v;s++)_=4*(t*n[e(522)]+s),i+=r[_],a+=r[_+1],l+=r[_+2],d+=r[_+3];const m=(v-u+1)*(g-p+1);o=h.m4.createReadonlyRgbaColor(Math[e(607)](i/m),Math[e(607)](a/m),Math[e(607)](l/m),Math.round(d/m))}1&s[e(533)]?this[e(608)][e(528)][e(581)][e(575)]=o:2&s[e(533)]&&(this._sc[e(528)][e(580)][e(575)]=o)}}const d=l},1674:(t,s,e)=>{const i=a10_0x2d9593;e.d(s,{q:()=>h});const h=i(554)}}]);