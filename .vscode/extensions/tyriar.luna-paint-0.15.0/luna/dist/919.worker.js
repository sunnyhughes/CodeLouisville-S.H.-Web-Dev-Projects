"use strict";const a5_0x4a5a=["fillText","284587GKpYlJ","replace","isInteger",'Range "',"height","52378MKKPjx",")->("," must be contained within ","getImageData","29VTPdrg","textBaseline","SharedArrayBuffer","blendMode","push","width",'": ',"right","buffer",'" and "',"verticalAlignment","data","top","justify","text","map","pow","subarray",'" dimensions are equal',"round","1kwgWyZ","update","abs","max","isBold","fontSize","The text can not be drawn outside of the selection and viewport"," bold","floor","348411cplOTt","textAlign","px ","336419GBmjRi","Unrecognized array type","selection","middle","227980GhzNgu","266053vTbOrH",'Invalid dimensions for image "',"alignment","6178QFEGVw","min","targetImage","reduce","split","trim","length","left","primaryColor",'Images "',"sqrt","center","ceil","measureText","webpackChunkluna","dimensions","Could not attain 2d context","bottom","6JEUFQz"],a5_0x26eb=function(t,n){return a5_0x4a5a[t-=415]},a5_0x163dbd=a5_0x26eb;!function(t,n){const e=a5_0x26eb;for(;;)try{if(175562===parseInt(e(461))+parseInt(e(433))+-parseInt(e(438))*-parseInt(e(421))+-parseInt(e(430))+-parseInt(e(441))*-parseInt(e(470))+parseInt(e(459))*-parseInt(e(466))+-parseInt(e(437)))break;t.push(t.shift())}catch(n){t.push(t.shift())}}(a5_0x4a5a),(self[a5_0x163dbd(455)]=self[a5_0x163dbd(455)]||[])[a5_0x163dbd(474)]([[919],{919:(t,n,e)=>{e.r(n),e.d(n,{run:()=>f});var r=e(371),a=e(517),o=e(939),i=e(3),s=e(742);const f=async(t,n,e)=>{const f=a5_0x26eb;return(0,s.ap)(e,f(443)),function(t,n){const e=a5_0x26eb,s=n[e(443)][e(475)],f=n[e(443)][e(465)],c={...n[e(456)]};if(c[e(448)]=Math.floor(c[e(448)]),c[e(477)]=Math[e(453)](c.right),c.top=Math.floor(c.top),c[e(458)]=Math[e(453)](c[e(458)]),c.left=(0,o.u)(Math[e(429)](c[e(448)]),s,0),c[e(477)]=(0,o.u)(Math.ceil(c.right),s,0),c.top=(0,o.u)(Math.ceil(c[e(482)]),f,0),c.bottom=(0,o.u)(Math[e(453)](c.bottom),f,0),n[e(435)]&&(n[e(435)].left>c.left&&(c[e(448)]=Math[e(442)](n[e(435)][e(448)],c[e(477)])),n[e(435)].right<c[e(477)]&&(c[e(477)]=Math[e(424)](n.selection[e(477)],c[e(448)])),n.selection[e(482)]>c[e(482)]&&(c.top=Math[e(442)](n[e(435)].top,c[e(458)])),n[e(435)][e(458)]<c[e(458)]&&(c[e(458)]=Math[e(424)](n[e(435)][e(458)],c[e(482)]))),c[e(448)]===c[e(477)]||c[e(482)]===c[e(458)])throw new Error(e(427));const h=(0,i.Oq)(c),u=(0,i.rY)(c),l=(0,i.Oq)(n[e(456)]),d=(0,i.rY)(n.dimensions),b=new OffscreenCanvas(h,u).getContext("2d");if(!b)throw new Error(e(457));let x="";n[e(425)]&&(x+=e(428)),n.isItalic&&(x+=" italic"),x+=" "+n[e(426)]+e(432)+n.fontFamily,b.font=x[e(446)](),b[e(431)]="left",b[e(471)]=e(482),b.fillStyle="rgba("+n[e(449)][0]+","+n[e(449)][1]+","+n[e(449)][2]+","+n[e(449)][3]/255+")";const M=function(t,n,e){const r=a5_0x26eb,a=[],o=n.split("\n");for(const n of o){const o=n[r(445)](" ");let i=o[0];for(let n=1;n<o[r(447)];n++){const s=o[n];t[r(454)](i+" "+s).width<e?i+=" "+s:(a.push({text:i,width:t[r(454)](i)[r(475)]}),i=s)}a[r(474)]({text:i,width:t[r(454)](i).width})}return a}(b,n.text,l),w=n[e(426)];let p;switch(n[e(480)]){case e(482):p=0;break;case e(436):p=Math.round((d-M[e(447)]*w)/2);break;case e(458):p=d-w*M[e(447)]}if(p+=n[e(456)].top-c[e(482)],n[e(440)]===e(483))for(const t of M){const r=t.text[e(445)](" ")[e(416)]((t=>{const n=e;return{text:t,width:b[n(454)](t)[n(475)]}})),a=(l-r[e(444)](((t,n)=>t+n[e(475)]),0))/(r.length-1);let o=n[e(456)][e(448)]-c.left;for(const t of r)b[e(460)](t.text,Math[e(420)](o),p),o+=t.width+a;p+=w}else for(const t of M){let r;switch(n[e(440)]){case"left":r=0;break;case e(452):r=l/2,b[e(431)]="center";break;case e(477):r=l,b[e(431)]=e(477)}r+=n[e(456)][e(448)]-c.left,b.fillText(t[e(415)],r,p),p+=w}const g=b[e(469)](0,0,h,u),m=(0,r.X$)(s*f,s*f*4,!0),y=(0,r.X$)(s*f*2,Math[e(424)](s,f),!0);let _=0,A=0,I=0,U=0;for(I=0;I<u;I++)for(A=0;A<h;A++)U=4*(I*h+A),g[e(481)][U+3]>0&&(y[2*_]=A,y[2*_+1]=I,m[_++]=4*((c[e(482)]+I)*s+c[e(448)]+A));const B=m[e(418)](0,_);t.update(.25);const v=new Uint8Array(new SharedArrayBuffer(4*m[e(447)]));for(U=0;U<m[e(447)];U++)(0,r.Yr)(v,4*U,n[e(443)][e(481)],m[U]);if(t[e(422)](.5),n.blendMode===e(462))for(U=0;U<B[e(447)];U++)(0,r.Yr)(n[e(443)].data,B[U],g[e(481)],4*(y[2*U+1]*h+y[2*U]));else for(U=0;U<B.length;U++)(0,a.B)(n[e(473)],n[e(443)].data,B[U],g[e(481)],4*(y[2*U+1]*h+y[2*U]));t[e(422)](.75);const k=new Uint8Array(new SharedArrayBuffer(4*m[e(447)]));for(U=0;U<m[e(447)];U++)(0,r.Yr)(k,4*U,n[e(443)][e(481)],m[U]);return t[e(422)](1),{undoData:{indexList:B,colorData:v},redoData:{indexList:B,colorData:k},range:c}}(n,e)}},742:(t,n,e)=>{e.d(n,{ap:()=>a,TO:()=>o,zg:()=>i});var r=e(3);function a(t,n){const e=a5_0x26eb,r=t[n];if(r[e(475)]<1||r[e(465)]<1)throw new Error(e(439)+n+e(476)+r[e(475)]+" x "+r[e(465)])}function o(t,n,e){const r=a5_0x26eb,a=t[n],o=t[e];if(a.width===o.width&&a[r(465)]===o[r(465)])throw new Error(r(450)+n+r(479)+e+r(419))}function i(t,n,e){const a=a5_0x26eb,o=t[n];if(!(0,r.ur)(e,o))throw new Error(a(464)+n+'" '+(0,r.PW)(o)+a(468)+(0,r.PW)(e))}},371:(t,n,e)=>{const r=a5_0x163dbd;function a(t,n=2*t[r(447)]){const e=r;let a;if(t instanceof Float32Array)a=new Float32Array(n);else if(t instanceof Uint8Array)a=new Uint8Array(n);else if(t instanceof Uint16Array)a=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(e(434));a=new Uint32Array(n)}return a.set(t),a}function o(t,n,e=!1){const a=r;return n<Math[a(417)](2,8)?e?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math[a(417)](2,16)?e?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):e?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,e,r){t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2],t[n+3]=e[r+3]}e.d(n,{Rs:()=>a,X$:()=>o,Yr:()=>i})},517:(t,n,e)=>{const r=a5_0x163dbd;e.d(n,{B:()=>f});var a=e(371);const o=new Float32Array(6);let i;const s={normal:(t,n)=>n,darken:(t,n)=>Math[r(442)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[r(424)](t+n-1,0),lighten:(t,n)=>Math[r(424)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[r(442)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[r(451)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[r(423)](t-n),exclusion:(t,n)=>t+n-2*t*n};function f(t,n,e,f,h,u=n,l=e){const d=r;if(t!==d(462)){if(o[0]=f[h+3]/255,0===o[0])return n[e]=u[l],n[e+1]=u[l+1],n[e+2]=u[l+2],void(n[e+3]=u[l+3]);if(o[1]=u[l+3]/255,0===o[1])return n[e]=f[h],n[e+1]=f[h+1],n[e+2]=f[h+2],void(n[e+3]=f[h+3]);i=s[t],o[3]=i(u[l]/255,f[h]/255),o[4]=i(u[l+1]/255,f[h+1]/255),o[5]=i(u[l+2]/255,f[h+2]/255),o[2]=o[0]+o[1]*(1-o[0]),n[e]=Math[d(420)](c(u[l]/255,o[1],f[h]/255,o[0],o[3])/o[2]*255),n[e+1]=Math[d(420)](c(u[l+1]/255,o[1],f[h+1]/255,o[0],o[4])/o[2]*255),n[e+2]=Math.round(c(u[l+2]/255,o[1],f[h+2]/255,o[0],o[5])/o[2]*255),n[e+3]=Math[d(420)](255*o[2])}else(0,a.Yr)(n,e,f,h)}function c(t,n,e,r,a){return(n-n*r)*t+(r-n*r)*e+n*r*a}},939:(t,n,e)=>{function r(t,n,e=0){const r=a5_0x26eb;return Math[r(424)](Math[r(442)](t,n),e)}function a(t,n){const e=a5_0x26eb,r=Math[e(417)](10,n);return Math[e(420)](t*r)/r}e.d(n,{u:()=>r,s:()=>a})},3:(t,n,e)=>{function r(t){const n=a5_0x26eb;if(t)return{left:t.left,top:t[n(482)],right:t[n(477)],bottom:t[n(458)]}}function a(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function o(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,e,r){const a=a5_0x26eb,o=function(t){const n=a5_0x26eb;if(t[n(448)]>t[n(477)]){const e=t.right;t[n(477)]=t.left,t[n(448)]=e}if(t[n(482)]>t.bottom){const e=t.bottom;t[n(458)]=t[n(482)],t[n(482)]=e}if(t[n(477)]<t.left){const e=t[n(448)];t[n(448)]=t[n(477)],t[n(477)]=e}if(t[n(458)]<t.top){const e=t[n(482)];t[n(482)]=t[n(458)],t[n(458)]=e}return t}({left:t,top:n,right:e,bottom:r});return o[a(477)]++,o[a(458)]++,o}function s(t,n){const e=a5_0x26eb;return t[e(448)]=Math[e(442)](Math[e(424)](t.left,n[e(448)]),n[e(477)]),t[e(482)]=Math[e(442)](Math[e(424)](t[e(482)],n[e(482)]),n.bottom),t[e(477)]=Math[e(424)](Math[e(442)](t.right,n.right),n[e(448)]),t[e(458)]=Math[e(424)](Math[e(442)](t[e(458)],n[e(458)]),n[e(482)]),t}function f(t){const n=a5_0x26eb;return t[n(448)]=Math[n(429)](t.left),t[n(477)]=Math[n(453)](t[n(477)]),t.top=Math[n(429)](t[n(482)]),t[n(458)]=Math[n(453)](t.bottom),t}function c(t,n,e){const r=a5_0x26eb;if(function(t){const n=a5_0x26eb;return t[n(448)]===t.right||t.top===t[n(458)]}(t))return t[r(448)]=n,t[r(477)]=n+1,t[r(482)]=e,void(t[r(458)]=e+1);t[r(448)]=Math[r(442)](t.left,n),t[r(482)]=Math[r(442)](t[r(482)],e),t[r(477)]=Math.max(t[r(477)],n+1),t[r(458)]=Math[r(424)](t[r(458)],e+1)}function h(t,n,e){const r=a5_0x26eb;return n>=t[r(448)]&&n<t[r(477)]&&e>=t[r(482)]&&e<t.bottom}function u(t,n){const e=a5_0x26eb;return n[e(448)]>=t[e(448)]&&n.right<=t[e(477)]&&n.top>=t[e(482)]&&n[e(458)]<=t[e(458)]}function l(t){const n=a5_0x26eb;return"("+t[n(448)]+","+t[n(482)]+n(467)+t[n(477)]+","+t[n(458)]+")"}function d(t){const n=a5_0x26eb;return t[n(477)]-t[n(448)]}function b(t){const n=a5_0x26eb;return t[n(458)]-t[n(482)]}e.d(n,{BN:()=>r,Re:()=>a,DI:()=>o,tH:()=>i,l$:()=>s,kq:()=>f,Hv:()=>c,RB:()=>h,ur:()=>u,PW:()=>l,Oq:()=>d,rY:()=>b})}}]);