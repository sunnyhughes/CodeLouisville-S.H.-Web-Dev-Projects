"use strict";(self.webpackChunkluna=self.webpackChunkluna||[]).push([[1],{23:(e,t,n)=>{function r(e){const t=new Uint8Array(e.buffer),n=new Uint8Array(e.length);for(let e=0;e<n.length;e++)n[e]=t[2*e+1];return n}n.r(t),n.d(t,{convert16BitTo8BitData:()=>r})},24:(e,t,n)=>{n.r(t),n.d(t,{parseChunk:()=>o});var r=n(25),i=n(6),a=n(26);function o(e,t,n){const a=function(e,t){const n=new r.Inflate;let a=0;for(const r of t)a=r.offset+4+4,n.push(e.view.buffer.slice(e.view.byteOffset+a,e.view.byteOffset+a+r.dataLength));if(n.err)throw(0,i.createChunkDecodeError)(e,t[0],`Inflate error: ${n.msg}`,t[0].offset);if(void 0===n.result)throw new i.DecodeError(e,"IDAT: Failed to decompress data chunks",0);return n.result}(e,n);let o;o=1===t.interlaceMethod?function(e,t,n){const r=l(t),i=Math.ceil(t.width*r),a=new Uint8Array(i*t.height),o=d(t),c=8/t.bitDepth,s=(1<<t.bitDepth)-1,w=[0,4,0,2,0,1,0],u=[0,0,4,0,2,0,1],p=[8,8,4,4,2,2,1],g=[8,8,8,4,4,2,2];let b=0;for(let d=0;d<7;d++){const l=w[d],D=u[d],y=p[d],k=g[d],v=Math.ceil((t.width-l)/y),C=Math.ceil((t.height-D)/k),M=Math.ceil(r*v);if(0===v||0===C)continue;const T=h(e,t,n,b,v,C);let E=0;for(let e=0;e<C;e++){E=(D+e*k)*i+l*r;for(let n=0;n<v;n++){if(t.bitDepth<8){let i=T[e*M+Math.floor(n*r)];i>>=(c-n%c-1)*t.bitDepth,i&=s,i<<=(c-1-E%1*c)*t.bitDepth,a[Math.floor(E)]|=i}else for(let t=0;t<o;t++)a[E+t]=T[(e*v+n)*o+t];E+=y*r}}b+=C*(1+f(t,v))}return a}(e,t,a):h(e,t,a);const c=e.metadata.find((e=>"tRNS"===e.type)),s=function(e,t,n,r,a){const o=new(16===t.bitDepth?Uint16Array:Uint8Array)(t.width*t.height*4);let h=0;const c=d(t),s=l(t),f=Math.ceil(t.width*s);switch(t.colorType){case 0:switch(t.bitDepth){case 1:case 2:case 4:{const e=8/t.bitDepth,r=(1<<t.bitDepth)-1,i=t.bitDepth/8;for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++)h=4*(a*t.width+c),o[h]=n[a*f+Math.floor(c*i)],o[h]>>=(e-c%e-1)*t.bitDepth,o[h]&=r,o[h]*=255/r,o[h+1]=o[h],o[h+2]=o[h],o[h+3]=255;break}case 8:case 16:for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)h=4*(e*t.width+r),16===t.bitDepth?o[h]=n[(e*t.width+r)*c]<<8|n[(e*t.width+r)*c+1]:o[h]=n[(e*t.width+r)*c],o[h+1]=o[h],o[h+2]=o[h],o[h+3]=16===t.bitDepth?65535:255}break;case 4:for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)h=4*(e*t.width+r),16===t.bitDepth?o[h]=n[(e*t.width+r)*c]<<8|n[(e*t.width+r)*c+1]:o[h]=n[(e*t.width+r)*c],o[h+1]=o[h],o[h+2]=o[h],16===t.bitDepth?o[h+3]=n[(e*t.width+r)*c+2]<<8|n[(e*t.width+r)*c+3]:o[h+3]=n[(e*t.width+r)*c+1];break;case 3:if(!r)throw new i.DecodeError(e,"IDAT: Cannot decode indexed color type without a palette",0);switch(t.bitDepth){case 1:case 2:case 4:{const e=8/t.bitDepth,i=(1<<t.bitDepth)-1,c=t.bitDepth/8;for(let s=0;s<t.height;s++)for(let d=0;d<t.width;d++){h=4*(s*t.width+d);let l=n[s*f+Math.floor(d*c)];l>>=(e-d%e-1)*t.bitDepth,l&=i,r.setRgba(o,h,l),a&&a.transparency.length>l&&(o[h+3]=a.transparency[l])}break}case 8:{let e=0;for(let i=0;i<t.height;i++)for(let c=0;c<t.width;c++)h=4*(i*t.width+c),e=n[i*t.width+c],r.setRgba(o,h,e),a&&a.transparency.length>e&&(o[h+3]=a.transparency[e]);break}}break;case 2:for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)h=4*(e*t.width+r),16===t.bitDepth?(o[h]=n[(e*t.width+r)*c]<<8|n[(e*t.width+r)*c+1],o[h+1]=n[(e*t.width+r)*c+2]<<8|n[(e*t.width+r)*c+3],o[h+2]=n[(e*t.width+r)*c+4]<<8|n[(e*t.width+r)*c+5]):(o[h]=n[(e*t.width+r)*c],o[h+1]=n[(e*t.width+r)*c+1],o[h+2]=n[(e*t.width+r)*c+2]),o[h+3]=16===t.bitDepth?65535:255;break;case 6:for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)h=4*(e*t.width+r),16===t.bitDepth?(o[h]=n[(e*t.width+r)*c]<<8|n[(e*t.width+r)*c+1],o[h+1]=n[(e*t.width+r)*c+2]<<8|n[(e*t.width+r)*c+3],o[h+2]=n[(e*t.width+r)*c+4]<<8|n[(e*t.width+r)*c+5],o[h+3]=n[(e*t.width+r)*c+6]<<8|n[(e*t.width+r)*c+7]):(o[h]=n[(e*t.width+r)*c],o[h+1]=n[(e*t.width+r)*c+1],o[h+2]=n[(e*t.width+r)*c+2],o[h+3]=n[(e*t.width+r)*c+3])}return o}(e,t,o,e.palette,c);return!c||0!==t.colorType&&2!==t.colorType||function(e,t,n){const r=(1<<e.bitDepth)-1,i=16===e.bitDepth?65535:255;if(0!==e.colorType){if(2===e.colorType){const e=[i/r*n.transparency[0],i/r*n.transparency[1],i/r*n.transparency[2]];for(let n=0;n<t.length;n+=4)t[n]===e[0]&&t[n+1]===e[1]&&t[n+2]===e[2]&&(t[n+3]=0)}}else{const e=i/r*n.transparency;for(let n=0;n<t.length;n+=4)t[n]===e&&(t[n+3]=0)}}(t,s,c),s}function h(e,t,n,r=0,o=t.width,h=t.height){let w=0;const u=d(t),p=l(t),g=f(t,o),b=Math.ceil(o*p),D=new Uint8Array(h*b),y=new Map;for(let d=0;d<h;d++){let h=r+d*(g+1);const l=n[h++];if(!c)throw new i.DecodeError(e,`IDAT: Invalid filter type ${l}`,0);let f=y.get(l);f||(f=s(p,g,o,l),y.set(l,f));let b=1,k=0;switch(l){case 0:case 1:for(;k<u;k++)D[w]=n[h+k],w++;break;case 3:{let e=0;for(;k<u;k++)e=w-o*u,D[w]=n[h+k]+Math.floor(0+(e<0?0:D[e]))/2,w++;break}case 2:b=0;break;case 4:for(;k<u;k++){const e=Math.floor(w-g);D[w]=(n[h+k]+(0,a.paethPredicator)(0,e<0?0:D[e],0))%256,w++}}if(t.bitDepth>=8)for(;b<o;b++)for(let e=0;e<u;e++)D[w]=f(n,h+b*u+e,D,w),w++;else{for(b&&(w-=b),k=b;k<g;k++)D[w+k]=f(n,h+k,D,w+k);w+=g}}return D}function c(e){return e%1==0&&e>=0&&e<=4}function s(e,t,n,r){let i=0,o=0,h=0;switch(r){case 0:return(e,t)=>e[t];case 1:return(t,n,r,i)=>(t[n]+r[Math.floor(i-e)])%256;case 2:return(t,r,i,a)=>(o=Math.floor(a-n*e),o<0?t[r]:(t[r]+i[o])%256);case 3:return(t,r,a,h)=>(i=Math.floor(h-e),o=Math.floor(h-n*e),t[r]+Math.floor((i<0?0:a[i])+(o<0?0:a[o]))/2);case 4:return(n,r,c,s)=>(i=Math.floor(s-Math.ceil(e)),o=Math.floor(s-t),h=Math.floor(s-t-Math.ceil(e)),(n[r]+(0,a.paethPredicator)(i<0?0:c[i],o<0?0:c[o],h<0?0:c[h]))%256)}}function d(e){return Math.ceil(l(e))}function l(e){return w(e.colorType)*e.bitDepth/8}function f(e,t){return Math.ceil(w(e.colorType)*e.bitDepth*t/8)}function w(e){switch(e){case 0:case 3:return 1;case 2:return 3;case 4:return 2;case 6:return 4}}},27:(e,t,n)=>{n.r(t),n.d(t,{parseChunk:()=>i});var r=n(6);function i(e,t,n){(0,r.assertChunkFollows)(e,n,"IDAT"),(0,r.assertChunkDataLengthEquals)(e,n,0)}},28:(e,t,n)=>{n.r(t),n.d(t,{parseChunk:()=>a});var r=n(6),i=n(29);function a(e,t){(0,r.assertChunkDataLengthEquals)(e,t,13);let n=t.offset+4+4;const a=e.view.getUint32(n);n+=4;const o=e.view.getUint32(n);n+=4;const h=e.view.getUint8(n);if(!(0,i.isValidBitDepth)(h))throw(0,r.createChunkDecodeError)(e,t,`Bit depth "${h}" is not valid`,n);n++;const c=e.view.getUint8(n);if(!(0,i.isValidColorType)(c,h))throw(0,r.createChunkDecodeError)(e,t,`Color type "${c}" is not valid with bit depth "${h}"`,n);n++;const s=e.view.getUint8(n);(0,r.assertChunkCompressionMethod)(e,t,s,n),n++;let d=e.view.getUint8(n);(0,i.isValidFilterMethod)(d)||((0,r.handleWarning)(e,(0,r.createChunkDecodeWarning)(t,`Filter method "${d}" is not valid`,n)),d=0),n++;let l=e.view.getUint8(n);return(0,i.isValidInterlaceMethod)(l)||((0,r.handleWarning)(e,(0,r.createChunkDecodeWarning)(t,`Interlace method "${l}" is not valid`,n)),l=0),n++,{width:a,height:o,bitDepth:h,colorType:c,interlaceMethod:l}}},22:(e,t,n)=>{n.r(t),n.d(t,{verifyPngSignature:()=>s,decodePng:()=>u,readChunks:()=>p,readChunk:()=>g});var r=n(23),i=n(6),a=n(24),o=n(27),h=n(28),c=n(30);function s(e){if(e.view.byteLength<7)throw new i.DecodeError(e,`Not enough bytes in file for png signature (${e.view.byteLength})`,0);if(137!==e.view.getUint8(0)||80!==e.view.getUint8(1)||78!==e.view.getUint8(2)||71!==e.view.getUint8(3)||13!==e.view.getUint8(4)||10!==e.view.getUint8(5)||26!==e.view.getUint8(6)||10!==e.view.getUint8(7)){const t=d(Array.from(new Uint8Array(e.view.buffer).slice(e.view.byteOffset,e.view.byteOffset+8))),n=d([137,80,78,71,13,10,26,10]);throw new i.DecodeError(e,`Png signature is not correct (${t} != ${n})`,0)}}function d(e){return`0x${e.map((e=>e.toString(16).padStart(2,"0"))).join("")}`}const l=Object.freeze(["tRNS"]),f=Object.freeze(["bKGD","cHRM","eXIf","gAMA","hIST","iCCP","iTXt","tIME","oFFs","pCAL","pHYs","sBIT","sCAL","sPLT","sRGB","sTER","tEXt","tRNS","zTXt"]);function w(e){switch(e){case"bKGD":return n.e(5).then(n.bind(n,41));case"cHRM":return n.e(6).then(n.bind(n,42));case"eXIf":return n.e(7).then(n.bind(n,43));case"gAMA":return n.e(8).then(n.bind(n,44));case"hIST":return n.e(9).then(n.bind(n,45));case"iCCP":return n.e(10).then(n.bind(n,46));case"iTXt":return n.e(11).then(n.bind(n,48));case"tIME":return n.e(17).then(n.bind(n,49));case"oFFs":return n.e(18).then(n.bind(n,50));case"pCAL":return n.e(12).then(n.bind(n,51));case"pHYs":return n.e(19).then(n.bind(n,53));case"sBIT":return n.e(20).then(n.bind(n,54));case"sCAL":return n.e(13).then(n.bind(n,55));case"sPLT":return n.e(14).then(n.bind(n,56));case"sRGB":return n.e(21).then(n.bind(n,57));case"sTER":return n.e(22).then(n.bind(n,58));case"tEXt":return n.e(15).then(n.bind(n,59));case"tRNS":return n.e(23).then(n.bind(n,60));case"zTXt":return n.e(16).then(n.bind(n,61));default:throw new Error(`Could not get decoder for chunk type "${e}"`)}}async function u(e,t={}){const c={view:new DataView(e.buffer,e.byteOffset,e.byteLength),image:void 0,palette:void 0,metadata:[],parsedChunks:new Set,warnings:[],info:[],options:t};s(c);const d=p(c);c.rawChunks=d;const u=(0,h.parseChunk)(c,d[0]),g={...c,header:u};let b;b=t&&t.parseChunkTypes?"*"===t.parseChunkTypes?f:l.concat(t.parseChunkTypes):l;for(let e=1;e<d.length;e++){const t=d[e];switch(t.type){case"IHDR":(0,i.handleWarning)(g,(0,i.createChunkDecodeWarning)(t,"Multiple IHDR chunks not allowed",t.offset+4));break;case"IDAT":{const n=[t];for(;d.length>e+1&&"IDAT"===d[e+1].type;)n.push(d[++e]);g.image={width:u.width,height:u.height,data:(0,a.parseChunk)(g,u,n)};break}case"PLTE":g.palette=(await n.e(24).then(n.bind(n,62))).parseChunk(g,u,t);break;case"IEND":(0,o.parseChunk)(g,u,t);break;default:if(b.includes(t.type))try{g.metadata.push((await w(t.type)).parseChunk(g,u,t))}catch(e){if(!(e instanceof i.DecodeWarning))throw e;(0,i.handleWarning)(g,e)}else if(!f.includes(t.type)){if(!t.isAncillary)throw new i.DecodeError(g,`Unrecognized critical chunk type "${t.type}"`,t.offset+4);g.info.push(`Unrecognized chunk type "${t.type}"`)}}g.parsedChunks.add(t.type)}if(!g.image)throw new i.DecodeError(g,"Failed to decode, no IDAT chunk",0);return t&&t.force32&&2===g.image.data.BYTES_PER_ELEMENT&&(g.image.data=(0,r.convert16BitTo8BitData)(g.image.data)),{image:g.image,details:{width:u.width,height:u.height,bitDepth:u.bitDepth,colorType:u.colorType,interlaceMethod:u.interlaceMethod},palette:g.palette,metadata:g.metadata,rawChunks:d,warnings:g.warnings,info:g.info}}function p(e){const t=[];let n,r=8,a=!1,o=!1;for(;r<e.view.byteLength;){try{n=g(e,r)}catch(t){if(!(o&&t instanceof Error))throw t;(0,i.handleWarning)(e,new i.DecodeWarning("Could not parse chunk after IEND: "+t.message,r))}r+=8+n.dataLength+4,t.push(n),a||(a="IDAT"===n.type),o||(o="IEND"===n.type)}if("IHDR"!==t[0].type)throw new i.DecodeError(e,"First chunk is not IHDR",t[0].offset+4);if("IEND"!==t[t.length-1].type&&(0,i.handleWarning)(e,new i.DecodeWarning("Last chunk is not IEND",t[t.length-1].offset+4)),!a)throw new i.DecodeError(e,"No IDAT chunk",0);return t}function g(e,t){if(e.view.byteLength<t+4)throw new i.DecodeError(e,"EOF while reading chunk length",t);const n=e.view.getUint32(t);if(e.view.byteLength<t+4+4)throw new i.DecodeError(e,"EOF while reading chunk type",t);const r=String.fromCharCode(e.view.getUint8(t+4),e.view.getUint8(t+5),e.view.getUint8(t+6),e.view.getUint8(t+7));if(e.view.byteLength<t+4+4+n+4)throw new i.DecodeError(e,`EOF while reading chunk "${r}"`,t);const a=e.view.getUint32(t+4+4+n)>>>0,o=(0,c.crc32)(e.view,t+4,4+n);return a!==o&&(0,i.handleWarning)(e,new i.DecodeWarning(`CRC for chunk "${r}" at offset 0x${t.toString(16)} doesn't match (0x${a.toString(16)} != 0x${o.toString(16)})`,t)),{offset:t,type:r,dataLength:n,isAncillary:b(r,0),isPrivate:b(r,1),isSafeToCopy:b(r,3)}}function b(e,t){return!!(32&e.charCodeAt(t))}},29:(e,t,n)=>{function r(e){return 1===e||2===e||4===e||8===e||16===e}function i(e,t){return 0===e&&t>=1&&t<=16||2===e&&t>=8&&t<=16||3===e&&t>=1&&t<=8||4===e&&t>=8&&t<=16||6===e&&t>=8&&t<=16}function a(e){return 0===e}function o(e){return 0===e||1===e}n.r(t),n.d(t,{isValidBitDepth:()=>r,isValidColorType:()=>i,isValidFilterMethod:()=>a,isValidInterlaceMethod:()=>o})},30:(e,t,n)=>{let r;function i(){if(r)return r;r=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=3988292384^t>>>1:t>>>=1;r[e]=t>>>0}return r}function a(e,t,n){return(4294967295^function(e,t,n,r){const a=i();let o=4294967295;for(let e=0;e<r;e++)o=a[255&(o^t.getUint8(n+e))]^o>>>8;return o}(0,e,t,n))>>>0}n.r(t),n.d(t,{getCrcTable:()=>i,crc32:()=>a})},26:(e,t,n)=>{function r(e,t,n){const r=e+t-n,i=Math.abs(r-e),a=Math.abs(r-t),o=Math.abs(r-n);return i<=a&&i<=o?e:a<=o?t:n}n.r(t),n.d(t,{paethPredicator:()=>r})}}]);