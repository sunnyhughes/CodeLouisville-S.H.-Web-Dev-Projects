"use strict";const a21_0xa352=["snapToPixelGrid","_topLeftInfo","_smoothingOption","screen","_ellipseTypeOption","_triangleTypeOption","linearDodgeAdd","_onOptionsChange","10333nymUjF","primaryColor","push","linearBurn","triangle","hasShapeLayer","_value","_outlineSizeOption","_updateShape","darken","var(--luna-focusColor)","ctrlKey","handleOptionUpdate","ArrowDown","shape","keyUp","overlay","event","pointerDown","diamond","blendMode","toString","primary","_shapeOrigin","fill","right"," x ","abs","shiftKey","currentState","add","info","shapeLayer","currentLayer","deserialize","allowUnchecking","_outlineModel","type","imageService","left","width","secondary","state","removeChild","Set Shape Type","zoom","clientWidth","options","16217FOtJwz","Move Shape","_isXFlipping","appendChild","value","setVisible","17wKpjhs","multiply","_getStyleString","onHistoryUpdateValue","_getStyleValue","onUpdate","Right-angle Triangle","Fill","_clearShapeLayer","_imageService","_isYFlipping","Smoothing","flipX","_model","pointerMove","setAttribute","move","new","_updateType","position","replace","_range","pointerUp","setRange","508301KamHoh","_renderer","Draw Shape","stroke","_refreshInfo","range","rightTriangle","Set Shape Color","_onRequestRender","312073QrNrbk","top","_sizeInfo","topleft","setValueFromHistoryChange","_cursorOrigin","_setupActiveTemporaryLayer","path","_onStateChange","append","_getLayer","buttons","_rightTriangleTypeOption","topright","Set Shape Outline Size","difference","taskWorkerService","key","get","onRequestRender","_cursorCurrent","_elementContainer","_isVisible","_blendModeOption","getPointerState","_styleOption","ArrowLeft","349063kkCzgV","order","1.1","paletteService","Diamond","offsetY","round","prepend","softLight","ellipse","sign","hasImage","162355LtjwaF","render","temporaryLayer","rgba","svg","1aENmNO","_finish","then","string-combo","pointerDownMove","createElementNS","strokeWidth","_directionalMoveElements","name","height","exclusion","createElement","div","classList","Shape size is ","_sc","Set Shape Blend Mode","_viewportService","Set Shape Style","_shapeOtherPoint","Outline","serialize","createDomRenderProgram","_updateColors","registerTemporaryLayer","_directionalMoveZones","flipY","1WhqodY","Outline Size","ArrowRight","_container","_onUpdate","min","display","set","clientHeight","Triangle","_diamondTypeOption","config","viewportService","_createRange","_svgPath2","commit","step","getOutlineSvgPath","bottomright","triggerRequestRender","_onHistoryUpdateValue","none","onStateChange","taskService","bottomleft","bottom","secondaryColor","Disable","devicePixelRatio","block","default","_setState","Fill and outline","2SdvMXK","getSnapSettingCoordsFromEvent","_getRange"," pixels tall","onHistoryUnset","bind","max","Resize Shape","_svgPath","transparent","onBeforeRunLayerTask","MoveImageRangeRenderer","fire","getInfo","_getTypeValue","_svg","absolute","_allowNewState","smoothing","lighten","ArrowUp","offsetX"," pixels wide by ","normal","outlineSize","_cursorOriginalShape","style","webpackChunkluna","_typeOptions","floor","visible","altKey","setColors","onLayerChange","Enable","move-handle","Style","size","register","197332chdCOn"],a21_0x5b78=function(t,s){return a21_0xa352[t-=388]},a21_0x599fbb=a21_0x5b78;!function(t,s){const e=a21_0x5b78;for(;;)try{if(242107===parseInt(e(607))*parseInt(e(613))+parseInt(e(511))*parseInt(e(446))+parseInt(e(559))*-parseInt(e(478))-parseInt(e(434))+parseInt(e(550))+parseInt(e(407))+-parseInt(e(398))*parseInt(e(451)))break;t.push(t.shift())}catch(s){t.push(t.shift())}}(a21_0xa352),(self[a21_0x599fbb(538)]=self[a21_0x599fbb(538)]||[])[a21_0x599fbb(561)]([[9113,504],{3315:(t,s,e)=>{const i=a21_0x599fbb;e.d(s,{d:()=>c});var h=e(5120),n=e(1003),r=e(1674);let o,a;class c extends h.JT{constructor(t,s,e,i){const h=a21_0x5b78;super(),this[h(481)]=t,this[h(622)]=s,this[h(468)]=e,this[h(626)]=i,this[h(435)]=2,this[h(526)]=document.createElementNS(r.q,h(450)),this._svg[h(389)]("version",h(436)),this[h(526)][h(537)][h(393)]=h(527),this[h(519)]=document[h(456)](r.q,h(414)),this[h(519)][h(537)][h(401)]=h(569),this._svgPath[h(537)].fill="transparent",this[h(519)][h(537)][h(457)]="1",this[h(492)]=document.createElementNS(r.q,h(414)),this[h(492)][h(537)][h(401)]=h(569),this._svgPath2[h(537)][h(583)]=h(520),this[h(492)][h(537)][h(457)]="1",this[h(526)][h(416)](this[h(519)],this[h(492)]),this._container[h(441)](this[h(526)]),this.register({dispose:()=>this[h(481)][h(602)](this[h(526)])})}async[i(447)](){const t=i,s=this._model.range,h=this[t(468)];if(!s)return void(this[t(526)].style[t(484)]=t(499));if(this[t(526)][t(537)][t(484)]=t(507),!this[t(622)][t(592)])return;if(o!==this._model.shape){let s;switch(o=this._model.shape,o){case t(578):s=e.e(727)[t(453)](e[t(516)](e,727));break;case t(443):s=e.e(8459)[t(453)](e.bind(e,8459));break;case t(563):s=e.e(4012)[t(453)](e[t(516)](e,4012));break;case t(404):s=e.e(6243)[t(453)](e[t(516)](e,6243));break;default:s=void 0}a=s?new Promise((async e=>{const i=t;e(new((await s)[i(508)]))})):s}const r=await a,c=Math.round(this[t(481)][t(605)]/2)-this._imageService[t(599)]/2*h[t(604)]+h.x*h[t(604)],l=Math[t(440)](this[t(481)][t(486)]/2)-this[t(622)].height/2*h[t(604)]+h.y*h[t(604)],p=(0,n.Oq)(s)*h[t(604)],g=(0,n.rY)(s)*h[t(604)];this[t(526)][t(537)].left=c+s[t(598)]*h[t(604)]-2+"px",this[t(526)][t(537)][t(408)]=l+s[t(408)]*h[t(604)]-2+"px",this[t(526)][t(389)](t(599),(p+5)[t(580)]()),this[t(526)][t(389)](t(460),(g+5)[t(580)]()),this[t(519)][t(389)]("d","M2.5 2.5 h"+p+" v"+g+" h"+-p+" v"+-g),r?.[t(495)]?(this._svgPath2[t(537)][t(484)]="block",this._svgPath2.setAttribute("d",r.getOutlineSvgPath(p,g,this[t(626)][t(625)],this[t(626)][t(477)]))):this._svgPath2[t(537)][t(484)]=t(499)}}},9865:(t,s,e)=>{e.d(s,{q:()=>n});var i=e(1815),h=e(5120);class n extends h.JT{constructor(){const t=a21_0x5b78;super(...arguments),this._onUpdate=this.register(new i.v),this[t(618)]=this._onUpdate[t(576)]}}},9904:(t,s,e)=>{const i=a21_0x599fbb;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>p,qv:()=>g});var h=e(1815),n=e(5120),r=e(2939);class o extends n.JT{constructor(t,s,e,i=!0){const n=a21_0x5b78;super(),this.name=t,this[n(445)]=s,this[n(565)]=e,this[n(594)]=i,this[n(596)]="boolean",this[n(498)]=this[n(549)](new h.v),this[n(616)]=this[n(498)][n(576)],this[n(482)]=this[n(549)](new h.v),this[n(618)]=this[n(482)][n(576)]}get[i(611)](){return this[i(565)]}set[i(611)](t){const s=i;this[s(565)]=t,this._onUpdate[s(523)](t)}[i(411)](t){const s=i;this[s(565)]=t,this[s(498)][s(523)](t)}}class a extends n.JT{constructor(t,s,e){const n=i;super(),this.name=t,this[n(606)]=s,this[n(565)]=e,this[n(596)]="string",this._onHistoryUpdateValue=this[n(549)](new h.v),this[n(616)]=this[n(498)][n(576)],this[n(482)]=this.register(new h.v),this[n(618)]=this[n(482)][n(576)]}get[i(611)](){return this[i(565)]}set[i(611)](t){const s=i;this[s(565)]=t,this[s(482)][s(523)](t)}setValueFromHistoryChange(t){const s=i;this[s(565)]=t,this._onHistoryUpdateValue[s(523)](t)}}class c extends n.JT{constructor(t,s,e){const n=i;super(),this[n(459)]=t,this[n(606)]=s,this._value=e,this[n(596)]=n(454),this[n(498)]=this.register(new h.v),this[n(616)]=this[n(498)][n(576)],this[n(482)]=this[n(549)](new h.v),this[n(618)]=this._onUpdate[n(576)]}get[i(611)](){return this._value}set[i(611)](t){const s=i;this[s(565)]=t,this[s(482)][s(523)](t)}[i(411)](t){const s=i;this._value=t,this[s(498)].fire(t)}}class l extends a{constructor(){const t=i;super("Blend Mode",["normal",t(394),"darken",t(614),"linearBurn",t(530),"screen",t(557),t(575),t(442),t(422),t(461)],t(534))}}class p extends n.JT{constructor(t,s,e,n){const r=i;super(),this[r(459)]=t,this._value=s,this[r(483)]=e,this[r(517)]=n,this[r(596)]="number",this[r(498)]=this.register(new h.v),this[r(616)]=this._onHistoryUpdateValue[r(576)],this._onUpdate=this.register(new h.v),this[r(618)]=this[r(482)][r(576)]}get[i(611)](){const t=i;return(0,r.u)(this[t(565)],this[t(517)],this[t(483)])}set[i(611)](t){const s=i;this._value=t,this[s(482)][s(523)](t)}setValueFromHistoryChange(t){const s=i;this[s(565)]=t,this[s(498)].fire(t)}}class g extends p{constructor(t,s,e,h){const n=i;super(t,s,e,h),this[n(596)]="number"}get[i(611)](){const t=i;return(0,r.u)(this[t(565)],this[t(517)],this[t(483)])}set[i(611)](t){const s=i;this[s(565)]=Math[s(540)](t),this[s(482)][s(523)](t)}}},504:(t,s,e)=>{const i=a21_0x599fbb;e.r(s),e.d(s,{MoveImageRangeRenderer:()=>r});var h=e(5120),n=e(1003);class r extends h.JT{constructor(t,s,e,i,h){const r=a21_0x5b78;super(),this[r(481)]=t,this[r(513)]=s,this[r(528)]=e,this._viewportService=i,this._imageService=h,this[r(435)]=2,this._directionalMoveElements=new Map,this[r(476)]=new Map,this[r(429)]=!0,this[r(428)]=document.createElement(r(463));const o=[r(410),"topright",r(502),"bottomright",r(408),"bottom","left","right"];for(const t of o){const s=document[r(462)](r(463));s[r(464)][r(589)](r(546),t),this[r(428)][r(610)](s),this._directionalMoveElements.set(t,s),this._directionalMoveZones[r(485)](t,(0,n.Pq)())}this[r(481)].appendChild(this._elementContainer),this[r(549)]({dispose:()=>{const t=r;this[t(481)].removeChild(this[t(428)])}})}[i(612)](t){const s=i;t!==this[s(429)]&&(this[s(428)].style[s(484)]=t?"":"none",this._isVisible=t)}[i(397)](t){}render(){const t=i,s=this[t(513)]();if(!s)return;const e=this[t(622)][t(592)];if(!e)return;const h=this[t(468)],n=Math[t(440)](this._container[t(605)]/2)-e[t(599)]/2*h.zoom,r=Math[t(440)](this[t(481)][t(486)]/2)-e.height/2*h[t(604)],o=n+(h.x+s[t(598)])*h.zoom,a=r+(h.y+s.top)*h.zoom,c=n+(h.x+s[t(584)])*h[t(604)],l=r+(h.y+s[t(503)])*h[t(604)],p=Math[t(440)]((o+c)/2),g=Math[t(440)]((a+l)/2),u=10*window[t(506)],_={left:Math.min(o+u,Math[t(517)](o,p-u)),top:Math[t(483)](a+u,Math[t(517)](a,g-u)),right:Math[t(517)](c-u,Math.min(c,p+u)),bottom:Math[t(517)](l-u,Math[t(483)](l,g+u))},d={left:o-u,top:a-u,right:c+u,bottom:l+u},f=this[t(476)].get(t(410));f[t(598)]=d.left,f[t(584)]=_[t(598)],f[t(408)]=d[t(408)],f[t(503)]=_.top;const y=this._directionalMoveElements.get(t(410));y[t(537)][t(598)]=o+"px",y.style[t(408)]=a+"px";const m=this[t(476)][t(425)](t(420));m.left=_[t(584)],m.right=d[t(584)],m[t(408)]=d[t(408)],m[t(503)]=_[t(408)];const v=this[t(458)][t(425)](t(420));v.style.left=c+"px",v[t(537)][t(408)]=a+"px";const b=this._directionalMoveZones.get(t(502));b[t(598)]=d.left,b[t(584)]=_[t(598)],b[t(408)]=_[t(503)],b[t(503)]=d[t(503)];const S=this._directionalMoveElements[t(425)]("bottomleft");S[t(537)][t(598)]=o+"px",S[t(537)][t(408)]=l+"px";const w=this[t(476)][t(425)](t(496));w.left=_[t(584)],w[t(584)]=d[t(584)],w[t(408)]=_[t(503)],w.bottom=d[t(503)];const x=this[t(458)][t(425)]("bottomright");x[t(537)][t(598)]=c+"px",x.style[t(408)]=l+"px";const M=this[t(476)][t(425)](t(408));M[t(598)]=_[t(598)],M[t(584)]=_[t(584)],M[t(408)]=d[t(408)],M[t(503)]=_[t(408)];const O=this[t(458)][t(425)](t(408));O.style[t(598)]=p+"px",O[t(537)][t(408)]=a+"px";const C=this._directionalMoveZones[t(425)](t(503));C[t(598)]=_[t(598)],C[t(584)]=_[t(584)],C.top=_.bottom,C[t(503)]=d.bottom;const L=this._directionalMoveElements[t(425)](t(503));L[t(537)].left=p+"px",L[t(537)].top=l+"px";const k=this[t(476)][t(425)](t(598));k.left=d.left,k[t(584)]=_[t(598)],k[t(408)]=_[t(408)],k[t(503)]=_[t(503)];const R=this[t(458)][t(425)](t(598));R.style.left=o+"px",R.style.top=g+"px";const T=this._directionalMoveZones[t(425)](t(584));T.left=_.right,T[t(584)]=d[t(584)],T[t(408)]=_[t(408)],T[t(503)]=_[t(503)];const I=this[t(458)][t(425)](t(584));I.style[t(598)]=c+"px",I.style.top=g+"px"}[i(431)](t){const s=i;if(!this[s(513)]())return this[s(528)]?s(391):s(390);for(const[e,i]of this[s(476)])if((0,n.RB)(i,t[s(532)],t.offsetY))return e;const e=this[s(476)].get("topleft"),h=this[s(476)][s(425)](s(496)),r={left:e[s(598)],top:e[s(408)],right:h[s(584)],bottom:h[s(503)]};return(0,n.RB)(r,t[s(532)],t[s(439)])?s(390):this[s(528)]?s(391):s(390)}}},9113:(t,s,e)=>{const i=a21_0x599fbb;e.r(s),e.d(s,{default:()=>f});var h=e(8752),n=e(1815),r=e(5120),o=e(2939),a=e(7896),c=e(1003),l=e(3670),p=e(3315),g=e(9865),u=e(9904),_=e(504);class d extends r.JT{constructor(t){const s=a21_0x5b78;super(),this[s(466)]=t,this.id=s(573),this[s(601)]=s(391),this[s(595)]=new y((()=>this[s(591)])),this[s(555)]=new u.FV("Ellipse",!0,!0,!1),this[s(556)]=new u.FV(s(487),!0,!1,!1),this[s(419)]=new u.FV(s(619),!0,!1,!1),this._diamondTypeOption=new u.FV(s(438),!0,!1),this._blendModeOption=new u.Jp,this._smoothingOption=new u.FV(s(624),!0,!0),this[s(432)]=new u.rP(s(547),[s(471),"Fill",s(510)],"Outline"),this[s(566)]=new u.qv(s(479),1,1,1e3),this[s(539)]=[this[s(555)],this._triangleTypeOption,this[s(419)],this[s(488)]],this[s(606)]=[...this[s(539)],this[s(430)],this._styleOption,this._smoothingOption,this[s(566)]],this[s(409)]=new m,this[s(552)]=new v,this[s(590)]=[this._topLeftInfo,this._sizeInfo],this._onRequestRender=this.register(new n.v),this[s(426)]=this[s(406)][s(576)],this._onStateChange=this[s(549)](new n.v),this[s(500)]=this._onStateChange[s(576)],this[s(549)](this[s(466)][s(437)][s(618)]((()=>this[s(474)]()))),this[s(549)](this[s(432)][s(618)]((t=>this[s(591)]?.[s(571)](this._getStyleValue(),s(537),s(469))))),this[s(549)](this[s(553)].onUpdate((t=>this[s(591)]?.[s(571)](t,"smoothing",s(t?545:505)+" Shape Smoothing")))),this.register(this[s(566)][s(618)]((t=>this[s(591)]?.[s(571)](t,s(535),s(421),!0)))),this[s(549)](this[s(430)][s(618)]((t=>this[s(591)]?.[s(571)](t,s(579),s(467)))));for(const t of this[s(539)])this[s(549)](t[s(618)]((()=>this[s(392)](t))));this[s(549)](this._sc.imageService[s(544)]((()=>this._finish()))),this[s(549)](this[s(466)][s(501)][s(521)]((()=>this[s(452)]()))),this[s(549)]({dispose:()=>this[s(452)]()}),this[s(549)](this[s(466)][s(597)].onTemporaryLayerRegistered((t=>this[s(413)](t)))),this[s(466)][s(597)][s(592)]?.[s(448)]&&this[s(413)](this[s(466)][s(597)].currentLayer[s(448)])}_setupActiveTemporaryLayer(t){const s=a21_0x5b78;t[s(596)]===s(573)&&(this[s(591)]=t,this[s(549)](this.shapeLayer.onCommit((()=>this[s(621)]()))),this.register(this.shapeLayer.onHistoryAction((()=>{this[s(558)](),this._refreshInfo()}))),this[s(549)](this[s(591)][s(515)]((()=>this[s(621)]()))),this._shapeOrigin=[this.shapeLayer[s(588)][s(403)][s(598)],this[s(591)][s(588)].range[s(408)]],this[s(470)]=[this[s(591)][s(588)][s(403)].right,this[s(591)][s(588)][s(403)][s(503)]],this._renderer?.[s(612)](!0),this[s(406)][s(523)]())}keyDown(t,s){const e=a21_0x5b78;if(this[e(567)](t,s),this[e(591)]&&!s&&[e(531),e(433),e(572),e(480)].includes(t[e(424)])){const s=(0,c.BN)(this[e(591)][e(588)][e(403)]),i=(a.V5?t.metaKey:t[e(570)])?10:1;switch(t[e(424)]){case e(531):(0,c.Hd)(s,s[e(598)],s[e(408)]-i);break;case e(572):(0,c.Hd)(s,s.left,s[e(408)]+i);break;case e(433):(0,c.Hd)(s,s[e(598)]-i,s.top);break;case e(480):(0,c.Hd)(s,s.left+i,s[e(408)])}this[e(591)][e(588)][e(403)]=s,this[e(591)][e(494)]("Shift Shape")}}[i(574)](t,s){this[i(567)](t,s)}async[i(577)](t){const s=i,e=this[s(466)][s(597)][s(592)];if(!e)return;const h=!(1&t[s(418)]),n=this[s(466)][s(490)][s(512)](t,this[s(553)][s(611)]);if(this._cursorOrigin=n,this[s(427)]=n,!n)return;if(this[s(623)]=!1,this[s(609)]=!1,"new"!==this.state)return this._cursorOriginalShape=(0,c.BN)(this[s(591)]?.[s(588)][s(403)]),void(this[s(536)]&&((this[s(601)]===s(408)||"topleft"===this.state||this[s(601)]===s(420))&&(this[s(412)][1]=this[s(536)][s(408)]),(this.state===s(503)||"bottomleft"===this.state||this.state===s(496))&&(this[s(412)][1]=this[s(536)][s(503)]-1),(this[s(601)]===s(598)||this[s(601)]===s(410)||this[s(601)]===s(502))&&(this[s(412)][0]=this[s(536)][s(598)]),("right"===this[s(601)]||this.state===s(420)||this[s(601)]===s(496))&&(this[s(412)][0]=this[s(536)][s(584)]-1)));await this[s(452)](),this[s(582)]=n,this._shapeOtherPoint=n;const r=this._createRange(this[s(582)],this[s(470)]),o=this[s(525)]();this[s(536)]=(0,c.BN)(r),this[s(591)]=new l.n(e,{invertColors:h},{type:o,range:r,primaryColor:this[s(466)].paletteService[s(581)][s(449)],secondaryColor:this[s(466)][s(437)][s(600)].rgba,blendMode:this[s(430)][s(611)],outlineSize:this[s(566)][s(611)],style:this._getStyleValue(),smoothing:this[s(553)][s(611)],flipX:!1,flipY:!1},this[s(466)].historyService,this[s(466)].selectionService,this[s(466)][s(423)]),this[s(402)](),await e[s(475)](this[s(591)]),this._renderer?.[s(612)](!1),this[s(591)][s(497)]()}[i(396)](t,s){const e=i;if(this[e(601)]===e(391)&&(s||this[e(427)]?.[0]===this[e(412)]?.[0]&&this._cursorCurrent?.[1]===this[e(412)]?.[1]))return this[e(591)]&&this[e(466)][e(597)][e(592)]?.unregisterTemporaryLayer(this[e(591)]),this[e(591)]?.dispose(),void this[e(621)]();if(this[e(591)]){let t;switch(this.state){case e(391):t=e(400);break;case e(390):t=e(608);break;case e(410):case e(420):case"bottomleft":case e(496):case e(408):case e(598):case e(584):case e(503):t=e(518)}this[e(591)][e(494)](t)}this[e(399)]?.[e(612)](!0),this[e(388)](t,!1)}[i(455)](t){const s=i;if(!(this[s(582)]&&this[s(470)]&&this[s(412)]&&this[s(536)]))return;if(!this[s(466)].imageService.currentLayer)return;const e=this[s(466)][s(490)][s(512)](t,this[s(553)][s(611)]);if(this[s(427)]&&e[0]===this[s(427)][0]&&e[1]===this[s(427)][1])return;if(this[s(427)]=e,!this[s(591)])return;const h=this[s(427)][0]-this._cursorOrigin[0],n=this._cursorCurrent[1]-this._cursorOrigin[1];switch(this[s(601)]){case"new":return this[s(470)]=e,void this[s(567)](t,!0);case s(390):{const t=(0,c.BN)(this[s(536)]);t[s(598)]+=h,t[s(408)]+=n,t[s(584)]+=h,t[s(503)]+=n,(0,c.FJ)(t),this[s(591)].currentState[s(403)]=t;break}default:{let e;if(!t[s(587)]||this[s(601)]!==s(410)&&this[s(601)]!==s(420)&&this[s(601)]!==s(502)&&this[s(601)]!==s(496))e=(0,c.BN)(this._cursorOriginalShape),(this[s(601)]===s(408)||"topleft"===this.state||this.state===s(420))&&(e[s(408)]+=n,e[s(503)]<=e[s(408)]&&e[s(408)]++,t[s(542)]&&(e[s(503)]-=n)),(this[s(601)]===s(503)||this[s(601)]===s(502)||"bottomright"===this[s(601)])&&(e[s(503)]+=n,e.bottom<=e.top&&e[s(503)]--,t[s(542)]&&(e.top-=n)),(this[s(601)]===s(598)||this[s(601)]===s(410)||this[s(601)]===s(502))&&(e[s(598)]+=h,e[s(584)]<=e[s(598)]&&e[s(598)]++,t[s(542)]&&(e[s(584)]-=h)),(this.state===s(584)||this.state===s(420)||this[s(601)]===s(496))&&(e[s(584)]+=h,e.right<=e[s(598)]&&e[s(584)]--,t[s(542)]&&(e[s(598)]-=h));else{const i=(0,c.n3)(this._cursorOriginalShape);let r;switch(e=(0,c.BN)(this[s(536)]),this.state){case s(410):r=(1/i*-h-n)/2,e[s(598)]-=r*i,e[s(408)]-=r,t[s(542)]&&(e[s(584)]+=r*i,e[s(503)]+=r);break;case s(420):r=(h*(1/i)-n)/2,e.right+=r*i,e[s(408)]-=r,t.altKey&&(e[s(598)]-=r*i,e.bottom+=r);break;case s(502):r=(1/i*-h+n)/2,e[s(598)]-=r*i,e[s(503)]+=r,t[s(542)]&&(e[s(584)]+=r*i,e[s(408)]-=r);break;case s(496):r=(h*(1/i)+n)/2,e[s(584)]+=r*i,e[s(503)]+=r,t[s(542)]&&(e[s(598)]-=r*i,e.top-=r)}}(!this[s(553)][s(611)]||this[s(466)].configService[s(489)][s(551)])&&(e[s(598)]=Math[s(440)](e[s(598)]),e[s(408)]=Math[s(440)](e.top),e.right=Math[s(440)](e[s(584)]),e[s(503)]=Math[s(440)](e[s(503)]));const i=this[s(609)];this[s(609)]=this[s(536)][s(584)]<=this[s(536)][s(598)]!=e[s(584)]<=e[s(598)],this[s(609)]!==i&&(this[s(591)][s(588)].flipX=!this.shapeLayer[s(588)].flipX);const r=this[s(623)];this[s(623)]=this[s(536)].bottom<=this[s(536)][s(408)]!=e[s(503)]<=e[s(408)],this[s(623)]!==r&&(this.shapeLayer[s(588)].flipY=!this[s(591)][s(588)][s(477)]),this[s(591)].currentState[s(403)]=(0,c.FJ)(e);break}}this._refreshInfo(),this[s(591)][s(497)]()}[i(388)](t,s){const e=i;this[e(399)]&&!s&&this._setState(this._renderer[e(431)](t))}[i(567)](t,s){const e=i;if(!(s&&this[e(591)]&&this._shapeOrigin&&this[e(470)]&&this[e(601)]===e(391)))return;let h=this._shapeOrigin[0]-this[e(470)][0],n=this[e(582)][1]-this[e(470)][1];t[e(587)]&&(Math.abs(h)>Math[e(586)](n)?h=n*(Math[e(444)](h)!==Math.sign(n)?-1:1):n=h*(Math[e(444)](h)!==Math[e(444)](n)?-1:1));const r=t[e(542)]?[this[e(582)][0]+h,this[e(582)][1]+n]:this[e(582)];this[e(591)][e(588)][e(403)]=this[e(491)](r,[this[e(582)][0]-h,this._shapeOrigin[1]-n]),this[e(402)](),this[e(591)][e(497)]()}[i(474)](){const t=i;if(!this[t(591)])return;const s=this[t(466)].paletteService.primary.rgba,e=this._sc.paletteService[t(600)][t(449)];(0,h.WC)(this[t(591)][t(588)][t(560)],s)&&(0,h.WC)(this[t(591)][t(588)][t(504)],e)||(this[t(591)][t(588)][t(560)]=s,this[t(591)][t(588)].secondaryColor=e,this[t(591)][t(494)](t(405),!0),this[t(591)][t(497)]())}[i(617)](){const t=i;switch(this._styleOption[t(611)]){case"Outline":return 1;case t(620):return 2;case"Fill and outline":return 3}}[i(615)](t){const s=i;switch(t){case 1:return s(471);case 2:return"Fill";case 3:return s(510)}}async[i(392)](t){const s=i;for(const e of this._typeOptions)e!==t&&e[s(411)](!1);const e=this[s(525)]();this[s(591)]&&this[s(591)][s(588)][s(596)]!==e&&(this[s(591)][s(588)][s(596)]=e,this[s(591)][s(494)](s(603)),this[s(591)].triggerRequestRender())}[i(525)](){const t=i;return this[t(488)].value?t(578):this._triangleTypeOption[t(611)]?"triangle":this[t(419)][t(611)]?t(404):t(443)}_onOptionsChange(){const t=i;this[t(591)]&&(this[t(430)][t(411)](this[t(591)][t(588)].blendMode),this._outlineSizeOption[t(411)](this[t(591)][t(588)][t(535)]),this[t(432)].setValueFromHistoryChange(this[t(615)](this[t(591)][t(588)][t(537)])),this[t(555)].setValueFromHistoryChange(this.shapeLayer[t(588)][t(596)]===t(443)),this[t(556)][t(411)](this[t(591)].currentState[t(596)]===t(563)),this[t(419)][t(411)](this[t(591)][t(588)].type===t(404)),this[t(488)][t(411)](this[t(591)].currentState.type===t(578)),this[t(553)].setValueFromHistoryChange(this.shapeLayer[t(588)][t(529)]),(!(0,h.WC)(this._sc[t(437)][t(581)][t(449)],this[t(591)][t(588)][t(560)])||!(0,h.WC)(this[t(466)][t(437)][t(600)][t(449)],this[t(591)][t(588)][t(504)]))&&this._sc[t(437)][t(543)](this[t(591)][t(588)][t(560)],this.shapeLayer[t(588)][t(504)]))}async[i(452)](){const t=i;await(this[t(591)]?.[t(493)]()),this[t(621)]()}[i(621)](){const t=i;this[t(591)]=void 0,this[t(536)]=void 0,this[t(399)]?.[t(612)](!1),this[t(402)](),this._onRequestRender.fire()}_createRange(t,s){return(0,c.tH)(t[0],t[1],s[0],s[1])}[i(402)](){const t=i;this._sizeInfo[t(403)]=this[t(591)]?.[t(588)][t(403)],this._topLeftInfo[t(403)]=this[t(591)]?.[t(588)][t(403)]}[i(509)](t){const s=i;this[s(601)]!==t&&(this[s(601)]=t,this[s(415)][s(523)]())}[i(473)](t){const s=i;return this[s(399)]=new(_[s(522)])(t,(()=>this.shapeLayer?.[s(588)][s(403)]),!0,this[s(466)][s(490)],this[s(466)][s(597)]),this[s(399)][s(612)](this[s(601)]!==s(391)),[new p.d(t,this._sc[s(597)],this[s(466)][s(490)],this[s(595)]),this[s(399)]]}[i(472)](){const t=i;return{state:this[t(601)],hasShapeLayer:!!this[t(591)]}}[i(593)](t){const s=i;t[s(564)]?this._renderer?.setVisible(!0):this._clearShapeLayer(),this._setState(t[s(601)]),this[s(558)](),this[s(402)]()}}const f=d;class y{constructor(t){this[i(417)]=t}get[i(403)](){const t=i;return this._getLayer()?.[t(588)][t(403)]}get shape(){const t=i;return this[t(417)]()?.currentState[t(596)]}get[i(625)](){const t=i;return this._getLayer()?.[t(588)][t(625)]}get[i(477)](){const t=i;return this[t(417)]()?.currentState[t(477)]}}class m extends g.q{constructor(){const t=i;super(...arguments),this[t(596)]=t(548)}get[i(403)](){return this._range}set[i(403)](t){const s=i;this[s(395)]=t,this[s(482)][s(523)]()}get[i(541)](){return!!this[i(395)]}[i(524)](){const t=i;if(!this[t(395)])return"";const s=(0,o.s)((0,c.Oq)(this._range),2),e=(0,o.s)((0,c.rY)(this._range),2);return s+t(585)+e}getDetailedInfo(){const t=i;if(!this._range)return"";const s=(0,o.s)((0,c.Oq)(this[t(395)]),2),e=(0,o.s)((0,c.rY)(this[t(395)]),2);return t(465)+s+t(533)+e+t(514)}}class v extends g.q{constructor(){const t=i;super(...arguments),this[t(596)]=t(410)}get[i(403)](){return this[i(395)]}set[i(403)](t){const s=i;this[s(395)]=t,this._onUpdate[s(523)]()}get visible(){return!!this[i(395)]}getInfo(){const t=i;return this[t(395)]?(0,o.s)(this[t(395)].left,2)+", "+(0,o.s)(this[t(395)][t(408)],2):""}getDetailedInfo(){const t=i;return this[t(395)]?"Shape top left position is x="+(0,o.s)(this[t(395)].left,2)+" y="+(0,o.s)(this[t(395)][t(408)],2):""}}},1674:(t,s,e)=>{e.d(s,{q:()=>i});const i="http://www.w3.org/2000/svg"}}]);