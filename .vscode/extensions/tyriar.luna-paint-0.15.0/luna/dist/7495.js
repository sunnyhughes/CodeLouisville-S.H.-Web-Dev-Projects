"use strict";const a25_0x5e98=["setUint16","width","headerSize"," with ","verticalResolution","-bit image contains alpha channel, increasing to 32-bit","push","keys","webpackChunkluna","1619vNXbUC","reduce","821139cvlhCc","error","subarray","height","data"," color count","imageSize","colorPlaneCount","length","toRGBA","image/png","entries","bitmapHeight","ceil","toBGRA","Cannot write bmp with bits per pixel ","307rbxWTE","colors","Cannot write 1, 4 or 8-bit bmps without color table","1309878XMPRsc","1JUtvaz","bitmapWidth","pow","paletteColorCount","importantColorCount","bitsPerPixel","buffer","706202MThkcR","map","all","from","mimeType","set","horizontalResolution","262197wXVUVN","Color Table","setUint8","size","-bit image contains more colors than bits per pixel allows, increasing to 24-bit","setUint32","Writing only 32, 24, 8, 4 and 1-bit bmps is supported currently","284796DLjSDM","bitness","table","get","slice","417770rYonFo","No support for writing icos with ","warn","has","split","Cannot write an .ico with 0 images"],a25_0xdccd=function(t,e){return a25_0x5e98[t-=256]},a25_0x559374=a25_0xdccd;!function(t,e){const n=a25_0xdccd;for(;;)try{if(568685===-parseInt(n(278))+parseInt(n(283))+-parseInt(n(300))+parseInt(n(264))+-parseInt(n(298))*parseInt(n(316))+parseInt(n(257))*-parseInt(n(271))+parseInt(n(256)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a25_0x5e98),(self.webpackChunkluna=self[a25_0x559374(297)]||[])[a25_0x559374(295)]([[7495],{9094:(t,e,n)=>{var o,i;n.d(e,{P:()=>o,V:()=>i}),(o||(o={}))[a25_0xdccd(309)]=function(t,e){let n=0;const o=4*e;for(let e=0;e<o;e+=4)n=t[e],t[e]=t[e+2],t[e+2]=n},(i||(i={}))[a25_0xdccd(314)]=function(t,e){return o[a25_0xdccd(309)](t,e)}},4085:(t,e,n)=>{function o(t,e){return Math[a25_0xdccd(313)](t/e)*e}n.d(e,{g:()=>o})},7495:(t,e,n)=>{n.r(e),n.d(e,{writeIco:()=>l,writeIcoEntries:()=>u,writeIcoHeader:()=>d,writeIcoImageData:()=>h});var o=n(6815),i=n(9094),r=n(4085);function a(t,e,n){const o=a25_0xdccd,i=(0,r.g)(t.bitmapWidth*t[o(262)],32)/8,a=new Uint8Array(e[o(303)]*i);if(0===n[o(274)])return a;let c=0,s=0,l=0;for(let r=0;r<t[o(312)];r++){const d=r*i;for(let i=0;i<t.bitmapWidth;i++){c=4*((e[o(303)]-r-1)*e[o(290)]+i);const u=e[o(304)][c]+","+e[o(304)][c+1]+","+e[o(304)][c+2]+","+e[o(304)][c+3];switch(t.bitsPerPixel){case 1:s=d+Math.floor(i/8),l=7-i%8;break;case 4:s=d+Math.floor(i/2),l=i%2==0?4:0;break;case 8:s=d+i;break;default:throw new Error("Unexpected bits per pixel "+t[o(262)])}a[s]|=(n[o(281)](u)||0)<<l}}return a}function c(t){const e=a25_0xdccd,n=t[e(299)](((t,e)=>t+e.length),0),o=new Uint8Array(n);let i=0;for(const n of t)o[e(269)](n,i),i+=n.length;return o}const s=[1,4,8,16,24,32];async function l(t){const e=a25_0xdccd,n=d(t[e(308)]),o=t[e(265)]((t=>h(t))),i=await Promise[e(266)](o),r=u(t,i[e(265)]((t=>t[e(260)])),i[e(265)]((t=>t.bitsPerPixel)));let a=n[e(308)]+r[e(299)](((t,n)=>t+n[e(308)]),0);for(const[t,n]of r[e(311)]()){const o=new DataView(n[e(263)]);o[e(276)](8,i[t].data.length,!0),o[e(276)](12,a,!0),a+=i[t][e(304)].length}return c([n,...r,...i.map((t=>t[e(304)]))])}function d(t){const e=a25_0xdccd;if(0===t)throw new Error(e(288));const n=new Uint8Array(6),o=new DataView(n[e(263)]);return o[e(289)](2,1,!0),o[e(289)](4,t,!0),n}function u(t,e,n){const o=a25_0xdccd,i=[];for(let r=0;r<t.length;r++){const a=t[r],c=new Uint8Array(16),s=new DataView(c[o(263)]);s[o(273)](0,a[o(290)]>255?0:a.width),s[o(273)](1,a[o(303)]>255?0:a.height),s[o(273)](2,e[r]||0),s[o(273)](4,1),s[o(289)](6,n[r],!0),i[o(295)](c)}return i}async function h(t){const e=a25_0xdccd;return t[e(268)]&&t.mimeType!==e(310)?function(t){const e=a25_0xdccd;let n=t[e(279)]<=24?function(t){const e=a25_0xdccd,n=new Map;let o=!1,i=0;for(let r=0;r<t[e(303)];r++)for(let a=0;a<t[e(290)];a++){const c=4*(r*t.width+a);if(i=t[e(304)][c+3],0===i)continue;255!==i&&(o=!0);const s=t[e(304)][c]+","+t[e(304)][c+1]+","+t[e(304)][c+2]+","+i;!n[e(286)](s)&&n[e(269)](s,n[e(274)])}return{colors:n,usesAlphaChannel:o}}(t):void 0;n&&(t[e(279)]<24&&n[e(317)][e(274)]>Math[e(259)](2,t.bitness)&&(console[e(285)](t[e(279)]+e(275)),t[e(279)]=24),n.usesAlphaChannel&&(console.warn(t.bitness+e(294)),t[e(279)]=32),t[e(279)]>=24&&(n=void 0));let o=t.bitness;!s.includes(t[e(279)])&&(console[e(285)](e(284)+t[e(279)]+" bitness, falling back to 32-bit"),o=32);const r={type:1,headerSize:40,bitmapWidth:t.width,bitmapHeight:t[e(303)],colorPlaneCount:1,bitsPerPixel:o,compression:0,imageSize:0,horizontalResolution:0,verticalResolution:0,paletteColorCount:0,importantColorCount:0},l=n?function(t,e,n){const o=a25_0xdccd;if(e[o(274)]>Math.pow(2,t[o(262)]))throw console[o(301)](o(272),Array[o(267)](e[o(296)]())),new Error(o(315)+t[o(262)]+o(292)+e.size+o(305));const i=new Uint8Array(4*e[o(274)]);for(const[t,n]of e[o(311)]()){const[e,r,a,c]=t[o(287)](",").map((t=>parseInt(t)));i[4*n]=a,i[4*n+1]=r,i[4*n+2]=e}return o(260)in t&&(t[o(260)]=e[o(274)]),{data:i,table:e}}(r,n[e(317)]):void 0,d=function(t,e,n){const o=a25_0xdccd;switch(t.bitsPerPixel){case 1:case 4:case 8:if(!n)throw new Error(o(318));return a(t,e,n[o(280)]);case 24:return function(t,e){const n=a25_0xdccd,o=3*e[n(290)],i=new Uint8Array(o*e[n(303)]);let r=0;for(let a=0;a<t[n(312)];a++){const c=a*o;for(let o=0;o<t[n(258)];o++)r=4*((e.height-a-1)*e.width+o),i[c+3*o]=e[n(304)][r+2],i[c+3*o+1]=e[n(304)][r+1],i[c+3*o+2]=e[n(304)][r]}return i}(t,e);case 32:return function(t,e){const n=a25_0xdccd,o=e[n(304)][n(282)]();i.V[n(314)](o,t[n(258)]*t.bitmapHeight);const r=new Uint8Array(o),a=4*t.bitmapWidth;let c=0;for(let e=0;e<t[n(312)];e++)c=t[n(312)]-(e+1),r[n(269)](o[n(302)](c*a,(c+1)*a),e*a);return r}(t,e);default:throw new Error(o(277))}}(r,t,l),u=a({type:1,headerSize:40,bitmapWidth:t[e(290)],bitmapHeight:t[e(303)],colorPlaneCount:1,bitsPerPixel:1,compression:0,imageSize:0,horizontalResolution:0,verticalResolution:0,paletteColorCount:0,importantColorCount:0},t,function(t){const e=a25_0xdccd,n=new Map;for(let o=0;o<t[e(303)];o++)for(let i=0;i<t[e(290)];i++){const r=4*(o*t[e(290)]+i),a=t[e(304)][r]+","+t[e(304)][r+1]+","+t[e(304)][r+2]+","+t[e(304)][r+3];255===t[e(304)][r+3]?n[e(269)](a,0):n.set(a,1)}return n}(t));return{data:c([(h={...r,bitmapHeight:2*t.height,imageSize:d[e(308)]+u[e(308)]},function(t){const e=a25_0xdccd,n=new Uint8Array(40),o=new DataView(n[e(263)]);return o.setUint32(0,t[e(291)],!0),o.setUint32(4,t[e(258)],!0),o[e(276)](8,t[e(312)],!0),o[e(289)](12,t[e(307)],!0),o.setUint16(14,t[e(262)],!0),o[e(289)](16,t.compression,!0),o[e(289)](20,t[e(306)],!0),o.setUint16(24,t[e(270)],!0),o[e(289)](28,t[e(293)],!0),o.setUint16(32,t[e(260)],!0),o[e(289)](36,t[e(261)],!0),n}(h)),l?l[e(304)]:new Uint8Array(0),d,u]),paletteColorCount:r[e(260)],bitsPerPixel:o};var h}(t):async function(t){const e=a25_0xdccd;return{data:(await(0,o.Vx)({data:t[e(304)],width:t[e(290)],height:t[e(303)]})).data,bitsPerPixel:32}}(t)}}}]);