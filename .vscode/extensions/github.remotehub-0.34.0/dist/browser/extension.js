var Eb=Object.defineProperty;var l=(K,_)=>Eb(K,"name",{value:_,configurable:!0});(()=>{var __webpack_modules__={6232:(K,_,m)=>{"use strict";const C=m(8641),B=m(8692),$=m(1474),V=m(5870),j=l((F,g={})=>{let x=[];if(Array.isArray(F))for(let b of F){let y=j.create(b,g);Array.isArray(y)?x.push(...y):x.push(y)}else x=[].concat(j.create(F,g));return g&&g.expand===!0&&g.nodupes===!0&&(x=[...new Set(x)]),x},"braces");j.parse=(F,g={})=>V(F,g),j.stringify=(F,g={})=>C(typeof F=="string"?j.parse(F,g):F,g),j.compile=(F,g={})=>(typeof F=="string"&&(F=j.parse(F,g)),B(F,g)),j.expand=(F,g={})=>{typeof F=="string"&&(F=j.parse(F,g));let x=$(F,g);return g.noempty===!0&&(x=x.filter(Boolean)),g.nodupes===!0&&(x=[...new Set(x)]),x},j.create=(F,g={})=>F===""||F.length<3?[F]:g.expand!==!0?j.compile(F,g):j.expand(F,g),K.exports=j},8692:(K,_,m)=>{"use strict";const C=m(1516),B=m(3596),$=l((V,j={})=>{let F=l((g,x={})=>{let b=B.isInvalidBrace(x),y=g.invalid===!0&&j.escapeInvalid===!0,S=b===!0||y===!0,k=j.escapeInvalid===!0?"\\":"",T="";if(g.isOpen===!0||g.isClose===!0)return k+g.value;if(g.type==="open")return S?k+g.value:"(";if(g.type==="close")return S?k+g.value:")";if(g.type==="comma")return g.prev.type==="comma"?"":S?g.value:"|";if(g.value)return g.value;if(g.nodes&&g.ranges>0){let Z=B.reduce(g.nodes),te=C(...Z,{...j,wrap:!1,toRegex:!0});if(te.length!==0)return Z.length>1&&te.length>1?`(${te})`:te}if(g.nodes)for(let Z of g.nodes)T+=F(Z,g);return T},"walk");return F(V)},"compile");K.exports=$},7007:K=>{"use strict";K.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(K,_,m)=>{"use strict";const C=m(1516),B=m(8641),$=m(3596),V=l((F="",g="",x=!1)=>{let b=[];if(F=[].concat(F),g=[].concat(g),!g.length)return F;if(!F.length)return x?$.flatten(g).map(y=>`{${y}}`):g;for(let y of F)if(Array.isArray(y))for(let S of y)b.push(V(S,g,x));else for(let S of g)x===!0&&typeof S=="string"&&(S=`{${S}}`),b.push(Array.isArray(S)?V(y,S,x):y+S);return $.flatten(b)},"append"),j=l((F,g={})=>{let x=g.rangeLimit===void 0?1e3:g.rangeLimit,b=l((y,S={})=>{y.queue=[];let k=S,T=S.queue;for(;k.type!=="brace"&&k.type!=="root"&&k.parent;)k=k.parent,T=k.queue;if(y.invalid||y.dollar){T.push(V(T.pop(),B(y,g)));return}if(y.type==="brace"&&y.invalid!==!0&&y.nodes.length===2){T.push(V(T.pop(),["{}"]));return}if(y.nodes&&y.ranges>0){let U=$.reduce(y.nodes);if($.exceedsLimit(...U,g.step,x))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let q=C(...U,g);q.length===0&&(q=B(y,g)),T.push(V(T.pop(),q)),y.nodes=[];return}let Z=$.encloseBrace(y),te=y.queue,de=y;for(;de.type!=="brace"&&de.type!=="root"&&de.parent;)de=de.parent,te=de.queue;for(let U=0;U<y.nodes.length;U++){let q=y.nodes[U];if(q.type==="comma"&&y.type==="brace"){U===1&&te.push(""),te.push("");continue}if(q.type==="close"){T.push(V(T.pop(),te,Z));continue}if(q.value&&q.type!=="open"){te.push(V(te.pop(),q.value));continue}q.nodes&&b(q,y)}return te},"walk");return $.flatten(b(F))},"expand");K.exports=j},5870:(K,_,m)=>{"use strict";const C=m(8641),{MAX_LENGTH:B,CHAR_BACKSLASH:$,CHAR_BACKTICK:V,CHAR_COMMA:j,CHAR_DOT:F,CHAR_LEFT_PARENTHESES:g,CHAR_RIGHT_PARENTHESES:x,CHAR_LEFT_CURLY_BRACE:b,CHAR_RIGHT_CURLY_BRACE:y,CHAR_LEFT_SQUARE_BRACKET:S,CHAR_RIGHT_SQUARE_BRACKET:k,CHAR_DOUBLE_QUOTE:T,CHAR_SINGLE_QUOTE:Z,CHAR_NO_BREAK_SPACE:te,CHAR_ZERO_WIDTH_NOBREAK_SPACE:de}=m(7007),U=l((q,X={})=>{if(typeof q!="string")throw new TypeError("Expected a string");let P=X||{},z=typeof P.maxLength=="number"?Math.min(B,P.maxLength):B;if(q.length>z)throw new SyntaxError(`Input length (${q.length}), exceeds max characters (${z})`);let J={type:"root",input:q,nodes:[]},ae=[J],ne=J,ce=J,pe=0,be=q.length,Le=0,Be=0,H,Ke={};const He=l(()=>q[Le++],"advance"),$e=l(Ae=>{if(Ae.type==="text"&&ce.type==="dot"&&(ce.type="text"),ce&&ce.type==="text"&&Ae.type==="text"){ce.value+=Ae.value;return}return ne.nodes.push(Ae),Ae.parent=ne,Ae.prev=ce,ce=Ae,Ae},"push");for($e({type:"bos"});Le<be;)if(ne=ae[ae.length-1],H=He(),!(H===de||H===te)){if(H===$){$e({type:"text",value:(X.keepEscaping?H:"")+He()});continue}if(H===k){$e({type:"text",value:"\\"+H});continue}if(H===S){pe++;let Ae=!0,Se;for(;Le<be&&(Se=He());){if(H+=Se,Se===S){pe++;continue}if(Se===$){H+=He();continue}if(Se===k&&(pe--,pe===0))break}$e({type:"text",value:H});continue}if(H===g){ne=$e({type:"paren",nodes:[]}),ae.push(ne),$e({type:"text",value:H});continue}if(H===x){if(ne.type!=="paren"){$e({type:"text",value:H});continue}ne=ae.pop(),$e({type:"text",value:H}),ne=ae[ae.length-1];continue}if(H===T||H===Z||H===V){let Ae=H,Se;for(X.keepQuotes!==!0&&(H="");Le<be&&(Se=He());){if(Se===$){H+=Se+He();continue}if(Se===Ae){X.keepQuotes===!0&&(H+=Se);break}H+=Se}$e({type:"text",value:H});continue}if(H===b){Be++;let Ae=ce.value&&ce.value.slice(-1)==="$"||ne.dollar===!0;ne=$e({type:"brace",open:!0,close:!1,dollar:Ae,depth:Be,commas:0,ranges:0,nodes:[]}),ae.push(ne),$e({type:"open",value:H});continue}if(H===y){if(ne.type!=="brace"){$e({type:"text",value:H});continue}let Ae="close";ne=ae.pop(),ne.close=!0,$e({type:Ae,value:H}),Be--,ne=ae[ae.length-1];continue}if(H===j&&Be>0){if(ne.ranges>0){ne.ranges=0;let Ae=ne.nodes.shift();ne.nodes=[Ae,{type:"text",value:C(ne)}]}$e({type:"comma",value:H}),ne.commas++;continue}if(H===F&&Be>0&&ne.commas===0){let Ae=ne.nodes;if(Be===0||Ae.length===0){$e({type:"text",value:H});continue}if(ce.type==="dot"){if(ne.range=[],ce.value+=H,ce.type="range",ne.nodes.length!==3&&ne.nodes.length!==5){ne.invalid=!0,ne.ranges=0,ce.type="text";continue}ne.ranges++,ne.args=[];continue}if(ce.type==="range"){Ae.pop();let Se=Ae[Ae.length-1];Se.value+=ce.value+H,ce=Se,ne.ranges--;continue}$e({type:"dot",value:H});continue}$e({type:"text",value:H})}do if(ne=ae.pop(),ne.type!=="root"){ne.nodes.forEach(it=>{it.nodes||(it.type==="open"&&(it.isOpen=!0),it.type==="close"&&(it.isClose=!0),it.nodes||(it.type="text"),it.invalid=!0)});let Ae=ae[ae.length-1],Se=Ae.nodes.indexOf(ne);Ae.nodes.splice(Se,1,...ne.nodes)}while(ae.length>0);return $e({type:"eos"}),J},"parse");K.exports=U},8641:(K,_,m)=>{"use strict";const C=m(3596);K.exports=(B,$={})=>{let V=l((j,F={})=>{let g=$.escapeInvalid&&C.isInvalidBrace(F),x=j.invalid===!0&&$.escapeInvalid===!0,b="";if(j.value)return(g||x)&&C.isOpenOrClose(j)?"\\"+j.value:j.value;if(j.value)return j.value;if(j.nodes)for(let y of j.nodes)b+=V(y);return b},"stringify");return V(B)}},3596:(K,_)=>{"use strict";_.isInteger=m=>typeof m=="number"?Number.isInteger(m):typeof m=="string"&&m.trim()!==""?Number.isInteger(Number(m)):!1,_.find=(m,C)=>m.nodes.find(B=>B.type===C),_.exceedsLimit=(m,C,B=1,$)=>$===!1||!_.isInteger(m)||!_.isInteger(C)?!1:(Number(C)-Number(m))/Number(B)>=$,_.escapeNode=(m,C=0,B)=>{let $=m.nodes[C];!$||(B&&$.type===B||$.type==="open"||$.type==="close")&&$.escaped!==!0&&($.value="\\"+$.value,$.escaped=!0)},_.encloseBrace=m=>m.type!=="brace"?!1:m.commas>>0+m.ranges>>0==0?(m.invalid=!0,!0):!1,_.isInvalidBrace=m=>m.type!=="brace"?!1:m.invalid===!0||m.dollar?!0:m.commas>>0+m.ranges>>0==0||m.open!==!0||m.close!==!0?(m.invalid=!0,!0):!1,_.isOpenOrClose=m=>m.type==="open"||m.type==="close"?!0:m.open===!0||m.close===!0,_.reduce=m=>m.reduce((C,B)=>(B.type==="text"&&C.push(B.value),B.type==="range"&&(B.type="text"),C),[]),_.flatten=(...m)=>{const C=[],B=l($=>{for(let V=0;V<$.length;V++){let j=$[V];Array.isArray(j)?B(j,C):j!==void 0&&C.push(j)}return C},"flat");return B(m),C}},1516:(K,_,m)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const C=m(6529),B=m(2999),$=l(P=>P!==null&&typeof P=="object"&&!Array.isArray(P),"isObject"),V=l(P=>z=>P===!0?Number(z):String(z),"transform"),j=l(P=>typeof P=="number"||typeof P=="string"&&P!=="","isValidValue"),F=l(P=>Number.isInteger(+P),"isNumber"),g=l(P=>{let z=`${P}`,J=-1;if(z[0]==="-"&&(z=z.slice(1)),z==="0")return!1;for(;z[++J]==="0";);return J>0},"zeros"),x=l((P,z,J)=>typeof P=="string"||typeof z=="string"?!0:J.stringify===!0,"stringify"),b=l((P,z,J)=>{if(z>0){let ae=P[0]==="-"?"-":"";ae&&(P=P.slice(1)),P=ae+P.padStart(ae?z-1:z,"0")}return J===!1?String(P):P},"pad"),y=l((P,z)=>{let J=P[0]==="-"?"-":"";for(J&&(P=P.slice(1),z--);P.length<z;)P="0"+P;return J?"-"+P:P},"toMaxLen"),S=l((P,z)=>{P.negatives.sort((pe,be)=>pe<be?-1:pe>be?1:0),P.positives.sort((pe,be)=>pe<be?-1:pe>be?1:0);let J=z.capture?"":"?:",ae="",ne="",ce;return P.positives.length&&(ae=P.positives.join("|")),P.negatives.length&&(ne=`-(${J}${P.negatives.join("|")})`),ae&&ne?ce=`${ae}|${ne}`:ce=ae||ne,z.wrap?`(${J}${ce})`:ce},"toSequence"),k=l((P,z,J,ae)=>{if(J)return B(P,z,{wrap:!1,...ae});let ne=String.fromCharCode(P);if(P===z)return ne;let ce=String.fromCharCode(z);return`[${ne}-${ce}]`},"toRange"),T=l((P,z,J)=>{if(Array.isArray(P)){let ae=J.wrap===!0,ne=J.capture?"":"?:";return ae?`(${ne}${P.join("|")})`:P.join("|")}return B(P,z,J)},"toRegex"),Z=l((...P)=>new RangeError("Invalid range arguments: "+C.inspect(...P)),"rangeError"),te=l((P,z,J)=>{if(J.strictRanges===!0)throw Z([P,z]);return[]},"invalidRange"),de=l((P,z)=>{if(z.strictRanges===!0)throw new TypeError(`Expected step "${P}" to be a number`);return[]},"invalidStep"),U=l((P,z,J=1,ae={})=>{let ne=Number(P),ce=Number(z);if(!Number.isInteger(ne)||!Number.isInteger(ce)){if(ae.strictRanges===!0)throw Z([P,z]);return[]}ne===0&&(ne=0),ce===0&&(ce=0);let pe=ne>ce,be=String(P),Le=String(z),Be=String(J);J=Math.max(Math.abs(J),1);let H=g(be)||g(Le)||g(Be),Ke=H?Math.max(be.length,Le.length,Be.length):0,He=H===!1&&x(P,z,ae)===!1,$e=ae.transform||V(He);if(ae.toRegex&&J===1)return k(y(P,Ke),y(z,Ke),!0,ae);let Ae={negatives:[],positives:[]},Se=l(ee=>Ae[ee<0?"negatives":"positives"].push(Math.abs(ee)),"push"),it=[],Ve=0;for(;pe?ne>=ce:ne<=ce;)ae.toRegex===!0&&J>1?Se(ne):it.push(b($e(ne,Ve),Ke,He)),ne=pe?ne-J:ne+J,Ve++;return ae.toRegex===!0?J>1?S(Ae,ae):T(it,null,{wrap:!1,...ae}):it},"fillNumbers"),q=l((P,z,J=1,ae={})=>{if(!F(P)&&P.length>1||!F(z)&&z.length>1)return te(P,z,ae);let ne=ae.transform||(He=>String.fromCharCode(He)),ce=`${P}`.charCodeAt(0),pe=`${z}`.charCodeAt(0),be=ce>pe,Le=Math.min(ce,pe),Be=Math.max(ce,pe);if(ae.toRegex&&J===1)return k(Le,Be,!1,ae);let H=[],Ke=0;for(;be?ce>=pe:ce<=pe;)H.push(ne(ce,Ke)),ce=be?ce-J:ce+J,Ke++;return ae.toRegex===!0?T(H,null,{wrap:!1,options:ae}):H},"fillLetters"),X=l((P,z,J,ae={})=>{if(z==null&&j(P))return[P];if(!j(P)||!j(z))return te(P,z,ae);if(typeof J=="function")return X(P,z,1,{transform:J});if($(J))return X(P,z,0,J);let ne={...ae};return ne.capture===!0&&(ne.wrap=!0),J=J||ne.step||1,F(J)?F(P)&&F(z)?U(P,z,J,ne):q(P,z,Math.max(Math.abs(J),1),ne):J!=null&&!$(J)?de(J,ne):X(P,z,1,J)},"fill");K.exports=X},3338:K=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */K.exports=function(_){return typeof _=="number"?_-_==0:typeof _=="string"&&_.trim()!==""?Number.isFinite?Number.isFinite(+_):isFinite(+_):!1}},5179:(K,_,m)=>{K=m.nmd(K);var C=200,B="__lodash_hash_undefined__",$=1,V=2,j=9007199254740991,F="[object Arguments]",g="[object Array]",x="[object AsyncFunction]",b="[object Boolean]",y="[object Date]",S="[object Error]",k="[object Function]",T="[object GeneratorFunction]",Z="[object Map]",te="[object Number]",de="[object Null]",U="[object Object]",q="[object Promise]",X="[object Proxy]",P="[object RegExp]",z="[object Set]",J="[object String]",ae="[object Symbol]",ne="[object Undefined]",ce="[object WeakMap]",pe="[object ArrayBuffer]",be="[object DataView]",Le="[object Float32Array]",Be="[object Float64Array]",H="[object Int8Array]",Ke="[object Int16Array]",He="[object Int32Array]",$e="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Se="[object Uint16Array]",it="[object Uint32Array]",Ve=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,ze={};ze[Le]=ze[Be]=ze[H]=ze[Ke]=ze[He]=ze[$e]=ze[Ae]=ze[Se]=ze[it]=!0,ze[F]=ze[g]=ze[pe]=ze[b]=ze[be]=ze[y]=ze[S]=ze[k]=ze[Z]=ze[te]=ze[U]=ze[P]=ze[z]=ze[J]=ze[ce]=!1;var nt=typeof m.g=="object"&&m.g&&m.g.Object===Object&&m.g,le=typeof self=="object"&&self&&self.Object===Object&&self,se=nt||le||Function("return this")(),Me=_&&!_.nodeType&&_,Ze=Me&&!0&&K&&!K.nodeType&&K,pt=Ze&&Ze.exports===Me,jt=pt&&nt.process,xt=function(){try{return jt&&jt.binding&&jt.binding("util")}catch(N){}}(),mt=xt&&xt.isTypedArray;function fn(N,M){for(var ve=-1,Oe=N==null?0:N.length,Ft=0,st=[];++ve<Oe;){var Nt=N[ve];M(Nt,ve,N)&&(st[Ft++]=Nt)}return st}l(fn,"arrayFilter");function Yt(N,M){for(var ve=-1,Oe=M.length,Ft=N.length;++ve<Oe;)N[Ft+ve]=M[ve];return N}l(Yt,"arrayPush");function Je(N,M){for(var ve=-1,Oe=N==null?0:N.length;++ve<Oe;)if(M(N[ve],ve,N))return!0;return!1}l(Je,"arraySome");function qe(N,M){for(var ve=-1,Oe=Array(N);++ve<N;)Oe[ve]=M(ve);return Oe}l(qe,"baseTimes");function Xe(N){return function(M){return N(M)}}l(Xe,"baseUnary");function tr(N,M){return N.has(M)}l(tr,"cacheHas");function ke(N,M){return N==null?void 0:N[M]}l(ke,"getValue");function at(N){var M=-1,ve=Array(N.size);return N.forEach(function(Oe,Ft){ve[++M]=[Ft,Oe]}),ve}l(at,"mapToArray");function Y(N,M){return function(ve){return N(M(ve))}}l(Y,"overArg");function et(N){var M=-1,ve=Array(N.size);return N.forEach(function(Oe){ve[++M]=Oe}),ve}l(et,"setToArray");var ht=Array.prototype,Rt=Function.prototype,kt=Object.prototype,E=se["__core-js_shared__"],d=Rt.toString,h=kt.hasOwnProperty,L=function(){var N=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),Q=kt.toString,oe=RegExp("^"+d.call(h).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=pt?se.Buffer:void 0,ot=se.Symbol,At=se.Uint8Array,It=kt.propertyIsEnumerable,Mt=ht.splice,dt=ot?ot.toStringTag:void 0,Bl=Object.getOwnPropertySymbols,Wo=ge?ge.isBuffer:void 0,Kf=Y(Object.keys,Object),Or=rr(se,"DataView"),wn=rr(se,"Map"),Ia=rr(se,"Promise"),Ta=rr(se,"Set"),Ra=rr(se,"WeakMap"),wr=rr(Object,"create"),$l=zr(Or),Pl=zr(wn),Ur=zr(Ia),Zf=zr(Ta),ka=zr(Ra),fi=ot?ot.prototype:void 0,jo=fi?fi.valueOf:void 0;function Fn(N){var M=-1,ve=N==null?0:N.length;for(this.clear();++M<ve;){var Oe=N[M];this.set(Oe[0],Oe[1])}}l(Fn,"Hash");function Ml(){this.__data__=wr?wr(null):{},this.size=0}l(Ml,"hashClear");function Vo(N){var M=this.has(N)&&delete this.__data__[N];return this.size-=M?1:0,M}l(Vo,"hashDelete");function Qf(N){var M=this.__data__;if(wr){var ve=M[N];return ve===B?void 0:ve}return h.call(M,N)?M[N]:void 0}l(Qf,"hashGet");function Go(N){var M=this.__data__;return wr?M[N]!==void 0:h.call(M,N)}l(Go,"hashHas");function Ol(N,M){var ve=this.__data__;return this.size+=this.has(N)?0:1,ve[N]=wr&&M===void 0?B:M,this}l(Ol,"hashSet"),Fn.prototype.clear=Ml,Fn.prototype.delete=Vo,Fn.prototype.get=Qf,Fn.prototype.has=Go,Fn.prototype.set=Ol;function qn(N){var M=-1,ve=N==null?0:N.length;for(this.clear();++M<ve;){var Oe=N[M];this.set(Oe[0],Oe[1])}}l(qn,"ListCache");function Ul(){this.__data__=[],this.size=0}l(Ul,"listCacheClear");function Hl(N){var M=this.__data__,ve=La(M,N);if(ve<0)return!1;var Oe=M.length-1;return ve==Oe?M.pop():Mt.call(M,ve,1),--this.size,!0}l(Hl,"listCacheDelete");function Da(N){var M=this.__data__,ve=La(M,N);return ve<0?void 0:M[ve][1]}l(Da,"listCacheGet");function zl(N){return La(this.__data__,N)>-1}l(zl,"listCacheHas");function Xf(N,M){var ve=this.__data__,Oe=La(ve,N);return Oe<0?(++this.size,ve.push([N,M])):ve[Oe][1]=M,this}l(Xf,"listCacheSet"),qn.prototype.clear=Ul,qn.prototype.delete=Hl,qn.prototype.get=Da,qn.prototype.has=zl,qn.prototype.set=Xf;function nr(N){var M=-1,ve=N==null?0:N.length;for(this.clear();++M<ve;){var Oe=N[M];this.set(Oe[0],Oe[1])}}l(nr,"MapCache");function Ko(){this.size=0,this.__data__={hash:new Fn,map:new(wn||qn),string:new Fn}}l(Ko,"mapCacheClear");function Ui(N){var M=zi(this,N).delete(N);return this.size-=M?1:0,M}l(Ui,"mapCacheDelete");function Zo(N){return zi(this,N).get(N)}l(Zo,"mapCacheGet");function Qo(N){return zi(this,N).has(N)}l(Qo,"mapCacheHas");function ql(N,M){var ve=zi(this,N),Oe=ve.size;return ve.set(N,M),this.size+=ve.size==Oe?0:1,this}l(ql,"mapCacheSet"),nr.prototype.clear=Ko,nr.prototype.delete=Ui,nr.prototype.get=Zo,nr.prototype.has=Qo,nr.prototype.set=ql;function Hi(N){var M=-1,ve=N==null?0:N.length;for(this.__data__=new nr;++M<ve;)this.add(N[M])}l(Hi,"SetCache");function Xo(N){return this.__data__.set(N,B),this}l(Xo,"setCacheAdd");function Fa(N){return this.__data__.has(N)}l(Fa,"setCacheHas"),Hi.prototype.add=Hi.prototype.push=Xo,Hi.prototype.has=Fa;function Wn(N){var M=this.__data__=new qn(N);this.size=M.size}l(Wn,"Stack");function Yo(){this.__data__=new qn,this.size=0}l(Yo,"stackClear");function yr(N){var M=this.__data__,ve=M.delete(N);return this.size=M.size,ve}l(yr,"stackDelete");function Wl(N){return this.__data__.get(N)}l(Wl,"stackGet");function Jo(N){return this.__data__.has(N)}l(Jo,"stackHas");function es(N,M){var ve=this.__data__;if(ve instanceof qn){var Oe=ve.__data__;if(!wn||Oe.length<C-1)return Oe.push([N,M]),this.size=++ve.size,this;ve=this.__data__=new nr(Oe)}return ve.set(N,M),this.size=ve.size,this}l(es,"stackSet"),Wn.prototype.clear=Yo,Wn.prototype.delete=yr,Wn.prototype.get=Wl,Wn.prototype.has=Jo,Wn.prototype.set=es;function Na(N,M){var ve=qr(N),Oe=!ve&&td(N),Ft=!ve&&!Oe&&qi(N),st=!ve&&!Oe&&!Ft&&yn(N),Nt=ve||Oe||Ft||st,Vt=Nt?qe(N.length,String):[],Jt=Vt.length;for(var Ot in N)(M||h.call(N,Ot))&&!(Nt&&(Ot=="length"||Ft&&(Ot=="offset"||Ot=="parent")||st&&(Ot=="buffer"||Ot=="byteLength"||Ot=="byteOffset")||Zl(Ot,Jt)))&&Vt.push(Ot);return Vt}l(Na,"arrayLikeKeys");function La(N,M){for(var ve=N.length;ve--;)if(Xl(N[ve][0],M))return ve;return-1}l(La,"assocIndexOf");function Yf(N,M,ve){var Oe=M(N);return qr(N)?Oe:Yt(Oe,ve(N))}l(Yf,"baseGetAllKeys");function di(N){return N==null?N===void 0?ne:de:dt&&dt in Object(N)?Kl(N):ed(N)}l(di,"baseGetTag");function Ba(N){return hi(N)&&di(N)==F}l(Ba,"baseIsArguments");function $a(N,M,ve,Oe,Ft){return N===M?!0:N==null||M==null||!hi(N)&&!hi(M)?N!==N&&M!==M:ts(N,M,ve,Oe,$a,Ft)}l($a,"baseIsEqual");function ts(N,M,ve,Oe,Ft,st){var Nt=qr(N),Vt=qr(M),Jt=Nt?g:_r(N),Ot=Vt?g:_r(M);Jt=Jt==F?U:Jt,Ot=Ot==F?U:Ot;var en=Jt==U,In=Ot==U,Gt=Jt==Ot;if(Gt&&qi(N)){if(!qi(M))return!1;Nt=!0,en=!1}if(Gt&&!en)return st||(st=new Wn),Nt||yn(N)?ns(N,M,ve,Oe,Ft,st):Gl(N,M,Jt,ve,Oe,Ft,st);if(!(ve&$)){var _n=en&&h.call(N,"__wrapped__"),xn=In&&h.call(M,"__wrapped__");if(_n||xn){var jn=_n?N.value():N,Vn=xn?M.value():M;return st||(st=new Wn),Ft(jn,Vn,ve,Oe,st)}}return Gt?(st||(st=new Wn),dn(N,M,ve,Oe,Ft,st)):!1}l(ts,"baseIsEqualDeep");function jl(N){if(!as(N)||Jf(N))return!1;var M=Oa(N)?oe:ee;return M.test(zr(N))}l(jl,"baseIsNative");function Vl(N){return hi(N)&&is(N.length)&&!!ze[di(N)]}l(Vl,"baseIsTypedArray");function _e(N){if(!Ql(N))return Kf(N);var M=[];for(var ve in Object(N))h.call(N,ve)&&ve!="constructor"&&M.push(ve);return M}l(_e,"baseKeys");function ns(N,M,ve,Oe,Ft,st){var Nt=ve&$,Vt=N.length,Jt=M.length;if(Vt!=Jt&&!(Nt&&Jt>Vt))return!1;var Ot=st.get(N);if(Ot&&st.get(M))return Ot==M;var en=-1,In=!0,Gt=ve&V?new Hi:void 0;for(st.set(N,M),st.set(M,N);++en<Vt;){var _n=N[en],xn=M[en];if(Oe)var jn=Nt?Oe(xn,_n,en,M,N,st):Oe(_n,xn,en,N,M,st);if(jn!==void 0){if(jn)continue;In=!1;break}if(Gt){if(!Je(M,function(Vn,xr){if(!tr(Gt,xr)&&(_n===Vn||Ft(_n,Vn,ve,Oe,st)))return Gt.push(xr)})){In=!1;break}}else if(!(_n===xn||Ft(_n,xn,ve,Oe,st))){In=!1;break}}return st.delete(N),st.delete(M),In}l(ns,"equalArrays");function Gl(N,M,ve,Oe,Ft,st,Nt){switch(ve){case be:if(N.byteLength!=M.byteLength||N.byteOffset!=M.byteOffset)return!1;N=N.buffer,M=M.buffer;case pe:return!(N.byteLength!=M.byteLength||!st(new At(N),new At(M)));case b:case y:case te:return Xl(+N,+M);case S:return N.name==M.name&&N.message==M.message;case P:case J:return N==M+"";case Z:var Vt=at;case z:var Jt=Oe&$;if(Vt||(Vt=et),N.size!=M.size&&!Jt)return!1;var Ot=Nt.get(N);if(Ot)return Ot==M;Oe|=V,Nt.set(N,M);var en=ns(Vt(N),Vt(M),Oe,Ft,st,Nt);return Nt.delete(N),en;case ae:if(jo)return jo.call(N)==jo.call(M)}return!1}l(Gl,"equalByTag");function dn(N,M,ve,Oe,Ft,st){var Nt=ve&$,Vt=Hr(N),Jt=Vt.length,Ot=Hr(M),en=Ot.length;if(Jt!=en&&!Nt)return!1;for(var In=Jt;In--;){var Gt=Vt[In];if(!(Nt?Gt in M:h.call(M,Gt)))return!1}var _n=st.get(N);if(_n&&st.get(M))return _n==M;var xn=!0;st.set(N,M),st.set(M,N);for(var jn=Nt;++In<Jt;){Gt=Vt[In];var Vn=N[Gt],xr=M[Gt];if(Oe)var os=Nt?Oe(xr,Vn,Gt,M,N,st):Oe(Vn,xr,Gt,N,M,st);if(!(os===void 0?Vn===xr||Ft(Vn,xr,ve,Oe,st):os)){xn=!1;break}jn||(jn=Gt=="constructor")}if(xn&&!jn){var Wi=N.constructor,ji=M.constructor;Wi!=ji&&"constructor"in N&&"constructor"in M&&!(typeof Wi=="function"&&Wi instanceof Wi&&typeof ji=="function"&&ji instanceof ji)&&(xn=!1)}return st.delete(N),st.delete(M),xn}l(dn,"equalObjects");function Hr(N){return Yf(N,pi,rs)}l(Hr,"getAllKeys");function zi(N,M){var ve=N.__data__;return Pa(M)?ve[typeof M=="string"?"string":"hash"]:ve.map}l(zi,"getMapData");function rr(N,M){var ve=ke(N,M);return jl(ve)?ve:void 0}l(rr,"getNative");function Kl(N){var M=h.call(N,dt),ve=N[dt];try{N[dt]=void 0;var Oe=!0}catch(st){}var Ft=Q.call(N);return Oe&&(M?N[dt]=ve:delete N[dt]),Ft}l(Kl,"getRawTag");var rs=Bl?function(N){return N==null?[]:(N=Object(N),fn(Bl(N),function(M){return It.call(N,M)}))}:Ua,_r=di;(Or&&_r(new Or(new ArrayBuffer(1)))!=be||wn&&_r(new wn)!=Z||Ia&&_r(Ia.resolve())!=q||Ta&&_r(new Ta)!=z||Ra&&_r(new Ra)!=ce)&&(_r=l(function(N){var M=di(N),ve=M==U?N.constructor:void 0,Oe=ve?zr(ve):"";if(Oe)switch(Oe){case $l:return be;case Pl:return Z;case Ur:return q;case Zf:return z;case ka:return ce}return M},"getTag"));function Zl(N,M){return M=M==null?j:M,!!M&&(typeof N=="number"||We.test(N))&&N>-1&&N%1==0&&N<M}l(Zl,"isIndex");function Pa(N){var M=typeof N;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?N!=="__proto__":N===null}l(Pa,"isKeyable");function Jf(N){return!!L&&L in N}l(Jf,"isMasked");function Ql(N){var M=N&&N.constructor,ve=typeof M=="function"&&M.prototype||kt;return N===ve}l(Ql,"isPrototype");function ed(N){return Q.call(N)}l(ed,"objectToString");function zr(N){if(N!=null){try{return d.call(N)}catch(M){}try{return N+""}catch(M){}}return""}l(zr,"toSource");function Xl(N,M){return N===M||N!==N&&M!==M}l(Xl,"eq");var td=Ba(function(){return arguments}())?Ba:function(N){return hi(N)&&h.call(N,"callee")&&!It.call(N,"callee")},qr=Array.isArray;function Ma(N){return N!=null&&is(N.length)&&!Oa(N)}l(Ma,"isArrayLike");var qi=Wo||Jl;function Yl(N,M){return $a(N,M)}l(Yl,"isEqual");function Oa(N){if(!as(N))return!1;var M=di(N);return M==k||M==T||M==x||M==X}l(Oa,"isFunction");function is(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=j}l(is,"isLength");function as(N){var M=typeof N;return N!=null&&(M=="object"||M=="function")}l(as,"isObject");function hi(N){return N!=null&&typeof N=="object"}l(hi,"isObjectLike");var yn=mt?Xe(mt):Vl;function pi(N){return Ma(N)?Na(N):_e(N)}l(pi,"keys");function Ua(){return[]}l(Ua,"stubArray");function Jl(){return!1}l(Jl,"stubFalse"),K.exports=Yl},919:(K,_,m)=>{"use strict";const C=m(6391),B=m(6232),$=m(6796),V=m(292),j=l(g=>g===""||g==="./","isEmptyString"),F=l((g,x,b)=>{x=[].concat(x),g=[].concat(g);let y=new Set,S=new Set,k=new Set,T=0,Z=l(U=>{k.add(U.output),b&&b.onResult&&b.onResult(U)},"onResult");for(let U=0;U<x.length;U++){let q=$(String(x[U]),{...b,onResult:Z},!0),X=q.state.negated||q.state.negatedExtglob;X&&T++;for(let P of g){let z=q(P,!0);!(X?!z.isMatch:z.isMatch)||(X?y.add(z.output):(y.delete(z.output),S.add(z.output)))}}let de=(T===x.length?[...k]:[...S]).filter(U=>!y.has(U));if(b&&de.length===0){if(b.failglob===!0)throw new Error(`No matches found for "${x.join(", ")}"`);if(b.nonull===!0||b.nullglob===!0)return b.unescape?x.map(U=>U.replace(/\\/g,"")):x}return de},"micromatch");F.match=F,F.matcher=(g,x)=>$(g,x),F.isMatch=(g,x,b)=>$(x,b)(g),F.any=F.isMatch,F.not=(g,x,b={})=>{x=[].concat(x).map(String);let y=new Set,S=[],k=l(Z=>{b.onResult&&b.onResult(Z),S.push(Z.output)},"onResult"),T=new Set(F(g,x,{...b,onResult:k}));for(let Z of S)T.has(Z)||y.add(Z);return[...y]},F.contains=(g,x,b)=>{if(typeof g!="string")throw new TypeError(`Expected a string: "${C.inspect(g)}"`);if(Array.isArray(x))return x.some(y=>F.contains(g,y,b));if(typeof x=="string"){if(j(g)||j(x))return!1;if(g.includes(x)||g.startsWith("./")&&g.slice(2).includes(x))return!0}return F.isMatch(g,x,{...b,contains:!0})},F.matchKeys=(g,x,b)=>{if(!V.isObject(g))throw new TypeError("Expected the first argument to be an object");let y=F(Object.keys(g),x,b),S={};for(let k of y)S[k]=g[k];return S},F.some=(g,x,b)=>{let y=[].concat(g);for(let S of[].concat(x)){let k=$(String(S),b);if(y.some(T=>k(T)))return!0}return!1},F.every=(g,x,b)=>{let y=[].concat(g);for(let S of[].concat(x)){let k=$(String(S),b);if(!y.every(T=>k(T)))return!1}return!0},F.all=(g,x,b)=>{if(typeof g!="string")throw new TypeError(`Expected a string: "${C.inspect(g)}"`);return[].concat(x).every(y=>$(y,b)(g))},F.capture=(g,x,b)=>{let y=V.isWindows(b),k=$.makeRe(String(g),{...b,capture:!0}).exec(y?V.toPosixSlashes(x):x);if(k)return k.slice(1).map(T=>T===void 0?"":T)},F.makeRe=(...g)=>$.makeRe(...g),F.scan=(...g)=>$.scan(...g),F.parse=(g,x)=>{let b=[];for(let y of[].concat(g||[]))for(let S of B(String(y),x))b.push($.parse(S,x));return b},F.braces=(g,x)=>{if(typeof g!="string")throw new TypeError("Expected a string");return x&&x.nobrace===!0||!/\{.*\}/.test(g)?[g]:B(g,x)},F.braceExpand=(g,x)=>{if(typeof g!="string")throw new TypeError("Expected a string");return F.braces(g,{...x,expand:!0})},K.exports=F},6796:(K,_,m)=>{"use strict";K.exports=m(5761)},3889:(K,_,m)=>{"use strict";const C=m(6470),B="\\\\/",$=`[^${B}]`,V="\\.",j="\\+",F="\\?",g="\\/",x="(?=.)",b="[^/]",y=`(?:${g}|$)`,S=`(?:^|${g})`,k=`${V}{1,2}${y}`,T=`(?!${V})`,Z=`(?!${S}${k})`,te=`(?!${V}{0,1}${y})`,de=`(?!${k})`,U=`[^.${g}]`,q=`${b}*?`,X={DOT_LITERAL:V,PLUS_LITERAL:j,QMARK_LITERAL:F,SLASH_LITERAL:g,ONE_CHAR:x,QMARK:b,END_ANCHOR:y,DOTS_SLASH:k,NO_DOT:T,NO_DOTS:Z,NO_DOT_SLASH:te,NO_DOTS_SLASH:de,QMARK_NO_DOT:U,STAR:q,START_ANCHOR:S},P={...X,SLASH_LITERAL:`[${B}]`,QMARK:$,STAR:`${$}*?`,DOTS_SLASH:`${V}{1,2}(?:[${B}]|$)`,NO_DOT:`(?!${V})`,NO_DOTS:`(?!(?:^|[${B}])${V}{1,2}(?:[${B}]|$))`,NO_DOT_SLASH:`(?!${V}{0,1}(?:[${B}]|$))`,NO_DOTS_SLASH:`(?!${V}{1,2}(?:[${B}]|$))`,QMARK_NO_DOT:`[^.${B}]`,START_ANCHOR:`(?:^|[${B}])`,END_ANCHOR:`(?:[${B}]|$)`},z={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};K.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:z,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:C.sep,extglobChars(J){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${J.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(J){return J===!0?P:X}}},3969:(K,_,m)=>{"use strict";const C=m(3889),B=m(292),{MAX_LENGTH:$,POSIX_REGEX_SOURCE:V,REGEX_NON_SPECIAL_CHARS:j,REGEX_SPECIAL_CHARS_BACKREF:F,REPLACEMENTS:g}=C,x=l((S,k)=>{if(typeof k.expandRange=="function")return k.expandRange(...S,k);S.sort();const T=`[${S.join("-")}]`;try{new RegExp(T)}catch(Z){return S.map(te=>B.escapeRegex(te)).join("..")}return T},"expandRange"),b=l((S,k)=>`Missing ${S}: "${k}" - use "\\\\${k}" to match literal characters`,"syntaxError"),y=l((S,k)=>{if(typeof S!="string")throw new TypeError("Expected a string");S=g[S]||S;const T={...k},Z=typeof T.maxLength=="number"?Math.min($,T.maxLength):$;let te=S.length;if(te>Z)throw new SyntaxError(`Input length: ${te}, exceeds maximum allowed length: ${Z}`);const de={type:"bos",value:"",output:T.prepend||""},U=[de],q=T.capture?"":"?:",X=B.isWindows(k),P=C.globChars(X),z=C.extglobChars(P),{DOT_LITERAL:J,PLUS_LITERAL:ae,SLASH_LITERAL:ne,ONE_CHAR:ce,DOTS_SLASH:pe,NO_DOT:be,NO_DOT_SLASH:Le,NO_DOTS_SLASH:Be,QMARK:H,QMARK_NO_DOT:Ke,STAR:He,START_ANCHOR:$e}=P,Ae=l(ke=>`(${q}(?:(?!${$e}${ke.dot?pe:J}).)*?)`,"globstar"),Se=T.dot?"":be,it=T.dot?H:Ke;let Ve=T.bash===!0?Ae(T):He;T.capture&&(Ve=`(${Ve})`),typeof T.noext=="boolean"&&(T.noextglob=T.noext);const ee={input:S,index:-1,start:0,dot:T.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:U};S=B.removePrefix(S,ee),te=S.length;const We=[],ze=[],nt=[];let le=de,se;const Me=l(()=>ee.index===te-1,"eos"),Ze=ee.peek=(ke=1)=>S[ee.index+ke],pt=ee.advance=()=>S[++ee.index]||"",jt=l(()=>S.slice(ee.index+1),"remaining"),xt=l((ke="",at=0)=>{ee.consumed+=ke,ee.index+=at},"consume"),mt=l(ke=>{ee.output+=ke.output!=null?ke.output:ke.value,xt(ke.value)},"append"),fn=l(()=>{let ke=1;for(;Ze()==="!"&&(Ze(2)!=="("||Ze(3)==="?");)pt(),ee.start++,ke++;return ke%2==0?!1:(ee.negated=!0,ee.start++,!0)},"negate"),Yt=l(ke=>{ee[ke]++,nt.push(ke)},"increment"),Je=l(ke=>{ee[ke]--,nt.pop()},"decrement"),qe=l(ke=>{if(le.type==="globstar"){const at=ee.braces>0&&(ke.type==="comma"||ke.type==="brace"),Y=ke.extglob===!0||We.length&&(ke.type==="pipe"||ke.type==="paren");ke.type!=="slash"&&ke.type!=="paren"&&!at&&!Y&&(ee.output=ee.output.slice(0,-le.output.length),le.type="star",le.value="*",le.output=Ve,ee.output+=le.output)}if(We.length&&ke.type!=="paren"&&(We[We.length-1].inner+=ke.value),(ke.value||ke.output)&&mt(ke),le&&le.type==="text"&&ke.type==="text"){le.value+=ke.value,le.output=(le.output||"")+ke.value;return}ke.prev=le,U.push(ke),le=ke},"push"),Xe=l((ke,at)=>{const Y={...z[at],conditions:1,inner:""};Y.prev=le,Y.parens=ee.parens,Y.output=ee.output;const et=(T.capture?"(":"")+Y.open;Yt("parens"),qe({type:ke,value:at,output:ee.output?"":ce}),qe({type:"paren",extglob:!0,value:pt(),output:et}),We.push(Y)},"extglobOpen"),tr=l(ke=>{let at=ke.close+(T.capture?")":""),Y;if(ke.type==="negate"){let et=Ve;if(ke.inner&&ke.inner.length>1&&ke.inner.includes("/")&&(et=Ae(T)),(et!==Ve||Me()||/^\)+$/.test(jt()))&&(at=ke.close=`)$))${et}`),ke.inner.includes("*")&&(Y=jt())&&/^\.[^\\/.]+$/.test(Y)){const ht=y(Y,{...k,fastpaths:!1}).output;at=ke.close=`)${ht})${et})`}ke.prev.type==="bos"&&(ee.negatedExtglob=!0)}qe({type:"paren",extglob:!0,value:se,output:at}),Je("parens")},"extglobClose");if(T.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(S)){let ke=!1,at=S.replace(F,(Y,et,ht,Rt,kt,E)=>Rt==="\\"?(ke=!0,Y):Rt==="?"?et?et+Rt+(kt?H.repeat(kt.length):""):E===0?it+(kt?H.repeat(kt.length):""):H.repeat(ht.length):Rt==="."?J.repeat(ht.length):Rt==="*"?et?et+Rt+(kt?Ve:""):Ve:et?Y:`\\${Y}`);return ke===!0&&(T.unescape===!0?at=at.replace(/\\/g,""):at=at.replace(/\\+/g,Y=>Y.length%2==0?"\\\\":Y?"\\":"")),at===S&&T.contains===!0?(ee.output=S,ee):(ee.output=B.wrapOutput(at,ee,k),ee)}for(;!Me();){if(se=pt(),se==="\0")continue;if(se==="\\"){const Y=Ze();if(Y==="/"&&T.bash!==!0||Y==="."||Y===";")continue;if(!Y){se+="\\",qe({type:"text",value:se});continue}const et=/^\\+/.exec(jt());let ht=0;if(et&&et[0].length>2&&(ht=et[0].length,ee.index+=ht,ht%2!=0&&(se+="\\")),T.unescape===!0?se=pt():se+=pt(),ee.brackets===0){qe({type:"text",value:se});continue}}if(ee.brackets>0&&(se!=="]"||le.value==="["||le.value==="[^")){if(T.posix!==!1&&se===":"){const Y=le.value.slice(1);if(Y.includes("[")&&(le.posix=!0,Y.includes(":"))){const et=le.value.lastIndexOf("["),ht=le.value.slice(0,et),Rt=le.value.slice(et+2),kt=V[Rt];if(kt){le.value=ht+kt,ee.backtrack=!0,pt(),!de.output&&U.indexOf(le)===1&&(de.output=ce);continue}}}(se==="["&&Ze()!==":"||se==="-"&&Ze()==="]")&&(se=`\\${se}`),se==="]"&&(le.value==="["||le.value==="[^")&&(se=`\\${se}`),T.posix===!0&&se==="!"&&le.value==="["&&(se="^"),le.value+=se,mt({value:se});continue}if(ee.quotes===1&&se!=='"'){se=B.escapeRegex(se),le.value+=se,mt({value:se});continue}if(se==='"'){ee.quotes=ee.quotes===1?0:1,T.keepQuotes===!0&&qe({type:"text",value:se});continue}if(se==="("){Yt("parens"),qe({type:"paren",value:se});continue}if(se===")"){if(ee.parens===0&&T.strictBrackets===!0)throw new SyntaxError(b("opening","("));const Y=We[We.length-1];if(Y&&ee.parens===Y.parens+1){tr(We.pop());continue}qe({type:"paren",value:se,output:ee.parens?")":"\\)"}),Je("parens");continue}if(se==="["){if(T.nobracket===!0||!jt().includes("]")){if(T.nobracket!==!0&&T.strictBrackets===!0)throw new SyntaxError(b("closing","]"));se=`\\${se}`}else Yt("brackets");qe({type:"bracket",value:se});continue}if(se==="]"){if(T.nobracket===!0||le&&le.type==="bracket"&&le.value.length===1){qe({type:"text",value:se,output:`\\${se}`});continue}if(ee.brackets===0){if(T.strictBrackets===!0)throw new SyntaxError(b("opening","["));qe({type:"text",value:se,output:`\\${se}`});continue}Je("brackets");const Y=le.value.slice(1);if(le.posix!==!0&&Y[0]==="^"&&!Y.includes("/")&&(se=`/${se}`),le.value+=se,mt({value:se}),T.literalBrackets===!1||B.hasRegexChars(Y))continue;const et=B.escapeRegex(le.value);if(ee.output=ee.output.slice(0,-le.value.length),T.literalBrackets===!0){ee.output+=et,le.value=et;continue}le.value=`(${q}${et}|${le.value})`,ee.output+=le.value;continue}if(se==="{"&&T.nobrace!==!0){Yt("braces");const Y={type:"brace",value:se,output:"(",outputIndex:ee.output.length,tokensIndex:ee.tokens.length};ze.push(Y),qe(Y);continue}if(se==="}"){const Y=ze[ze.length-1];if(T.nobrace===!0||!Y){qe({type:"text",value:se,output:se});continue}let et=")";if(Y.dots===!0){const ht=U.slice(),Rt=[];for(let kt=ht.length-1;kt>=0&&(U.pop(),ht[kt].type!=="brace");kt--)ht[kt].type!=="dots"&&Rt.unshift(ht[kt].value);et=x(Rt,T),ee.backtrack=!0}if(Y.comma!==!0&&Y.dots!==!0){const ht=ee.output.slice(0,Y.outputIndex),Rt=ee.tokens.slice(Y.tokensIndex);Y.value=Y.output="\\{",se=et="\\}",ee.output=ht;for(const kt of Rt)ee.output+=kt.output||kt.value}qe({type:"brace",value:se,output:et}),Je("braces"),ze.pop();continue}if(se==="|"){We.length>0&&We[We.length-1].conditions++,qe({type:"text",value:se});continue}if(se===","){let Y=se;const et=ze[ze.length-1];et&&nt[nt.length-1]==="braces"&&(et.comma=!0,Y="|"),qe({type:"comma",value:se,output:Y});continue}if(se==="/"){if(le.type==="dot"&&ee.index===ee.start+1){ee.start=ee.index+1,ee.consumed="",ee.output="",U.pop(),le=de;continue}qe({type:"slash",value:se,output:ne});continue}if(se==="."){if(ee.braces>0&&le.type==="dot"){le.value==="."&&(le.output=J);const Y=ze[ze.length-1];le.type="dots",le.output+=se,le.value+=se,Y.dots=!0;continue}if(ee.braces+ee.parens===0&&le.type!=="bos"&&le.type!=="slash"){qe({type:"text",value:se,output:J});continue}qe({type:"dot",value:se,output:J});continue}if(se==="?"){if(!(le&&le.value==="(")&&T.noextglob!==!0&&Ze()==="("&&Ze(2)!=="?"){Xe("qmark",se);continue}if(le&&le.type==="paren"){const et=Ze();let ht=se;if(et==="<"&&!B.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(le.value==="("&&!/[!=<:]/.test(et)||et==="<"&&!/<([!=]|\w+>)/.test(jt()))&&(ht=`\\${se}`),qe({type:"text",value:se,output:ht});continue}if(T.dot!==!0&&(le.type==="slash"||le.type==="bos")){qe({type:"qmark",value:se,output:Ke});continue}qe({type:"qmark",value:se,output:H});continue}if(se==="!"){if(T.noextglob!==!0&&Ze()==="("&&(Ze(2)!=="?"||!/[!=<:]/.test(Ze(3)))){Xe("negate",se);continue}if(T.nonegate!==!0&&ee.index===0){fn();continue}}if(se==="+"){if(T.noextglob!==!0&&Ze()==="("&&Ze(2)!=="?"){Xe("plus",se);continue}if(le&&le.value==="("||T.regex===!1){qe({type:"plus",value:se,output:ae});continue}if(le&&(le.type==="bracket"||le.type==="paren"||le.type==="brace")||ee.parens>0){qe({type:"plus",value:se});continue}qe({type:"plus",value:ae});continue}if(se==="@"){if(T.noextglob!==!0&&Ze()==="("&&Ze(2)!=="?"){qe({type:"at",extglob:!0,value:se,output:""});continue}qe({type:"text",value:se});continue}if(se!=="*"){(se==="$"||se==="^")&&(se=`\\${se}`);const Y=j.exec(jt());Y&&(se+=Y[0],ee.index+=Y[0].length),qe({type:"text",value:se});continue}if(le&&(le.type==="globstar"||le.star===!0)){le.type="star",le.star=!0,le.value+=se,le.output=Ve,ee.backtrack=!0,ee.globstar=!0,xt(se);continue}let ke=jt();if(T.noextglob!==!0&&/^\([^?]/.test(ke)){Xe("star",se);continue}if(le.type==="star"){if(T.noglobstar===!0){xt(se);continue}const Y=le.prev,et=Y.prev,ht=Y.type==="slash"||Y.type==="bos",Rt=et&&(et.type==="star"||et.type==="globstar");if(T.bash===!0&&(!ht||ke[0]&&ke[0]!=="/")){qe({type:"star",value:se,output:""});continue}const kt=ee.braces>0&&(Y.type==="comma"||Y.type==="brace"),E=We.length&&(Y.type==="pipe"||Y.type==="paren");if(!ht&&Y.type!=="paren"&&!kt&&!E){qe({type:"star",value:se,output:""});continue}for(;ke.slice(0,3)==="/**";){const d=S[ee.index+4];if(d&&d!=="/")break;ke=ke.slice(3),xt("/**",3)}if(Y.type==="bos"&&Me()){le.type="globstar",le.value+=se,le.output=Ae(T),ee.output=le.output,ee.globstar=!0,xt(se);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&!Rt&&Me()){ee.output=ee.output.slice(0,-(Y.output+le.output).length),Y.output=`(?:${Y.output}`,le.type="globstar",le.output=Ae(T)+(T.strictSlashes?")":"|$)"),le.value+=se,ee.globstar=!0,ee.output+=Y.output+le.output,xt(se);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&ke[0]==="/"){const d=ke[1]!==void 0?"|$":"";ee.output=ee.output.slice(0,-(Y.output+le.output).length),Y.output=`(?:${Y.output}`,le.type="globstar",le.output=`${Ae(T)}${ne}|${ne}${d})`,le.value+=se,ee.output+=Y.output+le.output,ee.globstar=!0,xt(se+pt()),qe({type:"slash",value:"/",output:""});continue}if(Y.type==="bos"&&ke[0]==="/"){le.type="globstar",le.value+=se,le.output=`(?:^|${ne}|${Ae(T)}${ne})`,ee.output=le.output,ee.globstar=!0,xt(se+pt()),qe({type:"slash",value:"/",output:""});continue}ee.output=ee.output.slice(0,-le.output.length),le.type="globstar",le.output=Ae(T),le.value+=se,ee.output+=le.output,ee.globstar=!0,xt(se);continue}const at={type:"star",value:se,output:Ve};if(T.bash===!0){at.output=".*?",(le.type==="bos"||le.type==="slash")&&(at.output=Se+at.output),qe(at);continue}if(le&&(le.type==="bracket"||le.type==="paren")&&T.regex===!0){at.output=se,qe(at);continue}(ee.index===ee.start||le.type==="slash"||le.type==="dot")&&(le.type==="dot"?(ee.output+=Le,le.output+=Le):T.dot===!0?(ee.output+=Be,le.output+=Be):(ee.output+=Se,le.output+=Se),Ze()!=="*"&&(ee.output+=ce,le.output+=ce)),qe(at)}for(;ee.brackets>0;){if(T.strictBrackets===!0)throw new SyntaxError(b("closing","]"));ee.output=B.escapeLast(ee.output,"["),Je("brackets")}for(;ee.parens>0;){if(T.strictBrackets===!0)throw new SyntaxError(b("closing",")"));ee.output=B.escapeLast(ee.output,"("),Je("parens")}for(;ee.braces>0;){if(T.strictBrackets===!0)throw new SyntaxError(b("closing","}"));ee.output=B.escapeLast(ee.output,"{"),Je("braces")}if(T.strictSlashes!==!0&&(le.type==="star"||le.type==="bracket")&&qe({type:"maybe_slash",value:"",output:`${ne}?`}),ee.backtrack===!0){ee.output="";for(const ke of ee.tokens)ee.output+=ke.output!=null?ke.output:ke.value,ke.suffix&&(ee.output+=ke.suffix)}return ee},"parse");y.fastpaths=(S,k)=>{const T={...k},Z=typeof T.maxLength=="number"?Math.min($,T.maxLength):$,te=S.length;if(te>Z)throw new SyntaxError(`Input length: ${te}, exceeds maximum allowed length: ${Z}`);S=g[S]||S;const de=B.isWindows(k),{DOT_LITERAL:U,SLASH_LITERAL:q,ONE_CHAR:X,DOTS_SLASH:P,NO_DOT:z,NO_DOTS:J,NO_DOTS_SLASH:ae,STAR:ne,START_ANCHOR:ce}=C.globChars(de),pe=T.dot?J:z,be=T.dot?ae:z,Le=T.capture?"":"?:",Be={negated:!1,prefix:""};let H=T.bash===!0?".*?":ne;T.capture&&(H=`(${H})`);const Ke=l(Se=>Se.noglobstar===!0?H:`(${Le}(?:(?!${ce}${Se.dot?P:U}).)*?)`,"globstar"),He=l(Se=>{switch(Se){case"*":return`${pe}${X}${H}`;case".*":return`${U}${X}${H}`;case"*.*":return`${pe}${H}${U}${X}${H}`;case"*/*":return`${pe}${H}${q}${X}${be}${H}`;case"**":return pe+Ke(T);case"**/*":return`(?:${pe}${Ke(T)}${q})?${be}${X}${H}`;case"**/*.*":return`(?:${pe}${Ke(T)}${q})?${be}${H}${U}${X}${H}`;case"**/.*":return`(?:${pe}${Ke(T)}${q})?${U}${X}${H}`;default:{const it=/^(.*?)\.(\w+)$/.exec(Se);if(!it)return;const Ve=He(it[1]);return Ve?Ve+U+it[2]:void 0}}},"create"),$e=B.removePrefix(S,Be);let Ae=He($e);return Ae&&T.strictSlashes!==!0&&(Ae+=`${q}?`),Ae},K.exports=y},5761:(K,_,m)=>{"use strict";const C=m(6470),B=m(9826),$=m(3969),V=m(292),j=m(3889),F=l(x=>x&&typeof x=="object"&&!Array.isArray(x),"isObject"),g=l((x,b,y=!1)=>{if(Array.isArray(x)){const q=x.map(P=>g(P,b,y));return l(P=>{for(const z of q){const J=z(P);if(J)return J}return!1},"arrayMatcher")}const S=F(x)&&x.tokens&&x.input;if(x===""||typeof x!="string"&&!S)throw new TypeError("Expected pattern to be a non-empty string");const k=b||{},T=V.isWindows(b),Z=S?g.compileRe(x,b):g.makeRe(x,b,!1,!0),te=Z.state;delete Z.state;let de=l(()=>!1,"isIgnored");if(k.ignore){const q={...b,ignore:null,onMatch:null,onResult:null};de=g(k.ignore,q,y)}const U=l((q,X=!1)=>{const{isMatch:P,match:z,output:J}=g.test(q,Z,b,{glob:x,posix:T}),ae={glob:x,state:te,regex:Z,posix:T,input:q,output:J,match:z,isMatch:P};return typeof k.onResult=="function"&&k.onResult(ae),P===!1?(ae.isMatch=!1,X?ae:!1):de(q)?(typeof k.onIgnore=="function"&&k.onIgnore(ae),ae.isMatch=!1,X?ae:!1):(typeof k.onMatch=="function"&&k.onMatch(ae),X?ae:!0)},"matcher");return y&&(U.state=te),U},"picomatch");g.test=(x,b,y,{glob:S,posix:k}={})=>{if(typeof x!="string")throw new TypeError("Expected input to be a string");if(x==="")return{isMatch:!1,output:""};const T=y||{},Z=T.format||(k?V.toPosixSlashes:null);let te=x===S,de=te&&Z?Z(x):x;return te===!1&&(de=Z?Z(x):x,te=de===S),(te===!1||T.capture===!0)&&(T.matchBase===!0||T.basename===!0?te=g.matchBase(x,b,y,k):te=b.exec(de)),{isMatch:Boolean(te),match:te,output:de}},g.matchBase=(x,b,y,S=V.isWindows(y))=>(b instanceof RegExp?b:g.makeRe(b,y)).test(C.basename(x)),g.isMatch=(x,b,y)=>g(b,y)(x),g.parse=(x,b)=>Array.isArray(x)?x.map(y=>g.parse(y,b)):$(x,{...b,fastpaths:!1}),g.scan=(x,b)=>B(x,b),g.compileRe=(x,b,y=!1,S=!1)=>{if(y===!0)return x.output;const k=b||{},T=k.contains?"":"^",Z=k.contains?"":"$";let te=`${T}(?:${x.output})${Z}`;x&&x.negated===!0&&(te=`^(?!${te}).*$`);const de=g.toRegex(te,b);return S===!0&&(de.state=x),de},g.makeRe=(x,b={},y=!1,S=!1)=>{if(!x||typeof x!="string")throw new TypeError("Expected a non-empty string");let k={negated:!1,fastpaths:!0};return b.fastpaths!==!1&&(x[0]==="."||x[0]==="*")&&(k.output=$.fastpaths(x,b)),k.output||(k=$(x,b)),g.compileRe(k,b,y,S)},g.toRegex=(x,b)=>{try{const y=b||{};return new RegExp(x,y.flags||(y.nocase?"i":""))}catch(y){if(b&&b.debug===!0)throw y;return/$^/}},g.constants=j,K.exports=g},9826:(K,_,m)=>{"use strict";const C=m(292),{CHAR_ASTERISK:B,CHAR_AT:$,CHAR_BACKWARD_SLASH:V,CHAR_COMMA:j,CHAR_DOT:F,CHAR_EXCLAMATION_MARK:g,CHAR_FORWARD_SLASH:x,CHAR_LEFT_CURLY_BRACE:b,CHAR_LEFT_PARENTHESES:y,CHAR_LEFT_SQUARE_BRACKET:S,CHAR_PLUS:k,CHAR_QUESTION_MARK:T,CHAR_RIGHT_CURLY_BRACE:Z,CHAR_RIGHT_PARENTHESES:te,CHAR_RIGHT_SQUARE_BRACKET:de}=m(3889),U=l(P=>P===x||P===V,"isPathSeparator"),q=l(P=>{P.isPrefix!==!0&&(P.depth=P.isGlobstar?1/0:1)},"depth"),X=l((P,z)=>{const J=z||{},ae=P.length-1,ne=J.parts===!0||J.scanToEnd===!0,ce=[],pe=[],be=[];let Le=P,Be=-1,H=0,Ke=0,He=!1,$e=!1,Ae=!1,Se=!1,it=!1,Ve=!1,ee=!1,We=!1,ze=!1,nt=!1,le=0,se,Me,Ze={value:"",depth:0,isGlob:!1};const pt=l(()=>Be>=ae,"eos"),jt=l(()=>Le.charCodeAt(Be+1),"peek"),xt=l(()=>(se=Me,Le.charCodeAt(++Be)),"advance");for(;Be<ae;){Me=xt();let qe;if(Me===V){ee=Ze.backslashes=!0,Me=xt(),Me===b&&(Ve=!0);continue}if(Ve===!0||Me===b){for(le++;pt()!==!0&&(Me=xt());){if(Me===V){ee=Ze.backslashes=!0,xt();continue}if(Me===b){le++;continue}if(Ve!==!0&&Me===F&&(Me=xt())===F){if(He=Ze.isBrace=!0,Ae=Ze.isGlob=!0,nt=!0,ne===!0)continue;break}if(Ve!==!0&&Me===j){if(He=Ze.isBrace=!0,Ae=Ze.isGlob=!0,nt=!0,ne===!0)continue;break}if(Me===Z&&(le--,le===0)){Ve=!1,He=Ze.isBrace=!0,nt=!0;break}}if(ne===!0)continue;break}if(Me===x){if(ce.push(Be),pe.push(Ze),Ze={value:"",depth:0,isGlob:!1},nt===!0)continue;if(se===F&&Be===H+1){H+=2;continue}Ke=Be+1;continue}if(J.noext!==!0&&(Me===k||Me===$||Me===B||Me===T||Me===g)===!0&&jt()===y){if(Ae=Ze.isGlob=!0,Se=Ze.isExtglob=!0,nt=!0,Me===g&&Be===H&&(ze=!0),ne===!0){for(;pt()!==!0&&(Me=xt());){if(Me===V){ee=Ze.backslashes=!0,Me=xt();continue}if(Me===te){Ae=Ze.isGlob=!0,nt=!0;break}}continue}break}if(Me===B){if(se===B&&(it=Ze.isGlobstar=!0),Ae=Ze.isGlob=!0,nt=!0,ne===!0)continue;break}if(Me===T){if(Ae=Ze.isGlob=!0,nt=!0,ne===!0)continue;break}if(Me===S){for(;pt()!==!0&&(qe=xt());){if(qe===V){ee=Ze.backslashes=!0,xt();continue}if(qe===de){$e=Ze.isBracket=!0,Ae=Ze.isGlob=!0,nt=!0;break}}if(ne===!0)continue;break}if(J.nonegate!==!0&&Me===g&&Be===H){We=Ze.negated=!0,H++;continue}if(J.noparen!==!0&&Me===y){if(Ae=Ze.isGlob=!0,ne===!0){for(;pt()!==!0&&(Me=xt());){if(Me===y){ee=Ze.backslashes=!0,Me=xt();continue}if(Me===te){nt=!0;break}}continue}break}if(Ae===!0){if(nt=!0,ne===!0)continue;break}}J.noext===!0&&(Se=!1,Ae=!1);let mt=Le,fn="",Yt="";H>0&&(fn=Le.slice(0,H),Le=Le.slice(H),Ke-=H),mt&&Ae===!0&&Ke>0?(mt=Le.slice(0,Ke),Yt=Le.slice(Ke)):Ae===!0?(mt="",Yt=Le):mt=Le,mt&&mt!==""&&mt!=="/"&&mt!==Le&&U(mt.charCodeAt(mt.length-1))&&(mt=mt.slice(0,-1)),J.unescape===!0&&(Yt&&(Yt=C.removeBackslashes(Yt)),mt&&ee===!0&&(mt=C.removeBackslashes(mt)));const Je={prefix:fn,input:P,start:H,base:mt,glob:Yt,isBrace:He,isBracket:$e,isGlob:Ae,isExtglob:Se,isGlobstar:it,negated:We,negatedExtglob:ze};if(J.tokens===!0&&(Je.maxDepth=0,U(Me)||pe.push(Ze),Je.tokens=pe),J.parts===!0||J.tokens===!0){let qe;for(let Xe=0;Xe<ce.length;Xe++){const tr=qe?qe+1:H,ke=ce[Xe],at=P.slice(tr,ke);J.tokens&&(Xe===0&&H!==0?(pe[Xe].isPrefix=!0,pe[Xe].value=fn):pe[Xe].value=at,q(pe[Xe]),Je.maxDepth+=pe[Xe].depth),(Xe!==0||at!=="")&&be.push(at),qe=ke}if(qe&&qe+1<P.length){const Xe=P.slice(qe+1);be.push(Xe),J.tokens&&(pe[pe.length-1].value=Xe,q(pe[pe.length-1]),Je.maxDepth+=pe[pe.length-1].depth)}Je.slashes=ce,Je.parts=be}return Je},"scan");K.exports=X},292:(K,_,m)=>{"use strict";var C=m(6038);const B=m(6470),$=C.platform==="win32",{REGEX_BACKSLASH:V,REGEX_REMOVE_BACKSLASH:j,REGEX_SPECIAL_CHARS:F,REGEX_SPECIAL_CHARS_GLOBAL:g}=m(3889);_.isObject=x=>x!==null&&typeof x=="object"&&!Array.isArray(x),_.hasRegexChars=x=>F.test(x),_.isRegexChar=x=>x.length===1&&_.hasRegexChars(x),_.escapeRegex=x=>x.replace(g,"\\$1"),_.toPosixSlashes=x=>x.replace(V,"/"),_.removeBackslashes=x=>x.replace(j,b=>b==="\\"?"":b),_.supportsLookbehinds=()=>{const x=C.version.slice(1).split(".").map(Number);return x.length===3&&x[0]>=9||x[0]===8&&x[1]>=10},_.isWindows=x=>x&&typeof x.windows=="boolean"?x.windows:$===!0||B.sep==="\\",_.escapeLast=(x,b,y)=>{const S=x.lastIndexOf(b,y);return S===-1?x:x[S-1]==="\\"?_.escapeLast(x,b,S-1):`${x.slice(0,S)}\\${x.slice(S)}`},_.removePrefix=(x,b={})=>{let y=x;return y.startsWith("./")&&(y=y.slice(2),b.prefix="./"),y},_.wrapOutput=(x,b={},y={})=>{const S=y.contains?"":"^",k=y.contains?"":"$";let T=`${S}(?:${x})${k}`;return b.negated===!0&&(T=`(?:^(?!${T}).*$)`),T}},6038:K=>{var _=K.exports={},m,C;function B(){throw new Error("setTimeout has not been defined")}l(B,"defaultSetTimout");function $(){throw new Error("clearTimeout has not been defined")}l($,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?m=setTimeout:m=B}catch(Z){m=B}try{typeof clearTimeout=="function"?C=clearTimeout:C=$}catch(Z){C=$}}();function V(Z){if(m===setTimeout)return setTimeout(Z,0);if((m===B||!m)&&setTimeout)return m=setTimeout,setTimeout(Z,0);try{return m(Z,0)}catch(te){try{return m.call(null,Z,0)}catch(de){return m.call(this,Z,0)}}}l(V,"runTimeout");function j(Z){if(C===clearTimeout)return clearTimeout(Z);if((C===$||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(Z);try{return C(Z)}catch(te){try{return C.call(null,Z)}catch(de){return C.call(this,Z)}}}l(j,"runClearTimeout");var F=[],g=!1,x,b=-1;function y(){!g||!x||(g=!1,x.length?F=x.concat(F):b=-1,F.length&&S())}l(y,"cleanUpNextTick");function S(){if(!g){var Z=V(y);g=!0;for(var te=F.length;te;){for(x=F,F=[];++b<te;)x&&x[b].run();b=-1,te=F.length}x=null,g=!1,j(Z)}}l(S,"drainQueue"),_.nextTick=function(Z){var te=new Array(arguments.length-1);if(arguments.length>1)for(var de=1;de<arguments.length;de++)te[de-1]=arguments[de];F.push(new k(Z,te)),F.length===1&&!g&&V(S)};function k(Z,te){this.fun=Z,this.array=te}l(k,"Item"),k.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={};function T(){}l(T,"noop"),_.on=T,_.addListener=T,_.once=T,_.off=T,_.removeListener=T,_.removeAllListeners=T,_.emit=T,_.prependListener=T,_.prependOnceListener=T,_.listeners=function(Z){return[]},_.binding=function(Z){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(Z){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},5431:(K,_,m)=>{"use strict";K.exports=m(7905)},7905:(K,_,m)=>{"use strict";var C=m(1417);function B(){return!0}l(B,"_toTrue");function $(){return!1}l($,"_toFalse");function V(te){return te.then(B,$)}l(V,"pSuccess");function j(te){return te}l(j,"_pass");function F(te){throw te}l(F,"_throw");function g(te){return te.then(j,F)}l(g,"ensurePromise");function x(te,de){return{result:te,args:de,expire_id:0,prefetch_id:0,need_prefetch:!1}}l(x,"createCacheObj");function b(te,de){!te[de]||(clearTimeout(te[de].expire_id),clearTimeout(te[de].prefetch_id),delete te[de])}l(b,"destroyCacheObj");function y(te,de){!te[de]||(te[de].need_prefetch=!0)}l(y,"askPrefetch");function S(te){var de=te[0],U=te[1],q=te[2],X=te[3];if(!!U[q]){if(de){if(!X.maxAge)return;U[q].expire_id=setTimeout(b,X.maxAge,U,q),U[q].prefetch_id=setTimeout(y,X.maxAge*.7,U,q),U[q].expire_id.unref&&U[q].expire_id.unref(),U[q].prefetch_id.unref&&U[q].prefetch_id.unref();return}if(!X.maxErrorAge){b(U,q);return}U[q].expire_id=setTimeout(b,X.maxErrorAge,U,q),U[q].expire_id.unref&&U[q].expire_id.unref()}}l(S,"_track_proceed");function k(te,de,U){var q=te[de].result.constructor;q.all([V(te[de].result),te,de,U]).then(S)}l(k,"trackCacheObj");function T(te){var de=te[0],U=te[1],q=te[2],X=te[3],P=te[4][0];!U[q]||!de||(U[q].result=P,clearTimeout(U[q].expire_id),k(U,q,X))}l(T,"_prefetch_proceed");function Z(te,de,U){var q=g(U.fn.apply(null,te[de].args)),X=q.constructor;te[de].need_prefetch=!1,X.all([V(q),te,de,U,[q]]).then(T)}l(Z,"doPrefetch"),K.exports=l(function(de,U){var q={},X=U||{},P=C(X.resolve),z={fn:de,maxAge:X.maxAge||0,maxErrorAge:X.maxErrorAge||0};function J(){for(var ae=new Array(arguments.length),ne=0;ne<ae.length;ne++)ae[ne]=arguments[ne];var ce=P(ae);return q[ce]?q[ce].need_prefetch&&Z(q,ce,z):(q[ce]=x(g(z.fn.apply(null,ae)),z.maxAge||z.maxErrorAge?ae:null),k(q,ce,z)),q[ce].result}return l(J,"memoizedFn"),J.clear=function(){var ae=Object.keys(q);return ae.forEach(function(ne){b(q,ne)}),ae.length},J},"promiseMemoize")},1417:K=>{"use strict";var _={simple:function(C){return C.length?C.join(""):""},json:function(C){if(!C.length)return"";for(var B=[],$=C.length-1;$>=0;$--)B.push(JSON.stringify(C[$]));return B.join("")}};function m(C){return C.forEach(function(B){if(typeof B=="string"&&!_.hasOwnProperty(B))throw new Error('promise-memoize: unknown value "'+B+'" in resolve option')}),function(B){var $=Math.min(C.length,B.length);if(!$)return"";for(var V=[],j=0;j<$;j++)typeof C[j]=="string"?V.push(_[C[j]]([B[j]])):V.push(C[j](B[j]));return V.join("")}}l(m,"createFlexResolver"),K.exports=l(function(B){if(typeof B=="undefined")return _.simple;if(typeof B=="string"&&_.hasOwnProperty(B))return _[B];if(Array.isArray(B))return m(B);if(Object.prototype.toString.call(B)==="[object Function]")return B;throw new Error("promise-memoize: invalid resolve option")},"createResolver")},2999:(K,_,m)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const C=m(3338),B=l((U,q,X)=>{if(C(U)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(q===void 0||U===q)return String(U);if(C(q)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let P={relaxZeros:!0,...X};typeof P.strictZeros=="boolean"&&(P.relaxZeros=P.strictZeros===!1);let z=String(P.relaxZeros),J=String(P.shorthand),ae=String(P.capture),ne=String(P.wrap),ce=U+":"+q+"="+z+J+ae+ne;if(B.cache.hasOwnProperty(ce))return B.cache[ce].result;let pe=Math.min(U,q),be=Math.max(U,q);if(Math.abs(pe-be)===1){let He=U+"|"+q;return P.capture?`(${He})`:P.wrap===!1?He:`(?:${He})`}let Le=te(U)||te(q),Be={min:U,max:q,a:pe,b:be},H=[],Ke=[];if(Le&&(Be.isPadded=Le,Be.maxLen=String(Be.max).length),pe<0){let He=be<0?Math.abs(be):1;Ke=F(He,Math.abs(pe),Be,P),pe=Be.a=0}return be>=0&&(H=F(pe,be,Be,P)),Be.negatives=Ke,Be.positives=H,Be.result=$(Ke,H,P),P.capture===!0?Be.result=`(${Be.result})`:P.wrap!==!1&&H.length+Ke.length>1&&(Be.result=`(?:${Be.result})`),B.cache[ce]=Be,Be.result},"toRegexRange");function $(U,q,X){let P=g(U,q,"-",!1,X)||[],z=g(q,U,"",!1,X)||[],J=g(U,q,"-?",!0,X)||[];return P.concat(J).concat(z).join("|")}l($,"collatePatterns");function V(U,q){let X=1,P=1,z=S(U,X),J=new Set([q]);for(;U<=z&&z<=q;)J.add(z),X+=1,z=S(U,X);for(z=k(q+1,P)-1;U<z&&z<=q;)J.add(z),P+=1,z=k(q+1,P)-1;return J=[...J],J.sort(b),J}l(V,"splitToRanges");function j(U,q,X){if(U===q)return{pattern:U,count:[],digits:0};let P=x(U,q),z=P.length,J="",ae=0;for(let ne=0;ne<z;ne++){let[ce,pe]=P[ne];ce===pe?J+=ce:ce!=="0"||pe!=="9"?J+=Z(ce,pe,X):ae++}return ae&&(J+=X.shorthand===!0?"\\d":"[0-9]"),{pattern:J,count:[ae],digits:z}}l(j,"rangeToPattern");function F(U,q,X,P){let z=V(U,q),J=[],ae=U,ne;for(let ce=0;ce<z.length;ce++){let pe=z[ce],be=j(String(ae),String(pe),P),Le="";if(!X.isPadded&&ne&&ne.pattern===be.pattern){ne.count.length>1&&ne.count.pop(),ne.count.push(be.count[0]),ne.string=ne.pattern+T(ne.count),ae=pe+1;continue}X.isPadded&&(Le=de(pe,X,P)),be.string=Le+be.pattern+T(be.count),J.push(be),ae=pe+1,ne=be}return J}l(F,"splitToPatterns");function g(U,q,X,P,z){let J=[];for(let ae of U){let{string:ne}=ae;!P&&!y(q,"string",ne)&&J.push(X+ne),P&&y(q,"string",ne)&&J.push(X+ne)}return J}l(g,"filterPatterns");function x(U,q){let X=[];for(let P=0;P<U.length;P++)X.push([U[P],q[P]]);return X}l(x,"zip");function b(U,q){return U>q?1:q>U?-1:0}l(b,"compare");function y(U,q,X){return U.some(P=>P[q]===X)}l(y,"contains");function S(U,q){return Number(String(U).slice(0,-q)+"9".repeat(q))}l(S,"countNines");function k(U,q){return U-U%Math.pow(10,q)}l(k,"countZeros");function T(U){let[q=0,X=""]=U;return X||q>1?`{${q+(X?","+X:"")}}`:""}l(T,"toQuantifier");function Z(U,q,X){return`[${U}${q-U==1?"":"-"}${q}]`}l(Z,"toCharacterClass");function te(U){return/^-?(0+)\d/.test(U)}l(te,"hasPadding");function de(U,q,X){if(!q.isPadded)return U;let P=Math.abs(q.maxLen-String(U).length),z=X.relaxZeros!==!1;switch(P){case 0:return"";case 1:return z?"0?":"0";case 2:return z?"0{0,2}":"00";default:return z?`0{0,${P}}`:`0{${P}}`}}l(de,"padZeros"),B.cache={},B.clearCache=()=>B.cache={},K.exports=B},9742:(K,_)=>{"use strict";_.byteLength=g,_.toByteArray=b,_.fromByteArray=k;for(var m=[],C=[],B=typeof Uint8Array!="undefined"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V=0,j=$.length;V<j;++V)m[V]=$[V],C[$.charCodeAt(V)]=V;C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63;function F(T){var Z=T.length;if(Z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var te=T.indexOf("=");te===-1&&(te=Z);var de=te===Z?0:4-te%4;return[te,de]}l(F,"getLens");function g(T){var Z=F(T),te=Z[0],de=Z[1];return(te+de)*3/4-de}l(g,"byteLength");function x(T,Z,te){return(Z+te)*3/4-te}l(x,"_byteLength");function b(T){var Z,te=F(T),de=te[0],U=te[1],q=new B(x(T,de,U)),X=0,P=U>0?de-4:de,z;for(z=0;z<P;z+=4)Z=C[T.charCodeAt(z)]<<18|C[T.charCodeAt(z+1)]<<12|C[T.charCodeAt(z+2)]<<6|C[T.charCodeAt(z+3)],q[X++]=Z>>16&255,q[X++]=Z>>8&255,q[X++]=Z&255;return U===2&&(Z=C[T.charCodeAt(z)]<<2|C[T.charCodeAt(z+1)]>>4,q[X++]=Z&255),U===1&&(Z=C[T.charCodeAt(z)]<<10|C[T.charCodeAt(z+1)]<<4|C[T.charCodeAt(z+2)]>>2,q[X++]=Z>>8&255,q[X++]=Z&255),q}l(b,"toByteArray");function y(T){return m[T>>18&63]+m[T>>12&63]+m[T>>6&63]+m[T&63]}l(y,"tripletToBase64");function S(T,Z,te){for(var de,U=[],q=Z;q<te;q+=3)de=(T[q]<<16&16711680)+(T[q+1]<<8&65280)+(T[q+2]&255),U.push(y(de));return U.join("")}l(S,"encodeChunk");function k(T){for(var Z,te=T.length,de=te%3,U=[],q=16383,X=0,P=te-de;X<P;X+=q)U.push(S(T,X,X+q>P?P:X+q));return de===1?(Z=T[te-1],U.push(m[Z>>2]+m[Z<<4&63]+"==")):de===2&&(Z=(T[te-2]<<8)+T[te-1],U.push(m[Z>>10]+m[Z>>4&63]+m[Z<<2&63]+"=")),U.join("")}l(k,"fromByteArray")},5186:(K,_,m)=>{var C=m(3698),B=m(2505),$=m(6417),V=Function.bind,j=V.bind(V);function F(S,k,T){var Z=j($,null).apply(null,T?[k,T]:[k]);S.api={remove:Z},S.remove=Z,["before","error","after","wrap"].forEach(function(te){var de=T?[k,te,T]:[k,te];S[te]=S.api[te]=j(B,null).apply(null,de)})}l(F,"bindApi");function g(){var S="h",k={registry:{}},T=C.bind(null,k,S);return F(T,k,S),T}l(g,"HookSingular");function x(){var S={registry:{}},k=C.bind(null,S);return F(k,S),k}l(x,"HookCollection");var b=!1;function y(){return b||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),b=!0),x()}l(y,"Hook"),y.Singular=g.bind(),y.Collection=x.bind(),K.exports=y,K.exports.Hook=y,K.exports.Singular=y.Singular,K.exports.Collection=y.Collection},2505:K=>{K.exports=_;function _(m,C,B,$){var V=$;m.registry[B]||(m.registry[B]=[]),C==="before"&&($=l(function(j,F){return Promise.resolve().then(V.bind(null,F)).then(j.bind(null,F))},"hook")),C==="after"&&($=l(function(j,F){var g;return Promise.resolve().then(j.bind(null,F)).then(function(x){return g=x,V(g,F)}).then(function(){return g})},"hook")),C==="error"&&($=l(function(j,F){return Promise.resolve().then(j.bind(null,F)).catch(function(g){return V(g,F)})},"hook")),m.registry[B].push({hook:$,orig:V})}l(_,"addHook")},3698:K=>{K.exports=_;function _(m,C,B,$){if(typeof B!="function")throw new Error("method for before hook must be a function");return $||($={}),Array.isArray(C)?C.reverse().reduce(function(V,j){return _.bind(null,m,j,V,$)},B)():Promise.resolve().then(function(){return m.registry[C]?m.registry[C].reduce(function(V,j){return j.hook.bind(null,V,$)},B)():B($)})}l(_,"register")},6417:K=>{K.exports=_;function _(m,C,B){if(!!m.registry[C]){var $=m.registry[C].map(function(V){return V.orig}).indexOf(B);$!==-1&&m.registry[C].splice($,1)}}l(_,"removeHook")},8764:(K,_,m)=>{"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const C=m(9742),B=m(645),$=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=g,_.SlowBuffer=q,_.INSPECT_MAX_BYTES=50;const V=2147483647;_.kMaxLength=V,g.TYPED_ARRAY_SUPPORT=j(),!g.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function j(){try{const E=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(E,d),E.foo()===42}catch(E){return!1}}l(j,"typedArraySupport"),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.byteOffset}});function F(E){if(E>V)throw new RangeError('The value "'+E+'" is invalid for option "size"');const d=new Uint8Array(E);return Object.setPrototypeOf(d,g.prototype),d}l(F,"createBuffer");function g(E,d,h){if(typeof E=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(E)}return x(E,d,h)}l(g,"Buffer"),g.poolSize=8192;function x(E,d,h){if(typeof E=="string")return k(E,d);if(ArrayBuffer.isView(E))return Z(E);if(E==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(Y(E,ArrayBuffer)||E&&Y(E.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Y(E,SharedArrayBuffer)||E&&Y(E.buffer,SharedArrayBuffer)))return te(E,d,h);if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=E.valueOf&&E.valueOf();if(L!=null&&L!==E)return g.from(L,d,h);const Q=de(E);if(Q)return Q;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return g.from(E[Symbol.toPrimitive]("string"),d,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}l(x,"from"),g.from=function(E,d,h){return x(E,d,h)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function b(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}l(b,"assertSize");function y(E,d,h){return b(E),E<=0?F(E):d!==void 0?typeof h=="string"?F(E).fill(d,h):F(E).fill(d):F(E)}l(y,"alloc"),g.alloc=function(E,d,h){return y(E,d,h)};function S(E){return b(E),F(E<0?0:U(E)|0)}l(S,"allocUnsafe"),g.allocUnsafe=function(E){return S(E)},g.allocUnsafeSlow=function(E){return S(E)};function k(E,d){if((typeof d!="string"||d==="")&&(d="utf8"),!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const h=X(E,d)|0;let L=F(h);const Q=L.write(E,d);return Q!==h&&(L=L.slice(0,Q)),L}l(k,"fromString");function T(E){const d=E.length<0?0:U(E.length)|0,h=F(d);for(let L=0;L<d;L+=1)h[L]=E[L]&255;return h}l(T,"fromArrayLike");function Z(E){if(Y(E,Uint8Array)){const d=new Uint8Array(E);return te(d.buffer,d.byteOffset,d.byteLength)}return T(E)}l(Z,"fromArrayView");function te(E,d,h){if(d<0||E.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<d+(h||0))throw new RangeError('"length" is outside of buffer bounds');let L;return d===void 0&&h===void 0?L=new Uint8Array(E):h===void 0?L=new Uint8Array(E,d):L=new Uint8Array(E,d,h),Object.setPrototypeOf(L,g.prototype),L}l(te,"fromArrayBuffer");function de(E){if(g.isBuffer(E)){const d=U(E.length)|0,h=F(d);return h.length===0||E.copy(h,0,0,d),h}if(E.length!==void 0)return typeof E.length!="number"||et(E.length)?F(0):T(E);if(E.type==="Buffer"&&Array.isArray(E.data))return T(E.data)}l(de,"fromObject");function U(E){if(E>=V)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+V.toString(16)+" bytes");return E|0}l(U,"checked");function q(E){return+E!=E&&(E=0),g.alloc(+E)}l(q,"SlowBuffer"),g.isBuffer=l(function(d){return d!=null&&d._isBuffer===!0&&d!==g.prototype},"isBuffer"),g.compare=l(function(d,h){if(Y(d,Uint8Array)&&(d=g.from(d,d.offset,d.byteLength)),Y(h,Uint8Array)&&(h=g.from(h,h.offset,h.byteLength)),!g.isBuffer(d)||!g.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===h)return 0;let L=d.length,Q=h.length;for(let oe=0,ge=Math.min(L,Q);oe<ge;++oe)if(d[oe]!==h[oe]){L=d[oe],Q=h[oe];break}return L<Q?-1:Q<L?1:0},"compare"),g.isEncoding=l(function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),g.concat=l(function(d,h){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return g.alloc(0);let L;if(h===void 0)for(h=0,L=0;L<d.length;++L)h+=d[L].length;const Q=g.allocUnsafe(h);let oe=0;for(L=0;L<d.length;++L){let ge=d[L];if(Y(ge,Uint8Array))oe+ge.length>Q.length?(g.isBuffer(ge)||(ge=g.from(ge)),ge.copy(Q,oe)):Uint8Array.prototype.set.call(Q,ge,oe);else if(g.isBuffer(ge))ge.copy(Q,oe);else throw new TypeError('"list" argument must be an Array of Buffers');oe+=ge.length}return Q},"concat");function X(E,d){if(g.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||Y(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);const h=E.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&h===0)return 0;let Q=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return qe(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return ke(E).length;default:if(Q)return L?-1:qe(E).length;d=(""+d).toLowerCase(),Q=!0}}l(X,"byteLength"),g.byteLength=X;function P(E,d,h){let L=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,d>>>=0,h<=d))return"";for(E||(E="utf8");;)switch(E){case"hex":return Se(this,d,h);case"utf8":case"utf-8":return H(this,d,h);case"ascii":return $e(this,d,h);case"latin1":case"binary":return Ae(this,d,h);case"base64":return Be(this,d,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,d,h);default:if(L)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),L=!0}}l(P,"slowToString"),g.prototype._isBuffer=!0;function z(E,d,h){const L=E[d];E[d]=E[h],E[h]=L}l(z,"swap"),g.prototype.swap16=l(function(){const d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<d;h+=2)z(this,h,h+1);return this},"swap16"),g.prototype.swap32=l(function(){const d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<d;h+=4)z(this,h,h+3),z(this,h+1,h+2);return this},"swap32"),g.prototype.swap64=l(function(){const d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<d;h+=8)z(this,h,h+7),z(this,h+1,h+6),z(this,h+2,h+5),z(this,h+3,h+4);return this},"swap64"),g.prototype.toString=l(function(){const d=this.length;return d===0?"":arguments.length===0?H(this,0,d):P.apply(this,arguments)},"toString"),g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=l(function(d){if(!g.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:g.compare(this,d)===0},"equals"),g.prototype.inspect=l(function(){let d="";const h=_.INSPECT_MAX_BYTES;return d=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(d+=" ... "),"<Buffer "+d+">"},"inspect"),$&&(g.prototype[$]=g.prototype.inspect),g.prototype.compare=l(function(d,h,L,Q,oe){if(Y(d,Uint8Array)&&(d=g.from(d,d.offset,d.byteLength)),!g.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(h===void 0&&(h=0),L===void 0&&(L=d?d.length:0),Q===void 0&&(Q=0),oe===void 0&&(oe=this.length),h<0||L>d.length||Q<0||oe>this.length)throw new RangeError("out of range index");if(Q>=oe&&h>=L)return 0;if(Q>=oe)return-1;if(h>=L)return 1;if(h>>>=0,L>>>=0,Q>>>=0,oe>>>=0,this===d)return 0;let ge=oe-Q,ot=L-h;const At=Math.min(ge,ot),It=this.slice(Q,oe),Mt=d.slice(h,L);for(let dt=0;dt<At;++dt)if(It[dt]!==Mt[dt]){ge=It[dt],ot=Mt[dt];break}return ge<ot?-1:ot<ge?1:0},"compare");function J(E,d,h,L,Q){if(E.length===0)return-1;if(typeof h=="string"?(L=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,et(h)&&(h=Q?0:E.length-1),h<0&&(h=E.length+h),h>=E.length){if(Q)return-1;h=E.length-1}else if(h<0)if(Q)h=0;else return-1;if(typeof d=="string"&&(d=g.from(d,L)),g.isBuffer(d))return d.length===0?-1:ae(E,d,h,L,Q);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(E,d,h):Uint8Array.prototype.lastIndexOf.call(E,d,h):ae(E,[d],h,L,Q);throw new TypeError("val must be string, number or Buffer")}l(J,"bidirectionalIndexOf");function ae(E,d,h,L,Q){let oe=1,ge=E.length,ot=d.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(E.length<2||d.length<2)return-1;oe=2,ge/=2,ot/=2,h/=2}function At(Mt,dt){return oe===1?Mt[dt]:Mt.readUInt16BE(dt*oe)}l(At,"read");let It;if(Q){let Mt=-1;for(It=h;It<ge;It++)if(At(E,It)===At(d,Mt===-1?0:It-Mt)){if(Mt===-1&&(Mt=It),It-Mt+1===ot)return Mt*oe}else Mt!==-1&&(It-=It-Mt),Mt=-1}else for(h+ot>ge&&(h=ge-ot),It=h;It>=0;It--){let Mt=!0;for(let dt=0;dt<ot;dt++)if(At(E,It+dt)!==At(d,dt)){Mt=!1;break}if(Mt)return It}return-1}l(ae,"arrayIndexOf"),g.prototype.includes=l(function(d,h,L){return this.indexOf(d,h,L)!==-1},"includes"),g.prototype.indexOf=l(function(d,h,L){return J(this,d,h,L,!0)},"indexOf"),g.prototype.lastIndexOf=l(function(d,h,L){return J(this,d,h,L,!1)},"lastIndexOf");function ne(E,d,h,L){h=Number(h)||0;const Q=E.length-h;L?(L=Number(L),L>Q&&(L=Q)):L=Q;const oe=d.length;L>oe/2&&(L=oe/2);let ge;for(ge=0;ge<L;++ge){const ot=parseInt(d.substr(ge*2,2),16);if(et(ot))return ge;E[h+ge]=ot}return ge}l(ne,"hexWrite");function ce(E,d,h,L){return at(qe(d,E.length-h),E,h,L)}l(ce,"utf8Write");function pe(E,d,h,L){return at(Xe(d),E,h,L)}l(pe,"asciiWrite");function be(E,d,h,L){return at(ke(d),E,h,L)}l(be,"base64Write");function Le(E,d,h,L){return at(tr(d,E.length-h),E,h,L)}l(Le,"ucs2Write"),g.prototype.write=l(function(d,h,L,Q){if(h===void 0)Q="utf8",L=this.length,h=0;else if(L===void 0&&typeof h=="string")Q=h,L=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(L)?(L=L>>>0,Q===void 0&&(Q="utf8")):(Q=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const oe=this.length-h;if((L===void 0||L>oe)&&(L=oe),d.length>0&&(L<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let ge=!1;for(;;)switch(Q){case"hex":return ne(this,d,h,L);case"utf8":case"utf-8":return ce(this,d,h,L);case"ascii":case"latin1":case"binary":return pe(this,d,h,L);case"base64":return be(this,d,h,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,d,h,L);default:if(ge)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),ge=!0}},"write"),g.prototype.toJSON=l(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Be(E,d,h){return d===0&&h===E.length?C.fromByteArray(E):C.fromByteArray(E.slice(d,h))}l(Be,"base64Slice");function H(E,d,h){h=Math.min(E.length,h);const L=[];let Q=d;for(;Q<h;){const oe=E[Q];let ge=null,ot=oe>239?4:oe>223?3:oe>191?2:1;if(Q+ot<=h){let At,It,Mt,dt;switch(ot){case 1:oe<128&&(ge=oe);break;case 2:At=E[Q+1],(At&192)==128&&(dt=(oe&31)<<6|At&63,dt>127&&(ge=dt));break;case 3:At=E[Q+1],It=E[Q+2],(At&192)==128&&(It&192)==128&&(dt=(oe&15)<<12|(At&63)<<6|It&63,dt>2047&&(dt<55296||dt>57343)&&(ge=dt));break;case 4:At=E[Q+1],It=E[Q+2],Mt=E[Q+3],(At&192)==128&&(It&192)==128&&(Mt&192)==128&&(dt=(oe&15)<<18|(At&63)<<12|(It&63)<<6|Mt&63,dt>65535&&dt<1114112&&(ge=dt))}}ge===null?(ge=65533,ot=1):ge>65535&&(ge-=65536,L.push(ge>>>10&1023|55296),ge=56320|ge&1023),L.push(ge),Q+=ot}return He(L)}l(H,"utf8Slice");const Ke=4096;function He(E){const d=E.length;if(d<=Ke)return String.fromCharCode.apply(String,E);let h="",L=0;for(;L<d;)h+=String.fromCharCode.apply(String,E.slice(L,L+=Ke));return h}l(He,"decodeCodePointsArray");function $e(E,d,h){let L="";h=Math.min(E.length,h);for(let Q=d;Q<h;++Q)L+=String.fromCharCode(E[Q]&127);return L}l($e,"asciiSlice");function Ae(E,d,h){let L="";h=Math.min(E.length,h);for(let Q=d;Q<h;++Q)L+=String.fromCharCode(E[Q]);return L}l(Ae,"latin1Slice");function Se(E,d,h){const L=E.length;(!d||d<0)&&(d=0),(!h||h<0||h>L)&&(h=L);let Q="";for(let oe=d;oe<h;++oe)Q+=ht[E[oe]];return Q}l(Se,"hexSlice");function it(E,d,h){const L=E.slice(d,h);let Q="";for(let oe=0;oe<L.length-1;oe+=2)Q+=String.fromCharCode(L[oe]+L[oe+1]*256);return Q}l(it,"utf16leSlice"),g.prototype.slice=l(function(d,h){const L=this.length;d=~~d,h=h===void 0?L:~~h,d<0?(d+=L,d<0&&(d=0)):d>L&&(d=L),h<0?(h+=L,h<0&&(h=0)):h>L&&(h=L),h<d&&(h=d);const Q=this.subarray(d,h);return Object.setPrototypeOf(Q,g.prototype),Q},"slice");function Ve(E,d,h){if(E%1!=0||E<0)throw new RangeError("offset is not uint");if(E+d>h)throw new RangeError("Trying to access beyond buffer length")}l(Ve,"checkOffset"),g.prototype.readUintLE=g.prototype.readUIntLE=l(function(d,h,L){d=d>>>0,h=h>>>0,L||Ve(d,h,this.length);let Q=this[d],oe=1,ge=0;for(;++ge<h&&(oe*=256);)Q+=this[d+ge]*oe;return Q},"readUIntLE"),g.prototype.readUintBE=g.prototype.readUIntBE=l(function(d,h,L){d=d>>>0,h=h>>>0,L||Ve(d,h,this.length);let Q=this[d+--h],oe=1;for(;h>0&&(oe*=256);)Q+=this[d+--h]*oe;return Q},"readUIntBE"),g.prototype.readUint8=g.prototype.readUInt8=l(function(d,h){return d=d>>>0,h||Ve(d,1,this.length),this[d]},"readUInt8"),g.prototype.readUint16LE=g.prototype.readUInt16LE=l(function(d,h){return d=d>>>0,h||Ve(d,2,this.length),this[d]|this[d+1]<<8},"readUInt16LE"),g.prototype.readUint16BE=g.prototype.readUInt16BE=l(function(d,h){return d=d>>>0,h||Ve(d,2,this.length),this[d]<<8|this[d+1]},"readUInt16BE"),g.prototype.readUint32LE=g.prototype.readUInt32LE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},"readUInt32LE"),g.prototype.readUint32BE=g.prototype.readUInt32BE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},"readUInt32BE"),g.prototype.readBigUInt64LE=Rt(l(function(d){d=d>>>0,mt(d,"offset");const h=this[d],L=this[d+7];(h===void 0||L===void 0)&&fn(d,this.length-8);const Q=h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,oe=this[++d]+this[++d]*2**8+this[++d]*2**16+L*2**24;return BigInt(Q)+(BigInt(oe)<<BigInt(32))},"readBigUInt64LE")),g.prototype.readBigUInt64BE=Rt(l(function(d){d=d>>>0,mt(d,"offset");const h=this[d],L=this[d+7];(h===void 0||L===void 0)&&fn(d,this.length-8);const Q=h*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],oe=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+L;return(BigInt(Q)<<BigInt(32))+BigInt(oe)},"readBigUInt64BE")),g.prototype.readIntLE=l(function(d,h,L){d=d>>>0,h=h>>>0,L||Ve(d,h,this.length);let Q=this[d],oe=1,ge=0;for(;++ge<h&&(oe*=256);)Q+=this[d+ge]*oe;return oe*=128,Q>=oe&&(Q-=Math.pow(2,8*h)),Q},"readIntLE"),g.prototype.readIntBE=l(function(d,h,L){d=d>>>0,h=h>>>0,L||Ve(d,h,this.length);let Q=h,oe=1,ge=this[d+--Q];for(;Q>0&&(oe*=256);)ge+=this[d+--Q]*oe;return oe*=128,ge>=oe&&(ge-=Math.pow(2,8*h)),ge},"readIntBE"),g.prototype.readInt8=l(function(d,h){return d=d>>>0,h||Ve(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},"readInt8"),g.prototype.readInt16LE=l(function(d,h){d=d>>>0,h||Ve(d,2,this.length);const L=this[d]|this[d+1]<<8;return L&32768?L|4294901760:L},"readInt16LE"),g.prototype.readInt16BE=l(function(d,h){d=d>>>0,h||Ve(d,2,this.length);const L=this[d+1]|this[d]<<8;return L&32768?L|4294901760:L},"readInt16BE"),g.prototype.readInt32LE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},"readInt32LE"),g.prototype.readInt32BE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},"readInt32BE"),g.prototype.readBigInt64LE=Rt(l(function(d){d=d>>>0,mt(d,"offset");const h=this[d],L=this[d+7];(h===void 0||L===void 0)&&fn(d,this.length-8);const Q=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(L<<24);return(BigInt(Q)<<BigInt(32))+BigInt(h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)},"readBigInt64LE")),g.prototype.readBigInt64BE=Rt(l(function(d){d=d>>>0,mt(d,"offset");const h=this[d],L=this[d+7];(h===void 0||L===void 0)&&fn(d,this.length-8);const Q=(h<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(Q)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+L)},"readBigInt64BE")),g.prototype.readFloatLE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),B.read(this,d,!0,23,4)},"readFloatLE"),g.prototype.readFloatBE=l(function(d,h){return d=d>>>0,h||Ve(d,4,this.length),B.read(this,d,!1,23,4)},"readFloatBE"),g.prototype.readDoubleLE=l(function(d,h){return d=d>>>0,h||Ve(d,8,this.length),B.read(this,d,!0,52,8)},"readDoubleLE"),g.prototype.readDoubleBE=l(function(d,h){return d=d>>>0,h||Ve(d,8,this.length),B.read(this,d,!1,52,8)},"readDoubleBE");function ee(E,d,h,L,Q,oe){if(!g.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>Q||d<oe)throw new RangeError('"value" argument is out of bounds');if(h+L>E.length)throw new RangeError("Index out of range")}l(ee,"checkInt"),g.prototype.writeUintLE=g.prototype.writeUIntLE=l(function(d,h,L,Q){if(d=+d,h=h>>>0,L=L>>>0,!Q){const ot=Math.pow(2,8*L)-1;ee(this,d,h,L,ot,0)}let oe=1,ge=0;for(this[h]=d&255;++ge<L&&(oe*=256);)this[h+ge]=d/oe&255;return h+L},"writeUIntLE"),g.prototype.writeUintBE=g.prototype.writeUIntBE=l(function(d,h,L,Q){if(d=+d,h=h>>>0,L=L>>>0,!Q){const ot=Math.pow(2,8*L)-1;ee(this,d,h,L,ot,0)}let oe=L-1,ge=1;for(this[h+oe]=d&255;--oe>=0&&(ge*=256);)this[h+oe]=d/ge&255;return h+L},"writeUIntBE"),g.prototype.writeUint8=g.prototype.writeUInt8=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,1,255,0),this[h]=d&255,h+1},"writeUInt8"),g.prototype.writeUint16LE=g.prototype.writeUInt16LE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,2,65535,0),this[h]=d&255,this[h+1]=d>>>8,h+2},"writeUInt16LE"),g.prototype.writeUint16BE=g.prototype.writeUInt16BE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,2,65535,0),this[h]=d>>>8,this[h+1]=d&255,h+2},"writeUInt16BE"),g.prototype.writeUint32LE=g.prototype.writeUInt32LE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,4,4294967295,0),this[h+3]=d>>>24,this[h+2]=d>>>16,this[h+1]=d>>>8,this[h]=d&255,h+4},"writeUInt32LE"),g.prototype.writeUint32BE=g.prototype.writeUInt32BE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,4,4294967295,0),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4},"writeUInt32BE");function We(E,d,h,L,Q){xt(d,L,Q,E,h,7);let oe=Number(d&BigInt(4294967295));E[h++]=oe,oe=oe>>8,E[h++]=oe,oe=oe>>8,E[h++]=oe,oe=oe>>8,E[h++]=oe;let ge=Number(d>>BigInt(32)&BigInt(4294967295));return E[h++]=ge,ge=ge>>8,E[h++]=ge,ge=ge>>8,E[h++]=ge,ge=ge>>8,E[h++]=ge,h}l(We,"wrtBigUInt64LE");function ze(E,d,h,L,Q){xt(d,L,Q,E,h,7);let oe=Number(d&BigInt(4294967295));E[h+7]=oe,oe=oe>>8,E[h+6]=oe,oe=oe>>8,E[h+5]=oe,oe=oe>>8,E[h+4]=oe;let ge=Number(d>>BigInt(32)&BigInt(4294967295));return E[h+3]=ge,ge=ge>>8,E[h+2]=ge,ge=ge>>8,E[h+1]=ge,ge=ge>>8,E[h]=ge,h+8}l(ze,"wrtBigUInt64BE"),g.prototype.writeBigUInt64LE=Rt(l(function(d,h=0){return We(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),g.prototype.writeBigUInt64BE=Rt(l(function(d,h=0){return ze(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),g.prototype.writeIntLE=l(function(d,h,L,Q){if(d=+d,h=h>>>0,!Q){const At=Math.pow(2,8*L-1);ee(this,d,h,L,At-1,-At)}let oe=0,ge=1,ot=0;for(this[h]=d&255;++oe<L&&(ge*=256);)d<0&&ot===0&&this[h+oe-1]!==0&&(ot=1),this[h+oe]=(d/ge>>0)-ot&255;return h+L},"writeIntLE"),g.prototype.writeIntBE=l(function(d,h,L,Q){if(d=+d,h=h>>>0,!Q){const At=Math.pow(2,8*L-1);ee(this,d,h,L,At-1,-At)}let oe=L-1,ge=1,ot=0;for(this[h+oe]=d&255;--oe>=0&&(ge*=256);)d<0&&ot===0&&this[h+oe+1]!==0&&(ot=1),this[h+oe]=(d/ge>>0)-ot&255;return h+L},"writeIntBE"),g.prototype.writeInt8=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,1,127,-128),d<0&&(d=255+d+1),this[h]=d&255,h+1},"writeInt8"),g.prototype.writeInt16LE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,2,32767,-32768),this[h]=d&255,this[h+1]=d>>>8,h+2},"writeInt16LE"),g.prototype.writeInt16BE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,2,32767,-32768),this[h]=d>>>8,this[h+1]=d&255,h+2},"writeInt16BE"),g.prototype.writeInt32LE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,4,2147483647,-2147483648),this[h]=d&255,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24,h+4},"writeInt32LE"),g.prototype.writeInt32BE=l(function(d,h,L){return d=+d,h=h>>>0,L||ee(this,d,h,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4},"writeInt32BE"),g.prototype.writeBigInt64LE=Rt(l(function(d,h=0){return We(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),g.prototype.writeBigInt64BE=Rt(l(function(d,h=0){return ze(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function nt(E,d,h,L,Q,oe){if(h+L>E.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}l(nt,"checkIEEE754");function le(E,d,h,L,Q){return d=+d,h=h>>>0,Q||nt(E,d,h,4,34028234663852886e22,-34028234663852886e22),B.write(E,d,h,L,23,4),h+4}l(le,"writeFloat"),g.prototype.writeFloatLE=l(function(d,h,L){return le(this,d,h,!0,L)},"writeFloatLE"),g.prototype.writeFloatBE=l(function(d,h,L){return le(this,d,h,!1,L)},"writeFloatBE");function se(E,d,h,L,Q){return d=+d,h=h>>>0,Q||nt(E,d,h,8,17976931348623157e292,-17976931348623157e292),B.write(E,d,h,L,52,8),h+8}l(se,"writeDouble"),g.prototype.writeDoubleLE=l(function(d,h,L){return se(this,d,h,!0,L)},"writeDoubleLE"),g.prototype.writeDoubleBE=l(function(d,h,L){return se(this,d,h,!1,L)},"writeDoubleBE"),g.prototype.copy=l(function(d,h,L,Q){if(!g.isBuffer(d))throw new TypeError("argument should be a Buffer");if(L||(L=0),!Q&&Q!==0&&(Q=this.length),h>=d.length&&(h=d.length),h||(h=0),Q>0&&Q<L&&(Q=L),Q===L||d.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),d.length-h<Q-L&&(Q=d.length-h+L);const oe=Q-L;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,L,Q):Uint8Array.prototype.set.call(d,this.subarray(L,Q),h),oe},"copy"),g.prototype.fill=l(function(d,h,L,Q){if(typeof d=="string"){if(typeof h=="string"?(Q=h,h=0,L=this.length):typeof L=="string"&&(Q=L,L=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!g.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(d.length===1){const ge=d.charCodeAt(0);(Q==="utf8"&&ge<128||Q==="latin1")&&(d=ge)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(h<0||this.length<h||this.length<L)throw new RangeError("Out of range index");if(L<=h)return this;h=h>>>0,L=L===void 0?this.length:L>>>0,d||(d=0);let oe;if(typeof d=="number")for(oe=h;oe<L;++oe)this[oe]=d;else{const ge=g.isBuffer(d)?d:g.from(d,Q),ot=ge.length;if(ot===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(oe=0;oe<L-h;++oe)this[oe+h]=ge[oe%ot]}return this},"fill");const Me={};function Ze(E,d,h){Me[E]=l(class extends h{constructor(){super();Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${E}]`,this.stack,delete this.name}get code(){return E}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${E}]: ${this.message}`}},"NodeError")}l(Ze,"E"),Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(E){return E?`${E} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(E,d){return`The "${E}" argument must be of type number. Received type ${typeof d}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(E,d,h){let L=`The value of "${E}" is out of range.`,Q=h;return Number.isInteger(h)&&Math.abs(h)>2**32?Q=pt(String(h)):typeof h=="bigint"&&(Q=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(Q=pt(Q)),Q+="n"),L+=` It must be ${d}. Received ${Q}`,L},RangeError);function pt(E){let d="",h=E.length;const L=E[0]==="-"?1:0;for(;h>=L+4;h-=3)d=`_${E.slice(h-3,h)}${d}`;return`${E.slice(0,h)}${d}`}l(pt,"addNumericalSeparator");function jt(E,d,h){mt(d,"offset"),(E[d]===void 0||E[d+h]===void 0)&&fn(d,E.length-(h+1))}l(jt,"checkBounds");function xt(E,d,h,L,Q,oe){if(E>h||E<d){const ge=typeof d=="bigint"?"n":"";let ot;throw oe>3?d===0||d===BigInt(0)?ot=`>= 0${ge} and < 2${ge} ** ${(oe+1)*8}${ge}`:ot=`>= -(2${ge} ** ${(oe+1)*8-1}${ge}) and < 2 ** ${(oe+1)*8-1}${ge}`:ot=`>= ${d}${ge} and <= ${h}${ge}`,new Me.ERR_OUT_OF_RANGE("value",ot,E)}jt(L,Q,oe)}l(xt,"checkIntBI");function mt(E,d){if(typeof E!="number")throw new Me.ERR_INVALID_ARG_TYPE(d,"number",E)}l(mt,"validateNumber");function fn(E,d,h){throw Math.floor(E)!==E?(mt(E,h),new Me.ERR_OUT_OF_RANGE(h||"offset","an integer",E)):d<0?new Me.ERR_BUFFER_OUT_OF_BOUNDS:new Me.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${d}`,E)}l(fn,"boundsError");const Yt=/[^+/0-9A-Za-z-_]/g;function Je(E){if(E=E.split("=")[0],E=E.trim().replace(Yt,""),E.length<2)return"";for(;E.length%4!=0;)E=E+"=";return E}l(Je,"base64clean");function qe(E,d){d=d||1/0;let h;const L=E.length;let Q=null;const oe=[];for(let ge=0;ge<L;++ge){if(h=E.charCodeAt(ge),h>55295&&h<57344){if(!Q){if(h>56319){(d-=3)>-1&&oe.push(239,191,189);continue}else if(ge+1===L){(d-=3)>-1&&oe.push(239,191,189);continue}Q=h;continue}if(h<56320){(d-=3)>-1&&oe.push(239,191,189),Q=h;continue}h=(Q-55296<<10|h-56320)+65536}else Q&&(d-=3)>-1&&oe.push(239,191,189);if(Q=null,h<128){if((d-=1)<0)break;oe.push(h)}else if(h<2048){if((d-=2)<0)break;oe.push(h>>6|192,h&63|128)}else if(h<65536){if((d-=3)<0)break;oe.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((d-=4)<0)break;oe.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return oe}l(qe,"utf8ToBytes");function Xe(E){const d=[];for(let h=0;h<E.length;++h)d.push(E.charCodeAt(h)&255);return d}l(Xe,"asciiToBytes");function tr(E,d){let h,L,Q;const oe=[];for(let ge=0;ge<E.length&&!((d-=2)<0);++ge)h=E.charCodeAt(ge),L=h>>8,Q=h%256,oe.push(Q),oe.push(L);return oe}l(tr,"utf16leToBytes");function ke(E){return C.toByteArray(Je(E))}l(ke,"base64ToBytes");function at(E,d,h,L){let Q;for(Q=0;Q<L&&!(Q+h>=d.length||Q>=E.length);++Q)d[Q+h]=E[Q];return Q}l(at,"blitBuffer");function Y(E,d){return E instanceof d||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===d.name}l(Y,"isInstance");function et(E){return E!==E}l(et,"numberIsNaN");const ht=function(){const E="0123456789abcdef",d=new Array(256);for(let h=0;h<16;++h){const L=h*16;for(let Q=0;Q<16;++Q)d[L+Q]=E[h]+E[Q]}return d}();function Rt(E){return typeof BigInt=="undefined"?kt:E}l(Rt,"defineBigIntMethod");function kt(){throw new Error("BigInt not supported")}l(kt,"BufferBigIntNotDefined")},1:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__(8764).Buffer;const Token=__webpack_require__(3416),strtok3=__webpack_require__(5849),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=__webpack_require__(6188),supported=__webpack_require__(9898),minimumBytes=4100;async function fromStream(K){const _=await strtok3.fromStream(K);try{return await fromTokenizer(_)}finally{await _.close()}}l(fromStream,"fromStream");async function fromBuffer(K){if(!(K instanceof Uint8Array||K instanceof ArrayBuffer||Buffer.isBuffer(K)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof K}\``);const _=K instanceof Buffer?K:Buffer.from(K);if(!(_&&_.length>1))return;const m=strtok3.fromBuffer(_);return fromTokenizer(m)}l(fromBuffer,"fromBuffer");function _check(K,_,m){m={offset:0,...m};for(const[C,B]of _.entries())if(m.mask){if(B!==(m.mask[C]&K[C+m.offset]))return!1}else if(B!==K[C+m.offset])return!1;return!0}l(_check,"_check");async function fromTokenizer(K){try{return _fromTokenizer(K)}catch(_){if(!(_ instanceof strtok3.EndOfStreamError))throw _}}l(fromTokenizer,"fromTokenizer");async function _fromTokenizer(K){let _=Buffer.alloc(minimumBytes);const m=12,C=l(($,V)=>_check(_,$,V),"check"),B=l(($,V)=>C(stringToBytes($),V),"checkString");if(K.fileInfo.size||(K.fileInfo.size=Number.MAX_SAFE_INTEGER),await K.peekBuffer(_,{length:m,mayBeLess:!0}),C([66,77]))return{ext:"bmp",mime:"image/bmp"};if(C([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(C([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(C([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(C([37,33]))return await K.peekBuffer(_,{length:24,mayBeLess:!0}),B("PS-Adobe-",{offset:2})&&B(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(C([31,160])||C([31,157]))return{ext:"Z",mime:"application/x-compress"};if(C([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(C([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(C([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(C([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(B("ID3")){await K.ignore(6);const $=await K.readToken(uint32SyncSafeToken);return K.position+$>K.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await K.ignore($),fromTokenizer(K))}if(B("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((_[0]===67||_[0]===70)&&C([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(C([71,73,70]))return{ext:"gif",mime:"image/gif"};if(B("FLIF"))return{ext:"flif",mime:"image/flif"};if(B("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(B("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(B("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(B("FORM"))return{ext:"aif",mime:"audio/aiff"};if(B("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(C([80,75,3,4])){try{for(;K.position+30<K.fileInfo.size;){await K.readBuffer(_,{length:30});const $={compressedSize:_.readUInt32LE(18),uncompressedSize:_.readUInt32LE(22),filenameLength:_.readUInt16LE(26),extraFieldLength:_.readUInt16LE(28)};if($.filename=await K.readToken(new Token.StringType($.filenameLength,"utf-8")),await K.ignore($.extraFieldLength),$.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if($.filename.endsWith(".rels")||$.filename.endsWith(".xml"))switch($.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if($.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if($.filename.startsWith("3D/")&&$.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if($.filename==="mimetype"&&$.compressedSize===$.uncompressedSize)switch(await K.readToken(new Token.StringType($.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if($.compressedSize===0){let V=-1;for(;V<0&&K.position<K.fileInfo.size;)await K.peekBuffer(_,{mayBeLess:!0}),V=_.indexOf("504B0304",0,"hex"),await K.ignore(V>=0?V:_.length)}else await K.ignore($.compressedSize)}}catch($){if(!($ instanceof strtok3.EndOfStreamError))throw $}return{ext:"zip",mime:"application/zip"}}if(B("OggS")){await K.ignore(28);const $=Buffer.alloc(8);return await K.readBuffer($),_check($,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check($,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check($,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check($,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check($,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check($,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(C([80,75])&&(_[2]===3||_[2]===5||_[2]===7)&&(_[3]===4||_[3]===6||_[3]===8))return{ext:"zip",mime:"application/zip"};if(B("ftyp",{offset:4})&&(_[8]&96)!=0){const $=_.toString("binary",8,12).replace("\0"," ").trim();switch($){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return $.startsWith("3g")?$.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(B("MThd"))return{ext:"mid",mime:"audio/midi"};if(B("wOFF")&&(C([0,1,0,0],{offset:4})||B("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(B("wOF2")&&(C([0,1,0,0],{offset:4})||B("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(C([212,195,178,161])||C([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(B("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(B("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(B("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(C([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(B("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(B("%PDF")){await K.ignore(1350);const $=10*1024*1024,V=Buffer.alloc(Math.min($,K.fileInfo.size));return await K.readBuffer(V,{mayBeLess:!0}),V.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(C([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(C([73,73,42,0]))return B("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:C([28,0,254,0],{offset:8})||C([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:C([8,0,0,0],{offset:4})&&(C([45,0,254,0],{offset:8})||C([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(_=Buffer.alloc(24),await K.peekBuffer(_),(C([16,251,134,1],{offset:4})||C([8,0,0,0],{offset:4}))&&C([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(C([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(B("MAC "))return{ext:"ape",mime:"audio/ape"};if(C([26,69,223,163])){async function $(){const x=await K.peekNumber(Token.UINT8);let b=128,y=0;for(;(x&b)==0;)++y,b>>=1;const S=Buffer.alloc(y+1);return await K.readBuffer(S),S}l($,"readField");async function V(){const x=await $(),b=await $();b[0]^=128>>b.length-1;const y=Math.min(6,b.length);return{id:x.readUIntBE(0,x.length),len:b.readUIntBE(b.length-y,y)}}l(V,"readElement");async function j(x,b){for(;b>0;){const y=await V();if(y.id===17026)return K.readToken(new Token.StringType(y.len,"utf-8"));await K.ignore(y.len),--b}}l(j,"readChildren");const F=await V();switch(await j(1,F.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(C([82,73,70,70])){if(C([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(C([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(C([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(B("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(C([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(B("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(B("MSCF")||B("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(C([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(C([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(C([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(C([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(B("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(B("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(C([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(B("IMPM"))return{ext:"it",mime:"audio/x-it"};if(B("-lh0-",{offset:2})||B("-lh1-",{offset:2})||B("-lh2-",{offset:2})||B("-lh3-",{offset:2})||B("-lh4-",{offset:2})||B("-lh5-",{offset:2})||B("-lh6-",{offset:2})||B("-lh7-",{offset:2})||B("-lzs-",{offset:2})||B("-lz4-",{offset:2})||B("-lz5-",{offset:2})||B("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(C([0,0,1,186])){if(C([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(C([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(B("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(C([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(B("<?xml "))return{ext:"xml",mime:"application/xml"};if(C([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(C([82,97,114,33,26,7])&&(_[6]===0||_[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(B("solid "))return{ext:"stl",mime:"model/stl"};if(B("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(B("!<arch>"))return await K.ignore(8),await K.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(C([137,80,78,71,13,10,26,10])){await K.ignore(8);async function $(){return{length:await K.readToken(Token.INT32_BE),type:await K.readToken(new Token.StringType(4,"binary"))}}l($,"readChunkHeader");do{const V=await $();if(V.length<0)return;switch(V.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await K.ignore(V.length+4)}}while(K.position+8<K.fileInfo.size);return{ext:"png",mime:"image/png"}}if(C([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(C([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(C([102,114,101,101],{offset:4})||C([109,100,97,116],{offset:4})||C([109,111,111,118],{offset:4})||C([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(C([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(B("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(C([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(C([48,38,178,117,142,102,207,17,166,217])){async function $(){const V=Buffer.alloc(16);return await K.readBuffer(V),{id:V,size:Number(await K.readToken(Token.UINT64_LE))}}for(l($,"readHeader"),await K.ignore(30);K.position+24<K.fileInfo.size;){const V=await $();let j=V.size-24;if(_check(V.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const F=Buffer.alloc(16);if(j-=await K.readBuffer(F),_check(F,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(F,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await K.ignore(j)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(C([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((C([126,16,4])||C([126,24,4]))&&C([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(C([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(C([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await K.ignore(20),await K.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(C([255,10])||C([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(C([0,0,1,186])||C([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(C([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(C([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(C([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(C([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await K.peekBuffer(_,{length:Math.min(256,K.fileInfo.size),mayBeLess:!0}),B("BEGIN:")){if(B("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(B("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(B("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(B("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(B("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(C([4,0,0,0])&&_.length>=16){const $=_.readUInt32LE(12);if($>12&&_.length>=$+16)try{const V=_.slice(16,$+16).toString();if(JSON.parse(V).files)return{ext:"asar",mime:"application/x-asar"}}catch(V){}}if(C([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(B("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(C([71],{offset:4})&&(C([71],{offset:192})||C([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(C([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(C([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(C([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(C([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(C([76,80],{offset:34})&&(C([0,0,1],{offset:8})||C([1,0,2],{offset:8})||C([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(C([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await K.peekBuffer(_,{length:Math.min(512,K.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(_))return{ext:"tar",mime:"application/x-tar"};if(C([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(B("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(_.length>=2&&C([255,224],{offset:0,mask:[255,224]})){if(C([16],{offset:1,mask:[22]}))return C([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(C([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(C([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(C([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}l(_fromTokenizer,"_fromTokenizer");const stream=l(readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const K=new stream.PassThrough;let _;stream.pipeline?_=stream.pipeline(readableStream,K,()=>{}):_=readableStream.pipe(K);const m=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const C=await fromBuffer(m);K.fileType=C}catch(C){reject(C)}resolve(_)})}),"stream"),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),module.exports=fileType},7769:(K,_,m)=>{"use strict";const C=m(6597),B=m(1);async function $(j){const F=await C.fromFile(j);try{return await B.fromTokenizer(F)}finally{await F.close()}}l($,"fromFile");const V={fromFile:$};Object.assign(V,B),Object.defineProperty(V,"extensions",{get(){return B.extensions}}),Object.defineProperty(V,"mimeTypes",{get(){return B.mimeTypes}}),K.exports=V},9898:K=>{"use strict";K.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}},6188:(K,_)=>{"use strict";_.stringToBytes=m=>[...m].map(C=>C.charCodeAt(0)),_.tarHeaderChecksumMatches=(m,C=0)=>{const B=parseInt(m.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(B))return!1;let $=8*32;for(let V=C;V<C+148;V++)$+=m[V];for(let V=C+156;V<C+512;V++)$+=m[V];return B===$},_.uint32SyncSafeToken={get:(m,C)=>m[C+3]&127|m[C+2]<<7|m[C+1]<<14|m[C]<<21,len:4}},7360:function(K,_){var m,C,B;(function($,V){C=[],m=V,B=typeof m=="function"?m.apply(_,C):m,B!==void 0&&(K.exports=B)})(this,l(function(){function V(U){var q={single:function(X,P,z){if(!X||(Z(X)||(X=q.getPreparedSearch(X)),!P))return null;Z(P)||(P=q.getPrepared(P));var J=z&&z.allowTypo!==void 0?z.allowTypo:U&&U.allowTypo!==void 0?U.allowTypo:!0,ae=J?q.algorithm:q.algorithmNoTypo;return ae(X,P,X[0])},go:function(X,P,z){if(!X)return x;X=q.prepareSearch(X);var J=X[0],ae=z&&z.threshold||U&&U.threshold||-9007199254740991,ne=z&&z.limit||U&&U.limit||9007199254740991,ce=z&&z.allowTypo!==void 0?z.allowTypo:U&&U.allowTypo!==void 0?U.allowTypo:!0,pe=ce?q.algorithm:q.algorithmNoTypo,be=0,Le=0,Be=P.length;if(z&&z.keys)for(var H=z.scoreFn||k,Ke=z.keys,He=Ke.length,$e=Be-1;$e>=0;--$e){for(var Ae=P[$e],Se=new Array(He),it=He-1;it>=0;--it){var Ve=Ke[it],ee=T(Ae,Ve);if(!ee){Se[it]=null;continue}Z(ee)||(ee=q.getPrepared(ee)),Se[it]=pe(X,ee,J)}Se.obj=Ae;var We=H(Se);We!==null&&(We<ae||(Se.score=We,be<ne?(de.add(Se),++be):(++Le,We>de.peek().score&&de.replaceTop(Se))))}else if(z&&z.key)for(var Ve=z.key,$e=Be-1;$e>=0;--$e){var Ae=P[$e],ee=T(Ae,Ve);if(!!ee){Z(ee)||(ee=q.getPrepared(ee));var ze=pe(X,ee,J);ze!==null&&(ze.score<ae||(ze={target:ze.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:ze.score,indexes:ze.indexes,obj:Ae},be<ne?(de.add(ze),++be):(++Le,ze.score>de.peek().score&&de.replaceTop(ze))))}}else for(var $e=Be-1;$e>=0;--$e){var ee=P[$e];if(!!ee){Z(ee)||(ee=q.getPrepared(ee));var ze=pe(X,ee,J);ze!==null&&(ze.score<ae||(be<ne?(de.add(ze),++be):(++Le,ze.score>de.peek().score&&de.replaceTop(ze))))}}if(be===0)return x;for(var nt=new Array(be),$e=be-1;$e>=0;--$e)nt[$e]=de.poll();return nt.total=be+Le,nt},goAsync:function(X,P,z){var J=!1,ae=new Promise(function(ne,ce){if(!X)return ne(x);X=q.prepareSearch(X);var pe=X[0],be=te(),Le=P.length-1,Be=z&&z.threshold||U&&U.threshold||-9007199254740991,H=z&&z.limit||U&&U.limit||9007199254740991,Ke=z&&z.allowTypo!==void 0?z.allowTypo:U&&U.allowTypo!==void 0?U.allowTypo:!0,He=Ke?q.algorithm:q.algorithmNoTypo,$e=0,Ae=0;function Se(){if(J)return ce("canceled");var it=Date.now();if(z&&z.keys)for(var Ve=z.scoreFn||k,ee=z.keys,We=ee.length;Le>=0;--Le){for(var ze=P[Le],nt=new Array(We),le=We-1;le>=0;--le){var se=ee[le],Me=T(ze,se);if(!Me){nt[le]=null;continue}Z(Me)||(Me=q.getPrepared(Me)),nt[le]=He(X,Me,pe)}nt.obj=ze;var Ze=Ve(nt);if(Ze!==null&&!(Ze<Be)&&(nt.score=Ze,$e<H?(be.add(nt),++$e):(++Ae,Ze>be.peek().score&&be.replaceTop(nt)),Le%1e3==0&&Date.now()-it>=10)){j?setImmediate(Se):setTimeout(Se);return}}else if(z&&z.key)for(var se=z.key;Le>=0;--Le){var ze=P[Le],Me=T(ze,se);if(!!Me){Z(Me)||(Me=q.getPrepared(Me));var pt=He(X,Me,pe);if(pt!==null&&!(pt.score<Be)&&(pt={target:pt.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:pt.score,indexes:pt.indexes,obj:ze},$e<H?(be.add(pt),++$e):(++Ae,pt.score>be.peek().score&&be.replaceTop(pt)),Le%1e3==0&&Date.now()-it>=10)){j?setImmediate(Se):setTimeout(Se);return}}}else for(;Le>=0;--Le){var Me=P[Le];if(!!Me){Z(Me)||(Me=q.getPrepared(Me));var pt=He(X,Me,pe);if(pt!==null&&!(pt.score<Be)&&($e<H?(be.add(pt),++$e):(++Ae,pt.score>be.peek().score&&be.replaceTop(pt)),Le%1e3==0&&Date.now()-it>=10)){j?setImmediate(Se):setTimeout(Se);return}}}if($e===0)return ne(x);for(var jt=new Array($e),xt=$e-1;xt>=0;--xt)jt[xt]=be.poll();jt.total=$e+Ae,ne(jt)}l(Se,"step"),j?setImmediate(Se):Se()});return ae.cancel=function(){J=!0},ae},highlight:function(X,P,z){if(X===null)return null;P===void 0&&(P="<b>"),z===void 0&&(z="</b>");for(var J="",ae=0,ne=!1,ce=X.target,pe=ce.length,be=X.indexes,Le=0;Le<pe;++Le){var Be=ce[Le];if(be[ae]===Le){if(++ae,ne||(ne=!0,J+=P),ae===be.length){J+=Be+z+ce.substr(Le+1);break}}else ne&&(ne=!1,J+=z);J+=Be}return J},prepare:function(X){if(!!X)return{target:X,_targetLowerCodes:q.prepareLowerCodes(X),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(X){if(!!X)return{target:X,_targetLowerCodes:q.prepareLowerCodes(X),_nextBeginningIndexes:q.prepareNextBeginningIndexes(X),score:null,indexes:null,obj:null}},prepareSearch:function(X){if(!!X)return q.prepareLowerCodes(X)},getPrepared:function(X){if(X.length>999)return q.prepare(X);var P=F.get(X);return P!==void 0||(P=q.prepare(X),F.set(X,P)),P},getPreparedSearch:function(X){if(X.length>999)return q.prepareSearch(X);var P=g.get(X);return P!==void 0||(P=q.prepareSearch(X),g.set(X,P)),P},algorithm:function(X,P,z){for(var J=P._targetLowerCodes,ae=X.length,ne=J.length,ce=0,pe=0,be=0,Le=0;;){var Be=z===J[pe];if(Be){if(b[Le++]=pe,++ce,ce===ae)break;z=X[be===0?ce:be===ce?ce+1:be===ce-1?ce-1:ce]}if(++pe,pe>=ne)for(;;){if(ce<=1)return null;if(be===0){--ce;var H=X[ce];if(z===H)continue;be=ce}else{if(be===1)return null;--be,ce=be,z=X[ce+1];var H=X[ce];if(z===H)continue}Le=ce,pe=b[Le-1]+1;break}}var ce=0,Ke=0,He=!1,$e=0,Ae=P._nextBeginningIndexes;Ae===null&&(Ae=P._nextBeginningIndexes=q.prepareNextBeginningIndexes(P.target));var Se=pe=b[0]===0?0:Ae[b[0]-1];if(pe!==ne)for(;;)if(pe>=ne){if(ce<=0){if(++Ke,Ke>ae-2)break;if(X[Ke]===X[Ke+1])continue;pe=Se;continue}--ce;var it=y[--$e];pe=Ae[it]}else{var Be=X[Ke===0?ce:Ke===ce?ce+1:Ke===ce-1?ce-1:ce]===J[pe];if(Be){if(y[$e++]=pe,++ce,ce===ae){He=!0;break}++pe}else pe=Ae[pe]}{if(He)var Ve=y,ee=$e;else var Ve=b,ee=Le;for(var We=0,ze=-1,nt=0;nt<ae;++nt){var pe=Ve[nt];ze!==pe-1&&(We-=pe),ze=pe}He?Ke!==0&&(We+=-20):(We*=1e3,be!==0&&(We+=-20)),We-=ne-ae,P.score=We,P.indexes=new Array(ee);for(var nt=ee-1;nt>=0;--nt)P.indexes[nt]=Ve[nt];return P}},algorithmNoTypo:function(X,P,z){for(var J=P._targetLowerCodes,ae=X.length,ne=J.length,ce=0,pe=0,be=0;;){var Le=z===J[pe];if(Le){if(b[be++]=pe,++ce,ce===ae)break;z=X[ce]}if(++pe,pe>=ne)return null}var ce=0,Be=!1,H=0,Ke=P._nextBeginningIndexes;Ke===null&&(Ke=P._nextBeginningIndexes=q.prepareNextBeginningIndexes(P.target));var He=pe=b[0]===0?0:Ke[b[0]-1];if(pe!==ne)for(;;)if(pe>=ne){if(ce<=0)break;--ce;var $e=y[--H];pe=Ke[$e]}else{var Le=X[ce]===J[pe];if(Le){if(y[H++]=pe,++ce,ce===ae){Be=!0;break}++pe}else pe=Ke[pe]}{if(Be)var Ae=y,Se=H;else var Ae=b,Se=be;for(var it=0,Ve=-1,ee=0;ee<ae;++ee){var pe=Ae[ee];Ve!==pe-1&&(it-=pe),Ve=pe}Be||(it*=1e3),it-=ne-ae,P.score=it,P.indexes=new Array(Se);for(var ee=Se-1;ee>=0;--ee)P.indexes[ee]=Ae[ee];return P}},prepareLowerCodes:function(X){for(var P=X.length,z=[],J=X.toLowerCase(),ae=0;ae<P;++ae)z[ae]=J.charCodeAt(ae);return z},prepareBeginningIndexes:function(X){for(var P=X.length,z=[],J=0,ae=!1,ne=!1,ce=0;ce<P;++ce){var pe=X.charCodeAt(ce),be=pe>=65&&pe<=90,Le=be||pe>=97&&pe<=122||pe>=48&&pe<=57,Be=be&&!ae||!ne||!Le;ae=be,ne=Le,Be&&(z[J++]=ce)}return z},prepareNextBeginningIndexes:function(X){for(var P=X.length,z=q.prepareBeginningIndexes(X),J=[],ae=z[0],ne=0,ce=0;ce<P;++ce)ae>ce?J[ce]=ae:(ae=z[++ne],J[ce]=ae===void 0?P:ae);return J},cleanup:S,new:V};return q}l(V,"fuzzysortNew");var j=typeof window=="undefined",F=new Map,g=new Map,x=[];x.total=0;var b=[],y=[];function S(){F.clear(),g.clear(),b=[],y=[]}l(S,"cleanup");function k(U){for(var q=-9007199254740991,X=U.length-1;X>=0;--X){var P=U[X];if(P!==null){var z=P.score;z>q&&(q=z)}}return q===-9007199254740991?null:q}l(k,"defaultScoreFn");function T(U,q){var X=U[q];if(X!==void 0)return X;var P=q;Array.isArray(q)||(P=q.split("."));for(var z=P.length,J=-1;U&&++J<z;)U=U[P[J]];return U}l(T,"getValue");function Z(U){return typeof U=="object"}l(Z,"isObj");var te=l(function(){var U=[],q=0,X={};function P(){for(var z=0,J=U[z],ae=1;ae<q;){var ne=ae+1;z=ae,ne<q&&U[ne].score<U[ae].score&&(z=ne),U[z-1>>1]=U[z],ae=1+(z<<1)}for(var ce=z-1>>1;z>0&&J.score<U[ce].score;ce=(z=ce)-1>>1)U[z]=U[ce];U[z]=J}return l(P,"n"),X.add=function(z){var J=q;U[q++]=z;for(var ae=J-1>>1;J>0&&z.score<U[ae].score;ae=(J=ae)-1>>1)U[J]=U[ae];U[J]=z},X.poll=function(){if(q!==0){var z=U[0];return U[0]=U[--q],P(),z}},X.peek=function(z){if(q!==0)return U[0]},X.replaceTop=function(z){U[0]=z,P()},X},"fastpriorityqueue"),de=te();return V()},"UMD"))},645:(K,_)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(m,C,B,$,V){var j,F,g=V*8-$-1,x=(1<<g)-1,b=x>>1,y=-7,S=B?V-1:0,k=B?-1:1,T=m[C+S];for(S+=k,j=T&(1<<-y)-1,T>>=-y,y+=g;y>0;j=j*256+m[C+S],S+=k,y-=8);for(F=j&(1<<-y)-1,j>>=-y,y+=$;y>0;F=F*256+m[C+S],S+=k,y-=8);if(j===0)j=1-b;else{if(j===x)return F?NaN:(T?-1:1)*(1/0);F=F+Math.pow(2,$),j=j-b}return(T?-1:1)*F*Math.pow(2,j-$)},_.write=function(m,C,B,$,V,j){var F,g,x,b=j*8-V-1,y=(1<<b)-1,S=y>>1,k=V===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=$?0:j-1,Z=$?1:-1,te=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(g=isNaN(C)?1:0,F=y):(F=Math.floor(Math.log(C)/Math.LN2),C*(x=Math.pow(2,-F))<1&&(F--,x*=2),F+S>=1?C+=k/x:C+=k*Math.pow(2,1-S),C*x>=2&&(F++,x/=2),F+S>=y?(g=0,F=y):F+S>=1?(g=(C*x-1)*Math.pow(2,V),F=F+S):(g=C*Math.pow(2,S-1)*Math.pow(2,V),F=0));V>=8;m[B+T]=g&255,T+=Z,g/=256,V-=8);for(F=F<<V|g,b+=V;b>0;m[B+T]=F&255,T+=Z,F/=256,b-=8);m[B+T-Z]|=te*128}},3300:(K,_)=>{"use strict";var m=l(function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof C!="undefined")return C;throw new Error("unable to locate global object")},"getGlobal"),C=m();K.exports=_=C.fetch,C.fetch&&(_.default=C.fetch.bind(C)),_.Headers=C.Headers,_.Request=C.Request,_.Response=C.Response},447:(K,_,m)=>{var C=m(2479);K.exports=C(B),K.exports.strict=C($),B.proto=B(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return B(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return $(this)},configurable:!0})});function B(V){var j=l(function(){return j.called?j.value:(j.called=!0,j.value=V.apply(this,arguments))},"f");return j.called=!1,j}l(B,"once");function $(V){var j=l(function(){if(j.called)throw new Error(j.onceError);return j.called=!0,j.value=V.apply(this,arguments)},"f"),F=V.name||"Function wrapped with `once`";return j.onceError=F+" shouldn't be called more than once",j.called=!1,j}l($,"onceStrict")},6470:(K,_,m)=>{"use strict";var C=m(4155);function B(F){if(typeof F!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(F))}l(B,"assertPath");function $(F,g){for(var x="",b=0,y=-1,S=0,k,T=0;T<=F.length;++T){if(T<F.length)k=F.charCodeAt(T);else{if(k===47)break;k=47}if(k===47){if(!(y===T-1||S===1))if(y!==T-1&&S===2){if(x.length<2||b!==2||x.charCodeAt(x.length-1)!==46||x.charCodeAt(x.length-2)!==46){if(x.length>2){var Z=x.lastIndexOf("/");if(Z!==x.length-1){Z===-1?(x="",b=0):(x=x.slice(0,Z),b=x.length-1-x.lastIndexOf("/")),y=T,S=0;continue}}else if(x.length===2||x.length===1){x="",b=0,y=T,S=0;continue}}g&&(x.length>0?x+="/..":x="..",b=2)}else x.length>0?x+="/"+F.slice(y+1,T):x=F.slice(y+1,T),b=T-y-1;y=T,S=0}else k===46&&S!==-1?++S:S=-1}return x}l($,"normalizeStringPosix");function V(F,g){var x=g.dir||g.root,b=g.base||(g.name||"")+(g.ext||"");return x?x===g.root?x+b:x+F+b:b}l(V,"_format");var j={resolve:l(function(){for(var g="",x=!1,b,y=arguments.length-1;y>=-1&&!x;y--){var S;y>=0?S=arguments[y]:(b===void 0&&(b=C.cwd()),S=b),B(S),S.length!==0&&(g=S+"/"+g,x=S.charCodeAt(0)===47)}return g=$(g,!x),x?g.length>0?"/"+g:"/":g.length>0?g:"."},"resolve"),normalize:l(function(g){if(B(g),g.length===0)return".";var x=g.charCodeAt(0)===47,b=g.charCodeAt(g.length-1)===47;return g=$(g,!x),g.length===0&&!x&&(g="."),g.length>0&&b&&(g+="/"),x?"/"+g:g},"normalize"),isAbsolute:l(function(g){return B(g),g.length>0&&g.charCodeAt(0)===47},"isAbsolute"),join:l(function(){if(arguments.length===0)return".";for(var g,x=0;x<arguments.length;++x){var b=arguments[x];B(b),b.length>0&&(g===void 0?g=b:g+="/"+b)}return g===void 0?".":j.normalize(g)},"join"),relative:l(function(g,x){if(B(g),B(x),g===x||(g=j.resolve(g),x=j.resolve(x),g===x))return"";for(var b=1;b<g.length&&g.charCodeAt(b)===47;++b);for(var y=g.length,S=y-b,k=1;k<x.length&&x.charCodeAt(k)===47;++k);for(var T=x.length,Z=T-k,te=S<Z?S:Z,de=-1,U=0;U<=te;++U){if(U===te){if(Z>te){if(x.charCodeAt(k+U)===47)return x.slice(k+U+1);if(U===0)return x.slice(k+U)}else S>te&&(g.charCodeAt(b+U)===47?de=U:U===0&&(de=0));break}var q=g.charCodeAt(b+U),X=x.charCodeAt(k+U);if(q!==X)break;q===47&&(de=U)}var P="";for(U=b+de+1;U<=y;++U)(U===y||g.charCodeAt(U)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+x.slice(k+de):(k+=de,x.charCodeAt(k)===47&&++k,x.slice(k))},"relative"),_makeLong:l(function(g){return g},"_makeLong"),dirname:l(function(g){if(B(g),g.length===0)return".";for(var x=g.charCodeAt(0),b=x===47,y=-1,S=!0,k=g.length-1;k>=1;--k)if(x=g.charCodeAt(k),x===47){if(!S){y=k;break}}else S=!1;return y===-1?b?"/":".":b&&y===1?"//":g.slice(0,y)},"dirname"),basename:l(function(g,x){if(x!==void 0&&typeof x!="string")throw new TypeError('"ext" argument must be a string');B(g);var b=0,y=-1,S=!0,k;if(x!==void 0&&x.length>0&&x.length<=g.length){if(x.length===g.length&&x===g)return"";var T=x.length-1,Z=-1;for(k=g.length-1;k>=0;--k){var te=g.charCodeAt(k);if(te===47){if(!S){b=k+1;break}}else Z===-1&&(S=!1,Z=k+1),T>=0&&(te===x.charCodeAt(T)?--T==-1&&(y=k):(T=-1,y=Z))}return b===y?y=Z:y===-1&&(y=g.length),g.slice(b,y)}else{for(k=g.length-1;k>=0;--k)if(g.charCodeAt(k)===47){if(!S){b=k+1;break}}else y===-1&&(S=!1,y=k+1);return y===-1?"":g.slice(b,y)}},"basename"),extname:l(function(g){B(g);for(var x=-1,b=0,y=-1,S=!0,k=0,T=g.length-1;T>=0;--T){var Z=g.charCodeAt(T);if(Z===47){if(!S){b=T+1;break}continue}y===-1&&(S=!1,y=T+1),Z===46?x===-1?x=T:k!==1&&(k=1):x!==-1&&(k=-1)}return x===-1||y===-1||k===0||k===1&&x===y-1&&x===b+1?"":g.slice(x,y)},"extname"),format:l(function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return V("/",g)},"format"),parse:l(function(g){B(g);var x={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return x;var b=g.charCodeAt(0),y=b===47,S;y?(x.root="/",S=1):S=0;for(var k=-1,T=0,Z=-1,te=!0,de=g.length-1,U=0;de>=S;--de){if(b=g.charCodeAt(de),b===47){if(!te){T=de+1;break}continue}Z===-1&&(te=!1,Z=de+1),b===46?k===-1?k=de:U!==1&&(U=1):k!==-1&&(U=-1)}return k===-1||Z===-1||U===0||U===1&&k===Z-1&&k===T+1?Z!==-1&&(T===0&&y?x.base=x.name=g.slice(1,Z):x.base=x.name=g.slice(T,Z)):(T===0&&y?(x.name=g.slice(1,k),x.base=g.slice(1,Z)):(x.name=g.slice(T,k),x.base=g.slice(T,Z)),x.ext=g.slice(k,Z)),T>0?x.dir=g.slice(0,T-1):y&&(x.dir="/"),x},"parse"),sep:"/",delimiter:":",win32:null,posix:null};j.posix=j,K.exports=j},8985:(K,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Deferred=void 0;class m{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((B,$)=>{this.reject=$,this.resolve=B})}}l(m,"Deferred"),_.Deferred=m},7279:(K,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.EndOfStreamError=_.defaultMessages=void 0,_.defaultMessages="End-Of-Stream";class m extends Error{constructor(){super(_.defaultMessages)}}l(m,"EndOfStreamError"),_.EndOfStreamError=m},6654:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.StreamReader=_.EndOfStreamError=void 0;const C=m(7279),B=m(8985);var $=m(7279);Object.defineProperty(_,"EndOfStreamError",{enumerable:!0,get:function(){return $.EndOfStreamError}});const V=1*1024*1024;class j{constructor(g){if(this.s=g,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!g.read||!g.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new C.EndOfStreamError)),this.s.once("error",x=>this.reject(x)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(g,x,b){const y=await this.read(g,x,b);return this.peekQueue.push(g.subarray(x,x+y)),y}async read(g,x,b){if(b===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new C.EndOfStreamError;let y=b,S=0;for(;this.peekQueue.length>0&&y>0;){const k=this.peekQueue.pop();if(!k)throw new Error("peekData should be defined");const T=Math.min(k.length,y);g.set(k.subarray(0,T),x+S),S+=T,y-=T,T<k.length&&this.peekQueue.push(k.subarray(T))}for(;y>0&&!this.endOfStream;){const k=Math.min(y,V),T=await this.readFromStream(g,x+S,k);if(S+=T,T<k)break;y-=T}return S}async readFromStream(g,x,b){const y=this.s.read(b);if(y)return g.set(y,x),y.length;{const S={buffer:g,offset:x,length:b,deferred:new B.Deferred};return this.deferred=S.deferred,this.s.once("readable",()=>{this.readDeferred(S)}),S.deferred.promise}}readDeferred(g){const x=this.s.read(g.length);x?(g.buffer.set(x,g.offset),g.deferred.resolve(x.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(g)})}reject(g){this.endOfStream=!0,this.deferred&&(this.deferred.reject(g),this.deferred=null)}}l(j,"StreamReader"),_.StreamReader=j},5167:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.StreamReader=_.EndOfStreamError=void 0;var C=m(7279);Object.defineProperty(_,"EndOfStreamError",{enumerable:!0,get:function(){return C.EndOfStreamError}});var B=m(6654);Object.defineProperty(_,"StreamReader",{enumerable:!0,get:function(){return B.StreamReader}})},4155:K=>{var _=K.exports={},m,C;function B(){throw new Error("setTimeout has not been defined")}l(B,"defaultSetTimout");function $(){throw new Error("clearTimeout has not been defined")}l($,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?m=setTimeout:m=B}catch(Z){m=B}try{typeof clearTimeout=="function"?C=clearTimeout:C=$}catch(Z){C=$}}();function V(Z){if(m===setTimeout)return setTimeout(Z,0);if((m===B||!m)&&setTimeout)return m=setTimeout,setTimeout(Z,0);try{return m(Z,0)}catch(te){try{return m.call(null,Z,0)}catch(de){return m.call(this,Z,0)}}}l(V,"runTimeout");function j(Z){if(C===clearTimeout)return clearTimeout(Z);if((C===$||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(Z);try{return C(Z)}catch(te){try{return C.call(null,Z)}catch(de){return C.call(this,Z)}}}l(j,"runClearTimeout");var F=[],g=!1,x,b=-1;function y(){!g||!x||(g=!1,x.length?F=x.concat(F):b=-1,F.length&&S())}l(y,"cleanUpNextTick");function S(){if(!g){var Z=V(y);g=!0;for(var te=F.length;te;){for(x=F,F=[];++b<te;)x&&x[b].run();b=-1,te=F.length}x=null,g=!1,j(Z)}}l(S,"drainQueue"),_.nextTick=function(Z){var te=new Array(arguments.length-1);if(arguments.length>1)for(var de=1;de<arguments.length;de++)te[de-1]=arguments[de];F.push(new k(Z,te)),F.length===1&&!g&&V(S)};function k(Z,te){this.fun=Z,this.array=te}l(k,"Item"),k.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={};function T(){}l(T,"noop"),_.on=T,_.addListener=T,_.once=T,_.off=T,_.removeListener=T,_.removeAllListeners=T,_.emit=T,_.prependListener=T,_.prependOnceListener=T,_.listeners=function(Z){return[]},_.binding=function(Z){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(Z){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},842:(K,_,m)=>{"use strict";var C=m(8764).Buffer;Object.defineProperty(_,"__esModule",{value:!0}),_.AbstractTokenizer=void 0;const B=m(5167);class ${constructor(j){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=j||{}}async readToken(j,F=this.position){const g=C.alloc(j.len);if(await this.readBuffer(g,{position:F})<j.len)throw new B.EndOfStreamError;return j.get(g,0)}async peekToken(j,F=this.position){const g=C.alloc(j.len);if(await this.peekBuffer(g,{position:F})<j.len)throw new B.EndOfStreamError;return j.get(g,0)}async readNumber(j){if(await this.readBuffer(this.numBuffer,{length:j.len})<j.len)throw new B.EndOfStreamError;return j.get(this.numBuffer,0)}async peekNumber(j){if(await this.peekBuffer(this.numBuffer,{length:j.len})<j.len)throw new B.EndOfStreamError;return j.get(this.numBuffer,0)}async ignore(j){if(this.fileInfo.size!==void 0){const F=this.fileInfo.size-this.position;if(j>F)return this.position+=F,F}return this.position+=j,j}async close(){}normalizeOptions(j,F){if(F&&F.position!==void 0&&F.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return F?{mayBeLess:F.mayBeLess===!0,offset:F.offset?F.offset:0,length:F.length?F.length:j.length-(F.offset?F.offset:0),position:F.position?F.position:this.position}:{mayBeLess:!1,offset:0,length:j.length,position:this.position}}}l($,"AbstractTokenizer"),_.AbstractTokenizer=$},778:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BufferTokenizer=void 0;const C=m(5167),B=m(842);class $ extends B.AbstractTokenizer{constructor(j,F){super(F);this.uint8Array=j,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:j.length}async readBuffer(j,F){if(F&&F.position){if(F.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=F.position}const g=await this.peekBuffer(j,F);return this.position+=g,g}async peekBuffer(j,F){const g=this.normalizeOptions(j,F),x=Math.min(this.uint8Array.length-g.position,g.length);if(!g.mayBeLess&&x<g.length)throw new C.EndOfStreamError;return j.set(this.uint8Array.subarray(g.position,g.position+x),g.offset),x}async close(){}}l($,"BufferTokenizer"),_.BufferTokenizer=$},7859:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.fromFile=_.FileTokenizer=void 0;const C=m(842),B=m(5167),$=m(7209);class V extends C.AbstractTokenizer{constructor(g,x){super(x);this.fd=g}async readBuffer(g,x){const b=this.normalizeOptions(g,x);this.position=b.position;const y=await $.read(this.fd,g,b.offset,b.length,b.position);if(this.position+=y.bytesRead,y.bytesRead<b.length&&(!x||!x.mayBeLess))throw new B.EndOfStreamError;return y.bytesRead}async peekBuffer(g,x){const b=this.normalizeOptions(g,x),y=await $.read(this.fd,g,b.offset,b.length,b.position);if(!b.mayBeLess&&y.bytesRead<b.length)throw new B.EndOfStreamError;return y.bytesRead}async close(){return $.close(this.fd)}}l(V,"FileTokenizer"),_.FileTokenizer=V;async function j(F){const g=await $.stat(F);if(!g.isFile)throw new Error(`File not a file: ${F}`);const x=await $.open(F,"r");return new V(x,{path:F,size:g.size})}l(j,"fromFile"),_.fromFile=j},7209:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.readFile=_.writeFileSync=_.writeFile=_.read=_.open=_.close=_.stat=_.createReadStream=_.pathExists=void 0;const C=m(4059);_.pathExists=C.existsSync,_.createReadStream=C.createReadStream;async function B(b){return new Promise((y,S)=>{C.stat(b,(k,T)=>{k?S(k):y(T)})})}l(B,"stat"),_.stat=B;async function $(b){return new Promise((y,S)=>{C.close(b,k=>{k?S(k):y()})})}l($,"close"),_.close=$;async function V(b,y){return new Promise((S,k)=>{C.open(b,y,(T,Z)=>{T?k(T):S(Z)})})}l(V,"open"),_.open=V;async function j(b,y,S,k,T){return new Promise((Z,te)=>{C.read(b,y,S,k,T,(de,U,q)=>{de?te(de):Z({bytesRead:U,buffer:q})})})}l(j,"read"),_.read=j;async function F(b,y){return new Promise((S,k)=>{C.writeFile(b,y,T=>{T?k(T):S()})})}l(F,"writeFile"),_.writeFile=F;function g(b,y){C.writeFileSync(b,y)}l(g,"writeFileSync"),_.writeFileSync=g;async function x(b){return new Promise((y,S)=>{C.readFile(b,(k,T)=>{k?S(k):y(T)})})}l(x,"readFile"),_.readFile=x},599:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ReadStreamTokenizer=void 0;const C=m(842),B=m(5167),$=256e3;class V extends C.AbstractTokenizer{constructor(F,g){super(g);this.streamReader=new B.StreamReader(F)}async getFileInfo(){return this.fileInfo}async readBuffer(F,g){const x=this.normalizeOptions(F,g),b=x.position-this.position;if(b>0)return await this.ignore(b),this.readBuffer(F,g);if(b<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(x.length===0)return 0;const y=await this.streamReader.read(F,x.offset,x.length);if(this.position+=y,(!g||!g.mayBeLess)&&y<x.length)throw new B.EndOfStreamError;return y}async peekBuffer(F,g){const x=this.normalizeOptions(F,g);let b=0;if(x.position){const y=x.position-this.position;if(y>0){const S=new Uint8Array(x.length+y);return b=await this.peekBuffer(S,{mayBeLess:x.mayBeLess}),F.set(S.subarray(y),x.offset),b-y}else if(y<0)throw new Error("Cannot peek from a negative offset in a stream")}if(x.length>0){try{b=await this.streamReader.peek(F,x.offset,x.length)}catch(y){if(g&&g.mayBeLess&&y instanceof B.EndOfStreamError)return 0;throw y}if(!x.mayBeLess&&b<x.length)throw new B.EndOfStreamError}return b}async ignore(F){const g=Math.min($,F),x=new Uint8Array(g);let b=0;for(;b<F;){const y=F-b,S=await this.readBuffer(x,{length:Math.min(g,y)});if(S<0)return S;b+=S}return b}}l(V,"ReadStreamTokenizer"),_.ReadStreamTokenizer=V},5849:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.fromBuffer=_.fromStream=_.EndOfStreamError=void 0;const C=m(599),B=m(778);var $=m(5167);Object.defineProperty(_,"EndOfStreamError",{enumerable:!0,get:function(){return $.EndOfStreamError}});function V(F,g){return g=g||{},new C.ReadStreamTokenizer(F,g)}l(V,"fromStream"),_.fromStream=V;function j(F,g){return new B.BufferTokenizer(F,g)}l(j,"fromBuffer"),_.fromBuffer=j},6597:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.fromStream=_.fromBuffer=_.EndOfStreamError=_.fromFile=void 0;const C=m(7209),B=m(5849);var $=m(7859);Object.defineProperty(_,"fromFile",{enumerable:!0,get:function(){return $.fromFile}});var V=m(5849);Object.defineProperty(_,"EndOfStreamError",{enumerable:!0,get:function(){return V.EndOfStreamError}}),Object.defineProperty(_,"fromBuffer",{enumerable:!0,get:function(){return V.fromBuffer}});async function j(F,g){if(g=g||{},F.path){const x=await C.stat(F.path);g.path=F.path,g.size=x.size}return B.fromStream(F,g)}l(j,"fromStream"),_.fromStream=j},3416:(K,_,m)=>{"use strict";var C=m(8764).Buffer;Object.defineProperty(_,"__esModule",{value:!0}),_.AnsiStringType=_.StringType=_.BufferType=_.Uint8ArrayType=_.IgnoreType=_.Float80_LE=_.Float80_BE=_.Float64_LE=_.Float64_BE=_.Float32_LE=_.Float32_BE=_.Float16_LE=_.Float16_BE=_.INT64_BE=_.UINT64_BE=_.INT64_LE=_.UINT64_LE=_.INT32_LE=_.INT32_BE=_.INT24_BE=_.INT24_LE=_.INT16_LE=_.INT16_BE=_.INT8=_.UINT32_BE=_.UINT32_LE=_.UINT24_BE=_.UINT24_LE=_.UINT16_BE=_.UINT16_LE=_.UINT8=void 0;const B=m(645);function $(b){return new DataView(b.buffer,b.byteOffset)}l($,"dv"),_.UINT8={len:1,get(b,y){return $(b).getUint8(y)},put(b,y,S){return $(b).setUint8(y,S),y+1}},_.UINT16_LE={len:2,get(b,y){return $(b).getUint16(y,!0)},put(b,y,S){return $(b).setUint16(y,S,!0),y+2}},_.UINT16_BE={len:2,get(b,y){return $(b).getUint16(y)},put(b,y,S){return $(b).setUint16(y,S),y+2}},_.UINT24_LE={len:3,get(b,y){const S=$(b);return S.getUint8(y)+(S.getUint16(y+1,!0)<<8)},put(b,y,S){const k=$(b);return k.setUint8(y,S&255),k.setUint16(y+1,S>>8,!0),y+3}},_.UINT24_BE={len:3,get(b,y){const S=$(b);return(S.getUint16(y)<<8)+S.getUint8(y+2)},put(b,y,S){const k=$(b);return k.setUint16(y,S>>8),k.setUint8(y+2,S&255),y+3}},_.UINT32_LE={len:4,get(b,y){return $(b).getUint32(y,!0)},put(b,y,S){return $(b).setUint32(y,S,!0),y+4}},_.UINT32_BE={len:4,get(b,y){return $(b).getUint32(y)},put(b,y,S){return $(b).setUint32(y,S),y+4}},_.INT8={len:1,get(b,y){return $(b).getInt8(y)},put(b,y,S){return $(b).setInt8(y,S),y+2}},_.INT16_BE={len:2,get(b,y){return $(b).getInt16(y)},put(b,y,S){return $(b).setInt16(y,S),y+2}},_.INT16_LE={len:2,get(b,y){return $(b).getInt16(y,!0)},put(b,y,S){return $(b).setInt16(y,S,!0),y+2}},_.INT24_LE={len:3,get(b,y){const S=_.UINT24_LE.get(b,y);return S>8388607?S-16777216:S},put(b,y,S){const k=$(b);return k.setUint8(y,S&255),k.setUint16(y+1,S>>8,!0),y+3}},_.INT24_BE={len:3,get(b,y){const S=_.UINT24_BE.get(b,y);return S>8388607?S-16777216:S},put(b,y,S){const k=$(b);return k.setUint16(y,S>>8),k.setUint8(y+2,S&255),y+3}},_.INT32_BE={len:4,get(b,y){return $(b).getInt32(y)},put(b,y,S){return $(b).setInt32(y,S),y+4}},_.INT32_LE={len:4,get(b,y){return $(b).getInt32(y,!0)},put(b,y,S){return $(b).setInt32(y,S,!0),y+4}},_.UINT64_LE={len:8,get(b,y){return $(b).getBigUint64(y,!0)},put(b,y,S){return $(b).setBigUint64(y,S,!0),y+8}},_.INT64_LE={len:8,get(b,y){return $(b).getBigInt64(y,!0)},put(b,y,S){return $(b).setBigInt64(y,S,!0),y+8}},_.UINT64_BE={len:8,get(b,y){return $(b).getBigUint64(y)},put(b,y,S){return $(b).setBigUint64(y,S),y+8}},_.INT64_BE={len:8,get(b,y){return $(b).getBigInt64(y)},put(b,y,S){return $(b).setBigInt64(y,S),y+8}},_.Float16_BE={len:2,get(b,y){return B.read(b,y,!1,10,this.len)},put(b,y,S){return B.write(b,S,y,!1,10,this.len),y+this.len}},_.Float16_LE={len:2,get(b,y){return B.read(b,y,!0,10,this.len)},put(b,y,S){return B.write(b,S,y,!0,10,this.len),y+this.len}},_.Float32_BE={len:4,get(b,y){return $(b).getFloat32(y)},put(b,y,S){return $(b).setFloat32(y,S),y+4}},_.Float32_LE={len:4,get(b,y){return $(b).getFloat32(y,!0)},put(b,y,S){return $(b).setFloat32(y,S,!0),y+4}},_.Float64_BE={len:8,get(b,y){return $(b).getFloat64(y)},put(b,y,S){return $(b).setFloat64(y,S),y+8}},_.Float64_LE={len:8,get(b,y){return $(b).getFloat64(y,!0)},put(b,y,S){return $(b).setFloat64(y,S,!0),y+8}},_.Float80_BE={len:10,get(b,y){return B.read(b,y,!1,63,this.len)},put(b,y,S){return B.write(b,S,y,!1,63,this.len),y+this.len}},_.Float80_LE={len:10,get(b,y){return B.read(b,y,!0,63,this.len)},put(b,y,S){return B.write(b,S,y,!0,63,this.len),y+this.len}};class V{constructor(y){this.len=y}get(y,S){}}l(V,"IgnoreType"),_.IgnoreType=V;class j{constructor(y){this.len=y}get(y,S){return y.subarray(S,S+this.len)}}l(j,"Uint8ArrayType"),_.Uint8ArrayType=j;class F{constructor(y){this.len=y}get(y,S){return C.from(y.subarray(S,S+this.len))}}l(F,"BufferType"),_.BufferType=F;class g{constructor(y,S){this.len=y,this.encoding=S}get(y,S){return C.from(y).toString(this.encoding,S,S+this.len)}}l(g,"StringType"),_.StringType=g;class x{constructor(y){this.len=y}static decode(y,S,k){let T="";for(let Z=S;Z<k;++Z)T+=x.codePointToString(x.singleByteDecoder(y[Z]));return T}static inRange(y,S,k){return S<=y&&y<=k}static codePointToString(y){return y<=65535?String.fromCharCode(y):(y-=65536,String.fromCharCode((y>>10)+55296,(y&1023)+56320))}static singleByteDecoder(y){if(x.inRange(y,0,127))return y;const S=x.windows1252[y-128];if(S===null)throw Error("invaliding encoding");return S}get(y,S=0){return x.decode(y,S,S+this.len)}}l(x,"AnsiStringType"),_.AnsiStringType=x,x.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},189:function(K,_,m){"use strict";var C=this&&this.__spreadArray||function(g,x,b){if(b||arguments.length===2)for(var y=0,S=x.length,k;y<S;y++)(k||!(y in x))&&(k||(k=Array.prototype.slice.call(x,0,y)),k[y]=x[y]);return g.concat(k||Array.prototype.slice.call(x))};Object.defineProperty(_,"__esModule",{value:!0}),_.config=_.loadMessageBundle=_.BundleFormat=_.MessageFormat=void 0;var B=m(1926),$=m(800),V=m(800);Object.defineProperty(_,"MessageFormat",{enumerable:!0,get:function(){return V.MessageFormat}}),Object.defineProperty(_,"BundleFormat",{enumerable:!0,get:function(){return V.BundleFormat}});function j(g){return function(x,b){for(var y=[],S=2;S<arguments.length;S++)y[S-2]=arguments[S];if(typeof x=="number")throw new Error("Browser implementation does currently not support externalized strings.");return $.localize.apply(void 0,C([x,b],y,!1))}}l(j,"loadMessageBundle"),_.loadMessageBundle=j;function F(g){var x;return(0,$.setPseudo)(((x=g==null?void 0:g.locale)===null||x===void 0?void 0:x.toLowerCase())==="pseudo"),j}l(F,"config"),_.config=F,B.default.install(Object.freeze({loadMessageBundle:j,config:F}))},800:(K,_,m)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.config=_.loadMessageBundle=_.localize=_.format=_.setPseudo=_.isPseudo=_.isDefined=_.BundleFormat=_.MessageFormat=void 0;var C=m(1926),B;(function(S){S.file="file",S.bundle="bundle",S.both="both"})(B=_.MessageFormat||(_.MessageFormat={}));var $;(function(S){S.standalone="standalone",S.languagePack="languagePack"})($=_.BundleFormat||(_.BundleFormat={}));var V;(function(S){function k(T){var Z=T;return Z&&j(Z.key)&&j(Z.comment)}l(k,"is"),S.is=k})(V||(V={}));function j(S){return typeof S!="undefined"}l(j,"isDefined"),_.isDefined=j,_.isPseudo=!1;function F(S){_.isPseudo=S}l(F,"setPseudo"),_.setPseudo=F;function g(S,k){var T;return _.isPseudo&&(S="\uFF3B"+S.replace(/[aouei]/g,"$&$&")+"\uFF3D"),k.length===0?T=S:T=S.replace(/\{(\d+)\}/g,function(Z,te){var de=te[0],U=k[de],q=Z;return typeof U=="string"?q=U:(typeof U=="number"||typeof U=="boolean"||U===void 0||U===null)&&(q=String(U)),q}),T}l(g,"format"),_.format=g;function x(S,k){for(var T=[],Z=2;Z<arguments.length;Z++)T[Z-2]=arguments[Z];return g(k,T)}l(x,"localize"),_.localize=x;function b(S){return(0,C.default)().loadMessageBundle(S)}l(b,"loadMessageBundle"),_.loadMessageBundle=b;function y(S){return(0,C.default)().config(S)}l(y,"config"),_.config=y},1926:(K,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var m;function C(){if(m===void 0)throw new Error("No runtime abstraction layer installed");return m}l(C,"RAL"),function(B){function $(V){if(V===void 0)throw new Error("No runtime abstraction layer provided");m=V}l($,"install"),B.install=$}(C||(C={})),_.default=C},2479:K=>{K.exports=_;function _(m,C){if(m&&C)return _(m)(C);if(typeof m!="function")throw new TypeError("need wrapper function");return Object.keys(m).forEach(function($){B[$]=m[$]}),B;function B(){for(var $=new Array(arguments.length),V=0;V<$.length;V++)$[V]=arguments[V];var j=m.apply(this,$),F=$[$.length-1];return typeof j=="function"&&j!==F&&Object.keys(F).forEach(function(g){j[g]=F[g]}),j}l(B,"wrapper")}l(_,"wrappy")},6529:()=>{},6391:()=>{},4059:()=>{}},__webpack_module_cache__={};function __webpack_require__(K){var _=__webpack_module_cache__[K];if(_!==void 0)return _.exports;var m=__webpack_module_cache__[K]={id:K,loaded:!1,exports:{}};return __webpack_modules__[K].call(m.exports,m,m.exports,__webpack_require__),m.loaded=!0,m.exports}l(__webpack_require__,"__webpack_require__"),(()=>{__webpack_require__.n=K=>{var _=K&&K.__esModule?()=>K.default:()=>K;return __webpack_require__.d(_,{a:_}),_}})(),(()=>{__webpack_require__.d=(K,_)=>{for(var m in _)__webpack_require__.o(_,m)&&!__webpack_require__.o(K,m)&&Object.defineProperty(K,m,{enumerable:!0,get:_[m]})}})(),(()=>{__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(K){if(typeof window=="object")return window}}()})(),(()=>{__webpack_require__.o=(K,_)=>Object.prototype.hasOwnProperty.call(K,_)})(),(()=>{__webpack_require__.r=K=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})}})(),(()=>{__webpack_require__.nmd=K=>(K.paths=[],K.children||(K.children=[]),K)})();var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{activate:()=>xb});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{max:()=>Gl,min:()=>ns});var _=__webpack_require__(189);_.config({messageFormat:_.MessageFormat.bundle,bundleFormat:_.BundleFormat.standalone});const m=require("vscode"),C=new TextDecoder,B=new TextEncoder,$=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function V(e){const t=B.encode(e),n=new Array(t.length);for(let r=0;r<t.length;++r)n[r]=$[t[r]];return n.join("")}l(V,"encodeUtf8Hex");function j(e){const t=e.match(/(\w{2})/g);if(t===null)return"";const n=new Uint8Array(t.map(r=>parseInt(r,16)));return C.decode(n)}l(j,"decodeUtf8Hex");const F=/^[0-9a-f]{40}$/i;function g(e){return e!==void 0&&F.test(e)}l(g,"isSha");const x=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function b(e){return x.test(e)}l(b,"isValidBranchName");function y(e){return e===""||e==="~"||e==="HEAD"?e:e.endsWith("^")?`${e.substr(0,7)}^`:e.substr(0,7)}l(y,"shortenRef");const S=47;function k(e){if(e===void 0)return;const t=e.path.endsWith("/");return!t&&!e.fragment?e.toString():e.with({path:t?e.path.slice(0,-1):e.path,fragment:""}).toString()}l(k,"asKey");function T(e){if(e===void 0)return;const t=e.path.endsWith("/");return!t&&!e.query&&!e.fragment?e.toString():e.with({path:t?e.path.slice(0,-1):e.path,query:"",fragment:""}).toString()}l(T,"asFileKey");function Z(e,t){return`${(t==null?void 0:t.excludeScheme)?"":`${e.scheme}-`}${e.authority}${e.path.endsWith("/")?e.path.slice(0,-1):e.path}`}l(Z,"asFileStorageKey");function te(e){const t=e.path;let n=0,r=-1,i=!0;for(let a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===S){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":t.slice(n,r)}l(te,"basename");function de(e){const t=e.path;if(t.length===1)return"/";let n,r=-1,i=!0;for(let a=t.length-1;a>=1;--a)if(n=t.charCodeAt(a),n===S){if(!i){r=a;break}}else i=!1;return r===-1?"/":t.slice(0,r)}l(de,"dirname");function U(e){const t=e.path.lastIndexOf("/");return t===-1?e.with({path:"/"}):e.with({path:e.path.substring(0,t)})}l(U,"getParent");function q(e,t){const n=typeof t=="string"?t:t.path;return n.startsWith(e.path)?m.Uri.joinPath(e,n.substr(e.path.length)):m.Uri.joinPath(e,n)}l(q,"joinRelativePath");function X(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),P(e,t)&&e.path.substr(t.length+(t.endsWith("/")?0:1)).split("/").length===1):P(e,t)&&e.path.substr(t.path.length+(t.path.endsWith("/")?0:1)).split("/").length===1}l(X,"isChild");function P(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),t.length===1||e.path.startsWith(t.endsWith("/")?t:`${t}/`)):t.scheme===e.scheme&&t.authority===e.authority&&(t.path.length===1||e.path.startsWith(t.path.endsWith("/")?t.path:`${t.path}/`))}l(P,"isDescendent");function z(e){return e&&typeof e=="object"&&"scheme"in e}l(z,"isSerializedUri");var J;(function(e){e.authoritySeparator="+",e.scheme="vscode-vfs",e.baseVirtualWorkspaceUri=m.Uri.parse(`${e.scheme}://`);function t(c){const{authority:f}=c,v=f.indexOf(e.authoritySeparator);return v!==-1?f.substr(0,v):f}l(t,"getProviderId"),e.getProviderId=t;function n(c){return c.scheme!==e.scheme?c:c.with({scheme:t(c)})}l(n,"getProviderUri"),e.getProviderUri=n;function r(c,f){const v=new Map,p=m.workspace.textDocuments;if(p.length===0)return v;for(const w of p)w.uri.scheme===c&&f.some(I=>P(w.uri,I))&&v.set(k(w.uri),w.uri);return v}l(r,"getOpenUris"),e.getOpenUris=r;function i(c){return c.scheme===e.scheme?c:c.with({scheme:e.scheme})}l(i,"getVirtualUri"),e.getVirtualUri=i;function a(c,f){const[v,p]=c.authority.split(e.authoritySeparator);let w;if(p)try{const I=JSON.parse(j(p));w=f?f(I):I}catch{}return{scheme:v,metadata:w}}l(a,"decodeAuthority"),e.decodeAuthority=a;function o(c,f){const v=f?`${e.authoritySeparator}${V(JSON.stringify(f))}`:"";return`${c}${v}`}l(o,"encodeAuthority"),e.encodeAuthority=o;function s(c){return c.authority.indexOf(e.authoritySeparator)===-1}l(s,"isCanonicalUri"),e.isCanonicalUri=s;function u(){var c,f;return(f=(c=m.workspace.workspaceFolders)==null?void 0:c.every(v=>v.uri.scheme===e.scheme))!=null?f:!1}l(u,"isVirtualWorkspace"),e.isVirtualWorkspace=u})(J||(J={}));var ae;(function(e){e[e.Admin=100]="Admin",e[e.Maintain=40]="Maintain",e[e.WriteToPullRequest=31]="WriteToPullRequest",e[e.Write=30]="Write",e[e.Triage=20]="Triage",e[e.Read=10]="Read",e[e.None=0]="None"})(ae||(ae={}));var ne;(function(e){e[e.Branch=0]="Branch",e[e.RemoteBranch=1]="RemoteBranch",e[e.Tag=2]="Tag",e[e.Commit=3]="Commit"})(ne||(ne={}));var ce;(function(e){function t(n){return n!==void 0&&n.type===Le.Active}l(t,"isActive"),e.isActive=t})(ce||(ce={}));var pe;(function(e){function t(n){const r=J.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:be.Latest};if(g(r.idx))return{type:be.SHA,sha:r.idx}}}l(t,"decode"),e.decode=t})(pe||(pe={}));var be;(function(e){e[e.Latest=1]="Latest",e[e.SHA=2]="SHA"})(be||(be={}));var Le;(function(e){e[e.NotIndexed=0]="NotIndexed",e[e.Indexed=1]="Indexed",e[e.Match=2]="Match",e[e.Active=3]="Active"})(Le||(Le={})),function(e){function t(n){return n!==void 0&&(n===e.Indexed||n===e.Match||n===e.Active)}l(t,"hasIndex"),e.hasIndex=t}(Le||(Le={}));var Be;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed",e[e.Merged=2]="Merged"})(Be||(Be={}));var H;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(H||(H={}));var Ke;(function(e){e.CurrentWindow="currentWindow",e.NewWindow="newWindow",e.AddToWorkspace="addToWorkspace"})(Ke||(Ke={}));var He;(function(e){e[e.Branch=0]="Branch",e[e.Tag=1]="Tag",e[e.Commit=2]="Commit",e[e.PullRequest=3]="PullRequest",e[e.Tree=4]="Tree"})(He||(He={}));var $e;(function(e){e[e.Abort=0]="Abort",e[e.KeepCurrent=1]="KeepCurrent",e[e.DiscardCurrent=2]="DiscardCurrent",e[e.Merge=3]="Merge"})($e||($e={}));var Ae;(function(e){e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest",e[e.Branch=2]="Branch",e[e.Commit=3]="Commit",e[e.File=4]="File",e[e.Tag=5]="Tag"})(Ae||(Ae={}));var Se;(function(e){e.Branch="branch",e.RemoteBranch="remoteBranch",e.PullRequestBranch="pullRequestBranch",e.PullRequestRemoteBranch="pullRequestRemoteBranch",e.Tag="tag",e.Commit="commit"})(Se||(Se={}));var it;(function(e){e.None="none",e.Latest="latest",e.Match="match",e.TipPlusLatest="tip+latest"})(it||(it={}));var Ve;(function(e){e.Browse="browse",e.Edit="edit"})(Ve||(Ve={}));var ee;(function(e){e.CommitFailedError="CommitFailedError",e.DetachedHEADError="DetachedHEADError",e.InvalidBranchNameError="InvalidBranchNameError",e.InvalidCredentialsError="InvalidCredentialsError",e.MergeConflictError="MergeConflictError",e.NothingToCommitError="NothingToCommitError",e.SyncConflictsError="SyncConflictsError",e.SyncOrFetchError="SyncOrFetchError",e.UnresolvedConflictsError="UnresolvedConflictsError",e.Unknown="Unknown"})(ee||(ee={}));class We extends Error{constructor(t,n,r){super(typeof t=="string"?t:t.message);this.messageOrError=t,this.errorCode=n,this.action=r}static CommitFailedError(){return new We("Failed to create and push commit",ee.CommitFailedError)}static DetachedHEADError(t){return new We(t,ee.DetachedHEADError)}static InvalidBranchNameError(t,n=!1){const r=n?`Branch '${t}' already exists`:`Invalid branch name '${t}'`;return new We(r,ee.InvalidBranchNameError)}static InvalidCredentialsError(t,n){return new We(t,ee.InvalidCredentialsError,n)}static MergeConflictError(t){return new We(t,ee.MergeConflictError)}static NothingToCommitError(t){return new We(t,ee.NothingToCommitError)}static SyncOrFetchError(t=!1){const n=t?"Unable to sync the repository":"Unable to fetch the repository";return new We(n,ee.SyncOrFetchError)}static SyncConflictsError(){const t="Sync operation will result in conflicts";return new We(t,ee.SyncConflictsError)}static UnresolvedConflictsError(){return new We("You have unresolved merge conflicts.",ee.UnresolvedConflictsError)}static asVirtualProviderErrorCode(t){return t instanceof Error&&"messageOrError"in t&&"errorCode"in t?t.errorCode:ee.Unknown}}l(We,"VirtualProviderError");const ze=6;var nt;(function(e){e.Off="off",e.Auto="auto",e.Always="always"})(nt||(nt={}));var le;(function(e){e.None="none",e.Latest="latest",e.Match="match",e.TipPlusLatest="tip+latest"})(le||(le={})),function(e){function t(n){return n===e.None||n===e.Latest||n===e.Match||n===e.TipPlusLatest?n:e.None}l(t,"sanitize"),e.sanitize=t}(le||(le={}));var se;(function(e){e.Browse="browse",e.Edit="edit"})(se||(se={})),function(e){function t(r){return r===e.Browse||r===e.Edit?r:e.Edit}l(t,"sanitize"),e.sanitize=t;function n(r){return r===e.Browse?e.Edit:e.Browse}l(n,"toggle"),e.toggle=n}(se||(se={}));var Me;(function(e){function t(n,r){return n.display===r.display&&n.index===r.index}l(t,"equals"),e.equals=t})(Me||(Me={}));var Ze;(function(e){const t=new Map([[Se.Branch,le.None],[Se.RemoteBranch,le.None],[Se.PullRequestBranch,le.Match],[Se.PullRequestRemoteBranch,le.Match],[Se.Commit,le.Match],[Se.Tag,le.Match]]),n=new Map([[Se.Branch,se.Edit],[Se.RemoteBranch,se.Edit],[Se.PullRequestBranch,se.Browse],[Se.PullRequestRemoteBranch,se.Browse],[Se.Commit,se.Browse],[Se.Tag,se.Browse]]);function r(a){var o,s;return{display:(o=n.get(a))!=null?o:se.Edit,index:(s=t.get(a))!=null?s:le.None}}l(r,"getDefault"),e.getDefault=r;function i(a){switch(a){case Se.Branch:case Se.RemoteBranch:return{display:se.Browse,index:le.Latest};case Se.PullRequestBranch:case Se.PullRequestRemoteBranch:return{display:se.Browse,index:le.Match};case Se.Commit:case Se.Tag:return{display:se.Browse,index:le.Match};default:return{display:se.Edit,index:le.None}}}l(i,"getIndexDefault"),e.getIndexDefault=i})(Ze||(Ze={}));const pt=null;var jt=__webpack_require__(5179),xt=__webpack_require__.n(jt);const mt="modes",fn="indexMemento";class Yt{constructor(){this._onDidChange=new m.EventEmitter,this._onDidChangeAny=new m.EventEmitter,this.memoryState=new Map}static configure(t,n){Je.configPrefix=t,Je.state=n.workspaceState,n.subscriptions.push(m.workspace.onDidChangeConfiguration(Je.onConfigurationChanged,Je))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(t){if(!t.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(t);return}this._onDidChangeAny.fire(t),this._onDidChange.fire(t)}set state(t){if(this._state=t,this.modes=this._state.get(mt),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(mt,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(fn),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}get(t,n,r){return r===void 0?m.workspace.getConfiguration(t===void 0?void 0:this.configPrefix,n).get(t===void 0?this.configPrefix:t):m.workspace.getConfiguration(t===void 0?void 0:this.configPrefix,n).get(t===void 0?this.configPrefix:t,r)}getMode(t,n,r){var i;const a=t.toString();let o=this.modes!==void 0?this.modes[a]:void 0;if(o!==void 0)return{display:se.sanitize(o.display),index:le.sanitize(o.index)};if(o=this.memoryState.get(a),o!==void 0)return o;if(n===Se.Branch||n===Se.RemoteBranch)switch((i=m.workspace.getConfiguration("remoteHub.richNavigation.indexMode",t))==null?void 0:i.get("branch")){case"none":return{display:se.Edit,index:le.None};case"latest":return{display:se.Browse,index:le.Latest};case"tipPlusLatest":return{display:se.Edit,index:le.TipPlusLatest}}if(!r)return Ze.getDefault(n)}setMode(t,n){const r=t.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(mt,this.modes))}getIndexMemento(t){if(this.indexMemento!==void 0)return this.indexMemento[t.toString()]}setIndexMemento(t,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[t.toString()]=n,this._state.update(fn,this.indexMemento))}getAny(t,n,r){return r===void 0?m.workspace.getConfiguration(void 0,n).get(t):m.workspace.getConfiguration(void 0,n).get(t,r)}changed(t,n,r){var i;return(i=t==null?void 0:t.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(t,n){return m.workspace.getConfiguration(t===void 0?void 0:this.configPrefix,n).inspect(t===void 0?this.configPrefix:t)}inspectAny(t,n){return m.workspace.getConfiguration(void 0,n).inspect(t)}async migrate(t,n,r){const i=Je.inspect(t);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,m.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,m.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,m.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,m.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(t,n,r){const i=Je.inspect(t);if(i===void 0)return;const a=Je.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,m.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,m.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,m.ConfigurationTarget.WorkspaceFolder)}name(t){return t}update(t,n,r){return m.workspace.getConfiguration(this.configPrefix).update(t,n,r)}updateAny(t,n,r,i){return m.workspace.getConfiguration(void 0,r===m.ConfigurationTarget.Global?void 0:i).update(t,n,r)}updateEffective(t,n){const r=Je.inspect(t);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):Je.update(t,n,m.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):Je.update(t,n,m.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):Je.update(t,xt()(n,r.defaultValue)?void 0:n,m.ConfigurationTarget.Global)}}l(Yt,"Configuration");const Je=new Yt,qe="";var Xe;(function(e){e.Off="off",e.Error="error",e.Warn="warn",e.Info="info",e.Debug="debug"})(Xe||(Xe={}));var tr;(function(e){e[e.Off=0]="Off",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"})(tr||(tr={}));const ke="[RemoteHub]",at=l(class{static configure(e,t,n){this._isDebugging=e.extensionMode===m.ExtensionMode.Development,this.outputChannelName=t,this.logLevel=n}static enabled(e){return this.level>=this.toOrderedLevel(e)}static get logLevel(){return this._logLevel}static set logLevel(e){var t,n;this._logLevel=e,this.level=this.toOrderedLevel(e),e===Xe.Off?((t=this.output)==null||t.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:m.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(e){switch(e){case Xe.Off:return 0;case Xe.Error:return 1;case Xe.Warn:return 2;case Xe.Info:return 3;case Xe.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(e,...t){at.isDebugging&&console.log(this.timestamp,ke,e!=null?e:qe,...t),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:qe}${this.toLoggableParams(!0,t)}`)}static error(e,t,...n){if(!(this.level<1&&!at.isDebugging)){if(t===void 0){const r=e instanceof Error?e.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(t=i[1])}}at.isDebugging&&console.error(this.timestamp,ke,t!=null?t:qe,...n,e),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:qe}${this.toLoggableParams(!1,n)}
${String(e)}`)}}static log(e,...t){at.isDebugging&&console.log(this.timestamp,ke,e!=null?e:qe,...t),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:qe}${this.toLoggableParams(!1,t)}`)}static warn(e,...t){at.isDebugging&&console.warn(this.timestamp,ke,e!=null?e:qe,...t),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:qe}${this.toLoggableParams(!1,t)}`)}static showOutputChannel(){var e;(e=this.output)==null||e.show()}static toLoggable(e,t){if(typeof e!="object")return String(e);if(e instanceof m.Uri)return`Uri(${e.toString(!0)})`;try{return JSON.stringify(e,t)}catch{return"<error>"}}static toLoggableName(e){var t,n,r;let i;if(typeof e=="function"){if(e.prototype===void 0||e.prototype.constructor===void 0)return e.name;i=(t=e.prototype.constructor.name)!=null?t:qe}else i=(r=(n=e.constructor)==null?void 0:n.name)!=null?r:qe;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static get timestamp(){const e=new Date;return`[${e.toISOString().replace(/T/," ").replace(/\..+/,qe)}:${`00${e.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(e,t){if(t.length===0||e&&this.level<4&&!at.isDebugging)return qe;const n=t.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:qe}},"_Logger");let Y=at;Y.level=0,Y._logLevel=Xe.Off;class et{constructor(t){this.provider=t,this._timeout=0,this._disposable=Je.onDidChange(this.onConfigurationChanged,this),this.maybeQueueFetch()}dispose(){this._disposable.dispose(),this._timeout&&clearTimeout(this._timeout)}get config(){var t;if(this._config===void 0){const n=Je.get("autoFetch");this._config={enabled:(t=n.enabled)!=null?t:!0,interval:n.interval*1e3}}return this._config}onConfigurationChanged(t){!Je.changed(t,"autoFetch")||(this._config=void 0,this.maybeQueueFetch())}async fetchAll(){const t=this.provider.repositories;t.length!==0&&(await m.window.withProgress({location:m.ProgressLocation.SourceControl},async()=>{for(const n of t)try{await this.provider.fetch(n.uri)}catch(r){Y.error(r)}}),this.maybeQueueFetch())}maybeQueueFetch(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),!!this.config.enabled&&(this._timeout=setTimeout(()=>this.fetchAll(),this.config.interval))}}l(et,"AutoFetchService");function ht(){}l(ht,"Diff"),ht.prototype={diff:l(function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function o(R){return i?(setTimeout(function(){i(void 0,R)},0),!0):R}l(o,"done"),t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var s=n.length,u=t.length,c=1,f=s+u,v=[{newPos:-1,components:[]}],p=this.extractCommon(v[0],n,t,0);if(v[0].newPos+1>=s&&p+1>=u)return o([{value:this.join(n),count:n.length}]);function w(){for(var R=-1*c;R<=c;R+=2){var A=void 0,D=v[R-1],O=v[R+1],G=(O?O.newPos:0)-R;D&&(v[R-1]=void 0);var W=D&&D.newPos+1<s,re=O&&0<=G&&G<u;if(!W&&!re){v[R]=void 0;continue}if(!W||re&&D.newPos<O.newPos?(A=kt(O),a.pushComponent(A.components,void 0,!0)):(A=D,A.newPos++,a.pushComponent(A.components,!0,void 0)),G=a.extractCommon(A,n,t,R),A.newPos+1>=s&&G+1>=u)return o(Rt(a,A.components,n,t,a.useLongestToken));v[R]=A}c++}if(l(w,"execEditLength"),i)l(function R(){setTimeout(function(){if(c>f)return i();w()||R()},0)},"exec")();else for(;c<=f;){var I=w();if(I)return I}},"diff"),pushComponent:l(function(t,n,r){var i=t[t.length-1];i&&i.added===n&&i.removed===r?t[t.length-1]={count:i.count+1,added:n,removed:r}:t.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:l(function(t,n,r,i){for(var a=n.length,o=r.length,s=t.newPos,u=s-i,c=0;s+1<a&&u+1<o&&this.equals(n[s+1],r[u+1]);)s++,u++,c++;return c&&t.components.push({count:c}),t.newPos=s,u},"extractCommon"),equals:l(function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:l(function(t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n},"removeEmpty"),castInput:l(function(t){return t},"castInput"),tokenize:l(function(t){return t.split("")},"tokenize"),join:l(function(t){return t.join("")},"join")};function Rt(e,t,n,r,i){for(var a=0,o=t.length,s=0,u=0;a<o;a++){var c=t[a];if(c.removed){if(c.value=e.join(r.slice(u,u+c.count)),u+=c.count,a&&t[a-1].added){var v=t[a-1];t[a-1]=t[a],t[a]=v}}else{if(!c.added&&i){var f=n.slice(s,s+c.count);f=f.map(function(w,I){var R=r[u+I];return R.length>w.length?R:w}),c.value=e.join(f)}else c.value=e.join(n.slice(s,s+c.count));s+=c.count,c.added||(u+=c.count)}}var p=t[o-1];return o>1&&typeof p.value=="string"&&(p.added||p.removed)&&e.equals("",p.value)&&(t[o-2].value+=p.value,t.pop()),t}l(Rt,"buildValues");function kt(e){return{newPos:e.newPos,components:e.components.slice(0)}}l(kt,"clonePath");var E=new ht;function d(e,t,n){return E.diff(e,t,n)}l(d,"diffChars");function h(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}l(h,"generateOptions");var L=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Q=/\S/,oe=new ht;oe.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Q.test(e)&&!Q.test(t)},oe.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&L.test(t[n])&&L.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};function ge(e,t,n){return n=h(n,{ignoreWhitespace:!0}),oe.diff(e,t,n)}l(ge,"diffWords");function ot(e,t,n){return oe.diff(e,t,n)}l(ot,"diffWordsWithSpace");var At=new ht;At.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};function It(e,t,n){return At.diff(e,t,n)}l(It,"diffLines");function Mt(e,t,n){var r=h(n,{ignoreWhitespace:!0});return At.diff(e,t,r)}l(Mt,"diffTrimmedLines");var dt=new ht;dt.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function Bl(e,t,n){return dt.diff(e,t,n)}l(Bl,"diffSentences");var Wo=new ht;Wo.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Kf(e,t,n){return Wo.diff(e,t,n)}l(Kf,"diffCss");function Or(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Or=l(function(t){return typeof t},"_typeof"):Or=l(function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},"_typeof"),Or(e)}l(Or,"_typeof");function wn(e){return Ia(e)||Ta(e)||Ra(e)||$l()}l(wn,"_toConsumableArray");function Ia(e){if(Array.isArray(e))return wr(e)}l(Ia,"_arrayWithoutHoles");function Ta(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}l(Ta,"_iterableToArray");function Ra(e,t){if(!!e){if(typeof e=="string")return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(e,t)}}l(Ra,"_unsupportedIterableToArray");function wr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}l(wr,"_arrayLikeToArray");function $l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}l($l,"_nonIterableSpread");var Pl=Object.prototype.toString,Ur=new ht;Ur.useLongestToken=!0,Ur.tokenize=At.tokenize,Ur.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=r===void 0?function(a,o){return typeof o=="undefined"?n:o}:r;return typeof e=="string"?e:JSON.stringify(ka(e,null,null,i),i,"  ")},Ur.equals=function(e,t){return ht.prototype.equals.call(Ur,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Zf(e,t,n){return Ur.diff(e,t,n)}l(Zf,"diffJson");function ka(e,t,n,r,i){t=t||[],n=n||[],r&&(e=r(i,e));var a;for(a=0;a<t.length;a+=1)if(t[a]===e)return n[a];var o;if(Pl.call(e)==="[object Array]"){for(t.push(e),o=new Array(e.length),n.push(o),a=0;a<e.length;a+=1)o[a]=ka(e[a],t,n,r,i);return t.pop(),n.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),Or(e)==="object"&&e!==null){t.push(e),o={},n.push(o);var s=[],u;for(u in e)e.hasOwnProperty(u)&&s.push(u);for(s.sort(),a=0;a<s.length;a+=1)u=s[a],o[u]=ka(e[u],t,n,r,u);t.pop(),n.pop()}else o=e;return o}l(ka,"canonicalize");var fi=new ht;fi.tokenize=function(e){return e.slice()},fi.join=fi.removeEmpty=function(e){return e};function jo(e,t,n){return fi.diff(e,t,n)}l(jo,"diffArrays");function Fn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function o(){var c={};for(i.push(c);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var v=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);v&&(c.index=v[1]),a++}for(s(c),s(c),c.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))c.hunks.push(u());else{if(p&&t.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}l(o,"parseIndex");function s(c){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var v=f[1]==="---"?"old":"new",p=f[2].split("	",2),w=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(w)&&(w=w.substr(1,w.length-2)),c[v+"FileName"]=w,c[v+"Header"]=(p[1]||"").trim(),a++}}l(s,"parseFileHeader");function u(){var c=a,f=n[a++],v=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+v[1],oldLines:typeof v[2]=="undefined"?1:+v[2],newStart:+v[3],newLines:typeof v[4]=="undefined"?1:+v[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,I=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var R=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(R==="+"||R==="-"||R===" "||R==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),R==="+"?w++:R==="-"?I++:R===" "&&(w++,I++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!I&&p.oldLines===1&&(p.oldLines=0),t.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(c+1));if(I!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(c+1))}return p}for(l(u,"parseHunk");a<n.length;)o();return i}l(Fn,"parsePatch");function Ml(e,t,n){var r=!0,i=!1,a=!1,o=1;return l(function s(){if(r&&!a){if(i?o++:r=!1,e+o<=n)return o;a=!0}if(!i)return a||(r=!0),t<=e-o?-o++:(i=!0,s())},"iterator")}l(Ml,"distanceIterator");function Vo(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=Fn(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var r=e.split(/\r\n|[\n\v\f\r\x85]/),i=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=t.hunks,o=n.compareLine||function(xe,Ie,Te,je){return Ie===je},s=0,u=n.fuzzFactor||0,c=0,f=0,v,p;function w(xe,Ie){for(var Te=0;Te<xe.lines.length;Te++){var je=xe.lines[Te],Qe=je.length>0?je[0]:" ",lt=je.length>0?je.substr(1):je;if(Qe===" "||Qe==="-"){if(!o(Ie+1,r[Ie],Qe,lt)&&(s++,s>u))return!1;Ie++}}return!0}l(w,"hunkFits");for(var I=0;I<a.length;I++){for(var R=a[I],A=r.length-R.oldLines,D=0,O=f+R.oldStart-1,G=Ml(O,c,A);D!==void 0;D=G())if(w(R,O+D)){R.offset=f+=D;break}if(D===void 0)return!1;c=R.offset+R.oldStart+R.oldLines}for(var W=0,re=0;re<a.length;re++){var we=a[re],he=we.oldStart+we.offset+W-1;W+=we.newLines-we.oldLines;for(var fe=0;fe<we.lines.length;fe++){var Ee=we.lines[fe],ue=Ee.length>0?Ee[0]:" ",Re=Ee.length>0?Ee.substr(1):Ee,Ye=we.linedelimiters[fe];if(ue===" ")he++;else if(ue==="-")r.splice(he,1),i.splice(he,1);else if(ue==="+")r.splice(he,0,Re),i.splice(he,0,Ye),he++;else if(ue==="\\"){var _t=we.lines[fe-1]?we.lines[fe-1][0]:null;_t==="+"?v=!0:_t==="-"&&(p=!0)}}}if(v)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var ie=0;ie<r.length-1;ie++)r[ie]=r[ie]+i[ie];return r.join("")}l(Vo,"applyPatch");function Qf(e,t){typeof e=="string"&&(e=Fn(e));var n=0;function r(){var i=e[n++];if(!i)return t.complete();t.loadFile(i,function(a,o){if(a)return t.complete(a);var s=Vo(o,i,t);t.patched(i,s,function(u){if(u)return t.complete(u);r()})})}l(r,"processIndex"),r()}l(Qf,"applyPatches");function Go(e,t,n,r,i,a,o){o||(o={}),typeof o.context=="undefined"&&(o.context=4);var s=It(n,r,o);s.push({value:"",lines:[]});function u(D){return D.map(function(O){return" "+O})}l(u,"contextLines");for(var c=[],f=0,v=0,p=[],w=1,I=1,R=l(function(O){var G=s[O],W=G.lines||G.value.replace(/\n$/,"").split(`
`);if(G.lines=W,G.added||G.removed){var re;if(!f){var we=s[O-1];f=w,v=I,we&&(p=o.context>0?u(we.lines.slice(-o.context)):[],f-=p.length,v-=p.length)}(re=p).push.apply(re,wn(W.map(function(ie){return(G.added?"+":"-")+ie}))),G.added?I+=W.length:w+=W.length}else{if(f)if(W.length<=o.context*2&&O<s.length-2){var he;(he=p).push.apply(he,wn(u(W)))}else{var fe,Ee=Math.min(W.length,o.context);(fe=p).push.apply(fe,wn(u(W.slice(0,Ee))));var ue={oldStart:f,oldLines:w-f+Ee,newStart:v,newLines:I-v+Ee,lines:p};if(O>=s.length-2&&W.length<=o.context){var Re=/\n$/.test(n),Ye=/\n$/.test(r),_t=W.length==0&&p.length>ue.oldLines;!Re&&_t&&n.length>0&&p.splice(ue.oldLines,0,"\\ No newline at end of file"),(!Re&&!_t||!Ye)&&p.push("\\ No newline at end of file")}c.push(ue),f=0,v=0,p=[]}w+=W.length,I+=W.length}},"_loop"),A=0;A<s.length;A++)R(A);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:a,hunks:c}}l(Go,"structuredPatch");function Ol(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var r=e.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),t.push.apply(t,r.lines)}return t.join(`
`)+`
`}l(Ol,"formatPatch");function qn(e,t,n,r,i,a,o){return Ol(Go(e,t,n,r,i,a,o))}l(qn,"createTwoFilesPatch");function Ul(e,t,n,r,i,a){return qn(e,e,t,n,r,i,a)}l(Ul,"createPatch");function Hl(e,t){return e.length!==t.length?!1:Da(e,t)}l(Hl,"arrayEqual");function Da(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}l(Da,"arrayStartsWith");function zl(e){var t=Na(e.lines),n=t.oldLines,r=t.newLines;n!==void 0?e.oldLines=n:delete e.oldLines,r!==void 0?e.newLines=r:delete e.newLines}l(zl,"calcLineCount");function Xf(e,t,n){e=nr(e,n),t=nr(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index),(e.newFileName||t.newFileName)&&(Ko(e)?Ko(t)?(r.oldFileName=Ui(r,e.oldFileName,t.oldFileName),r.newFileName=Ui(r,e.newFileName,t.newFileName),r.oldHeader=Ui(r,e.oldHeader,t.oldHeader),r.newHeader=Ui(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader)),r.hunks=[];for(var i=0,a=0,o=0,s=0;i<e.hunks.length||a<t.hunks.length;){var u=e.hunks[i]||{oldStart:1/0},c=t.hunks[a]||{oldStart:1/0};if(Zo(u,c))r.hunks.push(Qo(u,o)),i++,s+=u.newLines-u.oldLines;else if(Zo(c,u))r.hunks.push(Qo(c,s)),a++,o+=c.newLines-c.oldLines;else{var f={oldStart:Math.min(u.oldStart,c.oldStart),oldLines:0,newStart:Math.min(u.newStart+o,c.oldStart+s),newLines:0,lines:[]};ql(f,u.oldStart,u.lines,c.oldStart,c.lines),a++,i++,r.hunks.push(f)}}return r}l(Xf,"merge");function nr(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return Fn(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return Go(void 0,void 0,t,e)}return e}l(nr,"loadPatch");function Ko(e){return e.newFileName&&e.newFileName!==e.oldFileName}l(Ko,"fileNameChanged");function Ui(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}l(Ui,"selectField");function Zo(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}l(Zo,"hunkBefore");function Qo(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}l(Qo,"cloneHunk");function ql(e,t,n,r,i){var a={offset:t,lines:n,index:0},o={offset:r,lines:i,index:0};for(Wn(e,a,o),Wn(e,o,a);a.index<a.lines.length&&o.index<o.lines.length;){var s=a.lines[a.index],u=o.lines[o.index];if((s[0]==="-"||s[0]==="+")&&(u[0]==="-"||u[0]==="+"))Hi(e,a,o);else if(s[0]==="+"&&u[0]===" "){var c;(c=e.lines).push.apply(c,wn(yr(a)))}else if(u[0]==="+"&&s[0]===" "){var f;(f=e.lines).push.apply(f,wn(yr(o)))}else s[0]==="-"&&u[0]===" "?Xo(e,a,o):u[0]==="-"&&s[0]===" "?Xo(e,o,a,!0):s===u?(e.lines.push(s),a.index++,o.index++):Fa(e,yr(a),yr(o))}Yo(e,a),Yo(e,o),zl(e)}l(ql,"mergeLines");function Hi(e,t,n){var r=yr(t),i=yr(n);if(Jo(r)&&Jo(i)){if(Da(r,i)&&es(n,r,r.length-i.length)){var a;(a=e.lines).push.apply(a,wn(r));return}else if(Da(i,r)&&es(t,i,i.length-r.length)){var o;(o=e.lines).push.apply(o,wn(i));return}}else if(Hl(r,i)){var s;(s=e.lines).push.apply(s,wn(r));return}Fa(e,r,i)}l(Hi,"mutualChange");function Xo(e,t,n,r){var i=yr(t),a=Wl(n,i);if(a.merged){var o;(o=e.lines).push.apply(o,wn(a.merged))}else Fa(e,r?a:i,r?i:a)}l(Xo,"removal");function Fa(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}l(Fa,"conflict");function Wn(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}l(Wn,"insertLeading");function Yo(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}l(Yo,"insertTrailing");function yr(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])t.push(r),e.index++;else break}return t}l(yr,"collectChange");function Wl(e,t){for(var n=[],r=[],i=0,a=!1,o=!1;i<t.length&&e.index<e.lines.length;){var s=e.lines[e.index],u=t[i];if(u[0]==="+")break;if(a=a||s[0]!==" ",r.push(u),i++,s[0]==="+")for(o=!0;s[0]==="+";)n.push(s),s=e.lines[++e.index];u.substr(1)===s.substr(1)?(n.push(s),e.index++):o=!0}if((t[i]||"")[0]==="+"&&a&&(o=!0),o)return n;for(;i<t.length;)r.push(t[i++]);return{merged:r,changes:n}}l(Wl,"collectContext");function Jo(e){return e.reduce(function(t,n){return t&&n[0]==="-"},!0)}l(Jo,"allRemoves");function es(e,t,n){for(var r=0;r<n;r++){var i=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=n,!0}l(es,"skipRemoveSuperset");function Na(e){var t=0,n=0;return e.forEach(function(r){if(typeof r!="string"){var i=Na(r.mine),a=Na(r.theirs);t!==void 0&&(i.oldLines===a.oldLines?t+=i.oldLines:t=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,t!==void 0&&(r[0]==="-"||r[0]===" ")&&t++}),{oldLines:t,newLines:n}}l(Na,"calcOldNewLineCount");function La(e){for(var t=[],n,r,i=0;i<e.length;i++)n=e[i],n.added?r=1:n.removed?r=-1:r=0,t.push([r,n.value]);return t}l(La,"convertChangesToDMP");function Yf(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push(di(r.value)),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}return t.join("")}l(Yf,"convertChangesToXML");function di(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}l(di,"escapeHTML");var Ba=/[^a-zA-Z0-9]/,$a=/\s/,ts=/[\r\n]/,jl=/\n\r?\n$/,Vl=/^\r?\n\r?\n/,_e;(function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"})(_e||(_e={}));function ns(e,t){return e<t?e:t}l(ns,"min");function Gl(e,t){return e>t?e:t}l(Gl,"max");var dn=K,Hr=function(){function e(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return l(e,"PatchObject"),e.prototype.toString=function(){var t,n;this.length1===0?t=this.start1+",0":this.length1===1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+t+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case _e.DIFF_INSERT:i="+";break;case _e.DIFF_DELETE:i="-";break;case _e.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},e}(),zi=function(){function e(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return l(e,"DiffMatchPatch"),e.prototype.diff_main=function(t,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(t==null||n==null)throw new Error("Null input. (diff_main)");if(t===n)return t?[[_e.DIFF_EQUAL,t]]:[];typeof r=="undefined"&&(r=!0);var o=r,s=this.diff_commonPrefix(t,n),u=t.substring(0,s);t=t.substring(s),n=n.substring(s),s=this.diff_commonSuffix(t,n);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),n=n.substring(0,n.length-s);var f=this.diff_compute_(t,n,o,a);return u&&f.unshift([_e.DIFF_EQUAL,u]),c&&f.push([_e.DIFF_EQUAL,c]),this.diff_cleanupMerge(f),f},e.prototype.diff_commonPrefix=function(t,n){if(!t||!n||t.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=dn.min(t.length,n.length),a=i,o=0;r<a;)t.substring(o,a)===n.substring(o,a)?(r=a,o=r):i=a,a=Math.floor((i-r)/2+r);return a},e.prototype.diff_commonSuffix=function(t,n){if(!t||!n||t.charAt(t.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=dn.min(t.length,n.length),a=i,o=0;r<a;)t.substring(t.length-a,t.length-o)===n.substring(n.length-a,n.length-o)?(r=a,o=r):i=a,a=Math.floor((i-r)/2+r);return a},e.prototype.diff_cleanupSemantic=function(t){for(var n=!1,r=[],i=0,a=null,o=0,s=0,u=0,c=0,f=0;o<t.length;)t[o][0]===_e.DIFF_EQUAL?(r[i++]=o,s=c,u=f,c=0,f=0,a=t[o][1]):(t[o][0]===_e.DIFF_INSERT?c+=t[o][1].length:f+=t[o][1].length,a&&a.length<=dn.max(s,u)&&a.length<=dn.max(c,f)&&(t.splice(r[i-1],0,[_e.DIFF_DELETE,a]),t[r[i-1]+1][0]=_e.DIFF_INSERT,i--,i--,o=i>0?r[i-1]:-1,s=0,u=0,c=0,f=0,a=null,n=!0)),o++;for(n&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(t[o-1][0]===_e.DIFF_DELETE&&t[o][0]===_e.DIFF_INSERT){var v=t[o-1][1],p=t[o][1],w=this.diff_commonOverlap_(v,p),I=this.diff_commonOverlap_(p,v);w>=I?(w>=v.length/2||w>=p.length/2)&&(t.splice(o,0,[_e.DIFF_EQUAL,p.substring(0,w)]),t[o-1][1]=v.substring(0,v.length-w),t[o+1][1]=p.substring(w),o++):(I>=v.length/2||I>=p.length/2)&&(t.splice(o,0,[_e.DIFF_EQUAL,v.substring(0,I)]),t[o-1][0]=_e.DIFF_INSERT,t[o-1][1]=p.substring(0,p.length-I),t[o+1][0]=_e.DIFF_DELETE,t[o+1][1]=v.substring(I),o++),o++}o++}},e.prototype.diff_cleanupSemanticLossless=function(t){for(var n=1;n<t.length-1;){if(t[n-1][0]===_e.DIFF_EQUAL&&t[n+1][0]===_e.DIFF_EQUAL){var r=t[n-1][1],i=t[n][1],a=t[n+1][1],o=this.diff_commonSuffix(r,i);if(o){var s=i.substring(i.length-o);r=r.substring(0,r.length-o),i=s+i.substring(0,i.length-o),a=s+a}for(var u=r,c=i,f=a,v=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=v&&(v=p,u=r,c=i,f=a)}t[n-1][1]!==u&&(u?t[n-1][1]=u:(t.splice(n-1,1),n--),t[n][1]=c,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}},e.prototype.diff_cleanupEfficiency=function(t){for(var n=!1,r=[],i=0,a=null,o=0,s=!1,u=!1,c=!1,f=!1;o<t.length;)t[o][0]===_e.DIFF_EQUAL?(t[o][1].length<this.diffEditCost&&(c||f)?(r[i++]=o,s=c,u=f,a=t[o][1]):(i=0,a=null),c=f=!1):(t[o][0]===_e.DIFF_DELETE?f=!0:c=!0,a&&(s&&u&&c&&f||a.length<this.diffEditCost/2&&Number(s)+Number(u)+Number(c)+Number(f)===3)&&(t.splice(r[i-1],0,[_e.DIFF_DELETE,a]),t[r[i-1]+1][0]=_e.DIFF_INSERT,i--,a=null,s&&u?(c=f=!0,i=0):(i--,o=i>0?r[i-1]:-1,c=f=!1),n=!0)),o++;n&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([_e.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",o="",s;n<t.length;)switch(t[n][0]){case _e.DIFF_INSERT:i++,o+=t[n][1],n++;break;case _e.DIFF_DELETE:r++,a+=t[n][1],n++;break;case _e.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(s=this.diff_commonPrefix(o,a),s!==0&&(n-r-i>0&&t[n-r-i-1][0]===_e.DIFF_EQUAL?t[n-r-i-1][1]+=o.substring(0,s):(t.splice(0,0,[_e.DIFF_EQUAL,o.substring(0,s)]),n++),o=o.substring(s),a=a.substring(s)),s=this.diff_commonSuffix(o,a),s!==0&&(t[n][1]=o.substring(o.length-s)+t[n][1],o=o.substring(0,o.length-s),a=a.substring(0,a.length-s))),n-=r+i,t.splice(n,r+i),a.length&&(t.splice(n,0,[_e.DIFF_DELETE,a]),n++),o.length&&(t.splice(n,0,[_e.DIFF_INSERT,o]),n++),n++):n!==0&&t[n-1][0]===_e.DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,a="",o="";break}t[t.length-1][1]===""&&t.pop();var u=!1;for(n=1;n<t.length-1;)t[n-1][0]===_e.DIFF_EQUAL&&t[n+1][0]===_e.DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)===t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,n){var r=0,i=0,a=0,o=0,s;for(s=0;s<t.length&&(t[s][0]!==_e.DIFF_INSERT&&(r+=t[s][1].length),t[s][0]!==_e.DIFF_DELETE&&(i+=t[s][1].length),!(r>n));s++)a=r,o=i;return t.length!==s&&t[s][0]===_e.DIFF_DELETE?o:o+(n-a)},e.prototype.diff_prettyHtml=function(t){for(var n=[],r=/&/g,i=/</g,a=/>/g,o=/\n/g,s=0;s<t.length;s++){var u=t[s][0],c=t[s][1],f=c.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(o,"&para;<br>");switch(u){case _e.DIFF_INSERT:n[s]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case _e.DIFF_DELETE:n[s]='<del style="background:#ffe6e6;">'+f+"</del>";break;case _e.DIFF_EQUAL:n[s]="<span>"+f+"</span>";break}}return n.join("")},e.prototype.diff_text1=function(t){for(var n=[],r=0;r<t.length;r++)t[r][0]!==_e.DIFF_INSERT&&(n[r]=t[r][1]);return n.join("")},e.prototype.diff_text2=function(t){for(var n=[],r=0;r<t.length;r++)t[r][0]!==_e.DIFF_DELETE&&(n[r]=t[r][1]);return n.join("")},e.prototype.diff_levenshtein=function(t){for(var n=0,r=0,i=0,a=0;a<t.length;a++){var o=t[a][0],s=t[a][1];switch(o){case _e.DIFF_INSERT:r+=s.length;break;case _e.DIFF_DELETE:i+=s.length;break;case _e.DIFF_EQUAL:n+=dn.max(r,i),r=0,i=0;break}}return n+=dn.max(r,i),n},e.prototype.diff_toDelta=function(t){for(var n=[],r=0;r<t.length;r++)switch(t[r][0]){case _e.DIFF_INSERT:n[r]="+"+encodeURI(t[r][1]);break;case _e.DIFF_DELETE:n[r]="-"+t[r][1].length;break;case _e.DIFF_EQUAL:n[r]="="+t[r][1].length;break}return n.join("	").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,n){for(var r=[],i=0,a=0,o=n.split(/\t/g),s=0;s<o.length;s++){var u=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{r[i++]=[_e.DIFF_INSERT,decodeURI(u)]}catch(v){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var c=parseInt(u,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=t.substring(a,a+=c);o[s].charAt(0)==="="?r[i++]=[_e.DIFF_EQUAL,f]:r[i++]=[_e.DIFF_DELETE,f];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(a!==t.length)throw new Error("Delta length ("+a+") does not equal source text length ("+t.length+")");return r},e.prototype.diff_linesToChars=function(t,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(t,r,i,4e4),o=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:o,lineArray:r}},e.prototype.diff_charsToLines=function(t,n){for(var r=0;r<t.length;r++){for(var i=t[r][1],a=[],o=0;o<i.length;o++)a[o]=n[i.charCodeAt(o)];t[r][1]=a.join("")}},e.prototype.match_main=function(t,n,r){if(t==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=dn.max(0,dn.min(r,t.length)),t===n?0:t.length?t.substring(r,r+n.length)===n?r:this.match_bitap_(t,n,r):-1},e.prototype.patch_make=function(t,n,r){var i,a;if(typeof t=="string"&&typeof n=="string"&&typeof r=="undefined")i=t,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&typeof t=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=t,i=this.diff_text1(a);else if(typeof t=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=t,a=n;else if(typeof t=="string"&&typeof n=="string"&&r&&typeof r=="object")i=t,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var o=[],s=new Hr,u=0,c=0,f=0,v=i,p=i,w=0;w<a.length;w++){var I=a[w][0],R=a[w][1];switch(!u&&I!==_e.DIFF_EQUAL&&(s.start1=c,s.start2=f),I){case _e.DIFF_INSERT:s.diffs[u++]=a[w],s.length2+=R.length,p=p.substring(0,f)+R+p.substring(f);break;case _e.DIFF_DELETE:s.length1+=R.length,s.diffs[u++]=a[w],p=p.substring(0,f)+p.substring(f+R.length);break;case _e.DIFF_EQUAL:R.length<=2*this.patchMargin&&u&&a.length!==w+1?(s.diffs[u++]=a[w],s.length1+=R.length,s.length2+=R.length):R.length>=2*this.patchMargin&&u&&(this.patch_addContext_(s,v),o.push(s),s=new Hr,u=0,v=p,c=f);break}I!==_e.DIFF_INSERT&&(c+=R.length),I!==_e.DIFF_DELETE&&(f+=R.length)}return u&&(this.patch_addContext_(s,v),o.push(s)),o},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){for(var i=t[r],a=new Hr,o=0;o<i.diffs.length;o++)a.diffs[o]=[i.diffs[o][0],i.diffs[o][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},e.prototype.patch_apply=function(t,n){if(t.length===0)return[n,[]];t=this.patch_deepCopy(t);var r=this.patch_addPadding(t);n=r+n+r,this.patch_splitMax(t);for(var i=0,a=[],o=0;o<t.length;o++){var s=t[o].start2+i,u=this.diff_text1(t[o].diffs),c=void 0,f=-1;if(u.length>this.matchMaxBits?(c=this.match_main(n,u.substring(0,this.matchMaxBits),s),c!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),s+u.length-this.matchMaxBits),(f===-1||c>=f)&&(c=-1))):c=this.match_main(n,u,s),c===-1)a[o]=!1,i-=t[o].length2-t[o].length1;else{a[o]=!0,i=c-s;var v=void 0;if(f===-1?v=n.substring(c,c+u.length):v=n.substring(c,f+this.matchMaxBits),u===v)n=n.substring(0,c)+this.diff_text2(t[o].diffs)+n.substring(c+u.length);else{var p=this.diff_main(u,v,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[o]=!1;else{this.diff_cleanupSemanticLossless(p);for(var w=0,I=0,R=0;R<t[o].diffs.length;R++){var A=t[o].diffs[R];A[0]!==_e.DIFF_EQUAL&&(I=this.diff_xIndex(p,w)),A[0]===_e.DIFF_INSERT?n=n.substring(0,c+I)+A[1]+n.substring(c+I):A[0]===_e.DIFF_DELETE&&(n=n.substring(0,c+I)+n.substring(c+this.diff_xIndex(p,w+A[1].length))),A[0]!==_e.DIFF_DELETE&&(w+=A[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},e.prototype.patch_addPadding=function(t){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=n,t[i].start2+=n;var a=t[0],o=a.diffs;if(o.length===0||o[0][0]!==_e.DIFF_EQUAL)o.unshift([_e.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>o[0][1].length){var s=n-o[0][1].length;o[0][1]=r.substring(o[0][1].length)+o[0][1],a.start1-=s,a.start2-=s,a.length1+=s,a.length2+=s}if(a=t[t.length-1],o=a.diffs,o.length===0||o[o.length-1][0]!==_e.DIFF_EQUAL)o.push([_e.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>o[o.length-1][1].length){var s=n-o[o.length-1][1].length;o[o.length-1][1]+=r.substring(0,s),a.length1+=s,a.length2+=s}return r},e.prototype.patch_splitMax=function(t){for(var n=this.matchMaxBits,r=0;r<t.length;r++)if(!(t[r].length1<=n)){var i=t[r];t.splice(r--,1);for(var a=i.start1,o=i.start2,s="";i.diffs.length!==0;){var u=new Hr,c=!0;for(u.start1=a-s.length,u.start2=o-s.length,s!==""&&(u.length1=u.length2=s.length,u.diffs.push([_e.DIFF_EQUAL,s]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],v=i.diffs[0][1];f===_e.DIFF_INSERT?(u.length2+=v.length,o+=v.length,u.diffs.push(i.diffs.shift()),c=!1):f===_e.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===_e.DIFF_EQUAL&&v.length>2*n?(u.length1+=v.length,a+=v.length,c=!1,u.diffs.push([f,v]),i.diffs.shift()):(v=v.substring(0,n-u.length1-this.patchMargin),u.length1+=v.length,a+=v.length,f===_e.DIFF_EQUAL?(u.length2+=v.length,o+=v.length):c=!1,u.diffs.push([f,v]),v===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(v.length))}s=this.diff_text2(u.diffs),s=s.substring(s.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===_e.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([_e.DIFF_EQUAL,p])),c||t.splice(++r,0,u)}}},e.prototype.patch_toText=function(t){for(var n=[],r=0;r<t.length;r++)n[r]=t[r];return n.join("")},e.prototype.patch_fromText=function(t){var n=[];if(!t)return n;for(var r=t.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var o=r[i].match(a);if(!o)throw new Error("Invalid patch string: "+r[i]);var s=new Hr;n.push(s),s.start1=parseInt(o[1],10),o[2]===""?(s.start1--,s.length1=1):o[2]==="0"?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),o[4]===""?(s.start2--,s.length2=1):o[4]==="0"?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;for(var u=void 0,c=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{c=decodeURI(f)}catch(v){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")s.diffs.push([_e.DIFF_DELETE,c]);else if(u==="+")s.diffs.push([_e.DIFF_INSERT,c]);else if(u===" ")s.diffs.push([_e.DIFF_EQUAL,c]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+c)}i++}}return n},e.prototype.diff_compute_=function(t,n,r,i){var a;if(!t)return[[_e.DIFF_INSERT,n]];if(!n)return[[_e.DIFF_DELETE,t]];var o=t.length>n.length?t:n,s=t.length>n.length?n:t,u=o.indexOf(s);if(u!==-1)return a=[[_e.DIFF_INSERT,o.substring(0,u)],[_e.DIFF_EQUAL,s],[_e.DIFF_INSERT,o.substring(u+s.length)]],t.length>n.length&&(a[0][0]=_e.DIFF_DELETE,a[2][0]=_e.DIFF_DELETE),a;if(s.length===1)return[[_e.DIFF_DELETE,t],[_e.DIFF_INSERT,n]];var c=this.diff_halfMatch_(t,n);if(c){var f=c[0],v=c[1],p=c[2],w=c[3],I=c[4],R=this.diff_main(f,p,r,i),A=this.diff_main(v,w,r,i);return R.concat([[_e.DIFF_EQUAL,I]],A)}return r&&t.length>100&&n.length>100?this.diff_lineMode_(t,n,i):this.diff_bisect_(t,n,i)},e.prototype.diff_lineMode_=function(t,n,r){var i=this.diff_linesToChars(t,n);t=i.chars1,n=i.chars2;var a=i.lineArray,o=this.diff_main(t,n,!1,r);this.diff_charsToLines(o,a),this.diff_cleanupSemantic(o),o.push([_e.DIFF_EQUAL,""]);for(var s=0,u=0,c=0,f="",v="";s<o.length;){switch(o[s][0]){case _e.DIFF_INSERT:c++,v+=o[s][1];break;case _e.DIFF_DELETE:u++,f+=o[s][1];break;case _e.DIFF_EQUAL:if(u>=1&&c>=1){o.splice(s-u-c,u+c),s=s-u-c;for(var p=this.diff_main(f,v,!1,r),w=p.length-1;w>=0;w--)o.splice(s,0,p[w]);s=s+p.length}c=0,u=0,f="",v="";break}s++}return o.pop(),o},e.prototype.diff_bisect_=function(t,n,r){for(var i=t.length,a=n.length,o=Math.ceil((i+a)/2),s=o,u=2*o,c=new Array(u),f=new Array(u),v=0;v<u;v++)c[v]=-1,f[v]=-1;c[s+1]=0,f[s+1]=0;for(var p=i-a,w=p%2!=0,I=0,R=0,A=0,D=0,O=0;O<o&&!(Date.now()>r);O++){for(var G=-O+I;G<=O-R;G+=2){var W=s+G,re=void 0;G===-O||G!==O&&c[W-1]<c[W+1]?re=c[W+1]:re=c[W-1]+1;for(var we=re-G;re<i&&we<a&&t.charAt(re)===n.charAt(we);)re++,we++;if(c[W]=re,re>i)R+=2;else if(we>a)I+=2;else if(w){var he=s+p-G;if(he>=0&&he<u&&f[he]!==-1){var fe=i-f[he];if(re>=fe)return this.diff_bisectSplit_(t,n,re,we,r)}}}for(var Ee=-O+A;Ee<=O-D;Ee+=2){var he=s+Ee,fe=void 0;Ee===-O||Ee!==O&&f[he-1]<f[he+1]?fe=f[he+1]:fe=f[he-1]+1;for(var ue=fe-Ee;fe<i&&ue<a&&t.charAt(i-fe-1)===n.charAt(a-ue-1);)fe++,ue++;if(f[he]=fe,fe>i)D+=2;else if(ue>a)A+=2;else if(!w){var W=s+p-Ee;if(W>=0&&W<u&&c[W]!==-1){var re=c[W],we=s+re-W;if(fe=i-fe,re>=fe)return this.diff_bisectSplit_(t,n,re,we,r)}}}}return[[_e.DIFF_DELETE,t],[_e.DIFF_INSERT,n]]},e.prototype.diff_bisectSplit_=function(t,n,r,i,a){var o=t.substring(0,r),s=n.substring(0,i),u=t.substring(r),c=n.substring(i),f=this.diff_main(o,s,!1,a),v=this.diff_main(u,c,!1,a);return f.concat(v)},e.prototype.diff_linesToCharsMunge_=function(t,n,r,i){for(var a="",o=0,s=-1,u=n.length;s<t.length-1;){s=t.indexOf(`
`,o),s===-1&&(s=t.length-1);var c=t.substring(o,s+1);(r.hasOwnProperty?r.hasOwnProperty(c):r[c]!==void 0)?a+=String.fromCharCode(r[c]):(u===i&&(c=t.substring(o),s=t.length),a+=String.fromCharCode(u),r[c]=u,n[u++]=c),o=s+1}return a},e.prototype.diff_commonOverlap_=function(t,n){var r=t.length,i=n.length;if(r===0||i===0)return 0;r>i?t=t.substring(r-i):r<i&&(n=n.substring(0,r));var a=dn.min(r,i);if(t===n)return a;for(var o=0,s=1;;){var u=t.substring(a-s),c=n.indexOf(u);if(c===-1)return o;s+=c,(c===0||t.substring(a-s)===n.substring(0,s))&&(o=s,s++)}},e.prototype.diff_halfMatch_=function(t,n){if(this.diffTimeout<=0)return null;var r=t.length>n.length?t:n,i=t.length>n.length?n:t;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),o=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),s;if(!a&&!o)return null;o?a?s=a[4].length>o[4].length?a:o:s=o:s=a;var u,c,f,v,p=s[4];return t.length>n.length?(u=s[0],c=s[1],f=s[2],v=s[3]):(f=s[0],v=s[1],u=s[2],c=s[3]),[u,c,f,v,p]},e.prototype.diff_halfMatchI_=function(t,n,r){for(var i=t.substring(r,r+Math.floor(t.length/4)),a="",o,s,u,c,f=n.indexOf(i,0);f!==-1;){var v=this.diff_commonPrefix(t.substring(r),n.substring(f)),p=this.diff_commonSuffix(t.substring(0,r),n.substring(0,f));a.length<p+v&&(a=n.substring(f-p,f)+n.substring(f,f+v),o=t.substring(0,r-p),s=t.substring(r+v),u=n.substring(0,f-p),c=n.substring(f+v)),f=n.indexOf(i,f+1)}return a.length*2>=t.length?[o,s,u,c,a]:null},e.prototype.diff_cleanupSemanticScore_=function(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),a=r.match(Ba),o=i.match(Ba),s=a&&r.match($a),u=o&&i.match($a),c=s&&r.match(ts),f=u&&i.match(ts),v=c&&t.match(jl),p=f&&n.match(Vl);return v||p?5:c||f?4:a&&!s&&u?3:s||u?2:a||o?1:0},e.prototype.match_bitap_=function(t,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,o=t.indexOf(n,r);o!==-1&&(a=dn.min(this.match_bitapScore_(0,o,n,r),a),o=t.lastIndexOf(n,r+n.length),o!==-1&&(a=dn.min(this.match_bitapScore_(0,o,n,r),a)));var s=1<<n.length-1;o=-1;for(var u,c,f=n.length+t.length,v,p=0;p<n.length;p++){for(u=0,c=f;u<c;)this.match_bitapScore_(p,r+c,n,r)<=a?u=c:f=c,c=Math.floor((f-u)/2+u);f=c;var w=dn.max(1,r-c+1),I=dn.min(r+c,t.length)+n.length,R=Array(I+2);R[I+1]=(1<<p)-1;for(var A=I;A>=w;A--){var D=i[t.charAt(A-1)];if(p===0?R[A]=(R[A+1]<<1|1)&D:R[A]=(R[A+1]<<1|1)&D|((v[A+1]|v[A])<<1|1)|v[A+1],R[A]&s){var O=this.match_bitapScore_(p,A-1,n,r);if(O<=a)if(a=O,o=A-1,o>r)w=dn.max(1,2*r-o);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;v=R}return o},e.prototype.match_bitapScore_=function(t,n,r,i){var a=t/r.length,o=Math.abs(i-n);return this.matchDistance?a+o/this.matchDistance:o?1:a},e.prototype.match_alphabet_=function(t){for(var n={},r=0;r<t.length;r++)n[t.charAt(r)]=0;for(var r=0;r<t.length;r++)n[t.charAt(r)]|=1<<t.length-r-1;return n},e.prototype.patch_addContext_=function(t,n){if(n.length!==0){if(t.start2==null)throw Error("patch not initialized");for(var r=n.substring(t.start2,t.start2+t.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(t.start2-i,t.start2+t.length1+i);i+=this.patchMargin;var a=n.substring(t.start2-i,t.start2);a&&t.diffs.unshift([_e.DIFF_EQUAL,a]);var o=n.substring(t.start2+t.length1,t.start2+t.length1+i);o&&t.diffs.push([_e.DIFF_EQUAL,o]),t.start1-=a.length,t.start2-=a.length,t.length1+=a.length+o.length,t.length2+=a.length+o.length}},e}();function rr(e,t){let n={};for(let a=0;a<t.length;a++){const o=t[a];n[o]?n[o].push(a):n[o]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<e.length;a++){const o=e[a],s=n[o]||[];let u=0,c=i[0];for(let f=0;f<s.length;f++){const v=s[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<v&&(p===i.length-1||i[p+1].buffer2index>v));p++);if(p<i.length){const w={buffer1index:a,buffer2index:v,chain:i[p]};if(u===i.length?i.push(c):i[u]=c,u=p+1,c=w,u===i.length)break}}i[u]=c}return i[i.length-1]}l(rr,"LCS");function Kl(e,t){const n=rr(e,t);let r=[],i=e.length,a=t.length,o={common:[]};function s(){o.common.length&&(o.common.reverse(),r.push(o),o={common:[]})}l(s,"processCommon");for(let u=n;u!==null;u=u.chain){let c={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)c.buffer1.push(e[i]);for(;--a>u.buffer2index;)c.buffer2.push(t[a]);(c.buffer1.length||c.buffer2.length)&&(s(),c.buffer1.reverse(),c.buffer2.reverse(),r.push(c)),i>=0&&o.common.push(e[i])}return s(),r.reverse(),r}l(Kl,"diffComm");function rs(e,t){const n=rr(e,t);let r=[],i=e.length,a=t.length;for(let o=n;o!==null;o=o.chain){const s=i-o.buffer1index-1,u=a-o.buffer2index-1;i=o.buffer1index,a=o.buffer2index,(s||u)&&r.push({buffer1:[i+1,s],buffer1Content:e.slice(i+1,i+1+s),buffer2:[a+1,u],buffer2Content:t.slice(a+1,a+1+u)})}return r.reverse(),r}l(rs,"diffIndices");function _r(e,t){const n=rr(e,t);let r=[],i=e.length,a=t.length;function o(s,u,c){let f=[];for(let v=0;v<c;v++)f.push(s[u+v]);return{offset:u,length:c,chunk:f}}l(o,"chunkDescription");for(let s=n;s!==null;s=s.chain){const u=i-s.buffer1index-1,c=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(u||c)&&r.push({buffer1:o(e,s.buffer1index+1,u),buffer2:o(t,s.buffer2index+1,c)})}return r.reverse(),r}l(_r,"diffPatch");function Zl(e,t,n){let r=[];function i(u,c){r.push({ab:c,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}l(i,"addHunk"),rs(t,e).forEach(u=>i(u,"a")),rs(t,n).forEach(u=>i(u,"b")),r.sort((u,c)=>u.oStart-c.oStart);let a=[],o=0;function s(u){u>o&&(a.push({stable:!0,buffer:"o",bufferStart:o,bufferLength:u-o,bufferContent:t.slice(o,u)}),o=u)}for(l(s,"advanceTo");r.length;){let u=r.shift(),c=u.oStart,f=u.oStart+u.oLength,v=[u];for(s(c);r.length;){const p=r[0],w=p.oStart;if(w>f)break;f=Math.max(f,w+p.oLength),v.push(r.shift())}if(v.length===1){if(u.abLength>0){const p=u.ab==="a"?e:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[e.length,-1,t.length,-1],b:[n.length,-1,t.length,-1]};for(;v.length;){u=v.shift();const O=u.oStart,G=O+u.oLength,W=u.abStart,re=W+u.abLength;let we=p[u.ab];we[0]=Math.min(W,we[0]),we[1]=Math.max(re,we[1]),we[2]=Math.min(O,we[2]),we[3]=Math.max(G,we[3])}const w=p.a[0]+(c-p.a[2]),I=p.a[1]+(f-p.a[3]),R=p.b[0]+(c-p.b[2]),A=p.b[1]+(f-p.b[3]);let D={stable:!1,aStart:w,aLength:I-w,aContent:e.slice(w,I),oStart:c,oLength:f-c,oContent:t.slice(c,f),bStart:R,bLength:A-R,bContent:n.slice(R,A)};a.push(D)}o=f}return s(t.length),a}l(Zl,"diff3MergeRegions");function Pa(e,t,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof e=="string",o=typeof t=="string",s=typeof n=="string";a&&(e=e.split(r.stringSeparator)),o&&(t=t.split(r.stringSeparator)),s&&(n=n.split(r.stringSeparator));let u=[];const c=Zl(e,t,n);let f=[];function v(){f.length&&u.push({ok:f}),f=[]}l(v,"flushOk");function p(w,I){if(w.length!==I.length)return!1;for(let R=0;R<w.length;R++)if(w[R]!==I[R])return!1;return!0}return l(p,"isFalseConflict"),c.forEach(w=>{w.stable?f.push(...w.bufferContent):r.excludeFalseConflicts&&p(w.aContent,w.bContent)?f.push(...w.aContent):(v(),u.push({conflict:{a:w.aContent,aIndex:w.aStart,o:w.oContent,oIndex:w.oStart,b:w.bContent,bIndex:w.bStart}}))}),v(),u}l(Pa,"diff3Merge");function Jf(e,t,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Pa(e,t,n,r);let o=!1,s=[];return a.forEach(u=>{u.ok?s=s.concat(u.ok):u.conflict&&(o=!0,s.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),s=s.concat(u.conflict.a),s.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),s=s.concat(u.conflict.o),s.push("======="),s=s.concat(u.conflict.b),s.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:o,result:s}}l(Jf,"mergeDiff3");function Ql(e,t,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Pa(e,t,n,r);let o=!1,s=[];for(let u=0;u<a.length;u++){const c=a[u];c.ok?s=s.concat(c.ok):(o=!0,s=s.concat([`
<<<<<<<<<
`],c.conflict.a,[`
=========
`],c.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:o,result:s}}l(Ql,"node_diff3_merge");function ed(e,t,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Pa(e,t,n,r);let o=!1,s=[];for(let u=0;u<a.length;u++){const c=a[u];if(c.ok)s=s.concat(c.ok);else{const f=Kl(c.conflict.a,c.conflict.b);for(let v=0;v<f.length;v++){let p=f[v];p.common?s=s.concat(p.common):(o=!0,s=s.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:o,result:s}}l(ed,"mergeDigIn");function zr(e,t){let n=[],r=0;function i(a){for(;r<a;)n.push(e[r]),r++}l(i,"advanceTo");for(let a=0;a<t.length;a++){let o=t[a];i(o.buffer1.offset);for(let s=0;s<o.buffer2.chunk.length;s++)n.push(o.buffer2.chunk[s]);r+=o.buffer1.length}return i(e.length),n}l(zr,"patch");function Xl(e){return e.map(t=>({buffer1:{offset:t.buffer1.offset,length:t.buffer1.length},buffer2:{chunk:t.buffer2.chunk}}))}l(Xl,"stripPatch");function td(e){return e.map(t=>({buffer1:t.buffer2,buffer2:t.buffer1}))}l(td,"invertPatch");const qr=new zi;qr.diffTimeout=0;function Ma(e,t,n){return Je.get("experimental.useDiffMatchPatch")===!0?qr.patch_toText(qr.patch_make(t,n)):Ul(e,t,n)}l(Ma,"diffs_createPatch");function qi(e,t,n){return Vo(e,t,n)}l(qi,"diffs_applyPatch");function Yl(e,t){const n=[];for(const r of Fn(e,t))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}l(Yl,"reversePatch");function Oa(e,t,n,r,i){let a=`
`;const o=e.match(/(?:\r?\n)/g);if(o!==null&&o.length!==0){const f=o.filter(v=>v===`\r
`).length;a=f>o.length-f?`\r
`:`
`}const s=Ql(e,t,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),u=s.result;let c=s.conflict;if(r){let f=!1;if(s.conflict){let v;const p=[];let w=0;for(const A of u)A===`
<<<<<<<<<
`?v={start:w,separator:w,end:w}:A===`
=========
`?v.separator=w:A===`
>>>>>>>>>
`&&(v.end=w,p.push(v)),w++;let I=0,R=0;for(const A of p)u.splice(A.start-I,1),I++,R=A.end-A.separator+1,u.splice(A.separator-I,R),I+=R;p.length&&(f=!0)}}else for(let f=0;f<u.length;f+=1)u[f]===`
<<<<<<<<<
`?u[f]="<<<<<<< HEAD":u[f]===`
=========
`?u[f]="=======":u[f]===`
>>>>>>>>>
`&&(u[f]=`>>>>>>> ${i}`);return{conflicts:c,mergedContent:u.join(a)}}l(Oa,"diffs_merge");function is(e){return e!==void 0&&typeof e.then=="function"}l(is,"isPromise");const as="";function hi(...e){if(e.length===1){const t=e[0];return t===void 0?as:typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"||t instanceof Error?String(t):t instanceof m.Uri?t.toString():JSON.stringify(t)}return JSON.stringify(e)}l(hi,"defaultResolver");function yn(e){return(t,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...o){const s=o.length===0?a:`${a}$${(e!=null?e:hi)(...o)}`;Object.prototype.hasOwnProperty.call(this,s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[s];if(u===void 0){let c;try{if(c=i.apply(this,o),c==null||!is(c))return c;this[s]=u=c.then(f=>(this[s]=void 0,f)).catch(f=>{throw this[s]=void 0,f})}catch(f){throw this[s]=void 0,f}}return u}}}l(yn,"gate");function pi(e){const t=performance.now()*.001;let n=Math.floor(t),r=Math.floor(t%1*1e9);return e!==void 0&&(n=n-e[0],r=r-e[1],r<0&&(n--,r+=1e9)),[n,r]}l(pi,"hrtime");let Ua=0;function Jl(){return Ua===Number.MAX_SAFE_INTEGER&&(Ua=0),++Ua}l(Jl,"getNextInstanceId");const N=l(class{constructor(e,t,...n){this.context=e,this.instance=`[${Jl().toString().padStart(5)}] `;var r,i,a,o,s,u;let c;if(typeof(t==null?void 0:t.log)=="boolean"?c=t.log?{}:void 0:c=(r=t==null?void 0:t.log)!=null?r:{},this.logLevel=(i=t==null?void 0:t.logLevel)!=null?i:Xe.Info,this.time=pi(),c){if(!Y.enabled(this.logLevel))return;n.length?ve(this.logLevel,`${this.instance}${(a=c.prefix)!=null?a:""}${e}${(o=c.message)!=null?o:""}`,...n):ve(this.logLevel,`${this.instance}${(s=c.prefix)!=null?s:""}${e}${(u=c.message)!=null?u:""}`)}}log(e){this.logCore(this.context,e,!1)}logStep(e,t){(!e||t)&&this.logCore(this.context,t,!1),this.step=e?{time:pi(),label:e}:void 0}restart(e){this.logCore(this.context,e,!0),this.step=void 0,this.time=pi()}stop(e){this.restart(e)}logCore(e,t,n){var r,i,a,o,s,u,c;if(!Y.enabled(this.logLevel))return;let f="";if(this.step){const[I,R]=pi(this.step.time),A=I*1e3+Math.floor(R/1e6);f=`${this.step.label?`${this.step.label} took `:""}${A} ms`}if(!n){ve(this.logLevel,`${this.instance}${(r=t==null?void 0:t.prefix)!=null?r:""}${e}${(i=t==null?void 0:t.message)!=null?i:""}${f?` ${f}`:""}${(a=t==null?void 0:t.suffix)!=null?a:""}`);return}const[v,p]=pi(this.time),w=v*1e3+Math.floor(p/1e6);ve(w>500?Xe.Warn:this.logLevel,`${this.instance}${(o=t==null?void 0:t.prefix)!=null?o:""}${e}${(s=t==null?void 0:t.message)!=null?s:""}${(u=t==null?void 0:t.took)!=null?u:" took "}${w} ms${f?` (${f})`:""}${(c=t==null?void 0:t.suffix)!=null?c:""}`)}static start(e,t,...n){var r;(r=N.watches.get(e))==null||r.log(),N.watches.set(e,new N(e,t,...n))}static log(e,t){var n;(n=N.watches.get(e))==null||n.log(t)}static stop(e,t){var n;(n=N.watches.get(e))==null||n.stop(t),N.watches.delete(e)}},"_Stopwatch");let M=N;M.watches=new Map;function ve(e,t,...n){switch(e){case Xe.Warn:Y.warn(t,...n);break;case Xe.Info:Y.log(t,...n);break;default:Y.debug(t,...n);break}}l(ve,"log");let Oe=0;function Ft(){return Oe===Number.MAX_SAFE_INTEGER&&(Oe=0),String(++Oe)}l(Ft,"getNextLockId");class st{constructor(){this.id=Ft()}async synchronize(t){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await t()}finally{n()}}}l(st,"Lock");class Nt{constructor(t){this.lock=new st,this.readers=new Set,this.counter=0,this._id=t!=null?t:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(t,n){let r;const i=new M(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Xe.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(o=>r=o),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await t()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(t,n){let r;const i=new M(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Xe.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await t()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}l(Nt,"ReaderWriterLock");class Vt{constructor(){this.locks=new Map}async synchronizeRead(t,n,r){let i=this.locks.get(t);return i===void 0&&(i=new Nt(String(t)),this.locks.set(t,i)),i.synchronizeRead(n,r)}async synchronizeWrite(t,n,r){let i=this.locks.get(t);return i===void 0&&(i=new Nt(String(t)),this.locks.set(t,i)),i.synchronizeWrite(n,r)}}l(Vt,"KeyedReaderWriterLock");const Jt=new TextDecoder,Ot=new TextEncoder;async function en(e){const t=typeof e=="string"?Ot.encode(e):e;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},t);else{const r=new jn;r.update(t),n=r.digest()}return globalThis.btoa(encodeURIComponent(Jt.decode(n)))}l(en,"sha1");var In;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE"})(In||(In={}));function Gt(e,t,n=32){const r=n-t,i=~((1<<r)-1);return(e<<t|(i&e)>>>r)>>>0}l(Gt,"leftRotate");function _n(e,t=0,n=e.byteLength,r=0){for(let i=0;i<n;i++)e[t+i]=r}l(_n,"fill");const xn=l(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(e){const t=this._buff;let n=this._buffLen,r=0;const i=e.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let o=0;o<a;o++)t[n++]=e[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this._h0,!1),t.setUint32(4,this._h1,!1),t.setUint32(8,this._h2,!1),t.setUint32(12,this._h3,!1),t.setUint32(16,this._h4,!1),e}_wrapUp(){this._buff[this._buffLen++]=128,_n(this._buff,this._buffLen),this._buffLen>56&&(this._step(),_n(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=xn._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,Gt(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,o=this._h4,s,u,c;for(let f=0;f<80;f++)f<20?(s=r&i|~r&a,u=1518500249):f<40?(s=r^i^a,u=1859775393):f<60?(s=r&i|r&a|i&a,u=2400959708):(s=r^i^a,u=3395469782),c=Gt(n,5)+s+o+u+e.getUint32(f*4,!1)&4294967295,o=a,a=i,i=Gt(r,30),r=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+o&4294967295}},"_SHA1Computer");let jn=xn;jn._bigBlock32=new DataView(new ArrayBuffer(320));function Vn(e){const t=globalThis.atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}l(Vn,"fromBase64");const{fromCharCode:xr}=String;function os(e){let t;if(typeof e=="string")t=e;else{t="";for(let n=0,{length:r}=e;n<r;n++)t+=xr(e[n])}return globalThis.btoa(t)}l(os,"toBase64");function Wi(e,t){if(e===t)return-1;let n=0;for(;e[n]===t[n];)n++;return n}l(Wi,"indexOfDifference");var ji=Object.defineProperty,K0=Object.getOwnPropertyDescriptor,Z0=l((e,t,n,r)=>{for(var i=r>1?void 0:r?K0(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ji(t,n,i),i},"__decorateClass");const Kt=_.loadMessageBundle(),Q0=m.FileSystemError.FileNotFound().code,nd=`===================================================================
`,ir=new TextDecoder,X0=new TextEncoder;function Y0(e){return e&&"type"in e&&"uri"in e&&"uri"in e&&"fileType"in e&&"revision"in e&&"timestamp"in e}l(Y0,"isOperation");function Ha(e,t,n){return{type:e.type,rootUri:t,uri:n!=null?n:e.uri}}l(Ha,"toEvent");const za=l(class{constructor(e,t,n,r,i,a){this.providerService=e,this.storageService=t,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new m.EventEmitter,this.cache=new Map,this.lock=new Vt,this.scopedStores=new Map,a===void 0&&(this.disposable=m.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.disposable)==null||e.dispose()}async exportDebugInfo(e){var t;async function n(r){const i=await m.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void m.window.showTextDocument(i)}if(l(n,"exportCore"),e===void 0)for(const r of(t=m.workspace.workspaceFolders)!=null?t:[])await n.call(this,r.uri);else return n.call(this,e)}async getWorkspacesWithChanges(){var e;const t=new M("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(e=m.workspace.workspaceFolders)!=null?e:[])r.uri.scheme===J.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{t.stop()}}async acceptAll(e,t){const n=`ChangeStore.acceptAll(${e.toString()}, ${t==null?void 0:t.staged})`;Y.log(n);const r=[];await this.lock.synchronizeWrite(k(e),async()=>{const i=await this.getWorkingOperations(e),a=[];let o=[];const s=(t==null?void 0:t.staged)&&!(t.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(s&&!u.staged){o.push(u);continue}u.fileType===m.FileType.File&&await this.discardWorkingContent(e,u.uri);let c;if(u.type===H.Created&&u.fileType===m.FileType.Directory&&(i.some(f=>X(f.uri,u.uri))||(c={type:H.Deleted,rootUri:e,uri:u.uri})),r.push(c!=null?c:Ha(u,e)),u.type===H.Created){let f=u.uri;for(;;){const{parent:v}=this.findParent(f,i,p=>p.type===H.Created);if(v){a.push(v),f=v.uri;continue}break}}}o.length>0&&a.length>0&&(o=o.filter(u=>a.includes(u)?(r.push(Ha(u,e)),!1):!0)),await this.saveWorkingOperations(e,o)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=`ChangeStore.discard(${e.toString()})`;Y.log(n);const r=[];await this.lock.synchronizeWrite(k(t),async()=>this.discardCore(t,e,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(e,t,n){Y.debug(`ChangeStore.discardCore(${t.toString()})`);let r=await this.getWorkingOperations(e);if(r.length===0)return;const i=T(t),a=r.findIndex(u=>T(u.uri)===i);if(a===-1)return;const[o]=r.splice(a,1);let s;switch(o.type){case H.Created:s=H.Deleted;break;case H.Deleted:s=H.Created;break;default:s=o.type;break}if(n.push({type:s,rootUri:e,uri:t}),o.type===H.Created){let u=o.uri;for(;;){const{parent:c,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(c){r.splice(f,1),n.push({type:H.Deleted,rootUri:e,uri:c.uri}),u=c.uri;continue}break}}else if(o.type===H.Deleted){let u=o.uri;const c=this.findDeletedParents(u,r);let f=[...r];c.forEach(({parent:v,parentIndex:p})=>{f[p]=void 0,n.push({type:H.Created,rootUri:e,uri:v.uri})}),r=f.filter(v=>v!==void 0)}await this.saveWorkingOperations(e,r),o.fileType===m.FileType.File&&await this.discardWorkingContent(e,t)}async discardAll(e,t){const n=this.getUriScope(e);if(n)return this.getScopedChangeStore(n).discardAll(e,t);const r=`ChangeStore.discardAll(${e.toString()}, ${t==null?void 0:t.staged})`;Y.log(r);const i=[];await this.lock.synchronizeWrite(k(e),async()=>{const a=await this.getWorkingOperations(e),o=[];let s=[];const u=(t==null?void 0:t.staged)&&!(t.staged==="auto"&&!a.some(c=>c.staged));for(const c of a){if(u&&!c.staged){s.push(c);continue}c.fileType===m.FileType.File&&await this.discardWorkingContent(e,c.uri);let f;switch(c.type){case H.Created:f=H.Deleted;break;case H.Deleted:f=H.Created;break;default:f=c.type;break}if(i.push({type:f,rootUri:e,uri:c.uri}),c.type===H.Created){let v=c.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(v,a);if(p){o.push(p),v=p.uri;continue}break}}}s.length>0&&o.length>0&&(s=s.filter(c=>o.includes(c)?(i.push({type:H.Deleted,rootUri:e,uri:c.uri}),!1):!0)),await this.saveWorkingOperations(e,s)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=`ChangeStore.stage(${e.toString()})`;Y.log(n);const r=[];await this.lock.synchronizeWrite(k(t),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(e,t);if(i!==void 0){if(i.conflicts){if(!i.conflicts.status.includes(H.Deleted)){const s=Kt("yes","Yes");if(await m.window.showWarningMessage(Kt("stage with merge conflicts","Are you sure you want to stage {0} with merge conflicts?",te(e)),{modal:!0},s)!==s)return}const[,o]=i.conflicts.status;switch(o){case H.Changed:switch(i.type){case H.Created:return;case H.Changed:await this.spliceOperation(e,a,{...i,conflicts:void 0,staged:!0,timestamp:Date.now()},r);return;case H.Deleted:const s=Kt("keep theirs","Keep Their Version"),u=Kt("delete","Delete File"),c=await m.window.showInformationMessage(Kt("deleted by us",`File '{0}' was deleted by us and modified by them.

What would you like to do?`,te(e)),{modal:!0},s,u);if(c===s){await this.discardCore(t,e,r);return}else if(c===u){await this.spliceOperation(e,a,{...i,type:H.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r);return}else return}case H.Created:switch(i.type){case H.Changed:case H.Deleted:return;case H.Created:await this.spliceOperation(e,a,{...i,type:H.Changed,conflicts:void 0,size:i.size,hash:i.hash,originalHash:i.originalHash,staged:!0,timestamp:Date.now()},r);return}case H.Deleted:switch(i.type){case H.Created:case H.Changed:{const s=Kt("keep ours","Keep Our Version"),u=Kt("delete","Delete File"),c=await m.window.showInformationMessage(Kt("deleted by them",`File '{0}' was deleted by them and modified by us.

What would you like to do?`,te(e)),{modal:!0},s,u);if(c===s){await this.spliceOperation(e,a,{...i,type:H.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r);return}else if(c===u){await this.discardCore(t,e,r);return}else return}case H.Deleted:await this.discardCore(t,e,r);return}}}await this.spliceOperation(e,a,{...i,staged:!0,conflicts:void 0,timestamp:Date.now()},r)}},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(e){const t=`ChangeStore.stageAll(${e.toString()})`;Y.log(t);const n=[];await this.lock.synchronizeWrite(k(e),async()=>{const r=(await this.getWorkingOperations(e)).map(i=>({...i,staged:!0,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(e,r),n.push(...r.map(i=>Ha(i,e))))},t),n.length!==0&&this._onDidChange.fire(n)}async unstage(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=`ChangeStore.unstage(${e.toString()})`;Y.log(n);const r=[];await this.lock.synchronizeWrite(k(t),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(e,t);i!==void 0&&await this.spliceOperation(e,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(e){const t=`ChangeStore.unstageAll(${e.toString()})`;Y.log(t);const n=[];await this.lock.synchronizeWrite(k(e),async()=>{const r=(await this.getWorkingOperations(e)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(e,r),n.push(...r.map(i=>Ha(i,e))))},t),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(e){const t=this.getUriScope(e);if(t)return this.getScopedChangeStore(t).hasChanges(e);const n=k(e),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(e)).length!==0,`ChangeStore.hasChanges(${e.toString()})`)}maybeHasChanges(e,t){const n=this.getUriScope(e);if(n)return this.getScopedChangeStore(n).maybeHasChanges(e,t);const r=k(e),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(t===void 0)return!0;const a=T(t);return i.some(o=>T(o.uri)===a)}async hasMergeConflicts(e){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).some(t=>t.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${e.toString()})`)}async hasStagedChanges(e){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).some(t=>t.staged&&t.conflicts===void 0),`ChangeStore.hasStagedChanges(${e.toString()})`)}async hasWorkingChanges(e){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).some(t=>!t.staged&&t.conflicts===void 0),`ChangeStore.hasWorkingChanges(${e.toString()})`)}async getChange(e){const t=this.getUriScope(e);if(t)return this.getScopedChangeStore(t).getChange(e);const n=this.providerService.getVirtualRootUri(e);if(n!==void 0)return this.lock.synchronizeRead(k(n),async()=>{const{operation:r}=await this.getWorkingOperation(e,n);return r},`ChangeStore.getChange(${e.toString()})`)}async getChanges(e,t){const n=this.getUriScope(e);return n?this.getScopedChangeStore(n).getChanges(e,t):this.lock.synchronizeRead(k(e),async()=>{let r=await this.getWorkingOperations(e);if((t==null?void 0:t.excludeConflicts)||(t==null?void 0:t.predicate)){const{excludeConflicts:i,predicate:a}=t;r=r.filter(o=>{var s;return(!i||o.conflicts===void 0)&&((s=a==null?void 0:a(o))!=null?s:!0)})}return r},`ChangeStore.getChanges(${e.toString()})`)}async getGroupedChanges(e,t){const n=this.getUriScope(e);return n?this.getScopedChangeStore(n).getGroupedChanges(e,t):this.lock.synchronizeRead(k(e),async()=>{var r,i;const a=await this.getWorkingOperations(e),o={conflicts:[],staged:[],working:[]};for(const s of a)!((i=(r=t==null?void 0:t.predicate)==null?void 0:r.call(t,s))!=null?i:!0)||(s.conflicts?o.conflicts.push(s):s.staged?o.staged.push(s):o.working.push(s));return o},`ChangeStore.getChangesByType(${e.toString()})`)}async getContent(e){const t=this.providerService.getVirtualRootUri(e);if(t===void 0)throw new Error(`Unable to find content for ${e.toString()}; Repository not found`);const n=k(t),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${e.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=ir.decode(await this.getWorkingContent(t,e));if(i!==void 0)return i;throw new Error(`Unable to find content for ${e.toString()}`)},`ChangeStore.getContent(${e.toString()}}`)}async getMergeConflicts(e,t){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=t==null?void 0:t.predicate)==null?void 0:i.call(t,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${e.toString()})`)}async getStagedChanges(e,t){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=t==null?void 0:t.predicate)==null?void 0:i.call(t,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${e.toString()})`)}async getWorkingChanges(e,t){return this.lock.synchronizeRead(k(e),async()=>(await this.getWorkingOperations(e)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=t==null?void 0:t.predicate)==null?void 0:i.call(t,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${e.toString()})`)}async applyChangeset(e,t,n,r){var i;let a;Y0(n)?a=n:r=r!=null?r:n,Y.log(`ChangeStore.applyChangeset${e.toString()}`,t.workspaceId,t.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const o=this.getScopedChangeStore(t.workspaceId),s=(i=t.patch)!=null?i:await o.createPatch(t.uri,a==null?void 0:a.uri);await this.applyPatchCore(e,s,{...r,getIncomingContent:async u=>{const c=this.getScopedUri(this.providerService.createRelativeVirtualUri(t.uri,u),t.workspaceId);return ir.decode(await m.workspace.fs.readFile(c))},merge:async(u,c,f)=>{try{const v=J.getProviderUri(u),p=ir.decode(await m.workspace.fs.readFile(v)),w=this.getScopedUri(this.providerService.createRelativeVirtualUri(t.uri,c),t.workspaceId),I=ir.decode(await m.workspace.fs.readFile(w)),R=await this.providerService.getMetadata(w);return{...Oa(f,p,I,Boolean(r==null?void 0:r.useSimplifiedMerge),R.HEAD.sha),baseUri:v,incomingUri:w}}catch(v){throw new Error(`Unable to apply patch to ${c}: ${String(v)}`)}}})}async applyPatch(e,t,n){if(Y.log(`ChangeStore.applyPatch(${e.toString()})`,n==null?void 0:n.save),!t.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(e,t,n)}async applyPatchCore(e,t,n={}){const r=`ChangeStore.applyPatchCore(${e.toString()})`;Y.debug(r,n==null?void 0:n.save);const i=new m.WorkspaceEdit,a=[],o=new Map;async function s(p){var w;const I=k(p),R=m.workspace.textDocuments.find(A=>k(A.uri)===I);return(w=R==null?void 0:R.getText())!=null?w:ir.decode(await m.workspace.fs.readFile(p))}l(s,"getContent");async function u(p){try{const w=await m.workspace.fs.stat(p);return Boolean(w)}catch{return!1}}l(u,"exists");async function c(p,w,I){let R=qi("",I,{fuzzFactor:0});if(R===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${w}`);R=await n.getIncomingContent(w)}i.createFile(p,{overwrite:!0}),i.replace(p,new m.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),R)}l(c,"applyCreate");async function f(p,w,I,R){const A=await s(p);let D=qi(A,I,{fuzzFactor:1});if(D===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${w}; Resulted in conflicts`);const O={title:Kt("apply patch failed prompt confirm","Merge")},G={title:Kt("apply patch failed prompt cancel","Skip File"),isCloseAffordance:!0};if(await m.window.showWarningMessage(Kt("apply patch failed prompt",`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,w),{modal:!0},O,G)!==O)return;const re=await n.merge(p,w,A);D=re.mergedContent,re.conflicts&&o.set(k(p),{type:R,baseUri:re.baseUri,incomingUri:re.incomingUri})}i.replace(p,new m.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),D)}l(f,"applyModification");const v=(n==null?void 0:n.reverse)?Yl(t,{}):Fn(t,{});for(const p of v)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const w=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,I=this.providerService.createRelativeVirtualUri(e,w);a.push(k(I)),!await u(I)?await c(I,w,p):await f(I,w,p,H.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const w=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,I=this.providerService.createRelativeVirtualUri(e,w);await u(I)&&i.deleteFile(I)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const w=this.providerService.createRelativeVirtualUri(e,p.newFileName);a.push(k(w)),!await u(w)?await c(w,p.newFileName,p):await f(w,p.newFileName,p,H.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await m.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const w=m.workspace.textDocuments.find(I=>k(I.uri)===p);await(w==null?void 0:w.save())}o.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(k(e),async()=>{const w=await this.getWorkingOperations(e);if(w.length===0)return;let I=-1;for(const R of w){I++;const A=o.get(k(R.uri));A!==void 0&&await this.spliceOperation(R.uri,I,{...R,conflicts:{baseUri:A.baseUri,incomingUri:A.incomingUri,status:[R.type,A.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(e){Y.log(`ChangeStore.createChangeset${e.toString()})`);const t=await this.createPatch(e);return t?{workspaceId:this.workspaceId,uri:e,patch:t}:void 0}async createPatch(e,t,n){if(Y.log(`ChangeStore.createPatch${e.toString()})`,t),t===void 0){let a=await this.getWorkingOperations(e);if((n==null?void 0:n.staged)&&(a=a.filter(s=>s.staged)),a.length===0)return"";const o=[];for(const s of a){const u=await this.createPatchCore(e,s);o.push(u)}return o.join("")}const{operation:r}=await this.getWorkingOperation(t,e);if(r===void 0)throw new Error(`Unable to create patch for ${t.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(e,r)}async createPatchCore(e,t){const n=this.providerService.getRelativeFilePath(e,t.uri),r=`diff --git a/${n} b/${n}`;if(t.type===H.Created){let u=await this.getContent(t.uri),c;!u.endsWith(`
`)&&!u.endsWith(`\r
`)?c=`
\\ No newline at end of file`:c="";const f=/\r?\n/g,v=u.split(f),p=u.match(f)||[],w=v.length,I=[];for(let R=0;R<w;R+=1)(R<v.length-1||R===v.length-1&&v[R]!=="")&&I.push("+"),I.push(v[R]),R<p.length&&I.push(p[R]);return u=I.join(""),`${r}
new file mode 100644
--- /dev/null
+++ b/${n}
@@ -0,0 +1,${w} @@
${u}${c}`}if(t.type===H.Deleted){let u=ir.decode(await m.workspace.fs.readFile(J.getProviderUri(t.uri))),c=0;return u=u.replace(/\r?\n/g,f=>(c++,`${f}-`)),`${r}
deleted file mode 100644
--- a/${n}
+++ /dev/null
@@ -1,${c} +0,0 @@
-${u}`}const i=await this.getContent(t.uri),a=ir.decode(await m.workspace.fs.readFile(J.getProviderUri(t.uri))),o=Ma(n,a,i),s=o.indexOf(nd);return`${r}
${o.substr(s+nd.length)}`}async keep(e,t){const n=this.providerService.getVirtualWorkspaceUri(e);if(n===void 0)return;const r=`ChangeStore.keep(${e.toString()})`;Y.log(r,t);const i=[];await this.lock.synchronizeWrite(k(n),async()=>{const{operation:a,index:o}=await this.getWorkingOperation(e,n);if(a===void 0)return;if(t===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case H.Changed:switch(a.type){case H.Changed:case H.Created:case H.Deleted:await this.spliceOperation(e,o,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case H.Created:switch(a.type){case H.Changed:case H.Deleted:await this.spliceOperation(e,o,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case H.Created:await this.spliceOperation(e,o,{...a,type:H.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case H.Deleted:switch(a.type){case H.Deleted:await this.discardCore(n,e,i);break;case H.Changed:await this.spliceOperation(e,o,{...a,type:H.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case H.Created:await this.spliceOperation(e,o,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(t===void 0)return;switch(t.type){case H.Changed:switch(a.type){case H.Deleted:await this.spliceOperation(e,o,{...a,type:H.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case H.Created:break;case H.Changed:break}break;case H.Created:switch(a.type){case H.Changed:case H.Deleted:return;case H.Created:break}break;case H.Deleted:switch(a.type){case H.Deleted:return this.discardCore(n,e,i);case H.Changed:await this.spliceOperation(e,o,{...a,type:H.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case H.Created:return}}const s=t!==void 0?await m.workspace.fs.readFile(t.providerUri):void 0;await this.spliceOperation(e,o,{...a,type:H.Changed,originalHash:s!==void 0?await en(s):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(e,t,n,r){const i=this.providerService.getVirtualWorkspaceUri(e);if(i===void 0)return;const a=`ChangeStore.merge(${e.toString()})`;Y.log(a,t,n);const o=[];await this.lock.synchronizeWrite(k(i),async()=>{const{operation:s,index:u}=await this.getWorkingOperation(e,i);if(s===void 0)return;switch(t.type){case H.Changed:switch(s.type){case H.Deleted:await this.spliceOperation(e,u,{...s,type:H.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:t.providerUri,status:[s.type,t.type]},timestamp:Date.now()},o);return;case H.Created:break;case H.Changed:break}break;case H.Created:switch(s.type){case H.Deleted:case H.Changed:return;case H.Created:break}break;case H.Deleted:switch(s.type){case H.Deleted:return this.discardCore(i,e,o);case H.Changed:await this.spliceOperation(e,u,{...s,type:H.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:t.providerUri,status:[s.type,t.type]},timestamp:Date.now()},o);return;case H.Created:return}}const c=await this.providerService.getMetadata(t.providerUri),f=await this.getWorkingContent(i,e),v=s.type===H.Created?new Uint8Array(0):await m.workspace.fs.readFile(n.providerUri),p=await m.workspace.fs.readFile(t.providerUri),w=Oa(ir.decode(f),ir.decode(v),ir.decode(p),r,c.HEAD.sha);await this.writeFileCore(i,e,o,X0.encode(w.mergedContent),p!=null?p:new Uint8Array(0),w.conflicts?{baseUri:n.providerUri,incomingUri:t.providerUri,status:[s.type,t.type]}:void 0)},a),o.length!==0&&this._onDidChange.fire(o)}async resolveDiffCommand(e,t,n,r){let i;const a=this.providerService.getVirtualRootUri(e);return a!==void 0&&({operation:i}=await this.getWorkingOperation(e,a)),(i==null?void 0:i.type)===H.Deleted?this.resolveOpenCommand(t):((i==null?void 0:i.type)===H.Created&&(t=t.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[t,e,n,r]})}resolveOpenCommand(e,t){return{command:"vscode.open",title:"Open File",arguments:[e,t]}}getScopedUri(e,t){const n=typeof t=="string"?t:t.workspaceId;return n===this.workspaceId?e:e.with({fragment:n})}getUriScope(e){return e.fragment||void 0}getScopedChangeStore(e){const t=typeof e=="string"?e:e.workspaceId;Y.log(`ChangeStore.getScopedChangeStore(${t})`);let n=this.scopedStores.get(t);return n===void 0&&(n=t===this.workspaceId?new za.ScopedChangeStore(this,t,this.workspaceId):new za.ScopedChangeStore(new za(this.providerService,this.storageService.with(t),this.fileStorageService.with(t),this.telemetryService,this.workspaceId,t),t,this.workspaceId),this.scopedStores.set(t,n)),n}async stat(e){const t=this.getUriScope(e);if(t)return this.getScopedChangeStore(t).stat(e);const n=this.providerService.getVirtualRootUri(e);if(n===void 0)return;const r=k(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:o}=await this.getWorkingOperation(e,n);if(o!==void 0){if(o.type===H.Deleted)throw m.FileSystemError.FileNotFound(`The ${o.fileType===m.FileType.Directory?"folder":"file"} has been deleted.`);return{type:o.fileType,size:(a=o.size)!=null?a:0,ctime:0,mtime:o.timestamp}}},`ChangeStore.stat(${e.toString()}`)}async readFile(e){const t=this.getUriScope(e);if(t)return this.getScopedChangeStore(t).readFile(e);const n=new M(`ChangeStore.readFile(${e.toString()})`);try{const r=this.providerService.getVirtualRootUri(e);if(r===void 0)return;const i=k(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const o=this.cache.get(i);if((o==null?void 0:o.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,e)},n.context)}finally{n.stop()}}async createDirectory(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=new M(`ChangeStore.createDirectory(${e.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(k(t),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(e,t),o=await this.providerService.getMetadata(e);await this.spliceOperation(e,a,i===void 0?{type:H.Created,uri:e,fileType:m.FileType.Directory,revision:o.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=new M(`ChangeStore.deleteDirectory(${e.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(k(t),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(e,t);if((i==null?void 0:i.type)===H.Created)return this.discardCore(t,e,r);const o=await this.providerService.getMetadata(e);await this.spliceOperation(e,a,{type:H.Deleted,uri:e,fileType:m.FileType.Directory,revision:o.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(e,t){const n=this.providerService.getVirtualWorkspaceUri(e);if(n===void 0)return t;const r=new M(`ChangeStore.updateDirectoryEntries(${e.toString()})`,{},t.length);try{const i=k(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?t:await this.lock.synchronizeRead(i,async()=>{const{path:o}=q(n,e),s=await this.getWorkingOperations(n);for(const u of s)switch(u.type){case H.Changed:break;case H.Created:{if(X(u.uri,o)){const c=this.providerService.getRelativeFilePath(e,u.uri);t.push([c,u.fileType])}break}case H.Deleted:{if(X(u.uri,o)){const c=this.providerService.getRelativeFilePath(e,u.uri),f=t.findIndex(([v])=>v===c);f!==-1&&t.splice(f,1)}break}}return t},r.context)}finally{r.stop()}}async writeFile(e,t,n,r){const i=this.providerService.getVirtualWorkspaceUri(e);if(i===void 0)return;const a=new M(`ChangeStore.writeFile(${e.toString()})`,{},t.length,r);try{const o=[];if(await this.lock.synchronizeWrite(k(i),async()=>this.writeFileCore(i,e,o,t,n,r),a.context),o.length===0)return;this._onDidChange.fire(o)}finally{a.stop()}}async writeFileCore(e,t,n,r,i,a){const o=new M(`ChangeStore.writeFileCore(${t.toString()})`,{},r.length,a);try{const[{operation:s,index:u},c,f]=await Promise.all([this.getWorkingOperation(t,e),en(r),en(i)]);if(c===f&&(!s||(s==null?void 0:s.type)===H.Changed))return this.discardCore(e,t,n);if(c===(s==null?void 0:s.hash)&&f===(s==null?void 0:s.originalHash))return;const[{HEAD:v}]=await Promise.all([this.providerService.getMetadata(t),this.saveWorkingContent(e,t,r)]);await this.spliceOperation(t,u,s===void 0?{type:H.Changed,uri:t,fileType:m.FileType.File,revision:v.sha,timestamp:Date.now(),size:r.byteLength,hash:c,originalHash:f,conflicts:a,staged:!1}:{...s,revision:v.sha,timestamp:Date.now(),size:r.byteLength,hash:c,originalHash:f,conflicts:a,staged:!1},n)}finally{o.stop()}}async createFile(e,t){const n=this.providerService.getVirtualWorkspaceUri(e);if(n===void 0)return;const r=new M(`ChangeStore.createFile(${e.toString()})`,{},t.length);try{const i=[];if(await this.lock.synchronizeWrite(k(n),async()=>{const[{operation:a,index:o},s,u]=await Promise.all([this.getWorkingOperation(e,n),en(t),this.providerService.getMetadata(e),this.saveWorkingContent(n,e,t)]);await this.spliceOperation(e,o,a===void 0?{type:H.Created,uri:e,fileType:m.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:t.byteLength,hash:s,originalHash:s}:{...a,type:H.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:t.byteLength,hash:s},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(e){const t=this.providerService.getVirtualWorkspaceUri(e);if(t===void 0)return;const n=new M(`ChangeStore.deleteFile(${e.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(k(t),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(e,t);if((i==null?void 0:i.type)===H.Created)return this.discardCore(t,e,r);const[o]=await Promise.all([this.providerService.getMetadata(e),this.discardWorkingContent(t,e)]);await this.spliceOperation(e,a,{type:H.Deleted,uri:e,fileType:m.FileType.File,revision:o.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(e,t,n){const r=U(e),{operation:i,index:a}=this.findWorkingOperation(r,t);return i!==void 0&&n(i,t)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(e,t){const n=T(e);return this.findParent(e,t,(r,i)=>r.type===H.Created&&!i.some(a=>X(a.uri,r.uri)&&T(a.uri)!==n))}findDeletedParents(e,t){const n=[];for(let r=0;r<t.length;r+=1){const i=t[r];i.type===H.Deleted&&P(e,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(e,t){return this.findWorkingOperation(e,await this.getWorkingOperations(t))}findWorkingOperation(e,t){if(t.length===0)return{operation:void 0,index:-1};const n=T(e);let r=-1;const i=t.find((a,o)=>T(a.uri)!==n?!1:(r=o,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(e){const t=k(e);let n=this.cache.get(t);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(t))),this.cache.set(t,n)),n}async saveWorkingOperations(e,t){Y.debug(`ChangeStore.saveWorkingOperations(${e.toString()})`,t.length);const n=k(e);this.cache.set(n,t);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(t))}catch(r){throw this.cache.delete(n),Y.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(e){return`operations/${e}`}async getWorkingContent(e,t){try{return await this.fileStorageService.get(this.getFileStorageKey(e,t))}catch(n){throw Y.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(e,t){Y.debug(`ChangeStore.discardWorkingContent(${t.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(e,t))}catch(n){if(n instanceof m.FileSystemError&&n.code===Q0)return;throw Y.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(e,t,n){Y.debug(`ChangeStore.saveWorkingContent(${t.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(e,t),n)}catch(r){throw Y.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(e,t){return`changestore/${Z(t)}`}async spliceOperation(e,t,n,r){const i=this.providerService.getVirtualWorkspaceUri(e);if(i===void 0)return;const a=await this.getWorkingOperations(i);t!==-1?a.splice(t,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(Ha(n,i,e))}fromStorage(e){if(!e)return[];try{const t=JSON.parse(e,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&z(r)?typeof r=="string"?m.Uri.parse(r):m.Uri.from(r):r);return Array.isArray(t)?t:t.operations}catch(t){throw Y.error(t,"Failed to deserialize ChangeStore operations"),t}}toStorage(e){const t={schemaVersion:za.operationsStorageSchemaVersion,operations:e};return JSON.stringify(t)}},"_ChangeStore");let ss=za;ss.operationsStorageSchemaVersion=1,ss.ScopedChangeStore=class{constructor(e,t,n){this.changeStore=e,this.scope=t,this.workspaceId=n}createPatch(e,t,n){return this.changeStore.createPatch(this.stripUriScope(e),this.stripUriScope(t),n)}discardAll(e,t){return this.changeStore.discardAll(this.stripUriScope(e),t)}getChange(e){return this.changeStore.getChange(this.stripUriScope(e))}getChanges(e,t){return this.changeStore.getChanges(this.stripUriScope(e),t)}async getGroupedChanges(e,t){return this.changeStore.getGroupedChanges(this.stripUriScope(e),t)}hasChanges(e){return this.changeStore.hasChanges(this.stripUriScope(e))}maybeHasChanges(e,t){return this.changeStore.maybeHasChanges(this.stripUriScope(e),this.stripUriScope(t))}async stat(e){const n=this.changeStore.getUriScope(e)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(e));return r!==void 0&&n&&(r.permissions=m.FilePermission.Readonly),r}readFile(e){return this.changeStore.readFile(this.stripUriScope(e))}resolveDiffCommand(e,t,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(e,this.scope),this.changeStore.getScopedUri(t,this.scope),n,r)}stripUriScope(e){return e===void 0||!e.fragment?e:e.with({fragment:""})}},Z0([yn()],ss.prototype,"getWorkingOperations",1);function Sb(e){switch(e){case OperationType.Changed:return Kt("change type changed","Modified");case OperationType.Created:return Kt("change type created","Added");case OperationType.Deleted:return Kt("change type deleted","Deleted")}}l(Sb,"getStatusText");function Cb(e){const[t,n]=e;switch(t){case OperationType.Changed:switch(n){case OperationType.Changed:case OperationType.Created:return Kt("conflict status changed both","Modified by Both");case OperationType.Deleted:return Kt("conflict status deleted them","Deleted by Incoming")}case OperationType.Created:switch(n){case OperationType.Changed:case OperationType.Created:return Kt("conflict status created both","Added by Both");case OperationType.Deleted:return Kt("conflict status deleted them","Deleted by Incoming")}case OperationType.Deleted:switch(n){case OperationType.Changed:case OperationType.Created:return Kt("conflict status deleted us","Deleted by Current");case OperationType.Deleted:return Kt("conflict status deleted both","Deleted by Both")}}}l(Cb,"getConflictStatusText");const ec=l(class{constructor(e){this.storageService=e,this._onDidChange=new m.EventEmitter,this.cache=new Map}get onDidChange(){return this._onDidChange.event}async delete(e){const t=k(e),n=this.cache.has(t);this.cache.delete(t);try{await this.storageService.delete(this.getStorageKey(t))}catch(r){throw Y.error(r,`Failed to delete repository metadata for ${t}`),r}!n||setTimeout(()=>this._onDidChange.fire({uri:e}),0)}async get(e){this.assertMatchingScheme(e);const t=k(e),n=this.cache.get(t);if(n!==void 0)return n;let r;try{r=this.fromStorage(await this.storageService.get(this.getStorageKey(t)))}catch(i){throw Y.error(i,`Failed to get repository metadata for ${t}`),i}return r?this.cache.set(t,{revision:r}):this.cache.delete(t),{revision:r}}async set(e,t,n,r){this.assertMatchingScheme(e);const i=(await this.get(e)).revision!==t?"revision":void 0,a=k(e);if(n!==void 0&&!this.validate(n))throw new Error(`Metadata validation failed for ${e.toString()}`);const o={revision:t,cachedMetadata:n};this.cache.set(a,o);try{await this.storageService.store(this.getStorageKey(a),this.toStorage(t))}catch(s){throw this.cache.delete(a),Y.error(s,`Failed to save repository metadata for ${a}`),s}(r==null?void 0:r.silent)||setTimeout(()=>this._onDidChange.fire({uri:e,reason:i}),0)}refresh(){this.cache.clear()}validate(e){var t,n,r,i,a,o,s,u;return typeof e.version=="number"&&e.version>=ec.schemaVersion&&typeof e.timestamp=="number"&&typeof((t=e.provider)==null?void 0:t.id)=="string"&&typeof e.provider.name=="string"&&typeof e.name=="string"&&e.repo&&typeof e.accessLevel=="number"&&typeof((n=e.HEAD)==null?void 0:n.type)=="number"&&typeof((r=e.HEAD)==null?void 0:r.name)=="string"&&typeof((i=e.HEAD)==null?void 0:i.sha)=="string"&&(typeof((a=e.HEAD.detached)==null?void 0:a.name)=="string"&&typeof((o=e.HEAD.detached)==null?void 0:o.type)=="number"||typeof((s=e.HEAD.branch)==null?void 0:s.name)=="string")&&typeof((u=e.defaultBranch)==null?void 0:u.name)=="string"&&typeof e.defaultBranch.sha=="string"}assertMatchingScheme(e){if(e.scheme!==J.scheme)throw new Error(`Uri scheme '${e.scheme}' must match configured scheme '${J.scheme}'; uri=${e.toString()}`)}getStorageKey(e){return`metadata/${e}`}fromStorage(e){if(!e)return;const t=JSON.parse(e,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&z(r)?m.Uri.from(r):r);return t==null?void 0:t.revision}toStorage(e){const t={schemaVersion:ec.storageSchemaVersion,revision:e};return JSON.stringify(t)}},"_MetadataStore");let ls=ec;ls.schemaVersion=ze,ls.storageSchemaVersion=1;class cs{constructor(t,n){this.memento=t,this.scope=n,this._onDidChange=new m.EventEmitter}get onDidChange(){return this._onDidChange.event}async get(t){const n=this.getScoped(t),r=new M(`MementoStorage.get(${t}): scopedKey=${n}`,{logLevel:Xe.Debug});try{return await Promise.resolve(this.memento.get(n))}finally{r.stop()}}async getKeys(t){const n=this.getScoped(t),r=new M(`MementoStorage.getKeys(${t}): scopedPrefix=${n}`,{logLevel:Xe.Debug});try{let i=this.getKeysCore(t);if(this.scope!==void 0){const a=this.scope.length+1;i=i.map(o=>o.substr(a))}return await Promise.resolve(i)}finally{r.stop()}}getKeysCore(t){let n=this.memento.keys();return t&&(n=n.filter(r=>r.startsWith(t))),n}async store(t,n){const r=this.getScoped(t),i=new M(`MementoStorage.store(${t}): scopedKey=${r}`,{logLevel:Xe.Debug});try{return await this.storeCore(t,r,n)}finally{i.stop()}}async storeCore(t,n,r){await this.memento.update(n,r),this._onDidChange.fire({key:t})}async delete(t){const n=this.getScoped(t),r=new M(`MementoStorage.delete(${t}): scopedKey=${n}`,{logLevel:Xe.Debug});try{return await this.storeCore(t,n,void 0)}finally{r.stop()}}async deleteKeys(t){const n=this.getScoped(t),r=new M(`MementoStorage.deleteKeys(${t}): scopedPrefix=${n}`,{logLevel:Xe.Debug});try{const i=[],a=this.scope!==void 0?this.scope.length+1:0,o=this.getKeysCore(n);for(const s of o){const u=a!==0?s.substr(a):s;Y.debug(`MementoStorage.deleteKeys(${t}): Deleting key=${u}, scopedKey=${s}`);try{await this.storeCore(u,s,void 0)}catch(c){Y.debug(`MementoStorage.deleteKeys(${t}): Failed to delete key=${u}, scopedKey=${s}`),i.push(u)}}if(i.length)throw new Error(`Failed to delete keys: ${i.join(", ")}`)}finally{r.stop()}}with(t){return new cs(this.memento,t)}getScoped(t){return`${this.scope!==void 0?`${this.scope}/`:""}${t!=null?t:""}`}}l(cs,"MementoStorageService");class us{constructor(t,n){this.storageUri=t,this.scope=n,this._onDidChange=new m.EventEmitter}get onDidChange(){return this._onDidChange.event}async get(t){const n=this.getScoped(t),r=new M(`ExtFileStorageService.get(${t}): scopedKey=${n}`,{logLevel:Xe.Debug});try{return await m.workspace.fs.readFile(m.Uri.joinPath(this.storageUri,n))}catch(i){return}finally{r.stop()}}async store(t,n){const r=this.getScoped(t),i=new M(`ExtFileStorageService.store(${t}): scopedKey=${r}`,{logLevel:Xe.Debug});try{return await this.storeCore(t,r,n)}finally{i.stop()}}async storeCore(t,n,r){await m.workspace.fs.writeFile(m.Uri.joinPath(this.storageUri,n),r),this._onDidChange.fire({key:t})}async delete(t){const n=this.getScoped(t),r=new M(`ExtFileStorageService.delete(${t}): scopedKey=${n}`,{logLevel:Xe.Debug});try{return await m.workspace.fs.delete(m.Uri.joinPath(this.storageUri,n))}finally{r.stop()}}with(t){return new us(this.storageUri,t)}getScoped(t){return`${this.scope!==void 0?`${this.scope}/`:""}${t}`}}l(us,"ExtFileStorageService");var rd=Object.defineProperty,id=Object.getOwnPropertySymbols,J0=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,ad=l((e,t,n)=>t in e?rd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"go"),ar=l((e,t)=>{for(var n in t||(t={}))J0.call(t,n)&&ad(e,n,t[n]);if(id)for(var n of id(t))em.call(t,n)&&ad(e,n,t[n]);return e},"at"),ye=l((e,t)=>()=>(e&&(t=e(e=0)),t),"I"),tm=l((e,t)=>{for(var n in t)rd(e,n,{get:t[n],enumerable:!0})},"yc"),tc=l((e,t,n)=>new Promise((r,i)=>{var a=l(u=>{try{s(n.next(u))}catch(c){i(c)}},"a"),o=l(u=>{try{s(n.throw(u))}catch(c){i(c)}},"o"),s=l(u=>u.done?r(u.value):Promise.resolve(u.value).then(a,o),"u");s((n=n.apply(e,t)).next())}),"Br"),od,nm=ye(()=>{od={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}}),Vi,or,br,Nn,fs,Er,ds,hs,sd,ld,qa,nc=ye(()=>{Vi="function",or="object",br="undefined",Nn="prototype",fs="hasOwnProperty",Er=Object,ds=Er[Nn],hs=Er.assign,sd=Er.create,ld=Er.defineProperty,qa=ds[fs]});function Gi(){return typeof globalThis!==br&&globalThis?globalThis:typeof self!==br&&self?self:typeof window!==br&&window?window:typeof __webpack_require__.g!==br&&__webpack_require__.g?__webpack_require__.g:null}l(Gi,"ot");function rc(e){throw new TypeError(e)}l(rc,"Cr");function ps(e){var t=sd;if(t)return t(e);if(e==null)return{};var n=typeof e;n!==or&&n!==Vi&&rc("Object prototype may only be an Object:"+e);function r(){}return l(r,"n"),r[Nn]=e,new r}l(ps,"At");var cd=ye(()=>{nc()});function Tt(e,t){typeof t!==Vi&&t!==null&&rc("Class extends value "+String(t)+" is not a constructor or null"),gs(e,t);function n(){this.constructor=e}l(n,"r"),e[Nn]=t===null?ps(t):(n[Nn]=t[Nn],new n)}l(Tt,"z");var rm,im,ud,Ki,gs,am=ye(()=>{nc(),cd(),rm=(Gi()||{}).Symbol,im=(Gi()||{}).Reflect,ud=l(function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)ds[fs].call(t,i)&&(e[i]=t[i])}return e},"Ic"),Ki=hs||ud,gs=l(function(e,t){return gs=Er.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r[fs](i)&&(n[i]=r[i])},gs(e,t)},"Di")}),om=ye(()=>{}),Lt=ye(()=>{nc(),cd(),am(),om()});function Wr(e,t){return e&&Ga[sr].hasOwnProperty.call(e,t)}l(Wr,"Bt");function fd(e){return e&&(e===Ga[sr]||e===Array[sr])}l(fd,"Po");function ic(e){return fd(e)||e===Function[sr]}l(ic,"Li");function gi(e){if(e){if(Qi)return Qi(e);var t=e[hd]||e[sr]||(e[Wa]?e[Wa][sr]:null);if(t)return t}return null}l(gi,"nr");function ms(e,t){var n=[],r=Ga.getOwnPropertyNames;if(r)n=r(e);else for(var i in e)typeof i=="string"&&Wr(e,i)&&n.push(i);if(n&&n.length>0)for(var a=0;a<n.length;a++)t(n[a])}l(ms,"qn");function ac(e,t,n){return t!==Wa&&typeof e[t]===ja&&(n||Wr(e,t))}l(ac,"_i");function vs(e){throw new TypeError("DynamicProto: "+e)}l(vs,"jn");function sm(e){var t={};return ms(e,function(n){!t[n]&&ac(e,n,!1)&&(t[n]=e[n])}),t}l(sm,"Ec");function oc(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}l(oc,"Ui");function lm(e,t,n,r){function i(u,c,f){var v=c[f];if(v[ws]&&r){var p=u[Va]||{};p[Zi]!==!1&&(v=(p[c[mi]]||{})[f]||v)}return function(){return v.apply(u,arguments)}}l(i,"i");var a={};ms(n,function(u){a[u]=i(t,n,u)});for(var o=gi(e),s=[];o&&!ic(o)&&!oc(s,o);)ms(o,function(u){!a[u]&&ac(o,u,!Qi)&&(a[u]=i(t,o,u))}),s.push(o),o=gi(o);return a}l(lm,"wc");function cm(e,t,n,r){var i=null;if(e&&Wr(n,mi)){var a=e[Va]||{};if(i=(a[n[mi]]||{})[t],i||vs("Missing ["+t+"] "+ja),!i[ys]&&a[Zi]!==!1){for(var o=!Wr(e,t),s=gi(e),u=[];o&&s&&!ic(s)&&!oc(u,s);){var c=s[t];if(c){o=c===r;break}u.push(s),s=gi(s)}try{o&&(e[t]=i),i[ys]=1}catch(f){a[Zi]=!1}}}return i}l(cm,"Pc");function um(e,t,n){var r=t[e];return r===n&&(r=gi(t)[e]),typeof r!==ja&&vs("["+e+"] is not a "+ja),r}l(um,"bc");function fm(e,t,n,r,i){function a(u,c){var f=l(function(){var v=cm(this,c,u,f)||um(c,u,f);return v.apply(this,arguments)},"l");return f[ws]=1,f}if(l(a,"a"),!fd(e)){var o=n[Va]=n[Va]||{},s=o[t]=o[t]||{};o[Zi]!==!1&&(o[Zi]=!!i),ms(n,function(u){ac(n,u,!1)&&n[u]!==r[u]&&(s[u]=n[u],delete n[u],(!Wr(e,u)||e[u]&&!e[u][ws])&&(e[u]=a(e,u)))})}}l(fm,"Ac");function dm(e,t){if(Qi)for(var n=[],r=gi(t);r&&!ic(r)&&!oc(n,r);){if(r===e)return!0;n.push(r),r=gi(r)}return!1}l(dm,"Nc");function sc(e,t){return Wr(e,sr)?e.name||t||uc:((e||{})[Wa]||{}).name||t||uc}l(sc,"Fi");function lc(e,t,n,r){Wr(e,sr)||vs("theClass is an invalid class definition.");var i=e[sr];dm(i,t)||vs("["+sc(e)+"] is not in class hierarchy of ["+sc(t)+"]");var a=null;Wr(i,mi)?a=i[mi]:(a=dd+sc(e,"_")+"$"+dc,dc++,i[mi]=a);var o=lc[cc],s=!!o[_s];s&&r&&r[_s]!==void 0&&(s=!!r[_s]);var u=sm(t),c=lm(i,t,u,s);n(t,c);var f=!!Qi&&!!o[fc];f&&r&&(f=!!r[fc]),fm(i,a,t,u,f!==!1)}l(lc,"Oi");var Wa,sr,ja,Va,ws,mi,dd,ys,Zi,cc,uc,hd,_s,fc,Ga,Qi,dc,pd,Zt,sn=ye(()=>{Wa="constructor",sr="prototype",ja="function",Va="_dynInstFuncs",ws="_isDynProxy",mi="_dynClass",dd="_dynCls$",ys="_dynInstChk",Zi=ys,cc="_dfOpts",uc="_unknown_",hd="__proto__",_s="useBaseInst",fc="setInstFuncs",Ga=Object,Qi=Ga.getPrototypeOf,dc=0,pd={setInstFuncs:!0,useBaseInst:!0},lc[cc]=pd,Zt=lc}),Fe,Ce,xs=ye(()=>{(function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"})(Fe||(Fe={})),Ce={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}});function hc(e){return ds.toString.call(e)}l(hc,"Bi");function hm(e,t){return typeof e===t}l(hm,"Hi");function bn(e){return e===void 0||typeof e===br}l(bn,"fe");function Ne(e){return e===null||bn(e)}l(Ne,"x");function pm(e){return!Ne(e)}l(pm,"Vi");function pc(e,t){return e&&qa.call(e,t)}l(pc,"Er");function vi(e){return typeof e===or}l(vi,"st");function wt(e){return typeof e===Vi}l(wt,"B");function Ka(e,t,n,r){r===void 0&&(r=!1);var i=!1;if(!Ne(e))try{Ne(e[xc])?Ne(e[_c])||(e[_c](yc+t,n),i=!0):(e[xc](t,n,r),i=!0)}catch(a){}return i}l(Ka,"Ht");function gd(e,t,n,r){if(r===void 0&&(r=!1),!Ne(e))try{Ne(e[Ec])?Ne(e[bc])||e[bc](yc+t,n):e[Ec](t,n,r)}catch(i){}}l(gd,"Kn");function gm(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}l(gm,"qi");function tn(e,t){if(e)for(var n in e)qa.call(e,n)&&t.call(e,n,e[n])}l(tn,"$");function mm(e,t){if(e&&t){var n=t.length,r=e.length;if(e===t)return!0;if(r>=n){for(var i=r-1,a=n-1;a>=0;a--){if(e[i]!=t[a])return!1;i--}return!0}}return!1}l(mm,"ji");function hn(e,t){return e&&t?e.indexOf(t)!==-1:!1}l(hn,"Te");function gc(e){return hc(e)==="[object Date]"}l(gc,"wr");function Sr(e){return hc(e)==="[object Array]"}l(Sr,"Fe");function bs(e){return hc(e)==="[object Error]"}l(bs,"Vt");function ut(e){return typeof e=="string"}l(ut,"U");function mc(e){return typeof e=="number"}l(mc,"ir");function vc(e){return typeof e=="boolean"}l(vc,"Gr");function jr(e){if(gc(e)){var t=l(function(n){var r=String(n);return r.length===1&&(r="0"+r),r},"e");return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}l(jr,"Re");function ft(e,t,n){for(var r=e.length,i=0;i<r&&!(i in e&&t.call(n||e,e[i],i,e)===-1);i++);}l(ft,"R");function Za(e,t,n){for(var r=e.length,i=n||0,a=Math.max(i>=0?i:r-Math.abs(i),0);a<r;a++)if(a in e&&e[a]===t)return a;return-1}l(Za,"Dt");function Qa(e,t,n){for(var r=e.length,i=n||e,a=new Array(r),o=0;o<r;o++)o in e&&(a[o]=t.call(i,e[o],e));return a}l(Qa,"qt");function md(e,t,n){var r=e.length,i=0,a;if(arguments.length>=3)a=arguments[2];else{for(;i<r&&!(i in e);)i++;a=e[i++]}for(;i<r;)i in e&&(a=t(a,e[i],i,e)),i++;return a}l(md,"Kr");function cn(e){return typeof e!="string"?e:e.replace(/^\s+|\s+$/g,"")}l(cn,"oe");function wi(e){var t=typeof e;t!==Vi&&(t!==or||e===null)&&rc("objKeys called on non-object");var n=[];for(var r in e)e&&qa.call(e,r)&&n.push(r);if(_d)for(var i=Es.length,a=0;a<i;a++)e&&qa.call(e,Es[a])&&n.push(Es[a]);return n}l(wi,"Ye");function Xi(e,t,n,r){if(Sc)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),Sc(e,t,i),!0}catch(a){}return!1}l(Xi,"St");function Pn(){var e=Date;return e.now?e.now():new e().getTime()}l(Pn,"pe");function Ct(e){return bs(e)?e.name:""}l(Ct,"G");function yt(e,t,n,r,i){var a=n;return e&&(a=e[t],a!==n&&(!i||i(a))&&(!r||r(n))&&(a=n,e[t]=a)),a}l(yt,"K");function pn(e,t,n){var r;return e?(r=e[t],!r&&Ne(r)&&(r=bn(n)?{}:n,e[t]=r)):r=bn(n)?{}:n,r}l(pn,"me");function vd(e){return!e}l(vd,"Wn");function wc(e){return!!e}l(wc,"Pr");function lr(e){throw new Error(e)}l(lr,"Ae");function wd(e,t,n){if(e&&t&&e!==t&&vi(e)&&vi(t)){var r=l(function(a){if(ut(a)){var o=t[a];wt(o)?(!n||n(a,!0,t,e))&&(e[a]=function(s){return function(){var u=arguments;return t[s].apply(t,u)}}(a)):(!n||n(a,!1,t,e))&&(pc(e,a)&&delete e[a],Xi(e,a,function(){return t[a]},function(s){t[a]=s})||(e[a]=o))}},"n");for(var i in t)r(i)}return e}l(wd,"Wr");function vm(e){return function(){function t(){var n=this;e&&tn(e,function(r,i){n[r]=i})}return l(t,"e"),t}()}l(vm,"Gi");function yd(e){return e&&(e=Er(hs?hs({},e):e)),e}l(yd,"Xn");var yc,_c,xc,bc,Ec,Sc,wm,ym,_d,Es,gn=ye(()=>{Lt(),yc="on",_c="attachEvent",xc="addEventListener",bc="detachEvent",Ec="removeEventListener",Sc=ld,wm=Er.freeze,ym=Er.seal,_d=!{toString:null}.propertyIsEnumerable("toString"),Es=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]});function mn(e){var t=Gi();return t&&t[e]?t[e]:e===Ac&&Ss()?window:null}l(mn,"Ee");function Ss(){return Boolean(typeof window===or&&window)}l(Ss,"ar");function Xa(){return Ss()?window:mn(Ac)}l(Xa,"It");function xd(){return Boolean(typeof document===or&&document)}l(xd,"Jn");function cr(){return xd()?document:mn(bd)}l(cr,"Ne");function _m(){return Boolean(typeof navigator===or&&navigator)}l(_m,"Lo");function ur(){return _m()?navigator:mn(Ed)}l(ur,"Le");function xm(){return Boolean(typeof history===or&&history)}l(xm,"_o");function bm(){return xm()?history:mn(Sd)}l(bm,"Qi");function yi(e){if(e&&Dd){var t=mn("__mockLocation");if(t)return t}return typeof location===or&&location?location:mn(Cd)}l(yi,"$e");function Em(){return typeof console!==br?console:mn(Ad)}l(Em,"Zi");function Cr(){return mn(Id)}l(Cr,"Xe");function Yi(){return Boolean(typeof JSON===or&&JSON||mn(Ic)!==null)}l(Yi,"gt");function Gn(){return Yi()?JSON||mn(Ic):null}l(Gn,"we");function Sm(){return mn(Td)}l(Sm,"Yi");function Cm(){return mn(Rd)}l(Cm,"$i");function Am(){var e=ur();return e&&e.product?e.product===kd:!1}l(Am,"ea");function Cs(){var e=ur();if(e&&(e.userAgent!==Rs||Ts===null)){Rs=e.userAgent;var t=(Rs||"").toLowerCase();Ts=hn(t,As)||hn(t,Is)}return Ts}l(Cs,"jt");function Cc(e){if(e===void 0&&(e=null),!e){var t=ur()||{};e=t?(t.userAgent||"").toLowerCase():""}var n=(e||"").toLowerCase();if(hn(n,As))return parseInt(n.split(As)[1]);if(hn(n,Is)){var r=parseInt(n.split(Is)[1]);if(r)return r+4}return null}l(Cc,"or");function ct(e){var t=Object[Nn].toString.call(e),n="";return t==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Yi()&&(n=Gn().stringify(e)),t+n}l(ct,"O");var Ac,bd,Ed,Sd,Cd,Ad,Id,Ic,Td,Rd,kd,As,Is,Ts,Rs,Dd,Ya=ye(()=>{"use strict";Lt(),gn(),Ac="window",bd="document",Ed="navigator",Sd="history",Cd="location",Ad="console",Id="performance",Ic="JSON",Td="crypto",Rd="msCrypto",kd="ReactNative",As="msie",Is="trident/",Ts=null,Rs=null,Dd=!1});function Fd(e){return e?'"'+e.replace(/\"/g,"")+'"':""}l(Fd,"Uo");function ks(e,t){return(e||{}).logger||new Tc(t)}l(ks,"Ft");var Nd,Ld,Bd,Ji,Tc,Rc=ye(()=>{"use strict";xs(),Ya(),sn(),gn(),Nd="AI (Internal): ",Ld="AI: ",Bd="AITR_",Ji=function(){function e(t,n,r,i){r===void 0&&(r=!1);var a=this;a.messageId=t,a.message=(r?Ld:Nd)+t;var o="";Yi()&&(o=Gn().stringify(i));var s=(n?" message:"+Fd(n):"")+(i?" props:"+Fd(o):"");a.message+=s}return l(e,"t"),e.dataType="MessageData",e}(),Tc=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};Zt(e,this,function(i){Ne(t)&&(t={}),i.consoleLoggingLevel=function(){return a("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return a("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return a("maxMessageLimit",25)},i.enableDebugExceptions=function(){return a("enableDebugExceptions",!1)},i.throwInternal=function(s,u,c,f,v){v===void 0&&(v=!1);var p=new Ji(u,c,v,f);if(i.enableDebugExceptions())throw p;if(!bn(p.message)){var w=i.consoleLoggingLevel();if(v){var I=+p.messageId;!r[I]&&w>=Fe.WARNING&&(i.warnToConsole(p.message),r[I]=!0)}else w>=Fe.WARNING&&i.warnToConsole(p.message);i.logInternalMessage(s,p)}},i.warnToConsole=function(s){var u=Em();if(u){var c="log";u.warn&&(c="warn"),wt(u[c])&&u[c](s)}},i.resetInternalMessageCount=function(){n=0,r={}},i.logInternalMessage=function(s,u){if(!o()){var c=!0,f=Bd+u.messageId;if(r[f]?c=!1:r[f]=!0,c&&(s<=i.telemetryLoggingLevel()&&(i.queue.push(u),n++),n===i.maxInternalMessageLimit())){var v="Internal events throttle limit per PageView reached for this app.",p=new Ji(Ce.MessageLimitPerPVExceeded,v,!1);i.queue.push(p),i.warnToConsole(v)}}};function a(s,u){var c=t[s];return Ne(c)?u:c}l(a,"a");function o(){return n>=i.maxInternalMessageLimit()}l(o,"o")})}return l(e,"t"),e}()});function ea(e,t,n,r,i){if(e){var a=e;if(wt(a.getPerfMgr)&&(a=a.getPerfMgr()),a){var o=void 0,s=a.getCtx(Ds);try{if(o=a.create(t(),r,i),o){if(s&&o.setCtx&&(o.setCtx(ta.ParentContextKey,s),s.getCtx&&s.setCtx)){var u=s.getCtx(ta.ChildrenContextKey);u||(u=[],s.setCtx(ta.ChildrenContextKey,u)),u.push(o)}return a.setCtx(Ds,o),n(o)}}catch(c){o&&o.setCtx&&o.setCtx("exception",c)}finally{o&&a.fire(o),a.setCtx(Ds,s)}}}return n()}l(ea,"ut");var _i,ta,kc,Ds,Fs=ye(()=>{sn(),gn(),_i="ctx",ta=function(){function e(t,n,r){var i=this,a=!1;if(i.start=Pn(),i.name=t,i.isAsync=r,i.isChildEvt=function(){return!1},wt(n)){var o;a=Xi(i,"payload",function(){return!o&&wt(n)&&(o=n(),n=null),o})}i.getCtx=function(s){return s?s===e.ParentContextKey||s===e.ChildrenContextKey?i[s]:(i[_i]||{})[s]:null},i.setCtx=function(s,u){if(s)if(s===e.ParentContextKey)i[s]||(i.isChildEvt=function(){return!0}),i[s]=u;else if(s===e.ChildrenContextKey)i[s]=u;else{var c=i[_i]=i[_i]||{};c[s]=u}},i.complete=function(){var s=0,u=i.getCtx(e.ChildrenContextKey);if(Sr(u))for(var c=0;c<u.length;c++){var f=u[c];f&&(s+=f.time)}i.time=Pn()-i.start,i.exTime=i.time-s,i.complete=function(){},!a&&wt(n)&&(i.payload=n())}}return l(e,"t"),e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),kc=function(){function e(t){this.ctx={},Zt(e,this,function(n){n.create=function(r,i,a){return new ta(r,i,a)},n.fire=function(r){r&&(r.complete(),t&&t.perfEvent(r))},n.setCtx=function(r,i){if(r){var a=n[_i]=n[_i]||{};a[r]=i}},n.getCtx=function(r){return(n[_i]||{})[r]}})}return l(e,"t"),e}(),Ds="CoreUtils.doPerf"}),$d,Im=ye(()=>{"use strict";Fs(),xs(),gn(),$d=function(){function e(t,n){var r=this,i=null,a=wt(t.processTelemetry),o=wt(t.setNextPlugin);r._hasRun=!1,r.getPlugin=function(){return t},r.getNext=function(){return i},r.setNext=function(s){i=s},r.processTelemetry=function(s,u){u||(u=n);var c=t?t.identifier:"TelemetryPluginChain";ea(u?u.core():null,function(){return c+":processTelemetry"},function(){if(t&&a){r._hasRun=!0;try{u.setNext(i),o&&t.setNextPlugin(i),i&&(i._hasRun=!1),t.processTelemetry(s,u)}catch(v){var f=i&&i._hasRun;(!i||!f)&&u.diagLog().throwInternal(Fe.CRITICAL,Ce.PluginException,"Plugin ["+t.identifier+"] failed during processTelemetry - "+v),i&&!f&&i.processTelemetry(s,u)}}else i&&(r._hasRun=!0,i.processTelemetry(s,u))},function(){return{item:s}},!s.sync)}}return l(e,"t"),e}()});function Dc(e,t){var n=[];if(e&&e.length>0)for(var r=null,i=0;i<e.length;i++){var a=e[i];if(a&&wt(a.processTelemetry)){var o=new $d(a,t);n.push(o),r&&r.setNext(o),r=o}}return n.length>0?n[0]:null}l(Dc,"ra");function Tm(e,t,n){var r=[],i=!n;if(e)for(;e;){var a=e.getPlugin();(i||a===n)&&(i=!0,r.push(a)),e=e.getNext()}return i||r.push(n),Dc(r,t)}l(Tm,"Gc");function Rm(e,t,n){var r=e,i=!1;return n&&e&&(r=[],ft(e,function(a){(i||a===n)&&(i=!0,r.push(a))})),n&&!i&&(r||(r=[]),r.push(n)),Dc(r,t)}l(Rm,"Kc");var xi,Fc=ye(()=>{"use strict";Rc(),Im(),gn(),xi=function(){function e(t,n,r,i){var a=this,o=null;i!==null&&(t&&wt(t.getPlugin)?o=Tm(t,a,i||t.getPlugin()):i?o=Rm(t,a,i):bn(i)&&(o=Dc(t,a))),a.core=function(){return r},a.diagLog=function(){return ks(r,n)},a.getCfg=function(){return n},a.getExtCfg=function(s,u){u===void 0&&(u={});var c;if(n){var f=n.extensionConfig;f&&s&&(c=f[s])}return c||u},a.getConfig=function(s,u,c){c===void 0&&(c=!1);var f,v=a.getExtCfg(s,null);return v&&!Ne(v[u])?f=v[u]:n&&!Ne(n[u])&&(f=n[u]),Ne(f)?c:f},a.hasNext=function(){return o!=null},a.getNext=function(){return o},a.setNext=function(s){o=s},a.processNext=function(s){var u=o;u&&(o=u.getNext(),u.processTelemetry(s,a))},a.createNew=function(s,u){return s===void 0&&(s=null),new e(s||o,n,r,u)}}return l(e,"t"),e}()}),Pd,Nc,Md=ye(()=>{Pd="iKey",Nc="extensionConfig"}),Ja,bi,Od=ye(()=>{"use strict";Fc(),gn(),Md(),Ja="getPlugin",bi=function(){function e(){var t=this,n=!1,r=null,i=null;t.core=null,t.diagLog=function(a){return t._getTelCtx(a).diagLog()},t.isInitialized=function(){return n},t.setInitialized=function(a){n=a},t.setNextPlugin=function(a){i=a},t.processNext=function(a,o){o?o.processNext(a):i&&wt(i.processTelemetry)&&i.processTelemetry(a,null)},t._getTelCtx=function(a){a===void 0&&(a=null);var o=a;if(!o){var s=r||new xi(null,{},t.core);i&&i[Ja]?o=s.createNew(null,i[Ja]):o=s.createNew(null,i)}return o},t._baseTelInit=function(a,o,s,u){a&&yt(a,Nc,[],null,Ne),!u&&o&&(u=o.getProcessTelContext().getNext());var c=i;i&&i[Ja]&&(c=i[Ja]()),t.core=o,r=new xi(u,a,o,c),n=!0}}return l(e,"t"),e.prototype.initialize=function(t,n,r,i){this._baseTelInit(t,n,r,i)},e}()});function Lc(e,t){for(var n=[],r=null,i=e.getNext();i;){var a=i.getPlugin();a&&(r&&wt(r[$c])&&wt(a[Ns])&&r[$c](a),(!wt(a[Pc])||!a[Pc]())&&n.push(a),r=a,i=i.getNext())}ft(n,function(o){o.initialize(e.getCfg(),e.core(),t,e.getNext())})}l(Lc,"Qr");function Ud(e){return e.sort(function(t,n){var r=0,i=wt(n[Ns]);return wt(t[Ns])?r=i?t[Bc]-n[Bc]:1:i&&(r=-1),r})}l(Ud,"oa");var Ns,Bc,$c,Pc,Hd=ye(()=>{"use strict";gn(),Ns="processTelemetry",Bc="priority",$c="setNextPlugin",Pc="isInitialized"}),Ls,zd,qd,km=ye(()=>{"use strict";Lt(),sn(),Od(),Fc(),Hd(),gn(),Ls=500,zd="Channel has invalid priority",qd=function(e){Tt(t,e);function t(){var n=e.call(this)||this;n.identifier="ChannelControllerPlugin",n.priority=Ls;var r;Zt(t,n,function(s,u){s.setNextPlugin=function(c){},s.processTelemetry=function(c,f){r&&ft(r,function(v){if(v.length>0){var p=n._getTelCtx(f).createNew(v);p.processNext(c)}})},s.getChannelControls=function(){return r},s.initialize=function(c,f,v){s.isInitialized()||(u.initialize(c,f,v),o((c||{}).channels,v),ft(r,function(p){return Lc(new xi(p,c,f),v)}))}});function i(s){ft(s,function(u){u.priority<Ls&&lr(zd+u.identifier)})}l(i,"i");function a(s){s&&s.length>0&&(s=s.sort(function(u,c){return u.priority-c.priority}),i(s),r.push(s))}l(a,"a");function o(s,u){if(r=[],s&&ft(s,function(f){return a(f)}),u){var c=[];ft(u,function(f){f.priority>Ls&&c.push(f)}),a(c)}}return l(o,"o"),n}return l(t,"e"),t._staticInit=function(){var n=t.prototype;Xi(n,"ChannelControls",n.getChannelControls),Xi(n,"channelQueue",n.getChannelControls)}(),t}(bi)});function Wd(e,t){var n=eo[Ar]||no[Ar];return n||(n=eo[Ar]=eo(e,t),no[Ar]=n),n}l(Wd,"ma");function Bs(e){return e?e.isEnabled():!0}l(Bs,"ri");function Dm(e){var t=e.cookieCfg=e.cookieCfg||{};if(yt(t,"domain",e.cookieDomain,pm,Ne),yt(t,"path",e.cookiePath||"/",null,Ne),Ne(t[Ms])){var n=void 0;bn(e[Hc])||(n=!e[Hc]),bn(e[zc])||(n=!e[zc]),t[Ms]=n}return t}l(Dm,"Xc");function Mc(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;r[Ar]?n=r[Ar]:n=eo(t)}return n||(n=Wd(t,(e||{}).logger)),n}l(Mc,"cr");function eo(e,t){var n=Dm(e||no),r=n.path||"/",i=n.domain,a=n[Ms]!==!1,o={isEnabled:function(){var s=a&&jd(t),u=no[Ar];return s&&u&&o!==u&&(s=Bs(u)),s},setEnabled:function(s){a=s!==!1},set:function(s,u,c,f,v){if(Bs(o)){var p={},w=cn(u||Mn),I=w.indexOf(";");if(I!==-1&&(w=cn(u.substring(0,I)),p=Vd(u.substring(I+1))),yt(p,"domain",f||i,wc,bn),!Ne(c)){var R=Cs();if(bn(p[Ps])){var A=Pn(),D=A+c*1e3;if(D>0){var O=new Date;O.setTime(D),yt(p,Ps,Gd(O,R?Oc:Uc)||Gd(O,R?Oc:Uc)||Mn,wc)}}R||yt(p,"max-age",Mn+c,null,bn)}var G=yi();G&&G.protocol==="https:"&&(yt(p,"secure",null,null,bn),Os===null&&(Os=!Qd((ur()||{}).userAgent)),Os&&yt(p,"SameSite","None",null,bn)),yt(p,"path",v||r,null,bn);var W=n.setCookie||Zd;W(s,Kd(w,p))}},get:function(s){var u=Mn;return Bs(o)&&(u=(n.getCookie||Fm)(s)),u},del:function(s,u){Bs(o)&&o.purge(s,u)},purge:function(s,u){if(jd(t)){var c=(v={},v.path=u||"/",v[Ps]="Thu, 01 Jan 1970 00:00:01 GMT",v);Cs()||(c["max-age"]="0");var f=n.delCookie||Zd;f(s,Kd(Mn,c))}var v}};return o[Ar]=o,o}l(eo,"ur");function jd(e){if(to===null){to=!1;try{var t=na||{};to=t[$s]!==void 0}catch(n){e&&e.throwInternal(Fe.WARNING,Ce.CannotAccessCookie,"Cannot access document.cookie - "+Ct(n),{exception:ct(n)})}}return to}l(jd,"pa");function Vd(e){var t={};if(e&&e.length){var n=cn(e).split(";");ft(n,function(r){if(r=cn(r||Mn),r){var i=r.indexOf("=");i===-1?t[r]=null:t[cn(r.substring(0,i))]=cn(r.substring(i+1))}})}return t}l(Vd,"ts");function Gd(e,t){return wt(e[t])?e[t]():null}l(Gd,"Yo");function Kd(e,t){var n=e||Mn;return tn(t,function(r,i){n+="; "+r+(Ne(i)?Mn:"="+i)}),n}l(Kd,"$o");function Fm(e){var t=Mn;if(na){var n=na[$s]||Mn;qc!==n&&(Wc=Vd(n),qc=n),t=cn(Wc[e]||Mn)}return t}l(Fm,"Jc");function Zd(e,t){na&&(na[$s]=e+"="+t)}l(Zd,"es");function Qd(e){return ut(e)?!!(hn(e,"CPU iPhone OS 12")||hn(e,"iPad; CPU OS 12")||hn(e,"Macintosh; Intel Mac OS X 10_14")&&hn(e,"Version/")&&hn(e,"Safari")||hn(e,"Macintosh; Intel Mac OS X 10_14")&&mm(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||hn(e,"Chrome/5")||hn(e,"Chrome/6")||hn(e,"UnrealEngine")&&!hn(e,"Chrome")||hn(e,"UCBrowser/12")||hn(e,"UCBrowser/11")):!1}l(Qd,"ii");var Oc,Uc,$s,Ps,Ms,Hc,zc,Ar,Mn,to,Os,qc,na,Wc,no,jc=ye(()=>{xs(),Ya(),gn(),Oc="toGMTString",Uc="toUTCString",$s="cookie",Ps="expires",Ms="enabled",Hc="isCookieUseDisabled",zc="disableCookiesUsage",Ar="_ckMgr",Mn="",to=null,Os=null,qc=null,na=cr(),Wc={},no={}}),Xd,Vc,Gc,Yd=ye(()=>{"use strict";Lt(),sn(),km(),Fc(),Hd(),Fs(),jc(),gn(),Md(),Xd="Extensions must provide callback to initialize",Vc="_notificationManager",Gc=function(){function e(){var t=!1,n,r,i,a,o;Zt(e,this,function(s){s._extensions=new Array,r=new qd,s.logger=ps({throwInternal:function(u,c,f,v,p){p===void 0&&(p=!1)},warnToConsole:function(u){},resetInternalMessageCount:function(){}}),n=[],s.isInitialized=function(){return t},s.initialize=function(u,c,f,v){s.isInitialized()&&lr("Core should not be initialized more than once"),(!u||Ne(u.instrumentationKey))&&lr("Please provide instrumentation key"),i=v,s[Vc]=v,s.config=u||{},u.extensions=Ne(u.extensions)?[]:u.extensions;var p=pn(u,Nc);p.NotificationManager=v,f&&(s.logger=f);var w=[];w.push.apply(w,c.concat(u.extensions)),w=Ud(w);var I=[],R=[],A={};ft(w,function(D){(Ne(D)||Ne(D.initialize))&&lr(Xd);var O=D.priority,G=D.identifier;D&&O&&(Ne(A[O])?A[O]=G:f.warnToConsole("Two extensions have same priority #"+O+" - "+A[O]+", "+G)),!O||O<r.priority?I.push(D):R.push(D)}),w.push(r),I.push(r),w=Ud(w),s._extensions=w,Lc(new xi([r],u,s),w),Lc(new xi(I,u,s),w),s._extensions=I,s.getTransmissionControls().length===0&&lr("No channels available"),t=!0,s.releaseQueue()},s.getTransmissionControls=function(){return r.getChannelControls()},s.track=function(u){yt(u,Pd,s.config.instrumentationKey,null,vd),yt(u,"time",jr(new Date),null,vd),yt(u,"ver","4.0",null,Ne),s.isInitialized()?s.getProcessTelContext().processNext(u):n.push(u)},s.getProcessTelContext=function(){var u=s._extensions,c=u;return(!u||u.length===0)&&(c=[r]),new xi(c,s.config,s)},s.getNotifyMgr=function(){return i||(i=ps({addNotificationListener:function(u){},removeNotificationListener:function(u){},eventsSent:function(u){},eventsDiscarded:function(u,c){},eventsSendRequest:function(u,c){}}),s[Vc]=i),i},s.getCookieMgr=function(){return o||(o=eo(s.config,s.logger)),o},s.setCookieMgr=function(u){o=u},s.getPerfMgr=function(){return a||s.config&&s.config.enablePerfMgr&&(a=new kc(s.getNotifyMgr())),a},s.setPerfMgr=function(u){a=u},s.eventCnt=function(){return n.length},s.releaseQueue=function(){n.length>0&&(ft(n,function(u){s.getProcessTelContext().processNext(u)}),n=[])}})}return l(e,"t"),e}()}),Kc,Jd=ye(()=>{sn(),gn(),Kc=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;Zt(e,this,function(r){r.addNotificationListener=function(i){r.listeners.push(i)},r.removeNotificationListener=function(i){for(var a=Za(r.listeners,i);a>-1;)r.listeners.splice(a,1),a=Za(r.listeners,i)},r.eventsSent=function(i){ft(r.listeners,function(a){a&&a.eventsSent&&setTimeout(function(){return a.eventsSent(i)},0)})},r.eventsDiscarded=function(i,a){ft(r.listeners,function(o){o&&o.eventsDiscarded&&setTimeout(function(){return o.eventsDiscarded(i,a)},0)})},r.eventsSendRequest=function(i,a){ft(r.listeners,function(o){if(o&&o.eventsSendRequest)if(a)setTimeout(function(){return o.eventsSendRequest(i,a)},0);else try{o.eventsSendRequest(i,a)}catch(s){}})},r.perfEvent=function(i){i&&(n||!i.isChildEvt())&&ft(r.listeners,function(a){if(a&&a.perfEvent)if(i.isAsync)setTimeout(function(){return a.perfEvent(i)},0);else try{a.perfEvent(i)}catch(o){}})}})}return l(e,"t"),e}()}),Zc,Nm=ye(()=>{Lt(),Yd(),nm(),Jd(),Fs(),Rc(),sn(),gn(),Zc=function(e){Tt(t,e);function t(){var n=e.call(this)||this;return Zt(t,n,function(r,i){r.initialize=function(s,u,c,f){i.initialize(s,u,c||new Tc(s),f||new Kc(s))},r.track=function(s){ea(r.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){s===null&&(o(s),lr("Invalid telemetry item")),a(s),i.track(s)},function(){return{item:s}},!s.sync)},r.addNotificationListener=function(s){var u=r.getNotifyMgr();u&&u.addNotificationListener(s)},r.removeNotificationListener=function(s){var u=r.getNotifyMgr();u&&u.removeNotificationListener(s)},r.pollInternalLogs=function(s){var u=r.config.diagnosticLogInterval;return(!u||!(u>0))&&(u=1e4),setInterval(function(){var c=r.logger?r.logger.queue:[];ft(c,function(f){var v={name:s||"InternalMessageId: "+f.messageId,iKey:r.config.instrumentationKey,time:jr(new Date),baseType:Ji.dataType,baseData:{message:f.message}};r.track(v)}),c.length=0},u)};function a(s){if(Ne(s.name))throw o(s),Error("telemetry name required")}l(a,"a");function o(s){var u=r.getNotifyMgr();u&&u.eventsDiscarded([s],od.InvalidEvent)}l(o,"o")}),n}return l(t,"e"),t}(Gc)});function eh(e){e<0&&(e>>>=0),ra=123456789+e&Ir,ia=987654321-e&Ir,Xc=!0}l(eh,"os");function th(){try{var e=Pn()&2147483647;eh((Math.random()*Qc^e)+e)}catch(t){}}l(th,"ss");function nh(e){return e>0?Math.floor(Ei()/Ir*(e+1))>>>0:0}l(nh,"oi");function Ei(e){var t,n=Sm()||Cm();return n&&n.getRandomValues?t=n.getRandomValues(new Uint32Array(1))[0]&Ir:Cs()?(Xc||th(),t=rh()&Ir):t=Math.floor(Qc*Math.random()|0),e||(t>>>=0),t}l(Ei,"Ct");function Lm(e){e?eh(e):th()}l(Lm,"ha");function rh(e){ia=36969*(ia&65535)+(ia>>16)&Ir,ra=18e3*(ra&65535)+(ra>>16)&Ir;var t=(ia<<16)+(ra&65535)>>>0&Ir|0;return e||(t>>>=0),t}l(rh,"si");var Qc,Ir,Xc,ra,ia,ih=ye(()=>{Ya(),gn(),Qc=4294967296,Ir=4294967295,Xc=!1,ra=123456789,ia=987654321});function Si(e,t){var n=!1,r=Xa();r&&(n=Ka(r,e,t),n=Ka(r.body,e,t)||n);var i=cr();return i&&(n=io.Attach(i,e,t)||n),n}l(Si,"Mt");function Bm(){function e(){return nh(15)}return l(e,"t"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(oh,function(t){var n=e()|0,r=t==="x"?n:n&3|8;return r.toString(16)})}l(Bm,"us");function $m(){var e=Cr();return e&&e.now?e.now():Pn()}l($m,"cs");function Us(e){e===void 0&&(e=22);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ei()>>>0,r=0,i="";i.length<e;)r++,i+=t.charAt(n&63),n>>>=6,r===5&&(n=(Ei()<<2&4294967295|n&3)>>>0,r=0);return i}l(Us,"Wt");function fr(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",n,r=0;r<4;r++)n=Ei(),t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var i=e[8+(Ei()&3)|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+i+t.substr(16,3)+t.substr(19,12)}l(fr,"Oe");function aa(e,t){var n=Wd(e,t),r=Hs._canUseCookies;return oa===null&&(oa=[],ro=r,Xi(Hs,"_canUseCookies",function(){return ro},function(i){ro=i,ft(oa,function(a){a.setEnabled(i)})})),Za(oa,n)===-1&&oa.push(n),vc(r)&&n.setEnabled(r),vc(ro)&&n.setEnabled(ro),n}l(aa,"Jt");function ah(){aa().setEnabled(!1)}l(ah,"ui");function Pm(e){return aa(null,e).isEnabled()}l(Pm,"ya");function Mm(e,t){return aa(null,e).get(t)}l(Mm,"Sa");function Om(e,t,n,r){aa(null,e).set(t,n,null,r)}l(Om,"Ia");function Um(e,t){return aa(null,e).del(t)}l(Um,"Ca");var oa,ro,Hs,oh,io,Hm=ye(()=>{"use strict";Lt(),jc(),Ya(),gn(),ih(),oa=null,Hs={_canUseCookies:void 0,isTypeof:hm,isUndefined:bn,isNullOrUndefined:Ne,hasOwnProperty:pc,isFunction:wt,isObject:vi,isDate:gc,isArray:Sr,isError:bs,isString:ut,isNumber:mc,isBoolean:vc,toISOString:jr,arrForEach:ft,arrIndexOf:Za,arrMap:Qa,arrReduce:md,strTrim:cn,objCreate:ps,objKeys:wi,objDefineAccessors:Xi,addEventHandler:Si,dateNow:Pn,isIE:Cs,disableCookies:ah,newGuid:Bm,perfNow:$m,newId:Us,randomValue:nh,random32:Ei,mwcRandomSeed:Lm,mwcRandom32:rh,generateW3CId:fr},oh=/[xy]/g,io={Attach:Ka,AttachEvent:Ka,Detach:gd,DetachEvent:gd}});function Yc(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}l(Yc,"Ea");function Jc(e,t,n,r,i){i>=0&&i<=2&&Yc(e,function(a,o){var s=a.cbks,u=s[nu[i]];if(u){t.ctx=function(){var v=r[o]=r[o]||{};return v};try{u.apply(t.inst,n)}catch(v){var c=t.err;try{var f=s[nu[2]];f&&(t.err=v,f.apply(t.inst,n))}catch(p){}finally{t.err=c}}}})}l(Jc,"Ta");function zm(e){return function(){var t=this,n=arguments,r=e.h,i={name:e.n,inst:t,ctx:null,set:u},a=[],o=s([i],n);function s(f,v){return Yc(v,function(p){f.push(p)}),f}l(s,"u");function u(f,v){n=s([],n),n[f]=v,o=s([i],n)}l(u,"s"),Jc(r,i,o,a,0);var c=e.f;try{i.rslt=c.apply(t,n)}catch(f){throw i.err=f,Jc(r,i,o,a,3),f}return Jc(r,i,o,a,1),i.rslt}}l(zm,"el");function qm(e){if(e){if(ru)return ru(e);var t=e[lh]||e[Nn]||e[ch];if(t)return t}return null}l(qm,"tl");function sh(e,t,n){var r=null;return e&&(pc(e,t)?r=e:n&&(r=sh(qm(e),t,!1))),r}l(sh,"ms");function Wm(e,t,n){return e?eu(e[Nn],t,n,!1):null}l(Wm,"wa");function eu(e,t,n,r){if(r===void 0&&(r=!0),e&&t&&n){var i=sh(e,t,r);if(i){var a=i[t];if(typeof a===Vi){var o=a[tu];if(!o){o={i:0,n:t,f:a,h:[]};var s=zm(o);s[tu]=o,i[t]=s}var u={id:o.i,cbks:n,rm:function(){var c=this.id;Yc(o.h,function(f,v){if(f.id===c)return o.h.splice(v,1),1})}};return o.i++,o.h.push(u),u}}}return null}l(eu,"sn");var tu,nu,lh,ch,ru,jm=ye(()=>{Lt(),gn(),tu="_aiHooks",nu=["req","rsp","hkErr","fnErr"],lh="__proto__",ch="constructor",ru=Object.getPrototypeOf}),gt=ye(()=>{Nm(),Yd(),Od(),ih(),Hm(),gn(),Ya(),Lt(),Jd(),Fs(),Rc(),xs(),jm(),jc()}),$t,uh=ye(()=>{$t={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}});function iu(e,t,n){var r=t.length,i=fh(e,t);if(i.length!==r){for(var a=0,o=i;n[o]!==void 0;)a++,o=i.substring(0,150-3)+ph(a);i=o}return i}l(iu,"ci");function fh(e,t){var n;return t&&(t=cn(t.toString()),t.length>150&&(n=t.substring(0,150),e.throwInternal(Fe.WARNING,Ce.NameTooLong,"name is too long.  It has been truncated to "+150+" characters.",{name:t},!0))),n||t}l(fh,"ba");function En(e,t,n){n===void 0&&(n=1024);var r;return t&&(n=n||1024,t=cn(t),t.toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(Fe.WARNING,Ce.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}l(En,"ae");function ao(e,t){return ou(e,t,2048,Ce.UrlTooLong)}l(ao,"Tt");function au(e,t){var n;return t&&t.length>32768&&(n=t.substring(0,32768),e.throwInternal(Fe.WARNING,Ce.MessageTruncated,"message is too long, it has been truncated to "+32768+" characters.",{message:t},!0)),n||t}l(au,"Nr");function dh(e,t){var n;if(t){var r=""+t;r.length>32768&&(n=r.substring(0,32768),e.throwInternal(Fe.WARNING,Ce.ExceptionTruncated,"exception is too long, it has been truncated to "+32768+" characters.",{exception:t},!0))}return n||t}l(dh,"li");function Vr(e,t){if(t){var n={};tn(t,function(r,i){if(vi(i)&&Yi())try{i=Gn().stringify(i)}catch(a){e.throwInternal(Fe.WARNING,Ce.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:a},!0)}i=En(e,i,8192),r=iu(e,r,n),n[r]=i}),t=n}return t}l(Vr,"ze");function Gr(e,t){if(t){var n={};tn(t,function(r,i){r=iu(e,r,n),n[r]=i}),t=n}return t}l(Gr,"Be");function hh(e,t){return t&&ou(e,t,128,Ce.IdTooLong).toString()}l(hh,"fi");function ou(e,t,n,r){var i;return t&&(t=cn(t),t.length>n&&(i=t.substring(0,n),e.throwInternal(Fe.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0))),i||t}l(ou,"pi");function ph(e){var t="00"+e;return t.substr(t.length-3)}l(ph,"Aa");var gh,Kn=ye(()=>{gt(),gh={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:iu,sanitizeKey:fh,sanitizeString:En,sanitizeUrl:ao,sanitizeMessage:au,sanitizeException:dh,sanitizeProperties:Vr,sanitizeMeasurements:Gr,sanitizeId:hh,sanitizeInput:ou,padNumber:ph,trim:cn}});function sa(e){var t=null;if(wt(Event))t=new Event(e);else{var n=cr();n&&n.createEvent&&(t=n.createEvent("Event"),t.initEvent(e,!0,!0))}return t}l(sa,"Lt");var mh=ye(()=>{gt()});function Dt(e,t){return t===void 0&&(t=!1),e==null?t:e.toString().toLowerCase()==="true"}l(Dt,"ee");function Tr(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=""+e%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,a=Math.floor(e/(1e3*60*60*24));return t=t.length===1?"00"+t:t.length===2?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,i=i.length<2?"0"+i:i,(a>0?a+".":"")+i+":"+r+":"+n+"."+t}l(Tr,"je");function su(){var e=ur();return"sendBeacon"in e&&e.sendBeacon}l(su,"Dr");function vh(e,t){var n=null;return ft(e,function(r){if(r.identifier===t)return n=r,-1}),n}l(vh,"un");function wh(e,t,n,r,i){return!i&&ut(e)&&(e==="Script error."||e==="Script error")}l(wh,"cn");var zs=ye(()=>{gt()}),Ci,qs,la,Ws,lu,On,Zn=ye(()=>{Ci="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",qs="sampleRate",la="ProcessLegacy",Ws="http.method",lu="https://dc.services.visualstudio.com",On="not_specified"}),Ai,Qn,yh=ye(()=>{(function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"})(Ai||(Ai={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(Qn||(Qn={}))});function cu(){return fu()?js(Ai.LocalStorage):null}l(cu,"Fa");function js(e){try{if(Ne(Gi()))return null;var t=new Date,n=mn(e===Ai.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(i){}return null}l(js,"di");function uu(){return ca()?js(Ai.SessionStorage):null}l(uu,"Ra");function _h(){Kr=!1,Zr=!1}l(_h,"pn");function fu(){return Kr===void 0&&(Kr=!!js(Ai.LocalStorage)),Kr}l(fu,"Fr");function xh(e,t){var n=cu();if(n!==null)try{return n.getItem(t)}catch(r){Kr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Ct(r),{exception:ct(r)})}return null}l(xh,"dn");function bh(e,t,n){var r=cu();if(r!==null)try{return r.setItem(t,n),!0}catch(i){Kr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Ct(i),{exception:ct(i)})}return!1}l(bh,"mn");function Eh(e,t){var n=cu();if(n!==null)try{return n.removeItem(t),!0}catch(r){Kr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Ct(r),{exception:ct(r)})}return!1}l(Eh,"vn");function ca(){return Zr===void 0&&(Zr=!!js(Ai.SessionStorage)),Zr}l(ca,"wt");function Vm(){var e=[];return ca()&&tn(mn("sessionStorage"),function(t){e.push(t)}),e}l(Vm,"Ma");function Vs(e,t){var n=uu();if(n!==null)try{return n.getItem(t)}catch(r){Zr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Ct(r),{exception:ct(r)})}return null}l(Vs,"Zt");function Gs(e,t,n){var r=uu();if(r!==null)try{return r.setItem(t,n),!0}catch(i){Zr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Ct(i),{exception:ct(i)})}return!1}l(Gs,"Yt");function Sh(e,t){var n=uu();if(n!==null)try{return n.removeItem(t),!0}catch(r){Zr=!1,e.throwInternal(Fe.WARNING,Ce.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Ct(r),{exception:ct(r)})}return!1}l(Sh,"gn");var Kr,Zr,Ch=ye(()=>{gt(),yh(),Kr=void 0,Zr=void 0});function oo(e){var t=pu,n=Rh,r=n[t];return hu.createElement?n[t]||(r=n[t]=hu.createElement("a")):r={host:Th(e,!0)},r.href=e,t++,t>=n.length&&(t=0),pu=t,r}l(oo,"dr");function Ah(e){var t,n=oo(e);return n&&(t=n.href),t}l(Ah,"hn");function Gm(e){var t,n=oo(e);return n&&(t=n.pathname),t}l(Gm,"_a");function Ih(e,t){return e?e.toUpperCase()+" "+t:t}l(Ih,"xn");function Th(e,t){var n=du(e,t)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>3&&ut(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}l(Th,"mi");function du(e,t){var n=null;if(e){var r=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>2&&ut(r[2])&&r[2].length>0&&(n=r[2]||"",t&&r.length>2)){var i=(r[1]||"").toLowerCase(),a=r[3]||"";(i==="http"&&a===":80"||i==="https"&&a===":443")&&(a=""),n+=a}}return n}l(du,"yn");var hu,pu,Rh,kh=ye(()=>{gt(),hu=cr()||{},pu=0,Rh=[null,null,null,null,null]});function Ks(e){return Dh.indexOf(e.toLowerCase())!==-1}l(Ks,"Rr");function Km(e,t,n,r){var i,a=r,o=r;if(t&&t.length>0){var s=oo(t);if(i=s.host,!a)if(s.pathname!=null){var u=s.pathname.length===0?"/":s.pathname;u.charAt(0)!=="/"&&(u="/"+u),o=s.pathname,a=En(e,n?n+" "+u:u)}else a=En(e,t)}else i=r,a=r;return{target:i,name:a,data:o}}l(Km,"xs");function so(){var e=Cr();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return Pn()}l(so,"mr");function Sn(e,t){var n=null;return e!==0&&t!==0&&!Ne(e)&&!Ne(t)&&(n=t-e),n}l(Sn,"ve");var Dh,gu,Fh,Qr,Nh,Lh=ye(()=>{gt(),uh(),Kn(),mh(),zs(),Zn(),Ch(),kh(),Dh=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],gu={NotSpecified:On,createDomEvent:sa,disableStorage:_h,isInternalApplicationInsightsEndpoint:Ks,canUseLocalStorage:fu,getStorage:xh,setStorage:bh,removeStorage:Eh,canUseSessionStorage:ca,getSessionStorageKeys:Vm,getSessionStorage:Vs,setSessionStorage:Gs,removeSessionStorage:Sh,disableCookies:ah,canUseCookies:Pm,disallowsSameSiteNone:Qd,setCookie:Om,stringToBoolOrDefault:Dt,getCookie:Mm,deleteCookie:Um,trim:cn,newId:Us,random32:function(){return Ei(!0)},generateW3CId:fr,isArray:Sr,isError:bs,isDate:gc,toISOStringForIE8:jr,getIEVersion:Cc,msToTimeSpan:Tr,isCrossOriginError:wh,dump:ct,getExceptionName:Ct,addEventHandler:Ka,IsBeaconApiSupported:su,getExtension:vh},Fh={parseUrl:oo,getAbsoluteUrl:Ah,getPathName:Gm,getCompleteUrl:Ih,parseHost:Th,parseFullHost:du},Qr={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns){for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1}var i=oo(t).host.toLowerCase();if(i&&(i.indexOf(":443")!==-1||i.indexOf(":80")!==-1)&&(i=(du(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var a=e&&e.correlationHeaderDomains;if(a){var o;if(ft(a,function(c){var f=new RegExp(c.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));o=o||f.test(i)}),!o)return!1}var s=e&&e.correlationHeaderExcludedDomains;if(!s||s.length===0)return!0;for(var r=0;r<s.length;r++){var u=new RegExp(s[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(u.test(i))return!1}return i&&i.length>0},getCorrelationContext:function(e){if(e){var t=Qr.getCorrelationContextValue(e,$t.requestContextTargetKey);if(t&&t!==Qr.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(i.length===2&&i[0]===t)return i[1]}}},Nh={Now:so,GetDuration:Sn}});function Bh(e){if(!e)return{};var t=e.split($h),n=md(t,function(i,a){var o=a.split(Ph);if(o.length===2){var s=o[0].toLowerCase(),u=o[1];i[s]=u}return i},{});if(wi(n).length>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+r+"dc."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||lu}return n}l(Bh,"vi");var $h,Ph,Mh,Zm=ye(()=>{Zn(),gt(),$h=";",Ph="=",Mh={parse:Bh}}),mu,Oh=ye(()=>{mu=function(){function e(){}return l(e,"t"),e}()}),vu,Uh=ye(()=>{Lt(),Oh(),vu=function(e){Tt(t,e);function t(){return e.call(this)||this}return l(t,"e"),t}(mu)}),Hh,Qm=ye(()=>{Hh=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return l(e,"t"),e}()}),wu,Xm=ye(()=>{Lt(),Qm(),Kn(),gt(),Zn(),wu=function(e){Tt(t,e);function t(n,r,i){var a=e.call(this)||this;return a.name=En(n,i)||On,a.data=r,a.time=jr(new Date),a.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return a.sampleRate===100?4:1},tags:1,data:1},a}return l(t,"e"),t}(Hh)}),yu,zh=ye(()=>{yu=function(){function e(){this.ver=2,this.properties={},this.measurements={}}return l(e,"t"),e}()}),Xn,Ym=ye(()=>{Lt(),zh(),Kn(),Zn(),Xn=function(e){Tt(t,e);function t(n,r,i,a){var o=e.call(this)||this;return o.aiDataContract={ver:1,name:1,properties:0,measurements:0},o.name=En(n,r)||On,o.properties=Vr(n,i),o.measurements=Gr(n,a),o}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(yu)}),qh,Jm=ye(()=>{qh=function(){function e(){}return l(e,"t"),e}()}),Wh,ev=ye(()=>{Wh=function(){function e(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}return l(e,"t"),e}()}),jh,tv=ye(()=>{jh=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return l(e,"t"),e}()});function _u(e,t){var n=e;return n&&!ut(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),t&&(!n||n==="{}")&&(wt(e.toString)?n=e.toString():n=""+e)):n=""+e+" - (Missing JSON.stringify)"),n||""}l(_u,"Xa");function Vh(e,t){var n=e;return e&&(n=e[Xs]||e[Eu]||"",n&&!ut(n)&&(n=_u(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&t!=="String"&&t!=="Object"&&t!=="Error"&&(n||"").indexOf(t)===-1&&(n=t+": "+n),n||""}l(Vh,"Ms");function nv(e){return vi(e)?"hasFullStack"in e&&"typeName"in e:!1}l(nv,"sl");function rv(e){return vi(e)?"ver"in e&&"exceptions"in e&&"properties"in e:!1}l(rv,"ul");function Gh(e){return e&&e.src&&ut(e.src)&&e.obj&&Sr(e.obj)}l(Gh,"ks");function ua(e){var t=e||"";ut(t)||(ut(t[Ln])?t=t[Ln]:t=""+t);var n=t.split(`
`);return{src:t,obj:n}}l(ua,"Mr");function iv(e){for(var t=[],n=e.split(`
`),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}l(iv,"cl");function Kh(e){var t=null;if(e)try{if(e[Ln])t=ua(e[Ln]);else if(e[Ii]&&e[Ii][Ln])t=ua(e[Ii][Ln]);else if(e.exception&&e.exception[Ln])t=ua(e.exception[Ln]);else if(Gh(e))t=e;else if(Gh(e[Qs]))t=e[Qs];else if(window.opera&&e[Xs])t=iv(e.message);else if(ut(e))t=ua(e);else{var n=e[Xs]||e[Eu]||"";ut(e[bu])&&(n&&(n+=`
`),n+=" from "+e[bu]),n&&(t=ua(n))}}catch(r){t=ua(r)}return t||{src:"",obj:null}}l(Kh,"Ls");function av(e){var t="";return e&&(e.obj?ft(e.obj,function(n){t+=n+`
`}):t=e.src||""),t}l(av,"ll");function ov(e){var t,n=e.obj;if(n&&n.length>0){t=[];var r=0,i=0;ft(n,function(I){var R=I.toString();if(Ys.regex.test(R)){var A=new Ys(R,r++);i+=A.sizeInBytes,t.push(A)}});var a=32*1024;if(i>a)for(var o=0,s=t.length-1,u=0,c=o,f=s;o<s;){var v=t[o].sizeInBytes,p=t[s].sizeInBytes;if(u+=v+p,u>a){var w=f-c+1;t.splice(c,w);break}c=o,f=s,o++,s--}}return t}l(ov,"fl");function Zs(e){var t="";if(e&&(t=e.typeName||e.name||"",!t))try{var n=/function (.{1,200})\(/,r=n.exec(e.constructor.toString());t=r&&r.length>1?r[1]:""}catch(i){}return t}l(Zs,"hi");function xu(e){if(e)try{if(!ut(e)){var t=Zs(e),n=_u(e,!1);return(!n||n==="{}")&&(e[Ii]&&(e=e[Ii],t=Zs(e)),n=_u(e,!0)),n.indexOf(t)!==0&&t!=="String"?t+":"+n:n}}catch(r){}return""+(e||"")}l(xu,"Ga");var Zh,Ii,Ln,Qs,bu,Xs,Eu,Cn,Su,Ys,sv=ye(()=>{Lt(),Jm(),ev(),tv(),Kn(),gt(),Zn(),Zh="<no_method>",Ii="error",Ln="stack",Qs="stackDetails",bu="errorSrc",Xs="message",Eu="description",Cn=function(e){Tt(t,e);function t(n,r,i,a,o,s){var u=e.call(this)||this;return u.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},rv(r)?(u.exceptions=r.exceptions,u.properties=r.properties,u.measurements=r.measurements,r.severityLevel&&(u.severityLevel=r.severityLevel),r.id&&(u.id=r.id),r.problemGroup&&(u.problemGroup=r.problemGroup),u.ver=2,Ne(r.isManual)||(u.isManual=r.isManual)):(i||(i={}),u.exceptions=[new Su(n,r,i)],u.properties=Vr(n,i),u.measurements=Gr(n,a),o&&(u.severityLevel=o),s&&(u.id=s)),u}return l(t,"e"),t.CreateAutoException=function(n,r,i,a,o,s,u,c){var f=Zs(o||s||n);return{message:Vh(n,f),url:r,lineNumber:i,columnNumber:a,error:xu(o||s||n),evt:xu(s||n),typeName:f,stackDetails:Kh(u||o||s),errorSrc:c}},t.CreateFromInterface=function(n,r,i,a){var o=r.exceptions&&Qa(r.exceptions,function(u){return Su.CreateFromInterface(n,u)}),s=new t(n,Ki({},r,{exceptions:o}),i,a);return s},t.prototype.toInterface=function(){var n=this,r=n.exceptions,i=n.properties,a=n.measurements,o=n.severityLevel,s=n.ver,u=n.problemGroup,c=n.id,f=n.isManual,v=r instanceof Array&&Qa(r,function(p){return p.toInterface()})||void 0;return{ver:"4.0",exceptions:v,severityLevel:o,properties:i,measurements:a,problemGroup:u,id:c,isManual:f}},t.CreateSimpleException=function(n,r,i,a,o,s){return{exceptions:[{hasFullStack:!0,message:n,stack:o,typeName:r}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=xu,t}(Wh),Su=function(e){Tt(t,e);function t(n,r,i){var a=e.call(this)||this;if(a.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},nv(r))a.typeName=r.typeName,a.message=r.message,a[Ln]=r[Ln],a.parsedStack=r.parsedStack,a.hasFullStack=r.hasFullStack;else{var o=r,s=o&&o.evt;bs(o)||(o=o[Ii]||s||o),a.typeName=En(n,Zs(o))||On,a.message=au(n,Vh(r||o,a.typeName))||On;var u=r[Qs]||Kh(r);a.parsedStack=ov(u),a[Ln]=dh(n,av(u)),a.hasFullStack=Sr(a.parsedStack)&&a.parsedStack.length>0,i&&(i.typeName=i.typeName||a.typeName)}return a}return l(t,"e"),t.prototype.toInterface=function(){var n=this.parsedStack instanceof Array&&Qa(this.parsedStack,function(i){return i.toInterface()}),r={id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Ln],parsedStack:n||void 0};return r},t.CreateFromInterface=function(n,r){var i=r.parsedStack instanceof Array&&Qa(r.parsedStack,function(o){return Ys.CreateFromInterface(o)})||r.parsedStack,a=new t(n,Ki({},r,{parsedStack:i}));return a},t}(jh),Ys=function(e){Tt(t,e);function t(n,r){var i=e.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},typeof n=="string"){var a=n;i.level=r,i.method=Zh,i.assembly=cn(a),i.fileName="",i.line=0;var o=a.match(t.regex);o&&o.length>=5&&(i.method=cn(o[2])||i.method,i.fileName=cn(o[4]),i.line=parseInt(o[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=t.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return l(t,"e"),t.CreateFromInterface=function(n){return new t(n,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(qh)}),Qh,lv=ye(()=>{Qh=function(){function e(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}return l(e,"t"),e}()}),Cu,cv=ye(()=>{(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(Cu||(Cu={}))}),Xh,uv=ye(()=>{cv(),Xh=function(){function e(){this.kind=Cu.Measurement}return l(e,"t"),e}()}),Yh,fv=ye(()=>{Lt(),uv(),Yh=function(e){Tt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},n}return l(t,"e"),t}(Xh)}),dr,dv=ye(()=>{Lt(),lv(),Kn(),fv(),Zn(),dr=function(e){Tt(t,e);function t(n,r,i,a,o,s,u,c){var f=e.call(this)||this;f.aiDataContract={ver:1,metrics:1,properties:0};var v=new Yh;return v.count=a>0?a:void 0,v.max=isNaN(s)||s===null?void 0:s,v.min=isNaN(o)||o===null?void 0:o,v.name=En(n,r)||On,v.value=i,f.metrics=[v],f.properties=Vr(n,u),f.measurements=Gr(n,c),f}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(Qh)}),Js,Au=ye(()=>{Lt(),zh(),Js=function(e){Tt(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return l(t,"e"),t}(yu)}),Yn,hv=ye(()=>{Lt(),Au(),Kn(),zs(),Zn(),Yn=function(e){Tt(t,e);function t(n,r,i,a,o,s,u){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},c.id=hh(n,u),c.url=ao(n,i),c.name=En(n,r)||On,isNaN(a)||(c.duration=Tr(a)),c.properties=Vr(n,o),c.measurements=Gr(n,s),c}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(Js)}),Jh,pv=ye(()=>{Jh=function(){function e(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}return l(e,"t"),e}()}),hr,gv=ye(()=>{Lt(),Kn(),Lh(),pv(),zs(),hr=function(e){Tt(t,e);function t(n,r,i,a,o,s,u,c,f,v,p,w){f===void 0&&(f="Ajax");var I=e.call(this)||this;I.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},I.id=r,I.duration=Tr(o),I.success=s,I.resultCode=u+"",I.type=En(n,f);var R=Km(n,i,c,a);return I.data=ao(n,a)||R.data,I.target=En(n,R.target),v&&(I.target=I.target+" | "+v),I.name=En(n,R.name),I.properties=Vr(n,p),I.measurements=Gr(n,w),I}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(Jh)}),ep,mv=ye(()=>{ep=function(){function e(){this.ver=2,this.properties={},this.measurements={}}return l(e,"t"),e}()}),Rr,vv=ye(()=>{Lt(),mv(),Kn(),Zn(),Rr=function(e){Tt(t,e);function t(n,r,i,a,o){var s=e.call(this)||this;return s.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},r=r||On,s.message=au(n,r),s.properties=Vr(n,a),s.measurements=Gr(n,o),i&&(s.severityLevel=i),s}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(ep)}),tp,wv=ye(()=>{Lt(),Au(),tp=function(e){Tt(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return l(t,"e"),t}(Js)}),kr,yv=ye(()=>{Lt(),wv(),Kn(),Zn(),kr=function(e){Tt(t,e);function t(n,r,i,a,o,s,u){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},c.url=ao(n,i),c.name=En(n,r)||On,c.properties=Vr(n,o),c.measurements=Gr(n,s),u&&(c.domProcessing=u.domProcessing,c.duration=u.duration,c.networkConnect=u.networkConnect,c.perfTotal=u.perfTotal,c.receivedResponse=u.receivedResponse,c.sentRequest=u.sentRequest),c}return l(t,"e"),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(tp)}),Dr,_v=ye(()=>{Lt(),Uh(),Dr=function(e){Tt(t,e);function t(n,r){var i=e.call(this)||this;return i.aiDataContract={baseType:1,baseData:1},i.baseType=n,i.baseData=r,i}return l(t,"e"),t}(vu)}),lo,xv=ye(()=>{(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(lo||(lo={}))}),np,bv=ye(()=>{gt(),np=function(){function e(){}return l(e,"t"),e.getConfig=function(t,n,r,i){i===void 0&&(i=!1);var a;return r&&t.extensionConfig&&t.extensionConfig[r]&&!Ne(t.extensionConfig[r][n])?a=t.extensionConfig[r][n]:a=t[n],Ne(a)?i:a},e}()});function Xr(e){var t="ai."+e+".";return function(n){return t+n}}l(Xr,"er");var fa,Qt,co,Ti,el,Fr,Yr,da,tl,rp=ye(()=>{Lt(),gt(),fa=Xr("application"),Qt=Xr("device"),co=Xr("location"),Ti=Xr("operation"),el=Xr("session"),Fr=Xr("user"),Yr=Xr("cloud"),da=Xr("internal"),tl=function(e){Tt(t,e);function t(){return e.call(this)||this}return l(t,"e"),t}(vm({applicationVersion:fa("ver"),applicationBuild:fa("build"),applicationTypeId:fa("typeId"),applicationId:fa("applicationId"),applicationLayer:fa("layer"),deviceId:Qt("id"),deviceIp:Qt("ip"),deviceLanguage:Qt("language"),deviceLocale:Qt("locale"),deviceModel:Qt("model"),deviceFriendlyName:Qt("friendlyName"),deviceNetwork:Qt("network"),deviceNetworkName:Qt("networkName"),deviceOEMName:Qt("oemName"),deviceOS:Qt("os"),deviceOSVersion:Qt("osVersion"),deviceRoleInstance:Qt("roleInstance"),deviceRoleName:Qt("roleName"),deviceScreenResolution:Qt("screenResolution"),deviceType:Qt("type"),deviceMachineName:Qt("machineName"),deviceVMName:Qt("vmName"),deviceBrowser:Qt("browser"),deviceBrowserVersion:Qt("browserVersion"),locationIp:co("ip"),locationCountry:co("country"),locationProvince:co("province"),locationCity:co("city"),operationId:Ti("id"),operationName:Ti("name"),operationParentId:Ti("parentId"),operationRootId:Ti("rootId"),operationSyntheticSource:Ti("syntheticSource"),operationCorrelationVector:Ti("correlationVector"),sessionId:el("id"),sessionIsFirst:el("isFirst"),sessionIsNew:el("isNew"),userAccountAcquisitionDate:Fr("accountAcquisitionDate"),userAccountId:Fr("accountId"),userAgent:Fr("userAgent"),userId:Fr("id"),userStoreRegion:Fr("storeRegion"),userAuthUserId:Fr("authUserId"),userAnonymousUserAcquisitionDate:Fr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Fr("authUserAcquisitionDate"),cloudName:Yr("name"),cloudRole:Yr("role"),cloudRoleVer:Yr("roleVer"),cloudRoleInstance:Yr("roleInstance"),cloudEnvironment:Yr("environment"),cloudLocation:Yr("location"),cloudDeploymentUnit:Yr("deploymentUnit"),internalNodeName:da("nodeName"),internalSdkVersion:da("sdkVersion"),internalAgentVersion:da("agentVersion"),internalSnippet:da("snippet"),internalSdkSrc:da("sdkSrc")}))}),pr,Ev=ye(()=>{Kn(),gt(),Zn(),pr=function(){function e(){}return l(e,"t"),e.create=function(t,n,r,i,a,o){if(r=En(i,r)||On,Ne(t)||Ne(n)||Ne(r))throw Error("Input doesn't contain all required fields");var s={name:r,time:jr(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:n,baseData:t};return Ne(a)||tn(a,function(u,c){s.data[u]=c}),s},e}()}),An,Bt,Sv=ye(()=>{rp(),An={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Bt=new tl}),ha,nl,Iu,nn=ye(()=>{Lh(),Zm(),uh(),Zn(),Uh(),Oh(),Xm(),Ym(),sv(),dv(),hv(),Au(),gv(),vv(),yv(),_v(),xv(),bv(),rp(),Kn(),Ev(),Sv(),yh(),zs(),mh(),Ch(),kh(),ha="AppInsightsPropertiesPlugin",nl="AppInsightsChannelPlugin",Iu="ApplicationInsightsAnalytics"}),ip,Cv=ye(()=>{nn(),gt(),sn(),ip=function(){function e(t,n,r,i){Zt(e,this,function(a){var o=null,s=[],u=!1,c;r&&(c=r.logger);function f(){r&&ft(r.getTransmissionControls(),function(p){ft(p,function(w){return w.flush(!0)})})}l(f,"l");function v(p){s.push(p),o||(o=setInterval(function(){var w=s.slice(0),I=!1;s=[],ft(w,function(R){R()?I=!0:s.push(R)}),s.length===0&&(clearInterval(o),o=null),I&&f()},100))}l(v,"f"),a.trackPageView=function(p,w){var I=p.name;if(Ne(I)||typeof I!="string"){var R=cr();I=p.name=R&&R.title||""}var A=p.uri;if(Ne(A)||typeof A!="string"){var D=yi();A=p.uri=D&&D.href||""}if(!i.isPerformanceTimingSupported()){t.sendPageViewInternal(p,w),f(),c.throwInternal(Fe.WARNING,Ce.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var O=!1,G,W=i.getPerformanceTiming().navigationStart;W>0&&(G=Sn(W,+new Date),i.shouldCollectDuration(G)||(G=void 0));var re;!Ne(w)&&!Ne(w.duration)&&(re=w.duration),(n||!isNaN(re))&&(isNaN(re)&&(w||(w={}),w.duration=G),t.sendPageViewInternal(p,w),f(),O=!0);var we=6e4;w||(w={}),v(function(){var he=!1;try{if(i.isPerformanceTimingDataReady()){he=!0;var fe={name:I,uri:A};i.populatePageViewPerformanceEvent(fe),!fe.isValid&&!O?(w.duration=G,t.sendPageViewInternal(p,w)):(O||(w.duration=fe.durationMs,t.sendPageViewInternal(p,w)),u||(t.sendPageViewPerformanceInternal(fe,w),u=!0))}else W>0&&Sn(W,+new Date)>we&&(he=!0,O||(w.duration=we,t.sendPageViewInternal(p,w)))}catch(Ee){c.throwInternal(Fe.CRITICAL,Ce.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+Ct(Ee),{exception:ct(Ee)})}return he})}})}return l(e,"t"),e}()}),ap,op,Av=ye(()=>{nn(),gt(),ap=function(){function e(t,n){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=n,this._logger=t}return l(e,"t"),e.prototype.trackPreviousPageVisit=function(t,n){try{var r=this.restartPageVisitTimer(t,n);r&&this.pageVisitTimeTrackingHandler(r.pageName,r.pageUrl,r.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+ct(i))}},e.prototype.restartPageVisitTimer=function(t,n){try{var r=this.stopPageVisitTimer();return this.startPageVisitTimer(t,n),r}catch(i){return this._logger.warnToConsole("Call to restart failed: "+ct(i)),null}},e.prototype.startPageVisitTimer=function(t,n){try{if(ca()){Vs(this._logger,this.prevPageVisitDataKeyName)!=null&&lr("Cannot call startPageVisit consecutively without first calling stopPageVisit");var r=new op(t,n),i=Gn().stringify(r);Gs(this._logger,this.prevPageVisitDataKeyName,i)}}catch(a){this._logger.warnToConsole("Call to start failed: "+ct(a))}},e.prototype.stopPageVisitTimer=function(){try{if(ca()){var t=Pn(),n=Vs(this._logger,this.prevPageVisitDataKeyName);if(n&&Yi()){var r=Gn().parse(n);return r.pageVisitTime=t-r.pageVisitStartTime,Sh(this._logger,this.prevPageVisitDataKeyName),r}else return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+ct(i)),null}},e}(),op=function(){function e(t,n){this.pageVisitStartTime=Pn(),this.pageName=t,this.pageUrl=n}return l(e,"t"),e}()}),sp,Iv=ye(()=>{nn(),gt(),sp=function(){function e(t){this.MAX_DURATION_ALLOWED=36e5,t&&(this._logger=t.logger)}return l(e,"t"),e.prototype.populatePageViewPerformanceEvent=function(t){t.isValid=!1;var n=this.getPerformanceNavigationTiming(),r=this.getPerformanceTiming(),i=0,a=0,o=0,s=0,u=0;(n||r)&&(n?(i=n.duration,a=n.startTime===0?n.connectEnd:Sn(n.startTime,n.connectEnd),o=Sn(n.requestStart,n.responseStart),s=Sn(n.responseStart,n.responseEnd),u=Sn(n.responseEnd,n.loadEventEnd)):(i=Sn(r.navigationStart,r.loadEventEnd),a=Sn(r.navigationStart,r.connectEnd),o=Sn(r.requestStart,r.responseStart),s=Sn(r.responseStart,r.responseEnd),u=Sn(r.responseEnd,r.loadEventEnd)),i===0?this._logger.throwInternal(Fe.WARNING,Ce.ErrorPVCalc,"error calculating page view performance.",{total:i,network:a,request:o,response:s,dom:u}):this.shouldCollectDuration(i,a,o,s,u)?i<Math.floor(a)+Math.floor(o)+Math.floor(s)+Math.floor(u)?this._logger.throwInternal(Fe.WARNING,Ce.ClientPerformanceMathError,"client performance math error.",{total:i,network:a,request:o,response:s,dom:u}):(t.durationMs=i,t.perfTotal=t.duration=Tr(i),t.networkConnect=Tr(a),t.sentRequest=Tr(o),t.receivedResponse=Tr(s),t.domProcessing=Tr(u),t.isValid=!0):this._logger.throwInternal(Fe.WARNING,Ce.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:a,request:o,response:s,dom:u}))},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Cr().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Cr().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var t=Cr();return t&&t.getEntriesByType&&t.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var t=Cr();return t&&t.timing},e.prototype.isPerformanceTimingDataReady=function(){var t=Cr(),n=t?t.timing:0;return n&&n.domainLookupStart>0&&n.navigationStart>0&&n.responseStart>0&&n.requestStart>0&&n.loadEventEnd>0&&n.responseEnd>0&&n.connectEnd>0&&n.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=ur()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],a=r.userAgent,o=!1;if(a)for(var s=0;s<i.length;s++)o=o||a.toLowerCase().indexOf(i[s])!==-1;if(o)return!1;for(var s=0;s<t.length;s++)if(t[s]<0||t[s]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}()});function uo(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}l(uo,"Pn");var Tu,rl,Ru,ku,Tv=ye(()=>{Lt(),nn(),gt(),Cv(),Av(),Iv(),sn(),Tu="duration",rl="event",Ru=function(e){Tt(t,e);function t(){var n=e.call(this)||this;n.identifier=Iu,n.priority=180,n.autoRoutePVDelay=500;var r,i,a,o=0,s,u;return Zt(t,n,function(c,f){var v=yi(!0);s=v&&v.href||"",c.getCookieMgr=function(){return Mc(c.core)},c.processTelemetry=function(A,D){ea(c.core,function(){return c.identifier+":processTelemetry"},function(){var O=!1,G=c._telemetryInitializers.length;D=c._getTelCtx(D);for(var W=0;W<G;++W){var re=c._telemetryInitializers[W];if(re)try{if(re.apply(null,[A])===!1){O=!0;break}}catch(we){D.diagLog().throwInternal(Fe.CRITICAL,Ce.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Ct(we),{exception:ct(we)},!0)}}O||c.processNext(A,D)},function(){return{item:A}},!A.sync)},c.trackEvent=function(A,D){try{var O=pr.create(A,Xn.dataType,Xn.envelopeType,c.diagLog(),D);c.core.track(O)}catch(G){c.diagLog().throwInternal(Fe.WARNING,Ce.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Ct(G),{exception:ct(G)})}},c.startTrackEvent=function(A){try{r.start(A)}catch(D){c.diagLog().throwInternal(Fe.CRITICAL,Ce.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+Ct(D),{exception:ct(D)})}},c.stopTrackEvent=function(A,D,O){try{r.stop(A,void 0,D)}catch(G){c.diagLog().throwInternal(Fe.CRITICAL,Ce.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+Ct(G),{exception:ct(G)})}},c.trackTrace=function(A,D){try{var O=pr.create(A,Rr.dataType,Rr.envelopeType,c.diagLog(),D);c.core.track(O)}catch(G){c.diagLog().throwInternal(Fe.WARNING,Ce.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Ct(G),{exception:ct(G)})}},c.trackMetric=function(A,D){try{var O=pr.create(A,dr.dataType,dr.envelopeType,c.diagLog(),D);c.core.track(O)}catch(G){c.diagLog().throwInternal(Fe.CRITICAL,Ce.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+Ct(G),{exception:ct(G)})}},c.trackPageView=function(A,D){try{var O=A||{};c._pageViewManager.trackPageView(O,Ki({},O.properties,O.measurements,D)),c.config.autoTrackPageVisitTime&&c._pageVisitTimeManager.trackPreviousPageVisit(O.name,O.uri)}catch(G){c.diagLog().throwInternal(Fe.CRITICAL,Ce.TrackPVFailed,"trackPageView failed, page view will not be collected: "+Ct(G),{exception:ct(G)})}},c.sendPageViewInternal=function(A,D,O){var G=cr();G&&(A.refUri=A.refUri===void 0?G.referrer:A.refUri);var W=pr.create(A,Yn.dataType,Yn.envelopeType,c.diagLog(),D,O);c.core.track(W),o=0},c.sendPageViewPerformanceInternal=function(A,D,O){var G=pr.create(A,kr.dataType,kr.envelopeType,c.diagLog(),D,O);c.core.track(G)},c.trackPageViewPerformance=function(A,D){try{c._pageViewPerformanceManager.populatePageViewPerformanceEvent(A),c.sendPageViewPerformanceInternal(A,D)}catch(O){c.diagLog().throwInternal(Fe.CRITICAL,Ce.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+Ct(O),{exception:ct(O)})}},c.startTrackPage=function(A){try{if(typeof A!="string"){var D=cr();A=D&&D.title||""}i.start(A)}catch(O){c.diagLog().throwInternal(Fe.CRITICAL,Ce.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+Ct(O),{exception:ct(O)})}},c.stopTrackPage=function(A,D,O,G){try{if(typeof A!="string"){var W=cr();A=W&&W.title||""}if(typeof D!="string"){var re=yi();D=re&&re.href||""}i.stop(A,D,O,G),c.config.autoTrackPageVisitTime&&c._pageVisitTimeManager.trackPreviousPageVisit(A,D)}catch(we){c.diagLog().throwInternal(Fe.CRITICAL,Ce.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+Ct(we),{exception:ct(we)})}},c.sendExceptionInternal=function(A,D,O){var G=A.exception||A.error||new Error(On),W=new Cn(c.diagLog(),G,A.properties||D,A.measurements,A.severityLevel,A.id).toInterface(),re=pr.create(W,Cn.dataType,Cn.envelopeType,c.diagLog(),D,O);c.core.track(re)},c.trackException=function(A,D){try{c.sendExceptionInternal(A,D)}catch(O){c.diagLog().throwInternal(Fe.CRITICAL,Ce.TrackExceptionFailed,"trackException failed, exception will not be collected: "+Ct(O),{exception:ct(O)})}},c._onerror=function(A){var D=A&&A.error,O=A&&A.evt;try{if(!O){var G=Xa();G&&(O=G[rl])}var W=A&&A.url||(cr()||{}).URL,re=A.errorSrc||"window.onerror@"+W+":"+(A.lineNumber||0)+":"+(A.columnNumber||0),we={errorSrc:re,url:W,lineNumber:A.lineNumber||0,columnNumber:A.columnNumber||0,message:A.message};wh(A.message,A.url,A.lineNumber,A.columnNumber,A.error)?R(Cn.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",W,A.lineNumber||0,A.columnNumber||0,D,O,null,re),we):(A.errorSrc||(A.errorSrc=re),c.trackException({exception:A,severityLevel:lo.Error},we))}catch(fe){var he=D?D.name+", "+D.message:"null";c.diagLog().throwInternal(Fe.CRITICAL,Ce.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+Ct(fe),{exception:ct(fe),errorString:he})}},c.addTelemetryInitializer=function(A){c._telemetryInitializers.push(A)},c.initialize=function(A,D,O,G){if(!c.isInitialized()){if(Ne(D))throw Error("Error initializing");f.initialize(A,D,O,G),c.setInitialized(!1);var W=c._getTelCtx(),re=c.identifier;c.config=W.getExtCfg(re);var we=t.getDefaultConfig(A);we!==void 0&&tn(we,function(Te,je){c.config[Te]=W.getConfig(re,Te,je),c.config[Te]===void 0&&(c.config[Te]=je)}),c.config.isStorageUseDisabled&&_h();var he={instrumentationKey:function(){return A.instrumentationKey},accountId:function(){return c.config.accountId||A.accountId},sessionRenewalMs:function(){return c.config.sessionRenewalMs||A.sessionRenewalMs},sessionExpirationMs:function(){return c.config.sessionExpirationMs||A.sessionExpirationMs},sampleRate:function(){return c.config.samplingPercentage||A.samplingPercentage},sdkExtension:function(){return c.config.sdkExtension||A.sdkExtension},isBrowserLinkTrackingEnabled:function(){return c.config.isBrowserLinkTrackingEnabled||A.isBrowserLinkTrackingEnabled},appId:function(){return c.config.appId||A.appId}};c._pageViewPerformanceManager=new sp(c.core),c._pageViewManager=new ip(n,c.config.overridePageViewDuration,c.core,c._pageViewPerformanceManager),c._pageVisitTimeManager=new ap(c.diagLog(),function(Te,je,Qe){return p(Te,je,Qe)}),c._telemetryInitializers=c._telemetryInitializers||[],w(he),r=new ku(c.diagLog(),"trackEvent"),r.action=function(Te,je,Qe,lt){lt||(lt={}),lt[Tu]=Qe.toString(),c.trackEvent({name:Te,properties:lt})},i=new ku(c.diagLog(),"trackPageView"),i.action=function(Te,je,Qe,lt,bt){Ne(lt)&&(lt={}),lt[Tu]=Qe.toString();var Pt={name:Te,uri:je,properties:lt,measurements:bt};c.sendPageViewInternal(Pt,lt)};var fe=Xa(),Ee=bm(),ue=yi(!0),Re=n;if(c.config.disableExceptionTracking===!1&&!c.config.autoExceptionInstrumented&&fe){var Ye="onerror",_t=fe[Ye];fe.onerror=function(Te,je,Qe,lt,bt){var Pt=fe[rl],ui=_t&&_t(Te,je,Qe,lt,bt);return ui!==!0&&Re._onerror(Cn.CreateAutoException(Te,je,Qe,lt,bt,Pt)),ui},c.config.autoExceptionInstrumented=!0}if(c.config.disableExceptionTracking===!1&&c.config.enableUnhandledPromiseRejectionTracking===!0&&!c.config.autoUnhandledPromiseInstrumented&&fe){var ie="onunhandledrejection",xe=fe[ie];fe[ie]=function(Te){var je=fe[rl],Qe=xe&&xe.call(fe,Te);return Qe!==!0&&Re._onerror(Cn.CreateAutoException(Te.reason.toString(),ue?ue.href:"",0,0,Te,je)),Qe},c.config.autoUnhandledPromiseInstrumented=!0}if(c.config.enableAutoRouteTracking===!0&&Ee&&wt(Ee.pushState)&&wt(Ee.replaceState)&&fe&&typeof Event!="undefined"){var Ie=n;ft(O,function(Te){Te.identifier===ha&&(a=Te)}),Ee.pushState=function(Te){return function(){var je=Te.apply(this,arguments);return uo(fe,sa(Ie.config.namePrefix+"pushState")),uo(fe,sa(Ie.config.namePrefix+"locationchange")),je}}(Ee.pushState),Ee.replaceState=function(Te){return function(){var je=Te.apply(this,arguments);return uo(fe,sa(Ie.config.namePrefix+"replaceState")),uo(fe,sa(Ie.config.namePrefix+"locationchange")),je}}(Ee.replaceState),fe.addEventListener&&(fe.addEventListener(Ie.config.namePrefix+"popstate",function(){uo(fe,sa(Ie.config.namePrefix+"locationchange"))}),fe.addEventListener(Ie.config.namePrefix+"locationchange",function(){if(a&&a.context&&a.context.telemetryTrace){a.context.telemetryTrace.traceID=fr();var Te="_unknown_";ue&&ue.pathname&&(Te=ue.pathname+(ue.hash||"")),a.context.telemetryTrace.name=Te}u&&(s=u),u=ue&&ue.href||"",setTimeout(function(je){Ie.trackPageView({refUri:je,properties:{duration:0}})}.bind(n,s),Ie.autoRoutePVDelay)}))}c.setInitialized(!0)}};function p(A,D,O){var G={PageName:A,PageUrl:D};c.trackMetric({name:"PageVisitTime",average:O,max:O,min:O,sampleCount:1},G)}l(p,"m");function w(A){if(!A.isBrowserLinkTrackingEnabled()){var D=["/browserLinkSignalR/","/__browserLink/"],O=l(function(G){if(G.baseType===hr.dataType){var W=G.baseData;if(W){for(var re=0;re<D.length;re++)if(W.target&&W.target.indexOf(D[re])>=0)return!1}}return!0},"y");I(O)}}l(w,"C");function I(A){c._telemetryInitializers.push(A)}l(I,"E");function R(A,D){var O=pr.create(A,Cn.dataType,Cn.envelopeType,c.diagLog(),D);c.core.track(O)}l(R,"b")}),n}return l(t,"e"),t.getDefaultConfig=function(n){return n||(n={}),n.sessionRenewalMs=30*60*1e3,n.sessionExpirationMs=24*60*60*1e3,n.disableExceptionTracking=Dt(n.disableExceptionTracking),n.autoTrackPageVisitTime=Dt(n.autoTrackPageVisitTime),n.overridePageViewDuration=Dt(n.overridePageViewDuration),n.enableUnhandledPromiseRejectionTracking=Dt(n.enableUnhandledPromiseRejectionTracking),(isNaN(n.samplingPercentage)||n.samplingPercentage<=0||n.samplingPercentage>=100)&&(n.samplingPercentage=100),n.isStorageUseDisabled=Dt(n.isStorageUseDisabled),n.isBrowserLinkTrackingEnabled=Dt(n.isBrowserLinkTrackingEnabled),n.enableAutoRouteTracking=Dt(n.enableAutoRouteTracking),n.namePrefix=n.namePrefix||"",n.enableDebug=Dt(n.enableDebug),n.disableFlushOnBeforeUnload=Dt(n.disableFlushOnBeforeUnload),n.disableFlushOnUnload=Dt(n.disableFlushOnUnload,n.disableFlushOnBeforeUnload),n},t.Version="2.6.4",t}(bi),ku=function(){function e(t,n){var r=this,i={};r.start=function(a){typeof i[a]!="undefined"&&t.throwInternal(Fe.WARNING,Ce.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:a,key:a},!0),i[a]=+new Date},r.stop=function(a,o,s,u){var c=i[a];if(isNaN(c))t.throwInternal(Fe.WARNING,Ce.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:a,key:a},!0);else{var f=+new Date,v=Sn(c,f);r.action(a,o,v,s,u)}delete i[a],i[a]=void 0}}return l(e,"t"),e}()}),lp=ye(()=>{Tv()}),cp,up,Rv=ye(()=>{nn(),gt(),sn(),cp=function(){function e(t){var n=[];Zt(e,this,function(r){r.enqueue=function(i){n.push(i)},r.count=function(){return n.length},r.clear=function(){n.length=0},r.getItems=function(){return n.slice(0)},r.batchPayloads=function(i){if(i&&i.length>0){var a=t.emitLineDelimitedJson()?i.join(`
`):"["+i.join(",")+"]";return a}return null},r.markAsSent=function(i){r.clear()},r.clearSent=function(i){}})}return l(e,"t"),e}(),up=function(){function e(t,n){var r=!1,i;Zt(e,this,function(a){var o=c(e.BUFFER_KEY),s=c(e.SENT_BUFFER_KEY);i=o.concat(s),i.length>e.MAX_BUFFER_SIZE&&(i.length=e.MAX_BUFFER_SIZE),f(e.SENT_BUFFER_KEY,[]),f(e.BUFFER_KEY,i),a.enqueue=function(v){if(i.length>=e.MAX_BUFFER_SIZE){r||(t.throwInternal(Fe.WARNING,Ce.SessionStorageBufferFull,"Maximum buffer size reached: "+i.length,!0),r=!0);return}i.push(v),f(e.BUFFER_KEY,i)},a.count=function(){return i.length},a.clear=function(){i=[],f(e.BUFFER_KEY,[]),f(e.SENT_BUFFER_KEY,[]),r=!1},a.getItems=function(){return i.slice(0)},a.batchPayloads=function(v){if(v&&v.length>0){var p=n.emitLineDelimitedJson()?v.join(`
`):"["+v.join(",")+"]";return p}return null},a.markAsSent=function(v){i=u(v,i),f(e.BUFFER_KEY,i);var p=c(e.SENT_BUFFER_KEY);p instanceof Array&&v instanceof Array&&(p=p.concat(v),p.length>e.MAX_BUFFER_SIZE&&(t.throwInternal(Fe.CRITICAL,Ce.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+p.length,!0),p.length=e.MAX_BUFFER_SIZE),f(e.SENT_BUFFER_KEY,p))},a.clearSent=function(v){var p=c(e.SENT_BUFFER_KEY);p=u(v,p),f(e.SENT_BUFFER_KEY,p)};function u(v,p){var w=[];return ft(p,function(I){!wt(I)&&Za(v,I)===-1&&w.push(I)}),w}l(u,"s");function c(v){var p=v;try{p=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+p:p;var w=Vs(t,p);if(w){var I=Gn().parse(w);if(ut(I)&&(I=Gn().parse(I)),I&&Sr(I))return I}}catch(R){t.throwInternal(Fe.CRITICAL,Ce.FailedToRestoreStorageBuffer," storage key: "+p+", "+Ct(R),{exception:ct(R)})}return[]}l(c,"c");function f(v,p){var w=v;try{w=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+w:w;var I=JSON.stringify(p);Gs(t,w,I)}catch(R){Gs(t,w,JSON.stringify([])),t.throwInternal(Fe.WARNING,Ce.FailedToSetStorageBuffer," storage key: "+w+", "+Ct(R)+". Buffer cleared",{exception:ct(R)})}}l(f,"l")})}return l(e,"t"),e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}()});function Xt(e,t,n){return yt(e,t,n,wc)}l(Xt,"xe");var il,Ut,rn,Du,zt,fp,Fu,dp,hp,pp,gp,mp,kv=ye(()=>{Lt(),nn(),gt(),il="baseType",Ut="baseData",rn="properties",Du="true",zt=function(){function e(){}return l(e,"t"),e.extractPropsAndMeasurements=function(t,n,r){Ne(t)||tn(t,function(i,a){mc(a)?r[i]=a:ut(a)?n[i]=a:Yi()&&(n[i]=Gn().stringify(a))})},e.createEnvelope=function(t,n,r,i){var a=new wu(t,i,n);Xt(a,"sampleRate",r[qs]),(r[Ut]||{}).startTime&&(a.time=jr(r[Ut].startTime)),a.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return a.name=a.name.replace("{0}",o),e.extractPartAExtensions(r,a),r.tags=r.tags||[],yd(a)},e.extractPartAExtensions=function(t,n){var r=n.tags=n.tags||{},i=t.ext=t.ext||{},a=t.tags=t.tags||[],o=i.user;o&&(Xt(r,Bt.userAuthUserId,o.authId),Xt(r,Bt.userId,o.id||o.localId));var s=i.app;s&&Xt(r,Bt.sessionId,s.sesId);var u=i.device;u&&(Xt(r,Bt.deviceId,u.id||u.localId),Xt(r,Bt.deviceType,u.deviceClass),Xt(r,Bt.deviceIp,u.ip),Xt(r,Bt.deviceModel,u.model),Xt(r,Bt.deviceType,u.deviceType));var c=t.ext.web;if(c){Xt(r,Bt.deviceLanguage,c.browserLang),Xt(r,Bt.deviceBrowserVersion,c.browserVer),Xt(r,Bt.deviceBrowser,c.browser);var f=n.data=n.data||{},v=f[Ut]=f[Ut]||{},p=v[rn]=v[rn]||{};Xt(p,"domain",c.domain),Xt(p,"isManual",c.isManual?Du:null),Xt(p,"screenRes",c.screenRes),Xt(p,"userConsent",c.userConsent?Du:null)}var w=i.os;w&&Xt(r,Bt.deviceOS,w.name);var I=i.trace;I&&(Xt(r,Bt.operationParentId,I.parentID),Xt(r,Bt.operationName,I.name),Xt(r,Bt.operationId,I.traceID));for(var R={},A=a.length-1;A>=0;A--){var D=a[A];tn(D,function(G,W){R[G]=W}),a.splice(A,1)}tn(a,function(G,W){R[G]=W});var O=Ki({},r,R);O[Bt.internalSdkVersion]||(O[Bt.internalSdkVersion]="javascript:"+e.Version),n.tags=yd(O)},e.prototype.Init=function(t,n){this._logger=t,Ne(n[Ut])&&this._logger.throwInternal(Fe.CRITICAL,Ce.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},e.Version="2.6.4",e}(),fp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i=r[Ut].measurements||{},a=r[Ut][rn]||{};zt.extractPropsAndMeasurements(r.data,a,i);var o=r[Ut];if(Ne(o))return n.warnToConsole("Invalid input for dependency data"),null;var s=o[rn]&&o[rn][Ws]?o[rn][Ws]:"GET",u=new hr(n,o.id,o.target,o.name,o.duration,o.success,o.responseCode,s,o.type,o.correlationContext,a,i),c=new Dr(hr.dataType,u);return zt.createEnvelope(n,hr.envelopeType,r,c)},t.DependencyEnvelopeCreator=new t,t}(zt),Fu=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i={},a={};r[il]!==Xn.dataType&&(i.baseTypeSource=r[il]),r[il]===Xn.dataType?(i=r[Ut][rn]||{},a=r[Ut].measurements||{}):r[Ut]&&zt.extractPropsAndMeasurements(r[Ut],i,a),zt.extractPropsAndMeasurements(r.data,i,a);var o=r[Ut].name,s=new Xn(n,o,i,a),u=new Dr(Xn.dataType,s);return zt.createEnvelope(n,Xn.envelopeType,r,u)},t.EventEnvelopeCreator=new t,t}(zt),dp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i=r[Ut].measurements||{},a=r[Ut][rn]||{};zt.extractPropsAndMeasurements(r.data,a,i);var o=r[Ut],s=Cn.CreateFromInterface(n,o,a,i),u=new Dr(Cn.dataType,s);return zt.createEnvelope(n,Cn.envelopeType,r,u)},t.ExceptionEnvelopeCreator=new t,t}(zt),hp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i=r[Ut],a=i[rn]||{},o=i.measurements||{};zt.extractPropsAndMeasurements(r.data,a,o);var s=new dr(n,i.name,i.average,i.sampleCount,i.min,i.max,a,o),u=new Dr(dr.dataType,s);return zt.createEnvelope(n,dr.envelopeType,r,u)},t.MetricEnvelopeCreator=new t,t}(zt),pp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i="duration",a,o=r[Ut];!Ne(o)&&!Ne(o[rn])&&!Ne(o[rn][i])?(a=o[rn][i],delete o[rn][i]):!Ne(r.data)&&!Ne(r.data[i])&&(a=r.data[i],delete r.data[i]);var s=r[Ut],u;((r.ext||{}).trace||{}).traceID&&(u=r.ext.trace.traceID);var c=s.id||u,f=s.name,v=s.uri,p=s[rn]||{},w=s.measurements||{};if(Ne(s.refUri)||(p.refUri=s.refUri),Ne(s.pageType)||(p.pageType=s.pageType),Ne(s.isLoggedIn)||(p.isLoggedIn=s.isLoggedIn.toString()),!Ne(s[rn])){var I=s[rn];tn(I,function(D,O){p[D]=O})}zt.extractPropsAndMeasurements(r.data,p,w);var R=new Yn(n,f,v,a,p,w,c),A=new Dr(Yn.dataType,R);return zt.createEnvelope(n,Yn.envelopeType,r,A)},t.PageViewEnvelopeCreator=new t,t}(zt),gp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i=r[Ut],a=i.name,o=i.uri||i.url,s=i[rn]||{},u=i.measurements||{};zt.extractPropsAndMeasurements(r.data,s,u);var c=new kr(n,a,o,void 0,s,u,i),f=new Dr(kr.dataType,c);return zt.createEnvelope(n,kr.envelopeType,r,f)},t.PageViewPerformanceEnvelopeCreator=new t,t}(zt),mp=function(e){Tt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return l(t,"e"),t.prototype.Create=function(n,r){e.prototype.Init.call(this,n,r);var i=r[Ut].message,a=r[Ut].severityLevel,o=r[Ut][rn]||{},s=r[Ut].measurements||{};zt.extractPropsAndMeasurements(r.data,o,s);var u=new Rr(n,i,a,o,s),c=new Dr(Rr.dataType,u);return zt.createEnvelope(n,Rr.envelopeType,r,c)},t.TraceEnvelopeCreator=new t,t}(zt)}),vp,Dv=ye(()=>{gt(),sn(),vp=function(){function e(t){Zt(e,this,function(n){n.serialize=function(o){var s=r(o,"root");try{return Gn().stringify(s)}catch(u){t.throwInternal(Fe.CRITICAL,Ce.CannotSerializeObject,u&&wt(u.toString)?u.toString():"Error serializing object",null,!0)}};function r(o,s){var u="__aiCircularRefCheck",c={};if(!o)return t.throwInternal(Fe.CRITICAL,Ce.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),c;if(o[u])return t.throwInternal(Fe.WARNING,Ce.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),c;if(!o.aiDataContract){if(s==="measurements")c=a(o,"number",s);else if(s==="properties")c=a(o,"string",s);else if(s==="tags")c=a(o,"string",s);else if(Sr(o))c=i(o,s);else{t.throwInternal(Fe.WARNING,Ce.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{Gn().stringify(o),c=o}catch(f){t.throwInternal(Fe.CRITICAL,Ce.CannotSerializeObject,f&&wt(f.toString)?f.toString():"Error serializing object",null,!0)}}return c}return o[u]=!0,tn(o.aiDataContract,function(f,v){var p=wt(v)?v()&1:v&1,w=wt(v)?v()&4:v&4,I=v&2,R=o[f]!==void 0,A=vi(o[f])&&o[f]!==null;if(p&&!R&&!I)t.throwInternal(Fe.CRITICAL,Ce.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:f,name:s});else if(!w){var D=void 0;A?I?D=i(o[f],f):D=r(o[f],f):D=o[f],D!==void 0&&(c[f]=D)}}),delete o[u],c}l(r,"n");function i(o,s){var u;if(o)if(!Sr(o))t.throwInternal(Fe.CRITICAL,Ce.ItemNotInArray,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:s},!0);else{u=[];for(var c=0;c<o.length;c++){var f=o[c],v=r(f,s+"["+c+"]");u.push(v)}}return u}l(i,"i");function a(o,s,u){var c;return o&&(c={},tn(o,function(f,v){if(s==="string")v===void 0?c[f]="undefined":v===null?c[f]="null":v.toString?c[f]=v.toString():c[f]="invalid field: toString() is not defined.";else if(s==="number")if(v===void 0)c[f]="undefined";else if(v===null)c[f]="null";else{var p=parseFloat(v);isNaN(p)?c[f]="NaN":c[f]=p}else c[f]="invalid field: "+u+" is of unknown type.",t.throwInternal(Fe.CRITICAL,c[f],null,!0)})),c}l(a,"a")})}return l(e,"t"),e}()}),wp,Nu,Fv=ye(()=>{gt(),sn(),wp=function(){function e(){var t=Xa(),n=cr(),r=!1,i=!0;Zt(e,this,function(a){try{if(t&&io.Attach(t,"online",u)&&(io.Attach(t,"offline",c),r=!0),n){var o=n.body||n;bn(o.ononline)||(o.ononline=u,o.onoffline=c,r=!0)}if(r){var s=ur();s&&!Ne(s.onLine)&&(i=s.onLine)}}catch(f){r=!1}a.isListening=r,a.isOnline=function(){var f=!0,v=ur();return r?f=i:v&&!Ne(v.onLine)&&(f=v.onLine),f},a.isOffline=function(){return!a.isOnline()};function u(){i=!0}l(u,"s");function c(){i=!1}l(c,"c")})}return l(e,"t"),e.Offline=new e,e}(),Nu=wp.Offline}),yp,Nv=ye(()=>{yp=function(){function e(){}return l(e,"t"),e.prototype.getHashCodeScore=function(t){var n=this.getHashCode(t)/e.INT_MAX_VALUE;return n*100},e.prototype.getHashCode=function(t){if(t==="")return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,r=0;r<t.length;++r)n=(n<<5)+n+t.charCodeAt(r),n=n&n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}()}),_p,Lv=ye(()=>{Nv(),nn(),_p=function(){function e(){this.hashCodeGeneragor=new yp,this.keys=new tl}return l(e,"t"),e.prototype.getSamplingScore=function(t){var n=0;return t.tags&&t.tags[this.keys.userId]?n=this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.userId]):t.ext&&t.ext.user&&t.ext.user.id?n=this.hashCodeGeneragor.getHashCodeScore(t.ext.user.id):t.tags&&t.tags[this.keys.operationId]?n=this.hashCodeGeneragor.getHashCodeScore(t.tags[this.keys.operationId]):t.ext&&t.ext.telemetryTrace&&t.ext.telemetryTrace.traceID?n=this.hashCodeGeneragor.getHashCodeScore(t.ext.telemetryTrace.traceID):n=Math.random()*100,n},e}()}),xp,Bv=ye(()=>{Lv(),nn(),gt(),xp=function(){function e(t,n){this.INT_MAX_VALUE=2147483647,this._logger=n||ks(null),(t>100||t<0)&&(this._logger.throwInternal(Fe.WARNING,Ce.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),t=100),this.sampleRate=t,this.samplingScoreGenerator=new _p}return l(e,"t"),e.prototype.isSampledIn=function(t){var n=this.sampleRate,r=!1;return n==null||n>=100||t.baseType===dr.dataType?!0:(r=this.samplingScoreGenerator.getSamplingScore(t)<n,r)},e}()});function al(e){try{return e.responseText}catch(t){}return null}l(al,"Ci");var Lu,$v=ye(()=>{Lt(),Rv(),kv(),Dv(),nn(),gt(),Fv(),Bv(),sn(),Lu=function(e){Tt(t,e);function t(){var n=e.call(this)||this;n.priority=1001,n.identifier=nl,n._XMLHttpRequestSupported=!1;var r,i,a,o,s,u,c={};return Zt(t,n,function(f,v){function p(){lr("Method not implemented.")}l(p,"m"),f.pause=p,f.resume=p,f.flush=function(){try{f.triggerSend(!0,null,1)}catch(ie){f.diagLog().throwInternal(Fe.CRITICAL,Ce.FlushFailed,"flush failed, telemetry will not be collected: "+Ct(ie),{exception:ct(ie)})}},f.onunloadFlush=function(){if((f._senderConfig.onunloadDisableBeacon()===!1||f._senderConfig.isBeaconApiDisabled()===!1)&&su())try{f.triggerSend(!0,A,2)}catch(ie){f.diagLog().throwInternal(Fe.CRITICAL,Ce.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Ct(ie),{exception:ct(ie)})}else f.flush()},f.teardown=p,f.addHeader=function(ie,xe){c[ie]=xe},f.initialize=function(ie,xe,Ie,Te){v.initialize(ie,xe,Ie,Te);var je=f._getTelCtx(),Qe=f.identifier;s=new vp(xe.logger),r=0,i=null,a=0,f._sender=null,u=0;var lt=t._getDefaultAppInsightsChannelConfig();if(f._senderConfig=t._getEmptyAppInsightsChannelConfig(),tn(lt,function(me,De){f._senderConfig[me]=function(){return je.getConfig(Qe,me,De())}}),f._buffer=f._senderConfig.enableSessionStorageBuffer()&&ca()?new up(f.diagLog(),f._senderConfig):new cp(f._senderConfig),f._sample=new xp(f._senderConfig.samplingPercentage(),f.diagLog()),_t(ie)||f.diagLog().throwInternal(Fe.CRITICAL,Ce.InvalidInstrumentationKey,"Invalid Instrumentation key "+ie.instrumentationKey),!Ks(f._senderConfig.endpointUrl())&&f._senderConfig.customHeaders()&&f._senderConfig.customHeaders().length>0&&ft(f._senderConfig.customHeaders(),function(me){n.addHeader(me.header,me.value)}),!f._senderConfig.isBeaconApiDisabled()&&su())f._sender=A;else{var bt=mn("XMLHttpRequest");if(bt){var Pt=new bt;"withCredentials"in Pt?(f._sender=D,f._XMLHttpRequestSupported=!0):typeof XDomainRequest!==br&&(f._sender=Ee)}else{var ui=mn("fetch");ui&&(f._sender=O)}}},f.processTelemetry=function(ie,xe){xe=f._getTelCtx(xe);try{if(f._senderConfig.disableTelemetry())return;if(!ie){xe.diagLog().throwInternal(Fe.CRITICAL,Ce.CannotSendEmptyTelemetry,"Cannot send empty telemetry");return}if(ie.baseData&&!ie.baseType){xe.diagLog().throwInternal(Fe.CRITICAL,Ce.InvalidEvent,"Cannot send telemetry without baseData and baseType");return}if(ie.baseType||(ie.baseType="EventData"),!f._sender){xe.diagLog().throwInternal(Fe.CRITICAL,Ce.SenderNotInitialized,"Sender was not initialized");return}if(w(ie))ie[qs]=f._sample.sampleRate;else{xe.diagLog().throwInternal(Fe.WARNING,Ce.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:f._sample.sampleRate});return}var Ie=t.constructEnvelope(ie,f._senderConfig.instrumentationKey(),xe.diagLog());if(!Ie){xe.diagLog().throwInternal(Fe.CRITICAL,Ce.CreateEnvelopeError,"Unable to create an AppInsights envelope");return}var Te=!1;if(ie.tags&&ie.tags[la]&&(ft(ie.tags[la],function(bt){try{bt&&bt(Ie)===!1&&(Te=!0,xe.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(Pt){xe.diagLog().throwInternal(Fe.CRITICAL,Ce.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Ct(Pt),{exception:ct(Pt)},!0)}}),delete ie.tags[la]),Te)return;var je=s.serialize(Ie),Qe=f._buffer.getItems(),lt=f._buffer.batchPayloads(Qe);lt&&lt.length+je.length>f._senderConfig.maxBatchSizeInBytes()&&f.triggerSend(!0,null,10),f._buffer.enqueue(je),we()}catch(bt){xe.diagLog().throwInternal(Fe.WARNING,Ce.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Ct(bt),{exception:ct(bt)})}f.processNext(ie,xe)},f._xhrReadyStateChange=function(ie,xe,Ie){ie.readyState===4&&I(ie.status,xe,ie.responseURL,Ie,fe(ie),al(ie)||ie.response)},f.triggerSend=function(ie,xe,Ie){ie===void 0&&(ie=!0);try{if(f._senderConfig.disableTelemetry())f._buffer.clear();else{if(f._buffer.count()>0){var Te=f._buffer.getItems();Ye(Ie||0,ie),xe?xe.call(n,Te,ie):f._sender(Te,ie)}a=+new Date}clearTimeout(o),o=null,i=null}catch(Qe){var je=Cc();(!je||je>9)&&f.diagLog().throwInternal(Fe.CRITICAL,Ce.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+Ct(Qe),{exception:ct(Qe)})}},f._onError=function(ie,xe,Ie){f.diagLog().throwInternal(Fe.WARNING,Ce.OnError,"Failed to send telemetry.",{message:xe}),f._buffer.clearSent(ie)},f._onPartialSuccess=function(ie,xe){for(var Ie=[],Te=[],je=xe.errors.reverse(),Qe=0,lt=je;Qe<lt.length;Qe++){var bt=lt[Qe],Pt=ie.splice(bt.index,1)[0];he(bt.statusCode)?Te.push(Pt):Ie.push(Pt)}ie.length>0&&f._onSuccess(ie,xe.itemsAccepted),Ie.length>0&&f._onError(Ie,fe(null,["partial success",xe.itemsAccepted,"of",xe.itemsReceived].join(" "))),Te.length>0&&(W(Te),f.diagLog().throwInternal(Fe.WARNING,Ce.TransmissionFailed,"Partial success. Delivered: "+ie.length+", Failed: "+Ie.length+". Will retry to send "+Te.length+" our of "+xe.itemsReceived+" items"))},f._onSuccess=function(ie,xe){f._buffer.clearSent(ie)},f._xdrOnLoad=function(ie,xe){var Ie=al(ie);if(ie&&(Ie+""=="200"||Ie===""))r=0,f._onSuccess(xe,0);else{var Te=G(Ie);Te&&Te.itemsReceived&&Te.itemsReceived>Te.itemsAccepted&&!f._senderConfig.isRetryDisabled()?f._onPartialSuccess(xe,Te):f._onError(xe,ue(ie))}};function w(ie){return f._sample.isSampledIn(ie)}l(w,"C");function I(ie,xe,Ie,Te,je,Qe){var lt=null;if(f._appId||(lt=G(Qe),lt&&lt.appId&&(f._appId=lt.appId)),(ie<200||ie>=300)&&ie!==0){if((ie===301||ie===307||ie===308)&&!R(Ie)){f._onError(xe,je);return}!f._senderConfig.isRetryDisabled()&&he(ie)?(W(xe),f.diagLog().throwInternal(Fe.WARNING,Ce.TransmissionFailed,". Response code "+ie+". Will retry to send "+xe.length+" items.")):f._onError(xe,je)}else if(Nu.isOffline()){if(!f._senderConfig.isRetryDisabled()){var bt=10;W(xe,bt),f.diagLog().throwInternal(Fe.WARNING,Ce.TransmissionFailed,". Offline - Response Code: "+ie+". Offline status: "+Nu.isOffline()+". Will retry to send "+xe.length+" items.")}}else R(Ie),ie===206?(lt||(lt=G(Qe)),lt&&!f._senderConfig.isRetryDisabled()?f._onPartialSuccess(xe,lt):f._onError(xe,je)):(r=0,f._onSuccess(xe,Te))}l(I,"E");function R(ie){return u>=10?!1:!Ne(ie)&&ie!==""&&ie!==f._senderConfig.endpointUrl()?(f._senderConfig.endpointUrl=function(){return ie},++u,!0):!1}l(R,"b");function A(ie,xe){var Ie=f._senderConfig.endpointUrl(),Te=f._buffer.batchPayloads(ie),je=new Blob([Te],{type:"text/plain;charset=UTF-8"}),Qe=ur().sendBeacon(Ie,je);Qe?(f._buffer.markAsSent(ie),f._onSuccess(ie,ie.length)):(D(ie,!0),f.diagLog().throwInternal(Fe.WARNING,Ce.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}l(A,"p");function D(ie,xe){var Ie=new XMLHttpRequest,Te=f._senderConfig.endpointUrl();try{Ie[Ci]=!0}catch(Qe){}Ie.open("POST",Te,xe),Ie.setRequestHeader("Content-type","application/json"),Ks(Te)&&Ie.setRequestHeader($t.sdkContextHeader,$t.sdkContextHeaderAppIdRequest),ft(wi(c),function(Qe){Ie.setRequestHeader(Qe,c[Qe])}),Ie.onreadystatechange=function(){return f._xhrReadyStateChange(Ie,ie,ie.length)},Ie.onerror=function(Qe){return f._onError(ie,fe(Ie),Qe)};var je=f._buffer.batchPayloads(ie);Ie.send(je),f._buffer.markAsSent(ie)}l(D,"g");function O(ie,xe){var Ie=f._senderConfig.endpointUrl(),Te=f._buffer.batchPayloads(ie),je=new Blob([Te],{type:"text/plain;charset=UTF-8"}),Qe=new Headers;Ks(Ie)&&Qe.append($t.sdkContextHeader,$t.sdkContextHeaderAppIdRequest),ft(wi(c),function(Pt){Qe.append(Pt,c[Pt])});var lt={method:"POST",headers:Qe,body:je},bt=new Request(Ie,lt);fetch(bt).then(function(Pt){if(Pt.ok)Pt.text().then(function(ui){I(Pt.status,ie,Pt.url,ie.length,Pt.statusText,ui)}),f._buffer.markAsSent(ie);else throw Error(Pt.statusText)}).catch(function(Pt){f._onError(ie,Pt.message)})}l(O,"y");function G(ie){try{if(ie&&ie!==""){var xe=Gn().parse(ie);if(xe&&xe.itemsReceived&&xe.itemsReceived>=xe.itemsAccepted&&xe.itemsReceived-xe.itemsAccepted===xe.errors.length)return xe}}catch(Ie){f.diagLog().throwInternal(Fe.CRITICAL,Ce.InvalidBackendResponse,"Cannot parse the response. "+Ct(Ie),{response:ie})}return null}l(G,"w");function W(ie,xe){if(xe===void 0&&(xe=1),!(!ie||ie.length===0)){f._buffer.clearSent(ie),r++;for(var Ie=0,Te=ie;Ie<Te.length;Ie++){var je=Te[Ie];f._buffer.enqueue(je)}re(xe),we()}}l(W,"L");function re(ie){var xe=10,Ie;if(r<=1)Ie=xe;else{var Te=(Math.pow(2,r)-1)/2,je=Math.floor(Math.random()*Te*xe)+1;je=ie*je,Ie=Math.max(Math.min(je,3600),xe)}var Qe=Pn()+Ie*1e3;i=Qe}l(re,"k");function we(){if(!o){var ie=i?Math.max(0,i-Pn()):0,xe=Math.max(f._senderConfig.maxBatchInterval(),ie);o=setTimeout(function(){f.triggerSend(!0,null,1)},xe)}}l(we,"Q");function he(ie){return ie===408||ie===429||ie===500||ie===503}l(he,"ye");function fe(ie,xe){return ie?"XMLHttpRequest,Status:"+ie.status+",Response:"+al(ie)||0||0:xe}l(fe,"J");function Ee(ie,xe){var Ie=Xa(),Te=new XDomainRequest;Te.onload=function(){return f._xdrOnLoad(Te,ie)},Te.onerror=function(bt){return f._onError(ie,ue(Te),bt)};var je=Ie&&Ie.location&&Ie.location.protocol||"";if(f._senderConfig.endpointUrl().lastIndexOf(je,0)!==0){f.diagLog().throwInternal(Fe.WARNING,Ce.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),f._buffer.clear();return}var Qe=f._senderConfig.endpointUrl().replace(/^(https?:)/,"");Te.open("POST",Qe);var lt=f._buffer.batchPayloads(ie);Te.send(lt),f._buffer.markAsSent(ie)}l(Ee,"de");function ue(ie,xe){return ie?"XDomainRequest,Response:"+al(ie)||0:xe}l(ue,"be");function Re(){var ie="getNotifyMgr";return f.core[ie]?f.core[ie]():f.core._notificationManager}l(Re,"pt");function Ye(ie,xe){var Ie=Re();if(Ie&&Ie.eventsSendRequest)try{Ie.eventsSendRequest(ie,xe)}catch(Te){f.diagLog().throwInternal(Fe.CRITICAL,Ce.NotificationException,"send request notification failed: "+Ct(Te),{exception:ct(Te)})}}l(Ye,"it");function _t(ie){var xe=Ne(ie.disableInstrumentationKeyValidation)?!1:ie.disableInstrumentationKeyValidation;if(xe)return!0;var Ie="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Te=new RegExp(Ie);return Te.test(ie.instrumentationKey)}l(_t,"dt")}),n}return l(t,"e"),t.constructEnvelope=function(n,r,i){var a;switch(r!==n.iKey&&!Ne(r)?a=Ki({},n,{iKey:r}):a=n,a.baseType){case Xn.dataType:return Fu.EventEnvelopeCreator.Create(i,a);case Rr.dataType:return mp.TraceEnvelopeCreator.Create(i,a);case Yn.dataType:return pp.PageViewEnvelopeCreator.Create(i,a);case kr.dataType:return gp.PageViewPerformanceEnvelopeCreator.Create(i,a);case Cn.dataType:return dp.ExceptionEnvelopeCreator.Create(i,a);case dr.dataType:return hp.MetricEnvelopeCreator.Create(i,a);case hr.dataType:return fp.DependencyEnvelopeCreator.Create(i,a);default:return Fu.EventEnvelopeCreator.Create(i,a)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},t}(bi)}),bp=ye(()=>{$v()}),Ep,Bu,Sp,Pv=ye(()=>{sn(),nn(),gt(),Ep="ai_session",Bu=function(){function e(){}return l(e,"t"),e}(),Sp=function(){function e(t,n){var r=this,i,a,o=ks(n),s=Mc(n);Zt(e,r,function(u){t||(t={}),wt(t.sessionExpirationMs)||(t.sessionExpirationMs=function(){return e.acquisitionSpan}),wt(t.sessionRenewalMs)||(t.sessionRenewalMs=function(){return e.renewalSpan}),u.config=t;var c=u.config.sessionCookiePostfix&&u.config.sessionCookiePostfix()?u.config.sessionCookiePostfix():u.config.namePrefix&&u.config.namePrefix()?u.config.namePrefix():"";i=l(function(){return Ep+c},"i"),u.automaticSession=new Bu,u.update=function(){var R=Pn(),A=!1,D=u.automaticSession;D.id||(A=!f(D,R));var O=u.config.sessionExpirationMs();if(!A&&O>0){var G=u.config.sessionRenewalMs(),W=R-D.acquisitionDate,re=R-D.renewalDate;A=W<0||re<0,A=A||W>O,A=A||re>G}A?p(R):(!a||R-a>e.cookieUpdateInterval)&&w(D,R)},u.backup=function(){var R=u.automaticSession;I(R.id,R.acquisitionDate,R.renewalDate)};function f(R,A){var D=!1,O=s.get(i());if(O&&wt(O.split))D=v(R,O);else{var G=xh(o,i());G&&(D=v(R,G))}return D||!!R.id}l(f,"l");function v(R,A){var D=!1,O=", session will be reset",G=A.split("|");if(G.length>=2)try{var W=+G[1]||0,re=+G[2]||0;isNaN(W)||W<=0?o.throwInternal(Fe.WARNING,Ce.SessionRenewalDateIsZero,"AI session acquisition date is 0"+O):isNaN(re)||re<=0?o.throwInternal(Fe.WARNING,Ce.SessionRenewalDateIsZero,"AI session renewal date is 0"+O):G[0]&&(R.id=G[0],R.acquisitionDate=W,R.renewalDate=re,D=!0)}catch(we){o.throwInternal(Fe.CRITICAL,Ce.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(A||"")+"]"+O+" - "+Ct(we),{exception:ct(we)})}return D}l(v,"f");function p(R){var A=u.config||{},D=(A.getNewId?A.getNewId():null)||Us;u.automaticSession.id=D(A.idLength?A.idLength():22),u.automaticSession.acquisitionDate=R,w(u.automaticSession,R),fu()||o.throwInternal(Fe.WARNING,Ce.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}l(p,"m");function w(R,A){var D=R.acquisitionDate;R.renewalDate=A;var O=u.config,G=O.sessionRenewalMs(),W=D+O.sessionExpirationMs()-A,re=[R.id,D,A],we=0;W<G?we=W/1e3:we=G/1e3;var he=O.cookieDomain?O.cookieDomain():null;s.set(i(),re.join("|"),O.sessionExpirationMs()>0?we:null,he),a=A}l(w,"C");function I(R,A,D){bh(o,i(),[R,A,D].join("|"))}l(I,"E")})}return l(e,"t"),e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}()}),Cp,Mv=ye(()=>{Cp=function(){function e(){}return l(e,"t"),e}()}),Ap,Ov=ye(()=>{Ap=function(){function e(){this.id="browser",this.deviceClass="Browser"}return l(e,"t"),e}()}),Ip,Tp,Uv=ye(()=>{Ip="2.6.4",Tp=function(){function e(t){this.sdkVersion=(t.sdkExtension&&t.sdkExtension()?t.sdkExtension()+"_":"")+"javascript:"+Ip}return l(e,"t"),e}()});function Rp(e){return!(typeof e!="string"||!e||e.match(/,|;|=| |\|/))}l(Rp,"ju");var kp,Hv=ye(()=>{sn(),nn(),gt(),kp=function(){function e(t,n){this.isNewUser=!1;var r=ks(n),i=Mc(n),a;Zt(e,this,function(o){o.config=t;var s=o.config.userCookiePostfix&&o.config.userCookiePostfix()?o.config.userCookiePostfix():"";a=l(function(){return e.userCookieName+s},"a");var u=i.get(a());if(u){o.isNewUser=!1;var c=u.split(e.cookieSeparator);c.length>0&&(o.id=c[0])}if(!o.id){var f=t||{},v=(f.getNewId?f.getNewId():null)||Us;o.id=v(f.idLength?t.idLength():22);var p=31536e3,w=jr(new Date);o.accountAcquisitionDate=w,o.isNewUser=!0;var I=[o.id,w];i.set(a(),I.join(e.cookieSeparator),p);var R=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";Eh(r,R)}o.accountId=t.accountId?t.accountId():void 0;var A=i.get(e.authUserCookieName);if(A){A=decodeURI(A);var D=A.split(e.cookieSeparator);D[0]&&(o.authenticatedId=D[0]),D.length>1&&D[1]&&(o.accountId=D[1])}o.setAuthenticatedUserContext=function(O,G,W){W===void 0&&(W=!1);var re=!Rp(O)||G&&!Rp(G);if(re){r.throwInternal(Fe.WARNING,Ce.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}o.authenticatedId=O;var we=o.authenticatedId;G&&(o.accountId=G,we=[o.authenticatedId,o.accountId].join(e.cookieSeparator)),W&&i.set(e.authUserCookieName,encodeURI(we))},o.clearAuthenticatedUserContext=function(){o.authenticatedId=null,o.accountId=null,i.del(e.authUserCookieName)}})}return l(e,"t"),e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}()}),Dp,zv=ye(()=>{Dp=function(){function e(){}return l(e,"t"),e}()}),Fp,qv=ye(()=>{nn(),gt(),Fp=function(){function e(t,n,r,i){var a=this;a.traceID=t||fr(),a.parentID=n,a.name=r;var o=yi();!r&&o&&o.pathname&&(a.name=o.pathname),a.name=En(i,a.name)}return l(e,"t"),e}()});function pa(e,t){e&&e[t]&&wi(e[t]).length===0&&delete e[t]}l(pa,"Or");var fo,ho,Np,Wv=ye(()=>{sn(),gt(),Pv(),nn(),Mv(),Ov(),Uv(),Hv(),zv(),qv(),fo="ext",ho="tags",Np=function(){function e(t,n){var r=this,i=t.logger;this.appId=function(){return null},Zt(e,this,function(a){a.application=new Cp,a.internal=new Tp(n),Ss()&&(a.sessionManager=new Sp(n,t),a.device=new Ap,a.location=new Dp,a.user=new kp(n,t),a.telemetryTrace=new Fp(void 0,void 0,void 0,i),a.session=new Bu),a.applySessionContext=function(o,s){var u=a.session,c=a.sessionManager;u&&ut(u.id)?yt(pn(o.ext,An.AppExt),"sesId",u.id):c&&c.automaticSession&&yt(pn(o.ext,An.AppExt),"sesId",c.automaticSession.id,ut)},a.applyOperatingSystemContxt=function(o,s){yt(o.ext,An.OSExt,a.os)},a.applyApplicationContext=function(o,s){var u=a.application;if(u){var c=pn(o,ho);yt(c,Bt.applicationVersion,u.ver,ut),yt(c,Bt.applicationBuild,u.build,ut)}},a.applyDeviceContext=function(o,s){var u=a.device;if(u){var c=pn(pn(o,fo),An.DeviceExt);yt(c,"localId",u.id,ut),yt(c,"ip",u.ip,ut),yt(c,"model",u.model,ut),yt(c,"deviceClass",u.deviceClass,ut)}},a.applyInternalContext=function(o,s){var u=a.internal;if(u){var c=pn(o,ho);yt(c,Bt.internalAgentVersion,u.agentVersion,ut),yt(c,Bt.internalSdkVersion,u.sdkVersion,ut),(o.baseType===Ji.dataType||o.baseType===Yn.dataType)&&(yt(c,Bt.internalSnippet,u.snippetVer,ut),yt(c,Bt.internalSdkSrc,u.sdkSrc,ut))}},a.applyLocationContext=function(o,s){var u=r.location;u&&yt(pn(o,ho,[]),Bt.locationIp,u.ip,ut)},a.applyOperationContext=function(o,s){var u=a.telemetryTrace;if(u){var c=pn(pn(o,fo),An.TraceExt,{traceID:void 0,parentID:void 0});yt(c,"traceID",u.traceID,ut),yt(c,"name",u.name,ut),yt(c,"parentID",u.parentID,ut)}},a.applyWebContext=function(o,s){var u=r.web;u&&yt(pn(o,fo),An.WebExt,u)},a.applyUserContext=function(o,s){var u=a.user;if(u){var c=pn(o,ho,[]);yt(c,Bt.userAccountId,u.accountId,ut);var f=pn(pn(o,fo),An.UserExt);yt(f,"id",u.id,ut),yt(f,"authId",u.authenticatedId,ut)}},a.cleanUp=function(o,s){var u=o.ext;u&&(pa(u,An.DeviceExt),pa(u,An.UserExt),pa(u,An.WebExt),pa(u,An.OSExt),pa(u,An.AppExt),pa(u,An.TraceExt))}})}return l(e,"t"),e}()}),Lp,$u,jv=ye(()=>{Lt(),sn(),gt(),Wv(),nn(),Lp=function(e){Tt(t,e);function t(){var n=e.call(this)||this;n.priority=110,n.identifier=ha;var r,i;return Zt(t,n,function(a,o){a.initialize=function(u,c,f,v){o.initialize(u,c,f,v);var p=a._getTelCtx(),w=a.identifier,I=t.getDefaultConfig();i=i||{},tn(I,function(R,A){i[R]=function(){return p.getConfig(w,R,A())}}),a.context=new Np(c,i),r=vh(f,nl),a.context.appId=function(){return r?r._appId:null},a._extConfig=i},a.processTelemetry=function(u,c){if(!Ne(u)){c=a._getTelCtx(c),u.name===Yn.envelopeType&&c.diagLog().resetInternalMessageCount();var f=a.context||{};if(f.session&&typeof a.context.session.id!="string"&&f.sessionManager&&f.sessionManager.update(),s(u,c),f.user&&f.user.isNewUser){f.user.isNewUser=!1;var v=new Ji(Ce.SendBrowserInfoOnUserInit,(ur()||{}).userAgent||"");c.diagLog().logInternalMessage(Fe.CRITICAL,v)}a.processNext(u,c)}};function s(u,c){pn(u,"tags",[]),pn(u,"ext",{});var f=a.context;f.applySessionContext(u,c),f.applyApplicationContext(u,c),f.applyDeviceContext(u,c),f.applyOperationContext(u,c),f.applyUserContext(u,c),f.applyOperatingSystemContxt(u,c),f.applyWebContext(u,c),f.applyLocationContext(u,c),f.applyInternalContext(u,c),f.cleanUp(u,c)}l(s,"u")}),n}return l(t,"e"),t.getDefaultConfig=function(){var n={instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}};return n},t}(bi),$u=Lp}),Bp=ye(()=>{jv()});function $p(e,t,n){var r=0,i=e[t],a=e[n];return i&&a&&(r=Sn(i,a)),r}l($p,"ec");function Ri(e,t,n,r,i){var a=0,o=$p(n,r,i);return o&&(a=Jr(e,t,Tr(o))),a}l(Ri,"xr");function Jr(e,t,n){var r="ajaxPerf",i=0;if(e&&t&&n){var a=e[r]=e[r]||{};a[t]=n,i=1}return i}l(Jr,"tr");function Vv(e,t){var n=e.perfTiming,r=t[Tn]||{},i=0,a="name",o="Start",s="End",u="domainLookup",c="connect",f="redirect",v="request",p="response",w="duration",I="startTime",R=u+o,A=u+s,D=c+o,O=c+s,G=v+o,W=v+s,re=p+o,we=p+s,he=f+o,fe=f=s,Ee="transferSize",ue="encodedBodySize",Re="decodedBodySize",Ye="serverTiming";if(n){i|=Ri(r,f,n,he,fe),i|=Ri(r,u,n,R,A),i|=Ri(r,c,n,D,O),i|=Ri(r,v,n,G,W),i|=Ri(r,p,n,re,we),i|=Ri(r,"networkConnect",n,I,O),i|=Ri(r,"sentRequest",n,G,we);var _t=n[w];_t||(_t=$p(n,I,we)||0),i|=Jr(r,w,_t),i|=Jr(r,"perfTotal",_t);var ie=n[Ye];if(ie){var xe={};ft(ie,function(Ie,Te){var je=gm(Ie[a]||""+Te),Qe=xe[je]||{};tn(Ie,function(lt,bt){(lt!==a&&ut(bt)||mc(bt))&&(Qe[lt]&&(bt=Qe[lt]+";"+bt),(bt||!ut(bt))&&(Qe[lt]=bt))}),xe[je]=Qe}),i|=Jr(r,Ye,xe)}i|=Jr(r,Ee,n[Ee]),i|=Jr(r,ue,n[ue]),i|=Jr(r,Re,n[Re])}else e.perfMark&&(i|=Jr(r,"missing",e.perfAttempts));i&&(t[Tn]=r)}l(Vv,"hl");var Tn,Pp,Pu,Gv=ye(()=>{nn(),gt(),sn(),Tn="properties",Pp=function(){function e(){var t=this;t.openDone=!1,t.setRequestHeaderDone=!1,t.sendDone=!1,t.abortDone=!1,t.stateChangeAttached=!1}return l(e,"t"),e}(),Pu=function(){function e(t,n,r){var i=this,a=r,o="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new Pp,i.clientFailure=0,i.traceID=t,i.spanID=n,Zt(e,i,function(s){s.getAbsoluteUrl=function(){return s.requestUrl?Ah(s.requestUrl):null},s.getPathName=function(){return s.requestUrl?ao(a,Ih(s.method,s.requestUrl)):null},s.CreateTrackItem=function(u,c,f){if(s.ajaxTotalDuration=Math.round(Sn(s.requestSentTime,s.responseFinishedTime)*1e3)/1e3,s.ajaxTotalDuration<0)return null;var v=(R={id:"|"+s.traceID+"."+s.spanID,target:s.getAbsoluteUrl(),name:s.getPathName(),type:u,startTime:null,duration:s.ajaxTotalDuration,success:+s.status>=200&&+s.status<400,responseCode:+s.status,method:s.method},R[Tn]={HttpMethod:s.method},R);if(s.requestSentTime&&(v.startTime=new Date,v.startTime.setTime(s.requestSentTime)),Vv(s,v),c&&wi(s.requestHeaders).length>0&&(v[Tn]=v[Tn]||{},v[Tn].requestHeaders=s.requestHeaders),f){var p=f();if(p){var w=p.correlationContext;if(w&&(v.correlationContext=w),p.headerMap&&wi(p.headerMap).length>0&&(v[Tn]=v[Tn]||{},v[Tn].responseHeaders=p.headerMap),s.status>=400){var I=p.type;v[Tn]=v[Tn]||{},(I===""||I==="text")&&(v[Tn][o]=p[o]?p.statusText+" - "+p[o]:p.statusText),I==="json"&&(v[Tn][o]=p.response?p.statusText+" - "+JSON.stringify(p.response):p.statusText)}}}return v;var R}})}return l(e,"t"),e}()}),Kv,Zv=ye(()=>{gt(),gt(),Kv=function(){function e(){}return l(e,"t"),e.GetLength=function(t){var n=0;if(!Ne(t)){var r="";try{r=t.toString()}catch(i){}n=r.length,n=isNaN(n)?0:n}return n},e}()}),Mu,Qv=ye(()=>{gt(),Mu=function(){function e(t,n){var r=this;r.traceFlag=e.DEFAULT_TRACE_FLAG,r.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?r.traceId=t:r.traceId=fr(),n&&e.isValidSpanId(n)?r.spanId=n:r.spanId=fr().substr(0,16)}return l(e,"t"),e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.prototype.toString=function(){var t=this;return t.version+"-"+t.traceId+"-"+t.spanId+"-"+t.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}()});function Xv(){var e=Gi();return!e||Ne(e.Request)||Ne(e.Request[Nn])||Ne(e[va])?null:e[va]}l(Xv,"yl");function Yv(e){var t=!1;if(typeof XMLHttpRequest!==br&&!Ne(XMLHttpRequest)){var n=XMLHttpRequest[Nn];t=!Ne(n)&&!Ne(n.open)&&!Ne(n.send)&&!Ne(n.abort)}var r=Cc();if(r&&r<9&&(t=!1),t)try{var i=new XMLHttpRequest;i[Rn]={};var a=XMLHttpRequest[Nn].open;XMLHttpRequest[Nn].open=a}catch(o){t=!1,po(e,Ce.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:ct(o)})}return t}l(Yv,"Sl");function ol(e){var t="";try{!Ne(e)&&!Ne(e[Rn])&&!Ne(e[Rn].requestUrl)&&(t+="(url: '"+e[Rn].requestUrl+"')")}catch(n){}return t}l(ol,"Pi");function po(e,t,n,r,i){e[ma]()[Uu](Fe.CRITICAL,t,n,r,i)}l(po,"Rn");function sl(e,t,n,r,i){e[ma]()[Uu](Fe.WARNING,t,n,r,i)}l(sl,"wi");function go(e,t,n){return function(r){po(e,t,n,{ajaxDiagnosticsMessage:ol(r.inst),exception:ct(r.err)})}}l(go,"Dn");function ga(e,t){return e&&t?e.indexOf(t):-1}l(ga,"zr");var Ou,ma,Rn,Uu,va,Hu,zu,Jv=ye(()=>{Lt(),nn(),gt(),Gv(),Zv(),Qv(),sn(),Ou="ai.ajxmn.",ma="diagLog",Rn="ajaxData",Uu="throwInternal",va="fetch",Hu=0,zu=function(e){Tt(t,e);function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var r="trackDependencyDataInternal",i=yi(),a=!1,o=!1,s=i&&i.host&&i.host.toLowerCase(),u=t.getEmptyConfig(),c=!1,f=0,v,p,w,I,R=!1,A=0,D=!1,O=[],G={},W;return Zt(t,n,function(re,we){re.initialize=function(me,De,Pe,Ue){if(!re.isInitialized()){we.initialize(me,De,Pe,Ue);var Ge=re._getTelCtx(),rt=t.getDefaultConfig();tn(rt,function(Dn,Aa){u[Dn]=Ge.getConfig(t.identifier,Dn,Aa)});var tt=u.distributedTracingMode;if(c=u.enableRequestHeaderTracking,R=u.enableAjaxPerfTracking,A=u.maxAjaxCallsPerView,D=u.enableResponseHeaderTracking,W=u.excludeRequestFromAutoTrackingPatterns,w=tt===Qn.AI||tt===Qn.AI_AND_W3C,p=tt===Qn.AI_AND_W3C||tt===Qn.W3C,R){var Et=me.instrumentationKey||"unkwn";Et.length>5?I=Ou+Et.substring(Et.length-5)+".":I=Ou+Et+"."}if(u.disableAjaxTracking===!1&&ue(),fe(),Pe.length>0&&Pe){for(var Wt=void 0,on=0;!Wt&&on<Pe.length;)Pe[on]&&Pe[on].identifier===ha&&(Wt=Pe[on]),on++;Wt&&(v=Wt.context)}}},re.teardown=function(){ft(O,function(me){me.rm()}),O=[],a=!1,o=!1,re.setInitialized(!1)},re.trackDependencyData=function(me,De){re[r](me,De)},re.includeCorrelationHeaders=function(me,De,Pe,Ue){var Ge=re._currentWindowHost||s;if(De){if(Qr.canIncludeCorrelationHeader(u,me.getAbsoluteUrl(),Ge)){if(Pe||(Pe={}),Pe.headers=new Headers(Pe.headers||(De instanceof Request?De.headers||{}:{})),w){var rt="|"+me.traceID+"."+me.spanID;Pe.headers.set($t.requestIdHeader,rt),c&&(me.requestHeaders[$t.requestIdHeader]=rt)}var tt=u.appId||v&&v.appId();if(tt&&(Pe.headers.set($t.requestContextHeader,$t.requestContextAppIdFormat+tt),c&&(me.requestHeaders[$t.requestContextHeader]=$t.requestContextAppIdFormat+tt)),p){var Et=new Mu(me.traceID,me.spanID);Pe.headers.set($t.traceParentHeader,Et.toString()),c&&(me.requestHeaders[$t.traceParentHeader]=Et.toString())}}return Pe}else if(Ue){if(Qr.canIncludeCorrelationHeader(u,me.getAbsoluteUrl(),Ge)){if(w){var rt="|"+me.traceID+"."+me.spanID;Ue.setRequestHeader($t.requestIdHeader,rt),c&&(me.requestHeaders[$t.requestIdHeader]=rt)}var tt=u.appId||v&&v.appId();if(tt&&(Ue.setRequestHeader($t.requestContextHeader,$t.requestContextAppIdFormat+tt),c&&(me.requestHeaders[$t.requestContextHeader]=$t.requestContextAppIdFormat+tt)),p){var Et=new Mu(me.traceID,me.spanID);Ue.setRequestHeader($t.traceParentHeader,Et.toString()),c&&(me.requestHeaders[$t.traceParentHeader]=Et.toString())}}return Ue}},re[r]=function(me,De,Pe){if(A===-1||f<A){(u.distributedTracingMode===Qn.W3C||u.distributedTracingMode===Qn.AI_AND_W3C)&&typeof me.id=="string"&&me.id[me.id.length-1]!=="."&&(me.id+="."),Ne(me.startTime)&&(me.startTime=new Date);var Ue=pr.create(me,hr.dataType,hr.envelopeType,re[ma](),De,Pe);re.core.track(Ue)}else f===A&&po(re,Ce.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++f};function he(me){var De=!0;return(me||u.ignoreHeaders)&&ft(u.ignoreHeaders,function(Pe){if(Pe.toLowerCase()===me.toLowerCase())return De=!1,-1}),De}l(he,"ye");function fe(){var me=Xv();if(me){var De=Gi(),Pe=me.polyfill;u.disableFetchTracking===!1?(O.push(eu(De,va,{req:function(Ue,Ge,rt){var tt;if(a&&!Re(null,Ge,rt)&&!(Pe&&o)){var Et=Ue.ctx();tt=lt(Ge,rt);var Wt=re.includeCorrelationHeaders(tt,Ge,rt);Wt!==rt&&Ue.set(1,Wt),Et.data=tt}},rsp:function(Ue,Ge){var rt=Ue.ctx().data;rt&&(Ue.rslt=Ue.rslt.then(function(tt){return Pt(Ue,(tt||{}).status,tt,rt,function(){var Et={statusText:tt.statusText,headerMap:null,correlationContext:ui(tt)};if(D){var Wt={};tt.headers.forEach(function(on,Dn){he(Dn)&&(Wt[Dn]=on)}),Et.headerMap=Wt}return Et}),tt}).catch(function(tt){throw Pt(Ue,0,Ge,rt,null,{error:tt.message}),tt}))},hkErr:go(re,Ce.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),a=!0):Pe&&O.push(eu(De,va,{req:function(Ue,Ge,rt){Re(null,Ge,rt)}})),Pe&&(De[va].polyfill=Pe)}}l(fe,"J");function Ee(me,De,Pe){O.push(Wm(me,De,Pe))}l(Ee,"de");function ue(){Yv(re)&&!o&&(Ee(XMLHttpRequest,"open",{req:function(me,De,Pe,Ue){var Ge=me.inst,rt=Ge[Rn];!Re(Ge,Pe)&&Ye(Ge,!0)&&(!rt||!rt.xhrMonitoringState.openDone)&&_t(Ge,De,Pe,Ue)},hkErr:go(re,Ce.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),Ee(XMLHttpRequest,"send",{req:function(me,De){var Pe=me.inst,Ue=Pe[Rn];Ye(Pe)&&!Ue.xhrMonitoringState.sendDone&&(je("xhr",Ue),Ue.requestSentTime=so(),re.includeCorrelationHeaders(Ue,void 0,void 0,Pe),Ue.xhrMonitoringState.sendDone=!0)},hkErr:go(re,Ce.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),Ee(XMLHttpRequest,"abort",{req:function(me){var De=me.inst,Pe=De[Rn];Ye(De)&&!Pe.xhrMonitoringState.abortDone&&(Pe.aborted=1,Pe.xhrMonitoringState.abortDone=!0)},hkErr:go(re,Ce.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),c&&Ee(XMLHttpRequest,"setRequestHeader",{req:function(me,De,Pe){var Ue=me.inst;Ye(Ue)&&he(De)&&(Ue[Rn].requestHeaders[De]=Pe)},hkErr:go(re,Ce.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),o=!0)}l(ue,"be");function Re(me,De,Pe){var Ue=!1,Ge=((ut(De)?De:(De||{}).url||"")||"").toLowerCase();if(ft(W,function(Et){var Wt=Et;ut(Et)&&(Wt=new RegExp(Et)),Ue||(Ue=Wt.test(Ge))}),Ue)return Ue;var rt=ga(Ge,"?"),tt=ga(Ge,"#");return(rt===-1||tt!==-1&&tt<rt)&&(rt=tt),rt!==-1&&(Ge=Ge.substring(0,rt)),Ne(me)?Ne(De)||(Ue=(typeof De=="object"?De[Ci]===!0:!1)||(Pe?Pe[Ci]===!0:!1)):Ue=me[Ci]===!0||Ge[Ci]===!0,Ue?G[Ge]||(G[Ge]=1):G[Ge]&&(Ue=!0),Ue}l(Re,"pt");function Ye(me,De){var Pe=!0,Ue=o;return Ne(me)||(Pe=De===!0||!Ne(me[Rn])),Ue&&Pe}l(Ye,"it");function _t(me,De,Pe,Ue){var Ge=v&&v.telemetryTrace&&v.telemetryTrace.traceID||fr(),rt=fr().substr(0,16),tt=new Pu(Ge,rt,re[ma]());tt.method=De,tt.requestUrl=Pe,tt.xhrMonitoringState.openDone=!0,tt.requestHeaders={},tt.async=Ue,me[Rn]=tt,ie(me)}l(_t,"dt");function ie(me){me[Rn].xhrMonitoringState.stateChangeAttached=io.Attach(me,"readystatechange",function(){try{me&&me.readyState===4&&Ye(me)&&Ie(me)}catch(Pe){var De=ct(Pe);(!De||ga(De.toLowerCase(),"c00c023f")===-1)&&po(re,Ce.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ol(me),exception:De})}})}l(ie,"d");function xe(me){try{var De=me.responseType;if(De===""||De==="text")return me.responseText}catch(Pe){}return null}l(xe,"T");function Ie(me){var De=me[Rn];De.responseFinishedTime=so(),De.status=me.status;function Pe(Ue,Ge){var rt=Ge||{};rt.ajaxDiagnosticsMessage=ol(me),Ue&&(rt.exception=ct(Ue)),sl(re,Ce.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",rt)}l(Pe,"D"),Qe("xmlhttprequest",De,function(){try{var Ue=De.CreateTrackItem("Ajax",c,function(){var Ge={statusText:me.statusText,headerMap:null,correlationContext:Te(me),type:me.responseType,responseText:xe(me),response:me.response};if(D){var rt=me.getAllResponseHeaders();if(rt){var tt=cn(rt).split(/[\r\n]+/),Et={};ft(tt,function(Wt){var on=Wt.split(": "),Dn=on.shift(),Aa=on.join(": ");he(Dn)&&(Et[Dn]=Aa)}),Ge.headerMap=Et}}return Ge});Ue?re[r](Ue):Pe(null,{requestSentTime:De.requestSentTime,responseFinishedTime:De.responseFinishedTime})}finally{try{me[Rn]=null}catch(Ge){}}},function(Ue){Pe(Ue,null)})}l(Ie,"N");function Te(me){try{var De=me.getAllResponseHeaders();if(De!==null){var Pe=ga(De.toLowerCase(),$t.requestContextHeaderLowerCase);if(Pe!==-1){var Ue=me.getResponseHeader($t.requestContextHeader);return Qr.getCorrelationContext(Ue)}}}catch(Ge){sl(re,Ce.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ol(me),exception:ct(Ge)})}}l(Te,"A");function je(me,De){if(De.requestUrl&&I&&R){var Pe=Cr();if(Pe&&wt(Pe.mark)){Hu++;var Ue=I+me+"#"+Hu;Pe.mark(Ue);var Ge=Pe.getEntriesByName(Ue);Ge&&Ge.length===1&&(De.perfMark=Ge[0])}}}l(je,"H");function Qe(me,De,Pe,Ue){var Ge=De.perfMark,rt=Cr(),tt=u.maxAjaxPerfLookupAttempts,Et=u.ajaxPerfLookupDelay,Wt=De.requestUrl,on=0;l(function Dn(){try{if(rt&&Ge){on++;for(var Aa=null,G0=rt.getEntries(),Gf=G0.length-1;Gf>=0;Gf--){var Mr=G0[Gf];if(Mr){if(Mr.entryType==="resource")Mr.initiatorType===me&&(ga(Mr.name,Wt)!==-1||ga(Wt,Mr.name)!==-1)&&(Aa=Mr);else if(Mr.entryType==="mark"&&Mr.name===Ge.name){De.perfTiming=Aa;break}if(Mr.startTime<Ge.startTime-1e3)break}}}!Ge||De.perfTiming||on>=tt||De.async===!1?(Ge&&wt(rt.clearMarks)&&rt.clearMarks(Ge.name),De.perfAttempts=on,Pe()):setTimeout(Dn,Et)}catch(bb){Ue(bb)}},"Ke")()}l(Qe,"_");function lt(me,De){var Pe=v&&v.telemetryTrace&&v.telemetryTrace.traceID||fr(),Ue=fr().substr(0,16),Ge=new Pu(Pe,Ue,re[ma]());Ge.requestSentTime=so(),me instanceof Request?Ge.requestUrl=me?me.url:"":Ge.requestUrl=me;var rt="GET";De&&De.method?rt=De.method:me&&me instanceof Request&&(rt=me.method),Ge.method=rt;var tt={};if(c){var Et=new Headers((De?De.headers:0)||(me instanceof Request?me.headers||{}:{}));Et.forEach(function(Wt,on){he(on)&&(tt[on]=Wt)})}return Ge.requestHeaders=tt,je("fetch",Ge),Ge}l(lt,"j");function bt(me){var De="";try{Ne(me)||(typeof me=="string"?De+="(url: '"+me+"')":De+="(url: '"+me.url+"')")}catch(Pe){po(re,Ce.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:ct(Pe)})}return De}l(bt,"Z");function Pt(me,De,Pe,Ue,Ge,rt){if(!Ue)return;function tt(Et,Wt,on){var Dn=on||{};Dn.fetchDiagnosticsMessage=bt(Pe),Wt&&(Dn.exception=ct(Wt)),sl(re,Et,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",Dn)}l(tt,"V"),Ue.responseFinishedTime=so(),Ue.status=De,Qe("fetch",Ue,function(){var Et=Ue.CreateTrackItem("Fetch",c,Ge);Et?re[r](Et):tt(Ce.FailedMonitorAjaxDur,null,{requestSentTime:Ue.requestSentTime,responseFinishedTime:Ue.responseFinishedTime})},function(Et){tt(Ce.FailedMonitorAjaxGetCorrelationHeader,Et,null)})}l(Pt,"ie");function ui(me){if(me&&me.headers)try{var De=me.headers.get($t.requestContextHeader);return Qr.getCorrelationContext(De)}catch(Pe){sl(re,Ce.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:bt(me),exception:ct(Pe)})}}l(ui,"zt")}),n}return l(t,"e"),t.getDefaultConfig=function(){var n={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:Qn.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]};return n},t.getEmptyConfig=function(){var n=this.getDefaultConfig();return tn(n,function(r){n[r]=void 0}),n},t.prototype.processTelemetry=function(n,r){this.processNext(n,r)},t.identifier="AjaxDependencyPlugin",t}(bi)}),Mp=ye(()=>{Jv()}),qu,Wu,Op,Up,ju,Hp=ye(()=>{gt(),lp(),bp(),Bp(),Mp(),nn(),Wu=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],Op={Default:0,Required:1,Array:2,Hidden:4},Up={__proto__:null,PropertiesPluginIdentifier:ha,BreezeChannelIdentifier:nl,AnalyticsPluginIdentifier:Iu,Util:gu,CorrelationIdHelper:Qr,UrlHelper:Fh,DateTimeUtils:Nh,ConnectionStringParser:Mh,FieldType:Op,RequestHeaders:$t,DisabledPropertyName:Ci,ProcessLegacy:la,SampleRate:qs,HttpMethod:Ws,DEFAULT_BREEZE_ENDPOINT:lu,AIData:vu,AIBase:mu,Envelope:wu,Event:Xn,Exception:Cn,Metric:dr,PageView:Yn,PageViewData:Js,RemoteDependencyData:hr,Trace:Rr,PageViewPerformance:kr,Data:Dr,SeverityLevel:lo,ConfigurationManager:np,ContextTagKeys:tl,DataSanitizer:gh,TelemetryItemCreator:pr,CtxTagKeys:Bt,Extensions:An,DistributedTracingModes:Qn},ju=function(){function e(t){var n=this;n._snippetVersion=""+(t.sv||t.version||""),t.queue=t.queue||[],t.version=t.version||2;var r=t.config||{};if(r.connectionString){var i=Bh(r.connectionString),a=i.ingestionendpoint;r.endpointUrl=a?a+"/v2/track":r.endpointUrl,r.instrumentationKey=i.instrumentationkey||r.instrumentationKey}n.appInsights=new Ru,n.properties=new $u,n.dependencies=new zu,n.core=new Zc,n._sender=new Lu,n.snippet=t,n.config=r,n.getSKUDefaults()}return l(e,"t"),e.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},e.prototype.trackEvent=function(t,n){this.appInsights.trackEvent(t,n)},e.prototype.trackPageView=function(t){var n=t||{};this.appInsights.trackPageView(n)},e.prototype.trackPageViewPerformance=function(t){var n=t||{};this.appInsights.trackPageViewPerformance(n)},e.prototype.trackException=function(t){t&&!t.exception&&t.error&&(t.exception=t.error),this.appInsights.trackException(t)},e.prototype._onerror=function(t){this.appInsights._onerror(t)},e.prototype.trackTrace=function(t,n){this.appInsights.trackTrace(t,n)},e.prototype.trackMetric=function(t,n){this.appInsights.trackMetric(t,n)},e.prototype.startTrackPage=function(t){this.appInsights.startTrackPage(t)},e.prototype.stopTrackPage=function(t,n,r,i){this.appInsights.stopTrackPage(t,n,r,i)},e.prototype.startTrackEvent=function(t){this.appInsights.startTrackEvent(t)},e.prototype.stopTrackEvent=function(t,n,r){this.appInsights.stopTrackEvent(t,n,r)},e.prototype.addTelemetryInitializer=function(t){return this.appInsights.addTelemetryInitializer(t)},e.prototype.setAuthenticatedUserContext=function(t,n,r){r===void 0&&(r=!1),this.properties.context.user.setAuthenticatedUserContext(t,n,r)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(t){this.dependencies.trackDependencyData(t)},e.prototype.flush=function(t){var n=this;t===void 0&&(t=!0),ea(this.core,function(){return"AISKU.flush"},function(){ft(n.core.getTransmissionControls(),function(r){ft(r,function(i){i.flush(t)})})},null,t)},e.prototype.onunloadFlush=function(t){t===void 0&&(t=!0),ft(this.core.getTransmissionControls(),function(n){ft(n,function(r){r.onunloadFlush?r.onunloadFlush():r.flush(t)})})},e.prototype.loadAppInsights=function(t,n,r){var i=this;t===void 0&&(t=!1);var a=this;function o(s){if(s){var u="";Ne(a._snippetVersion)||(u+=a._snippetVersion),t&&(u+=".lg"),a.context&&a.context.internal&&(a.context.internal.snippetVer=u||"-"),tn(a,function(c,f){ut(c)&&!wt(f)&&c&&c[0]!=="_"&&Wu.indexOf(c)===-1&&(s[c]=f)})}}return l(o,"o"),t&&a.config.extensions&&a.config.extensions.length>0&&lr("Extensions not allowed in legacy mode"),ea(a.core,function(){return"AISKU.loadAppInsights"},function(){var s=[];s.push(a._sender),s.push(a.properties),s.push(a.dependencies),s.push(a.appInsights),a.core.initialize(a.config,s,n,r),a.context=a.properties.context,qu&&a.context&&(a.context.internal.sdkSrc=qu),o(a.snippet),a.emptyQueue(),a.pollInternalLogs(),a.addHousekeepingBeforeUnload(i)}),a},e.prototype.updateSnippetDefinitions=function(t){wd(t,this,function(n){return n&&Wu.indexOf(n)===-1})},e.prototype.emptyQueue=function(){var t=this;try{if(Sr(t.snippet.queue)){for(var n=t.snippet.queue.length,r=0;r<n;r++){var i=t.snippet.queue[r];i()}t.snippet.queue=void 0,delete t.snippet.queue}}catch(o){var a={};o&&wt(o.toString)&&(a.exception=o.toString())}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(t){if(Ss()||xd()){var n=l(function(){t.onunloadFlush(!1),ft(t.appInsights.core._extensions,function(i){if(i.identifier===ha)return i&&i.context&&i.context._sessionManager&&i.context._sessionManager.backup(),-1})},"r");if(!t.appInsights.config.disableFlushOnBeforeUnload){var r=Si("beforeunload",n);r=Si("unload",n)||r,r=Si("pagehide",n)||r,r=Si("visibilitychange",n)||r,!r&&!Am()&&t.appInsights.core.logger.throwInternal(Fe.CRITICAL,Ce.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}t.appInsights.config.disableFlushOnUnload||(Si("pagehide",n),Si("visibilitychange",n))}},e.prototype.getSender=function(){return this._sender},e.prototype.getSKUDefaults=function(){var t=this;t.config.diagnosticLogInterval=t.config.diagnosticLogInterval&&t.config.diagnosticLogInterval>0?t.config.diagnosticLogInterval:1e4},e}(),function(){var e=null,t=!1,n=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var r=(document||{}).currentScript;r&&(e=r.src)}catch(s){}if(e)try{var i=e.toLowerCase();if(i){for(var a="",o=0;o<n.length;o++)if(i.indexOf(n[o])!==-1){a="cdn"+(o+1),i.indexOf("/scripts/")===-1&&(i.indexOf("/next/")!==-1?a+="-next":i.indexOf("/beta/")!==-1&&(a+="-beta")),qu=a+(t?".mod":"");break}}}catch(s){}}()}),zp,qp,ew=ye(()=>{nn(),gt(),zp=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],qp=function(){function e(t,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=e.getDefaultConfig(t.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return l(e,"t"),e.getDefaultConfig=function(t){return t||(t={}),t.endpointUrl=t.endpointUrl||"https://dc.services.visualstudio.com/v2/track",t.sessionRenewalMs=30*60*1e3,t.sessionExpirationMs=24*60*60*1e3,t.maxBatchSizeInBytes=t.maxBatchSizeInBytes>0?t.maxBatchSizeInBytes:102400,t.maxBatchInterval=isNaN(t.maxBatchInterval)?15e3:t.maxBatchInterval,t.enableDebug=Dt(t.enableDebug),t.disableExceptionTracking=Dt(t.disableExceptionTracking),t.disableTelemetry=Dt(t.disableTelemetry),t.verboseLogging=Dt(t.verboseLogging),t.emitLineDelimitedJson=Dt(t.emitLineDelimitedJson),t.diagnosticLogInterval=t.diagnosticLogInterval||1e4,t.autoTrackPageVisitTime=Dt(t.autoTrackPageVisitTime),(isNaN(t.samplingPercentage)||t.samplingPercentage<=0||t.samplingPercentage>=100)&&(t.samplingPercentage=100),t.disableAjaxTracking=Dt(t.disableAjaxTracking),t.maxAjaxCallsPerView=isNaN(t.maxAjaxCallsPerView)?500:t.maxAjaxCallsPerView,t.isBeaconApiDisabled=Dt(t.isBeaconApiDisabled,!0),t.disableCorrelationHeaders=Dt(t.disableCorrelationHeaders),t.correlationHeaderExcludedDomains=t.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],t.disableFlushOnBeforeUnload=Dt(t.disableFlushOnBeforeUnload),t.disableFlushOnUnload=Dt(t.disableFlushOnUnload,t.disableFlushOnBeforeUnload),t.enableSessionStorageBuffer=Dt(t.enableSessionStorageBuffer,!0),t.isRetryDisabled=Dt(t.isRetryDisabled),t.isCookieUseDisabled=Dt(t.isCookieUseDisabled),t.isStorageUseDisabled=Dt(t.isStorageUseDisabled),t.isBrowserLinkTrackingEnabled=Dt(t.isBrowserLinkTrackingEnabled),t.enableCorsCorrelation=Dt(t.enableCorsCorrelation),t},e.prototype.addTelemetryInitializers=function(t){var n=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer(function(r){n._processLegacyInitializers(r)}),this._hasLegacyInitializers=!0),this._queue.push(t)},e.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},e.prototype.startTrackPage=function(t){this.appInsightsNew.startTrackPage(t)},e.prototype.stopTrackPage=function(t,n,r,i){this.appInsightsNew.stopTrackPage(t,n,r)},e.prototype.trackPageView=function(t,n,r,i,a){var o={name:t,uri:n,properties:r,measurements:i};this.appInsightsNew.trackPageView(o)},e.prototype.trackEvent=function(t,n,r){this.appInsightsNew.trackEvent({name:t})},e.prototype.trackDependency=function(t,n,r,i,a,o,s){this.appInsightsNew.trackDependencyData({id:t,target:r,type:i,duration:a,properties:{HttpMethod:n},success:o,responseCode:s})},e.prototype.trackException=function(t,n,r,i,a){this.appInsightsNew.trackException({exception:t})},e.prototype.trackMetric=function(t,n,r,i,a,o){this.appInsightsNew.trackMetric({name:t,average:n,sampleCount:r,min:i,max:a})},e.prototype.trackTrace=function(t,n,r){this.appInsightsNew.trackTrace({message:t,severityLevel:r})},e.prototype.flush=function(t){this.appInsightsNew.flush(t)},e.prototype.setAuthenticatedUserContext=function(t,n,r){this.appInsightsNew.context.user.setAuthenticatedUserContext(t,n,r)},e.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},e.prototype._onerror=function(t,n,r,i,a){this.appInsightsNew._onerror({message:t,url:n,lineNumber:r,columnNumber:i,error:a})},e.prototype.startTrackEvent=function(t){this.appInsightsNew.startTrackEvent(t)},e.prototype.stopTrackEvent=function(t,n,r){this.appInsightsNew.stopTrackEvent(t,n,r)},e.prototype.downloadAndSetup=function(t){lr("downloadAndSetup not implemented in web SKU")},e.prototype.updateSnippetDefinitions=function(t){wd(t,this,function(n){return n&&zp.indexOf(n)===-1})},e.prototype.loadAppInsights=function(){var t=this;if(this.config.iKey){var n=this.trackPageView;this.trackPageView=function(a,o,s){n.apply(t,[null,a,o,s])}}var r="logPageView";typeof this.snippet[r]=="function"&&(this[r]=function(a,o,s){t.trackPageView(null,a,o,s)});var i="logEvent";return typeof this.snippet[i]=="function"&&(this[i]=function(a,o,s){t.trackEvent(a,o,s)}),this},e.prototype._processLegacyInitializers=function(t){return t.tags[la]=this._queue,t},e}()}),Wp,tw=ye(()=>{ew(),Hp(),gt(),Wp=function(){function e(){}return l(e,"t"),e.getAppInsights=function(t,n){var r=new ju(t),i=n!==2;if(aa(),n===2)return r.updateSnippetDefinitions(t),r.loadAppInsights(i),r;var a=new qp(t,r);return a.updateSnippetDefinitions(t),r.loadAppInsights(i),a},e}()}),jp={};tm(jp,{AppInsightsCore:()=>Zc,ApplicationAnalytics:()=>Ru,ApplicationInsights:()=>ju,ApplicationInsightsContainer:()=>Wp,BaseCore:()=>Gc,BaseTelemetryPlugin:()=>bi,CoreUtils:()=>Hs,DependenciesPlugin:()=>zu,DistributedTracingModes:()=>Qn,Event:()=>Xn,Exception:()=>Cn,LoggingSeverity:()=>Fe,Metric:()=>dr,NotificationManager:()=>Kc,PageView:()=>Yn,PageViewPerformance:()=>kr,PerfEvent:()=>ta,PerfManager:()=>kc,PropertiesPlugin:()=>$u,RemoteDependencyData:()=>hr,Sender:()=>Lu,SeverityLevel:()=>lo,Telemetry:()=>Up,Trace:()=>Rr,Util:()=>gu,_InternalMessageId:()=>Ce,doPerf:()=>ea});var nw=ye(()=>{Hp(),tw(),gt(),nn(),bp(),lp(),Bp(),Mp()}),rw=l(class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}flush(){return tc(this,null,function*(){this._telemetryClient&&(yield this._telemetryClient.flush(),this._telemetryClient=void 0)})}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},"Ln"),ei=l(class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",t="enableTelemetry";try{let n=this.vscodeAPI.env.telemetryConfiguration;return n.isUsageEnabled&&n.isErrorsEnabled&&n.isCrashEnabled?"on":n.isErrorsEnabled&&n.isCrashEnabled?"error":"off"}catch(n){return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(t)?"on":"off"}}static applyReplacements(e,t){for(let n of Object.keys(e))for(let r of t)r.lookup.test(n)&&(r.replacementString!==void 0?e[n]=r.replacementString:delete e[n])}static getInstance(e){return ei._instance||(ei._instance=new ei(e)),ei._instance}},"Ze"),iw=l(class{constructor(e,t,n,r,i,a){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!a,this.updateUserOptStatus(),i.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(i.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=ei.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(n=>{e.indexOf(`${n}`)===0&&(t=n)}),t}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(e==null)return"";let r=[];this.vscodeAPI.env.appRoot!==""&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let a=[];for(let c of r)for(;(n=c.exec(e))&&n;)a.push([n.index,c.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,u=0;for(i="";(n=s.exec(e))&&n;)n[0]&&!o.test(n[0])&&a.every(([c,f])=>n.index<c||n.index>=f)&&(i+=e.substring(u,n.index)+"<REDACTED: user-file-path>",u=s.lastIndex);u<e.length&&(i+=e.substr(u))}for(let a of r)i=i.replace(a,"");return i}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t=Object.create(null);for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":o.test(r)?t[n]="<REDACTED: token>":t[n]=r}return t}get telemetryLevel(){switch(ei.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,n,r,i){if((this.userOptIn||i)&&e!==""){if(t=ar(ar({},t),this.getCommonProperties()),r){let a=this.cloneAndChange(t,(o,s)=>this.anonymizeFilePaths(s,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(a)}e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!0,!1)}sendRawTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1,!1)}sendDangerousTelemetryEvent(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,n,r,!0)}internalSendTelemetryErrorEvent(e,t,n,r,i,a){if((this.shouldSendErrorTelemetry()||a)&&e!==""){if(t=ar(ar({},t),this.getCommonProperties()),i){let o=this.cloneAndChange(t,(s,u)=>r===void 0||r.indexOf(s)!==-1?"REDACTED":this.anonymizeFilePaths(u,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(o)}e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:n})}}sendTelemetryErrorEvent(e,t,n,r){this.internalSendTelemetryErrorEvent(e,t,n,r,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,n,r,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,n,r,i,!0)}internalSendTelemetryException(e,t,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&e){if(t=ar(ar({},t),this.getCommonProperties()),r){let a=this.cloneAndChange(t,(o,s)=>this.anonymizeFilePaths(s,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(a)}this.telemetryAppender.logException(e,{properties:t,measurements:n})}}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!0,!1)}sendDangerousTelemetryException(e,t,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},"_n"),aw=l((e,t)=>tc(void 0,null,function*(){let n;try{let r=yield Promise.resolve().then(()=>(nw(),jp)),i;e&&e.indexOf("AIF-")===0&&(i="https://vortex.data.microsoft.com/collect/v1"),n=new r.ApplicationInsights({config:{instrumentationKey:e,endpointUrl:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),n.loadAppInsights(),i&&fetch(i).catch(()=>n=void 0)}catch(r){return Promise.reject(r)}return{logEvent:(r,i)=>{let a=ar(ar({},i==null?void 0:i.properties),i==null?void 0:i.measurements);t!=null&&t.length&&ei.applyReplacements(a,t),n==null||n.trackEvent({name:r},a)},logException:(r,i)=>{let a=ar(ar({},i==null?void 0:i.properties),i==null?void 0:i.measurements);t!=null&&t.length&&ei.applyReplacements(a,t),n==null||n.trackException({exception:r,properties:a})},flush:()=>tc(void 0,null,function*(){n==null||n.flush()})}}),"El"),ow=l(class extends iw{constructor(e,t,n,r,i){let a=new rw(n,o=>aw(o,i));n&&n.indexOf("AIF-")===0&&(r=!0),super(e,t,a,{release:navigator.appVersion,platform:"web",architecture:"web"},m,r)}},"po");/*!
 * Microsoft Dynamic Proto Utility, 1.1.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */const sw="Type of classified event does not match event properties",Vu=l(class{constructor(e){this.context=e,this.sharedProperties={},Vu._instance=this,this.reporter=new ow(e.extension.id,e.extension.packageJSON.version,Vu.aiKey,!0)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(e,t){t!==sw&&this.reporter.sendTelemetryEvent(e,{...this.sharedProperties,...t})}sendEvent(e,t,n){this.reporter.sendTelemetryEvent(e,{...this.sharedProperties,...t},n)}sendErrorEvent(e,t,n,r){this.reporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...t},n,r)}sendException(e,t,n){this.reporter.sendTelemetryException(e,{...this.sharedProperties,...t},n)}setSharedProperty(e,t){this.sharedProperties[e]=t}reportWorkbenchLoadResult(e){const t="_codespaces.webeditor.connectWorkspace";m.env.appHost==="github.dev"&&(Y.debug(`Executing ${t}`),e={...e,errorDetail:e.errorDetail instanceof Error?e.errorDetail.name:void 0},m.commands.executeCommand(t,e).then(n=>{},n=>{Y.debug(`Failed to execute ${t}`,n)}))}},"_TelemetryService");let Vp=Vu;Vp.aiKey="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let mo;var Gu;(function(e){function t(n){const r=cw(n);return mo=m.env.uiKind===m.UIKind.Web,Y.warn(`Running on the ${mo?"web":"desktop"}${n.extensionRuntime!==m.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}l(t,"configure"),e.configure=t})(Gu||(Gu={}));const lw=/\/workspaceStorage\/(?<id>[^/]+)/i;function cw(e){var t;if(e.storageUri===void 0)return"";const n=lw.exec(e.storageUri.path);let r;if((t=n==null?void 0:n.groups)==null?void 0:t.id)r=n.groups.id;else{r=e.storageUri.path;const i=Wi(e.globalStorageUri.path,r),a=`/${e.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}l(cw,"getWorkspaceId");function Ab(e,t){return e.reduce((r,i)=>{const a=t(i),o=r.get(a);return o===void 0?r.set(a,[i]):o.push(i),r},new Map)}l(Ab,"groupBy");function uw(e){let t=0;for(const n of e){if(n===0)return!0;if(t++,t>8e3)break}return!1}l(uw,"isBinary");function Ku(e,t,n=r=>r){return[...e.reduce((i,a)=>{const o=t(a),s=i.get(o);if(s===void 0)i.set(o,a);else{const u=n(s,a);u!==void 0&&i.set(o,u)}return i},new Map).values()]}l(Ku,"uniqueBy");const Bn=_.loadMessageBundle(),vo=l(class{constructor(e,t,n,r){this.providerService=e,this.storageService=t,this.changeStore=n,this.workspaceId=r,this._onDidChange=new m.EventEmitter,this.cache=new Map,this.lock=new Nt("WorkspaceRepositories"),this.disposable=m.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const e=await m.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void m.window.showTextDocument(e)}onChangeStoreChanged(e){const t=Ku(e.map(n=>n.rootUri),n=>k(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(t)}onRepositoriesChanged(e){this.addOrUpdate(e.added)}onRepositoryChanged(e){this.addOrUpdate([e.repository])}async get(e){let t=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(e){const n=k(e);t=t.filter(r=>k(r.canonicalUri)===n)}return t}async getCore(){return this.fromStorage(await this.storageService.get(vo.storageKey))}async getRecents(e=10){return(await this.get()).slice(0,e)}async getRemoteWorkspaceSourceProvider(e){const t=await this.getRecents();if(t.length!==0)return t.filter(n=>n.provider.id===e)}refresh(){this.cache.clear()}async remove(e){await this.lock.synchronizeWrite(async()=>{const t=await this.getCore(),n=`${e.workspaceId}/${k(e.uri)}`,r=t.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const o={title:Bn("remove remote repo prompt confirm","Yes")},s={title:Bn("remove remote repo prompt cancel","No"),isCloseAffordance:!0};if(await m.window.showWarningMessage(a.length===1?Bn("remove remote repo prompt file changed",`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):Bn("remove remote repo prompt files changes",`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},o,s)!==o)return;await i.discardAll(r.uri)}this.cache.clear(),t.delete(n);try{await this.storageService.store(vo.storageKey,this.toStorage(t))}catch(o){throw Y.error(o,"Failed to save workspace repositories"),o}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(e){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const t=await this.getCore();for(const n of e){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),o=await this.changeStore.getChanges(n.uri);t.set(`${this.workspaceId}/${k(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&Le.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:fw(o),timestamp:Date.now()})}try{await this.storageService.store(vo.storageKey,this.toStorage(t))}catch(n){throw Y.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(e){if(!e)return new Map;try{const t=JSON.parse(e,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&z(r)?m.Uri.from(r):r);return new Map(t.workspaceRepositories)}catch(t){return Y.error(t,"Failed to deserialize workspace repositories"),new Map}}toStorage(e){const t={schemaVersion:vo.storageSchemaVersion,workspaceRepositories:[...e]};return JSON.stringify(t)}},"_WorkspaceRepositories");let Zu=vo;Zu.storageKey="workspaceRepositories",Zu.storageSchemaVersion=1;function Gp(e){return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}l(Gp,"hasChanges");function Ib(e){return Gp(e.changes)}l(Ib,"hasUncommittedChanges");function fw(e){let t=0,n=0,r=0;for(const i of e)switch(i.type){case H.Created:t++;break;case H.Changed:n++;break;case H.Deleted:r++;break}return t||n||r?{added:t,changed:n,deleted:r,timestamp:Date.now()}:void 0}l(fw,"toChangesSummary");function Tb(e,{compact:t=!0,preamble:n,separator:r=", ",short:i=!1,single:a=!1}={}){if(!Gp(e))return Bn("no changes","Everything up to date");const{added:o,changed:s,deleted:u}=e;if(a){const f=o+s+u;return f===1?Bn("summary change","{0} change",f):Bn("changes changes","{0} changes",f)}let c=`${n!=null?n:""}`;return(o||!t)&&(c+=i?`+${o}`:o===1?Bn("file added","{0} file added",o):Bn("files added","{0} files added",o),(s||u||!t)&&(c+=r)),(s||!t)&&(c+=i?`~${s}`:s===1?Bn("file changed","{0} file changed",s):Bn("files changed","{0} files changed",s),(u||!t)&&(c+=r)),(u||!t)&&(c+=i?`-${u}`:u===1?Bn("file deleted","{0} file deleted",u):Bn("files deleted","{0} files deleted",u)),c}l(Tb,"formatChangesSummary");var Qu=__webpack_require__(7360),dw=__webpack_require__(919),Xu=__webpack_require__.n(dw);function Yu(e,t,n){if(!(t==null?void 0:t.length)&&!(n==null?void 0:n.length))return new Set(e);let r;if(t==null?void 0:t.length){const i=new Set([...t,...t.map(o=>`${o}/**`)]),a=Xu()(e,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=Xu().not(e,[...i],{dot:!0,nocase:!0});r=new Set(a)}else Xu()(e,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}l(Yu,"globFilter");const hw="";function pw(...e){if(e.length===1){const t=e[0];return t===void 0?hw:typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"||t instanceof Error?String(t):t instanceof m.Uri?t.toString():JSON.stringify(t)}return JSON.stringify(e)}l(pw,"serialize_defaultResolver");function Ju(e){return(t,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...o){const s=o.length===0?a:`${a}$${(e!=null?e:pw)(...o)}`;Object.prototype.hasOwnProperty.call(this,s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[s];const c=l(()=>i.apply(this,o),"run");return u===void 0?u=c():u=u.then(c,c),this[s]=u,u}}}l(Ju,"serialize");function*gw(e,t){for(const n of e)yield*t(n)}l(gw,"flatMap");function*Rb(e,t){for(const n of e)t(n)&&(yield n)}l(Rb,"filter");function*ll(e,t){for(const n of e){const r=t(n);r!=null&&(yield r)}}l(ll,"filterMap");function mw(e,t){for(const n of e)if(t(n))return n}l(mw,"find");function kb(e,t){let n="";const r=e[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=t}return n}l(kb,"join");function*Kp(e,t){for(const n of e)yield t(n)}l(Kp,"map");function Db(e,t){for(const n of e)if(t(n))return!0;return!1}l(Db,"some");function*vw(...e){for(const t of e)for(const n of t)yield n}l(vw,"union");function*Fb(e){const t=new Set;for(const n of e)t.has(n)||(t.add(n),yield n)}l(Fb,"unique");function ww(e){return e.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}l(ww,"escapeRegExpCharacters");function yw(e,t,n={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=ww(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e=`\\b${e}`),/\B/.test(e.charAt(e.length-1))||(e=`${e}\\b`));let r="gmu";return n.matchCase||(r+="i"),new RegExp(e,r)}l(yw,"createRegExp");let Zp,Qp,ef;const _w=l((e,t,n,r)=>{const i=`${t.join("--")};;;;${n.join("--")}`,a=e.map(s=>s.path).join("::");if(Zp===a&&i==Qp&&ef)return ef;const o=Yu((r?e.filter(s=>s.size<r):e).map(s=>s.path),t,n);return Zp=a,Qp=i,ef=o,o},"generateIncludeSet"),xw=l((e,t,n,r)=>{var i;const a=[];let o;if(typeof e=="string")o=e;else{const f=e;if(f[0]==255&&f[1]==254)o=new TextDecoder("utf-16le").decode(f);else if(f[0]==254&&f[1]==255)o=new TextDecoder("utf-16be").decode(f);else if(o=new TextDecoder("utf8").decode(f),o.slice(0,1e3).includes("\uFFFD")&&f.includes(0))return[]}const s=[];let u=null,c=r.remainingResultQuota;for(;(c===void 0||c>=0)&&(u=n.exec(o));)s.push({matchStartIndex:u.index,matchedText:u[0]}),c!==void 0&&c--;if(s.length){const f=new Set,v=new Set,p=[],w=l(O=>o.slice(p[O].start,p[O].end),"readLine");let I=0,R=null;const A=/\r?\n/g;for(;R=A.exec(o);)p.push({start:I,end:R.index}),I=R.index+R[0].length;I<o.length&&p.push({start:I,end:o.length});let D=0;for(const{matchStartIndex:O,matchedText:G}of s){if(c!==void 0&&c<0)break;for(;Boolean(p[D+1])&&O>p[D].end;)D++;let W=D;for(;Boolean(p[W+1])&&O+G.length>p[W].end;)W++;if(r.beforeContext)for(let ue=Math.max(0,D-r.beforeContext);ue<D;ue++)f.add(ue);let re="",we=0;for(let ue=D;ue<=W;ue++){let Re=w(ue);((i=r.previewOptions)==null?void 0:i.charsPerLine)&&Re.length>r.previewOptions.charsPerLine&&(we=Math.max(O-p[D].start-20,0),Re=Re.substr(we,r.previewOptions.charsPerLine)),re+=`${Re}
`,v.add(ue)}const he=new m.Range(D,O-p[D].start,W,O+G.length-p[W].start),fe=new m.Range(0,O-p[D].start-we,W-D,O+G.length-p[W].start-(W===D?we:0)),Ee={uri:m.Uri.file(t),ranges:he,preview:{text:re,matches:fe}};if(a.push(Ee),r.afterContext)for(let ue=W+1;ue<=Math.min(W+r.afterContext,p.length-1);ue++)f.add(ue)}for(const O of f)v.has(O)||a.push({uri:m.Uri.file(t),text:w(O),lineNumber:O+1})}return a},"getFileResults");/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const bw=4,Xp=0,Yp=1,Ew=2;function wa(e){let t=e.length;for(;--t>=0;)e[t]=0}l(wa,"zero$1");const Sw=0,Jp=1,Cw=2,Aw=3,Iw=258,tf=29,wo=256,yo=wo+1+tf,ya=30,nf=19,eg=2*yo+1,ki=15,rf=16,Tw=7,af=256,tg=16,ng=17,rg=18,of=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),cl=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ig=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kw=512,Nr=new Array((yo+2)*2);wa(Nr);const _o=new Array(ya*2);wa(_o);const xo=new Array(kw);wa(xo);const bo=new Array(Iw-Aw+1);wa(bo);const sf=new Array(tf);wa(sf);const ul=new Array(ya);wa(ul);function lf(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}l(lf,"StaticTreeDesc");let ag,og,sg;function cf(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}l(cf,"TreeDesc");const lg=l(e=>e<256?xo[e]:xo[256+(e>>>7)],"d_code"),Eo=l((e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},"put_short"),kn=l((e,t,n)=>{e.bi_valid>rf-n?(e.bi_buf|=t<<e.bi_valid&65535,Eo(e,e.bi_buf),e.bi_buf=t>>rf-e.bi_valid,e.bi_valid+=n-rf):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},"send_bits"),gr=l((e,t,n)=>{kn(e,n[t*2],n[t*2+1])},"send_code"),cg=l((e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},"bi_reverse"),Dw=l(e=>{e.bi_valid===16?(Eo(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},"bi_flush"),Fw=l((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,f,v,p,w,I,R=0;for(p=0;p<=ki;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<eg;c++)f=e.heap[c],p=n[n[f*2+1]*2+1]+1,p>u&&(p=u,R++),n[f*2+1]=p,!(f>r)&&(e.bl_count[p]++,w=0,f>=s&&(w=o[f-s]),I=n[f*2],e.opt_len+=I*(p+w),a&&(e.static_len+=I*(i[f*2+1]+w)));if(R!==0){do{for(p=u-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[u]--,R-=2}while(R>0);for(p=u;p!==0;p--)for(f=e.bl_count[p];f!==0;)v=e.heap[--c],!(v>r)&&(n[v*2+1]!==p&&(e.opt_len+=(p-n[v*2+1])*n[v*2],n[v*2+1]=p),f--)}},"gen_bitlen"),ug=l((e,t,n)=>{const r=new Array(ki+1);let i=0,a,o;for(a=1;a<=ki;a++)r[a]=i=i+n[a-1]<<1;for(o=0;o<=t;o++){let s=e[o*2+1];s!==0&&(e[o*2]=cg(r[s]++,s))}},"gen_codes"),Nw=l(()=>{let e,t,n,r,i;const a=new Array(ki+1);for(n=0,r=0;r<tf-1;r++)for(sf[r]=n,e=0;e<1<<of[r];e++)bo[n++]=r;for(bo[n-1]=r,i=0,r=0;r<16;r++)for(ul[r]=i,e=0;e<1<<cl[r];e++)xo[i++]=r;for(i>>=7;r<ya;r++)for(ul[r]=i<<7,e=0;e<1<<cl[r]-7;e++)xo[256+i++]=r;for(t=0;t<=ki;t++)a[t]=0;for(e=0;e<=143;)Nr[e*2+1]=8,e++,a[8]++;for(;e<=255;)Nr[e*2+1]=9,e++,a[9]++;for(;e<=279;)Nr[e*2+1]=7,e++,a[7]++;for(;e<=287;)Nr[e*2+1]=8,e++,a[8]++;for(ug(Nr,yo+1,a),e=0;e<ya;e++)_o[e*2+1]=5,_o[e*2]=cg(e,5);ag=new lf(Nr,of,wo+1,yo,ki),og=new lf(_o,cl,0,ya,ki),sg=new lf(new Array(0),Rw,0,nf,Tw)},"tr_static_init"),fg=l(e=>{let t;for(t=0;t<yo;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ya;t++)e.dyn_dtree[t*2]=0;for(t=0;t<nf;t++)e.bl_tree[t*2]=0;e.dyn_ltree[af*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},"init_block"),dg=l(e=>{e.bi_valid>8?Eo(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},"bi_windup"),Lw=l((e,t,n,r)=>{dg(e),r&&(Eo(e,n),Eo(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},"copy_block"),hg=l((e,t,n,r)=>{const i=t*2,a=n*2;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},"smaller"),uf=l((e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&hg(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!hg(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},"pqdownheap"),pg=l((e,t,n)=>{let r,i,a=0,o,s;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],i=e.pending_buf[e.l_buf+a],a++,r===0?gr(e,i,t):(o=bo[i],gr(e,o+wo+1,t),s=of[o],s!==0&&(i-=sf[o],kn(e,i,s)),r--,o=lg(r),gr(e,o,n),s=cl[o],s!==0&&(r-=ul[o],kn(e,r,s)));while(a<e.last_lit);gr(e,af,t)},"compress_block"),ff=l((e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,u=-1,c;for(e.heap_len=0,e.heap_max=eg,o=0;o<a;o++)n[o*2]!==0?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)uf(e,n,o);c=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],uf(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[c*2]=n[o*2]+n[s*2],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=c,e.heap[1]=c++,uf(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Fw(e,t),ug(n,u,e.bl_count)},"build_tree"),gg=l((e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,u=7,c=4;for(o===0&&(u=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],!(++s<u&&a===o)&&(s<c?e.bl_tree[a*2]+=s:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[tg*2]++):s<=10?e.bl_tree[ng*2]++:e.bl_tree[rg*2]++,s=0,i=a,o===0?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4))},"scan_tree"),mg=l((e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,u=7,c=4;for(o===0&&(u=138,c=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<u&&a===o)){if(s<c)do gr(e,a,e.bl_tree);while(--s!=0);else a!==0?(a!==i&&(gr(e,a,e.bl_tree),s--),gr(e,tg,e.bl_tree),kn(e,s-3,2)):s<=10?(gr(e,ng,e.bl_tree),kn(e,s-3,3)):(gr(e,rg,e.bl_tree),kn(e,s-11,7));s=0,i=a,o===0?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4)}},"send_tree"),Bw=l(e=>{let t;for(gg(e,e.dyn_ltree,e.l_desc.max_code),gg(e,e.dyn_dtree,e.d_desc.max_code),ff(e,e.bl_desc),t=nf-1;t>=3&&e.bl_tree[ig[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},"build_bl_tree"),$w=l((e,t,n,r)=>{let i;for(kn(e,t-257,5),kn(e,n-1,5),kn(e,r-4,4),i=0;i<r;i++)kn(e,e.bl_tree[ig[i]*2+1],3);mg(e,e.dyn_ltree,t-1),mg(e,e.dyn_dtree,n-1)},"send_all_trees"),Pw=l(e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Xp;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Yp;for(n=32;n<wo;n++)if(e.dyn_ltree[n*2]!==0)return Yp;return Xp},"detect_data_type");let vg=!1;const Mw=l(e=>{vg||(Nw(),vg=!0),e.l_desc=new cf(e.dyn_ltree,ag),e.d_desc=new cf(e.dyn_dtree,og),e.bl_desc=new cf(e.bl_tree,sg),e.bi_buf=0,e.bi_valid=0,fg(e)},"_tr_init$1"),wg=l((e,t,n,r)=>{kn(e,(Sw<<1)+(r?1:0),3),Lw(e,t,n,!0)},"_tr_stored_block$1"),Ow=l(e=>{kn(e,Jp<<1,3),gr(e,af,Nr),Dw(e)},"_tr_align$1"),Uw=l((e,t,n,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===Ew&&(e.strm.data_type=Pw(e)),ff(e,e.l_desc),ff(e,e.d_desc),o=Bw(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?wg(e,t,n,r):e.strategy===bw||a===i?(kn(e,(Jp<<1)+(r?1:0),3),pg(e,Nr,_o)):(kn(e,(Cw<<1)+(r?1:0),3),$w(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),pg(e,e.dyn_ltree,e.dyn_dtree)),fg(e),r&&dg(e)},"_tr_flush_block$1"),Hw=l((e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(bo[n]+wo+1)*2]++,e.dyn_dtree[lg(t)*2]++),e.last_lit===e.lit_bufsize-1),"_tr_tally$1");var zw=Mw,qw=wg,Ww=Uw,jw=Hw,Vw=Ow,Gw={_tr_init:zw,_tr_stored_block:qw,_tr_flush_block:Ww,_tr_tally:jw,_tr_align:Vw},So=l((e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0},"adler32");const Kw=l(()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},"makeTable"),Zw=new Uint32Array(Kw());var ln=l((e,t,n,r)=>{const i=Zw,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1},"crc32"),Di={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Fi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Qw,_tr_stored_block:Xw,_tr_flush_block:Yw,_tr_tally:ti,_tr_align:Jw}=Gw,{Z_NO_FLUSH:Ni,Z_PARTIAL_FLUSH:ey,Z_FULL_FLUSH:ty,Z_FINISH:ni,Z_BLOCK:yg,Z_OK:mr,Z_STREAM_END:_g,Z_STREAM_ERROR:Un,Z_DATA_ERROR:ny,Z_BUF_ERROR:df,Z_DEFAULT_COMPRESSION:ry,Z_FILTERED:iy,Z_HUFFMAN_ONLY:fl,Z_RLE:ay,Z_FIXED:oy,Z_DEFAULT_STRATEGY:sy,Z_UNKNOWN:ly,Z_DEFLATED:dl}=Fi,cy=9,uy=15,fy=8,dy=29,hf=256+1+dy,hy=30,py=19,gy=2*hf+1,my=15,vt=3,ri=258,Jn=ri+vt+1,vy=32,hl=42,pf=69,pl=73,gl=91,ml=103,Li=113,Co=666,an=1,Ao=2,Bi=3,_a=4,wy=3,ii=l((e,t)=>(e.msg=Di[t],t),"err"),xg=l(e=>(e<<1)-(e>4?9:0),"rank"),ai=l(e=>{let t=e.length;for(;--t>=0;)e[t]=0},"zero");let oi=l((e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,"HASH_ZLIB");const si=l(e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},"flush_pending"),un=l((e,t)=>{Yw(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,si(e.strm)},"flush_block_only"),St=l((e,t)=>{e.pending_buf[e.pending++]=t},"put_byte"),Io=l((e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},"putShortMSB"),yy=l((e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=So(e.adler,t,i,n):e.state.wrap===2&&(e.adler=ln(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},"read_buf"),bg=l((e,t)=>{let n=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match;const u=e.strstart>e.w_size-Jn?e.strstart-(e.w_size-Jn):0,c=e.window,f=e.w_mask,v=e.prev,p=e.strstart+ri;let w=c[r+o-1],I=c[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(c[i+o]!==I||c[i+o-1]!==w||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<p);if(a=ri-(p-r),r=p-ri,a>o){if(e.match_start=t,o=a,a>=s)break;w=c[r+o-1],I=c[r+o]}}while((t=v[t&f])>u&&--n!=0);return o<=e.lookahead?o:e.lookahead},"longest_match"),$i=l(e=>{const t=e.w_size;let n,r,i,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Jn)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);a+=t}if(e.strm.avail_in===0)break;if(r=yy(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=vt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=oi(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=oi(e,e.ins_h,e.window[o+vt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<vt)););}while(e.lookahead<Jn&&e.strm.avail_in!==0)},"fill_window"),_y=l((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if($i(e),e.lookahead===0&&t===Ni)return an;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,un(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Jn&&(un(e,!1),e.strm.avail_out===0))return an}return e.insert=0,t===ni?(un(e,!0),e.strm.avail_out===0?Bi:_a):(e.strstart>e.block_start&&(un(e,!1),e.strm.avail_out===0),an)},"deflate_stored"),gf=l((e,t)=>{let n,r;for(;;){if(e.lookahead<Jn){if($i(e),e.lookahead<Jn&&t===Ni)return an;if(e.lookahead===0)break}if(n=0,e.lookahead>=vt&&(e.ins_h=oi(e,e.ins_h,e.window[e.strstart+vt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Jn&&(e.match_length=bg(e,n)),e.match_length>=vt)if(r=ti(e,e.strstart-e.match_start,e.match_length-vt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=vt){e.match_length--;do e.strstart++,e.ins_h=oi(e,e.ins_h,e.window[e.strstart+vt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=oi(e,e.ins_h,e.window[e.strstart+1]);else r=ti(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(un(e,!1),e.strm.avail_out===0))return an}return e.insert=e.strstart<vt-1?e.strstart:vt-1,t===ni?(un(e,!0),e.strm.avail_out===0?Bi:_a):e.last_lit&&(un(e,!1),e.strm.avail_out===0)?an:Ao},"deflate_fast"),xa=l((e,t)=>{let n,r,i;for(;;){if(e.lookahead<Jn){if($i(e),e.lookahead<Jn&&t===Ni)return an;if(e.lookahead===0)break}if(n=0,e.lookahead>=vt&&(e.ins_h=oi(e,e.ins_h,e.window[e.strstart+vt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=vt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Jn&&(e.match_length=bg(e,n),e.match_length<=5&&(e.strategy===iy||e.match_length===vt&&e.strstart-e.match_start>4096)&&(e.match_length=vt-1)),e.prev_length>=vt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-vt,r=ti(e,e.strstart-1-e.prev_match,e.prev_length-vt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=oi(e,e.ins_h,e.window[e.strstart+vt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=vt-1,e.strstart++,r&&(un(e,!1),e.strm.avail_out===0))return an}else if(e.match_available){if(r=ti(e,0,e.window[e.strstart-1]),r&&un(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return an}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ti(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<vt-1?e.strstart:vt-1,t===ni?(un(e,!0),e.strm.avail_out===0?Bi:_a):e.last_lit&&(un(e,!1),e.strm.avail_out===0)?an:Ao},"deflate_slow"),xy=l((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=ri){if($i(e),e.lookahead<=ri&&t===Ni)return an;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=vt&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+ri;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=ri-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=vt?(n=ti(e,1,e.match_length-vt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ti(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(un(e,!1),e.strm.avail_out===0))return an}return e.insert=0,t===ni?(un(e,!0),e.strm.avail_out===0?Bi:_a):e.last_lit&&(un(e,!1),e.strm.avail_out===0)?an:Ao},"deflate_rle"),by=l((e,t)=>{let n;for(;;){if(e.lookahead===0&&($i(e),e.lookahead===0)){if(t===Ni)return an;break}if(e.match_length=0,n=ti(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(un(e,!1),e.strm.avail_out===0))return an}return e.insert=0,t===ni?(un(e,!0),e.strm.avail_out===0?Bi:_a):e.last_lit&&(un(e,!1),e.strm.avail_out===0)?an:Ao},"deflate_huff");function vr(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}l(vr,"Config");const To=[new vr(0,0,0,0,_y),new vr(4,4,8,4,gf),new vr(4,5,16,8,gf),new vr(4,6,32,32,gf),new vr(4,4,16,16,xa),new vr(8,16,32,32,xa),new vr(8,16,128,128,xa),new vr(8,32,128,256,xa),new vr(32,128,258,1024,xa),new vr(32,258,258,4096,xa)],Ey=l(e=>{e.window_size=2*e.w_size,ai(e.head),e.max_lazy_match=To[e.level].max_lazy,e.good_match=To[e.level].good_length,e.nice_match=To[e.level].nice_length,e.max_chain_length=To[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=vt-1,e.match_available=0,e.ins_h=0},"lm_init");function Sy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dl,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(gy*2),this.dyn_dtree=new Uint16Array((2*hy+1)*2),this.bl_tree=new Uint16Array((2*py+1)*2),ai(this.dyn_ltree),ai(this.dyn_dtree),ai(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(my+1),this.heap=new Uint16Array(2*hf+1),ai(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*hf+1),ai(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}l(Sy,"DeflateState");const Eg=l(e=>{if(!e||!e.state)return ii(e,Un);e.total_in=e.total_out=0,e.data_type=ly;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?hl:Li,e.adler=t.wrap===2?0:1,t.last_flush=Ni,Qw(t),mr},"deflateResetKeep"),Sg=l(e=>{const t=Eg(e);return t===mr&&Ey(e.state),t},"deflateReset"),Cy=l((e,t)=>!e||!e.state||e.state.wrap!==2?Un:(e.state.gzhead=t,mr),"deflateSetHeader"),Cg=l((e,t,n,r,i,a)=>{if(!e)return Un;let o=1;if(t===ry&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>cy||n!==dl||r<8||r>15||t<0||t>9||a<0||a>oy)return ii(e,Un);r===8&&(r=9);const s=new Sy;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+vt-1)/vt),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=(1+2)*s.lit_bufsize,s.level=t,s.strategy=a,s.method=n,Sg(e)},"deflateInit2"),Ay=l((e,t)=>Cg(e,t,dl,uy,fy,sy),"deflateInit"),Iy=l((e,t)=>{let n,r;if(!e||!e.state||t>yg||t<0)return e?ii(e,Un):Un;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===Co&&t!==ni)return ii(e,e.avail_out===0?df:Un);i.strm=e;const a=i.last_flush;if(i.last_flush=t,i.status===hl)if(i.wrap===2)e.adler=0,St(i,31),St(i,139),St(i,8),i.gzhead?(St(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),St(i,i.gzhead.time&255),St(i,i.gzhead.time>>8&255),St(i,i.gzhead.time>>16&255),St(i,i.gzhead.time>>24&255),St(i,i.level===9?2:i.strategy>=fl||i.level<2?4:0),St(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(St(i,i.gzhead.extra.length&255),St(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ln(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=pf):(St(i,0),St(i,0),St(i,0),St(i,0),St(i,0),St(i,i.level===9?2:i.strategy>=fl||i.level<2?4:0),St(i,wy),i.status=Li);else{let o=dl+(i.w_bits-8<<4)<<8,s=-1;i.strategy>=fl||i.level<2?s=0:i.level<6?s=1:i.level===6?s=2:s=3,o|=s<<6,i.strstart!==0&&(o|=vy),o+=31-o%31,i.status=Li,Io(i,o),i.strstart!==0&&(Io(i,e.adler>>>16),Io(i,e.adler&65535)),e.adler=1}if(i.status===pf)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),si(e),n=i.pending,i.pending===i.pending_buf_size));)St(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=pl)}else i.status=pl;if(i.status===pl)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),si(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,St(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.gzindex=0,i.status=gl)}else i.status=gl;if(i.status===gl)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),si(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,St(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ln(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.status=ml)}else i.status=ml;if(i.status===ml&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&si(e),i.pending+2<=i.pending_buf_size&&(St(i,e.adler&255),St(i,e.adler>>8&255),e.adler=0,i.status=Li)):i.status=Li),i.pending!==0){if(si(e),e.avail_out===0)return i.last_flush=-1,mr}else if(e.avail_in===0&&xg(t)<=xg(a)&&t!==ni)return ii(e,df);if(i.status===Co&&e.avail_in!==0)return ii(e,df);if(e.avail_in!==0||i.lookahead!==0||t!==Ni&&i.status!==Co){let o=i.strategy===fl?by(i,t):i.strategy===ay?xy(i,t):To[i.level].func(i,t);if((o===Bi||o===_a)&&(i.status=Co),o===an||o===Bi)return e.avail_out===0&&(i.last_flush=-1),mr;if(o===Ao&&(t===ey?Jw(i):t!==yg&&(Xw(i,0,0,!1),t===ty&&(ai(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),si(e),e.avail_out===0))return i.last_flush=-1,mr}return t!==ni?mr:i.wrap<=0?_g:(i.wrap===2?(St(i,e.adler&255),St(i,e.adler>>8&255),St(i,e.adler>>16&255),St(i,e.adler>>24&255),St(i,e.total_in&255),St(i,e.total_in>>8&255),St(i,e.total_in>>16&255),St(i,e.total_in>>24&255)):(Io(i,e.adler>>>16),Io(i,e.adler&65535)),si(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?mr:_g)},"deflate$2"),Ty=l(e=>{if(!e||!e.state)return Un;const t=e.state.status;return t!==hl&&t!==pf&&t!==pl&&t!==gl&&t!==ml&&t!==Li&&t!==Co?ii(e,Un):(e.state=null,t===Li?ii(e,ny):mr)},"deflateEnd"),Ry=l((e,t)=>{let n=t.length;if(!e||!e.state)return Un;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==hl||r.lookahead)return Un;if(i===1&&(e.adler=So(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(ai(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(t.subarray(n-r.w_size,n),0),t=u,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,$i(r);r.lookahead>=vt;){let u=r.strstart,c=r.lookahead-(vt-1);do r.ins_h=oi(r,r.ins_h,r.window[u+vt-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--c);r.strstart=u,r.lookahead=vt-1,$i(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=vt-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,mr},"deflateSetDictionary");var ky=Ay,Dy=Cg,Fy=Sg,Ny=Eg,Ly=Cy,By=Iy,$y=Ty,Py=Ry,My="pako deflate (from Nodeca project)",Ro={deflateInit:ky,deflateInit2:Dy,deflateReset:Fy,deflateResetKeep:Ny,deflateSetHeader:Ly,deflate:By,deflateEnd:$y,deflateSetDictionary:Py,deflateInfo:My};const Oy=l((e,t)=>Object.prototype.hasOwnProperty.call(e,t),"_has");var Uy=l(function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(!!n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Oy(n,r)&&(e[r]=n[r])}}return e},"pako_esm_assign"),Hy=l(e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];n.set(o,i),i+=o.length}return n},"flattenChunks"),vl={assign:Uy,flattenChunks:Hy};let Ag=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ag=!1}const ko=new Uint8Array(256);for(let e=0;e<256;e++)ko[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ko[254]=ko[254]=1;var zy=l(e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)==55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)==56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t},"string2buf");const qy=l((e,t)=>{if(t<65534&&e.subarray&&Ag)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},"buf2binstring");var Wy=l((e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){a[i++]=o;continue}let s=ko[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|e[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return qy(a,i)},"buf2string"),jy=l((e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)==128;)n--;return n<0||n===0?t:n+ko[e[n]]>t?n:t},"utf8border"),Do={string2buf:zy,buf2string:Wy,utf8border:jy};function Vy(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}l(Vy,"ZStream");var Ig=Vy;const Tg=Object.prototype.toString,{Z_NO_FLUSH:Gy,Z_SYNC_FLUSH:Ky,Z_FULL_FLUSH:Zy,Z_FINISH:Qy,Z_OK:wl,Z_STREAM_END:Xy,Z_DEFAULT_COMPRESSION:Yy,Z_DEFAULT_STRATEGY:Jy,Z_DEFLATED:e_}=Fi;function Fo(e){this.options=vl.assign({level:Yy,method:e_,chunkSize:16384,windowBits:15,memLevel:8,strategy:Jy},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ig,this.strm.avail_out=0;let n=Ro.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==wl)throw new Error(Di[n]);if(t.header&&Ro.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=Do.string2buf(t.dictionary):Tg.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Ro.deflateSetDictionary(this.strm,r),n!==wl)throw new Error(Di[n]);this._dict_set=!0}}l(Fo,"Deflate$1"),Fo.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Qy:Gy,typeof e=="string"?n.input=Do.string2buf(e):Tg.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Ky||a===Zy)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Ro.deflate(n,a),i===Xy)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ro.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===wl;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0},Fo.prototype.onData=function(e){this.chunks.push(e)},Fo.prototype.onEnd=function(e){e===wl&&(this.result=vl.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function mf(e,t){const n=new Fo(t);if(n.push(e,!0),n.err)throw n.msg||Di[n.err];return n.result}l(mf,"deflate$1");function t_(e,t){return t=t||{},t.raw=!0,mf(e,t)}l(t_,"deflateRaw$1");function n_(e,t){return t=t||{},t.gzip=!0,mf(e,t)}l(n_,"gzip$1");var r_=Fo,i_=mf,a_=t_,o_=n_,s_=Fi,l_={Deflate:r_,deflate:i_,deflateRaw:a_,gzip:o_,constants:s_};const yl=30,c_=12;var u_=l(function(t,n){let r,i,a,o,s,u,c,f,v,p,w,I,R,A,D,O,G,W,re,we,he,fe,Ee,ue;const Re=t.state;r=t.next_in,Ee=t.input,i=r+(t.avail_in-5),a=t.next_out,ue=t.output,o=a-(n-t.avail_out),s=a+(t.avail_out-257),u=Re.dmax,c=Re.wsize,f=Re.whave,v=Re.wnext,p=Re.window,w=Re.hold,I=Re.bits,R=Re.lencode,A=Re.distcode,D=(1<<Re.lenbits)-1,O=(1<<Re.distbits)-1;e:do{I<15&&(w+=Ee[r++]<<I,I+=8,w+=Ee[r++]<<I,I+=8),G=R[w&D];t:for(;;){if(W=G>>>24,w>>>=W,I-=W,W=G>>>16&255,W===0)ue[a++]=G&65535;else if(W&16){re=G&65535,W&=15,W&&(I<W&&(w+=Ee[r++]<<I,I+=8),re+=w&(1<<W)-1,w>>>=W,I-=W),I<15&&(w+=Ee[r++]<<I,I+=8,w+=Ee[r++]<<I,I+=8),G=A[w&O];n:for(;;){if(W=G>>>24,w>>>=W,I-=W,W=G>>>16&255,W&16){if(we=G&65535,W&=15,I<W&&(w+=Ee[r++]<<I,I+=8,I<W&&(w+=Ee[r++]<<I,I+=8)),we+=w&(1<<W)-1,we>u){t.msg="invalid distance too far back",Re.mode=yl;break e}if(w>>>=W,I-=W,W=a-o,we>W){if(W=we-W,W>f&&Re.sane){t.msg="invalid distance too far back",Re.mode=yl;break e}if(he=0,fe=p,v===0){if(he+=c-W,W<re){re-=W;do ue[a++]=p[he++];while(--W);he=a-we,fe=ue}}else if(v<W){if(he+=c+v-W,W-=v,W<re){re-=W;do ue[a++]=p[he++];while(--W);if(he=0,v<re){W=v,re-=W;do ue[a++]=p[he++];while(--W);he=a-we,fe=ue}}}else if(he+=v-W,W<re){re-=W;do ue[a++]=p[he++];while(--W);he=a-we,fe=ue}for(;re>2;)ue[a++]=fe[he++],ue[a++]=fe[he++],ue[a++]=fe[he++],re-=3;re&&(ue[a++]=fe[he++],re>1&&(ue[a++]=fe[he++]))}else{he=a-we;do ue[a++]=ue[he++],ue[a++]=ue[he++],ue[a++]=ue[he++],re-=3;while(re>2);re&&(ue[a++]=ue[he++],re>1&&(ue[a++]=ue[he++]))}}else if((W&64)==0){G=A[(G&65535)+(w&(1<<W)-1)];continue n}else{t.msg="invalid distance code",Re.mode=yl;break e}break}}else if((W&64)==0){G=R[(G&65535)+(w&(1<<W)-1)];continue t}else if(W&32){Re.mode=c_;break e}else{t.msg="invalid literal/length code",Re.mode=yl;break e}break}}while(r<i&&a<s);re=I>>3,r-=re,I-=re<<3,w&=(1<<I)-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=a<s?257+(s-a):257-(a-s),Re.hold=w,Re.bits=I},"inflate_fast");const ba=15,Rg=852,kg=592,Dg=0,vf=1,Fg=2,f_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),d_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),h_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var No=l((e,t,n,r,i,a,o,s)=>{const u=s.bits;let c=0,f=0,v=0,p=0,w=0,I=0,R=0,A=0,D=0,O=0,G,W,re,we,he,fe=null,Ee=0,ue;const Re=new Uint16Array(ba+1),Ye=new Uint16Array(ba+1);let _t=null,ie=0,xe,Ie,Te;for(c=0;c<=ba;c++)Re[c]=0;for(f=0;f<r;f++)Re[t[n+f]]++;for(w=u,p=ba;p>=1&&Re[p]===0;p--);if(w>p&&(w=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(v=1;v<p&&Re[v]===0;v++);for(w<v&&(w=v),A=1,c=1;c<=ba;c++)if(A<<=1,A-=Re[c],A<0)return-1;if(A>0&&(e===Dg||p!==1))return-1;for(Ye[1]=0,c=1;c<ba;c++)Ye[c+1]=Ye[c]+Re[c];for(f=0;f<r;f++)t[n+f]!==0&&(o[Ye[t[n+f]]++]=f);if(e===Dg?(fe=_t=o,ue=19):e===vf?(fe=f_,Ee-=257,_t=d_,ie-=257,ue=256):(fe=h_,_t=p_,ue=-1),O=0,f=0,c=v,he=a,I=w,R=0,re=-1,D=1<<w,we=D-1,e===vf&&D>Rg||e===Fg&&D>kg)return 1;for(;;){xe=c-R,o[f]<ue?(Ie=0,Te=o[f]):o[f]>ue?(Ie=_t[ie+o[f]],Te=fe[Ee+o[f]]):(Ie=32+64,Te=0),G=1<<c-R,W=1<<I,v=W;do W-=G,i[he+(O>>R)+W]=xe<<24|Ie<<16|Te|0;while(W!==0);for(G=1<<c-1;O&G;)G>>=1;if(G!==0?(O&=G-1,O+=G):O=0,f++,--Re[c]==0){if(c===p)break;c=t[n+o[f]]}if(c>w&&(O&we)!==re){for(R===0&&(R=w),he+=v,I=c-R,A=1<<I;I+R<p&&(A-=Re[I+R],!(A<=0));)I++,A<<=1;if(D+=1<<I,e===vf&&D>Rg||e===Fg&&D>kg)return 1;re=O&we,i[re]=w<<24|I<<16|he-a|0}}return O!==0&&(i[he+O]=c-R<<24|64<<16|0),s.bits=w,0},"inflate_table");const g_=0,Ng=1,Lg=2,{Z_FINISH:Bg,Z_BLOCK:m_,Z_TREES:_l,Z_OK:Pi,Z_STREAM_END:v_,Z_NEED_DICT:w_,Z_STREAM_ERROR:Hn,Z_DATA_ERROR:$g,Z_MEM_ERROR:Pg,Z_BUF_ERROR:y_,Z_DEFLATED:Mg}=Fi,Og=1,Ug=2,Hg=3,zg=4,qg=5,Wg=6,jg=7,Vg=8,Gg=9,Kg=10,xl=11,Lr=12,wf=13,Zg=14,yf=15,Qg=16,Xg=17,Yg=18,Jg=19,bl=20,El=21,e0=22,t0=23,n0=24,r0=25,i0=26,_f=27,a0=28,o0=29,Ht=30,s0=31,__=32,x_=852,b_=592,E_=15,l0=l(e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24),"zswap32");function S_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}l(S_,"InflateState");const c0=l(e=>{if(!e||!e.state)return Hn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Og,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(x_),t.distcode=t.distdyn=new Int32Array(b_),t.sane=1,t.back=-1,Pi},"inflateResetKeep"),u0=l(e=>{if(!e||!e.state)return Hn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,c0(e)},"inflateReset"),f0=l((e,t)=>{let n;if(!e||!e.state)return Hn;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Hn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,u0(e))},"inflateReset2"),d0=l((e,t)=>{if(!e)return Hn;const n=new S_;e.state=n,n.window=null;const r=f0(e,t);return r!==Pi&&(e.state=null),r},"inflateInit2"),C_=l(e=>d0(e,E_),"inflateInit");let h0=!0,xf,bf;const A_=l(e=>{if(h0){xf=new Int32Array(512),bf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(No(Ng,e.lens,0,288,xf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;No(Lg,e.lens,0,32,bf,0,e.work,{bits:5}),h0=!1}e.lencode=xf,e.lenbits=9,e.distcode=bf,e.distbits=5},"fixedtables"),p0=l((e,t,n,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},"updatewindow"),I_=l((e,t)=>{let n,r,i,a,o,s,u,c,f,v,p,w,I,R,A=0,D,O,G,W,re,we,he,fe;const Ee=new Uint8Array(4);let ue,Re;const Ye=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Hn;n=e.state,n.mode===Lr&&(n.mode=wf),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,f=n.bits,v=s,p=u,fe=Pi;e:for(;;)switch(n.mode){case Og:if(n.wrap===0){n.mode=wf;break}for(;f<16;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(n.wrap&2&&c===35615){n.check=0,Ee[0]=c&255,Ee[1]=c>>>8&255,n.check=ln(n.check,Ee,2,0),c=0,f=0,n.mode=Ug;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Ht;break}if((c&15)!==Mg){e.msg="unknown compression method",n.mode=Ht;break}if(c>>>=4,f-=4,he=(c&15)+8,n.wbits===0)n.wbits=he;else if(he>n.wbits){e.msg="invalid window size",n.mode=Ht;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?Kg:Lr,c=0,f=0;break;case Ug:for(;f<16;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(n.flags=c,(n.flags&255)!==Mg){e.msg="unknown compression method",n.mode=Ht;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Ht;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(Ee[0]=c&255,Ee[1]=c>>>8&255,n.check=ln(n.check,Ee,2,0)),c=0,f=0,n.mode=Hg;case Hg:for(;f<32;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.head&&(n.head.time=c),n.flags&512&&(Ee[0]=c&255,Ee[1]=c>>>8&255,Ee[2]=c>>>16&255,Ee[3]=c>>>24&255,n.check=ln(n.check,Ee,4,0)),c=0,f=0,n.mode=zg;case zg:for(;f<16;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(Ee[0]=c&255,Ee[1]=c>>>8&255,n.check=ln(n.check,Ee,2,0)),c=0,f=0,n.mode=qg;case qg:if(n.flags&1024){for(;f<16;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(Ee[0]=c&255,Ee[1]=c>>>8&255,n.check=ln(n.check,Ee,2,0)),c=0,f=0}else n.head&&(n.head.extra=null);n.mode=Wg;case Wg:if(n.flags&1024&&(w=n.length,w>s&&(w=s),w&&(n.head&&(he=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+w),he)),n.flags&512&&(n.check=ln(n.check,r,w,a)),s-=w,a+=w,n.length-=w),n.length))break e;n.length=0,n.mode=jg;case jg:if(n.flags&2048){if(s===0)break e;w=0;do he=r[a+w++],n.head&&he&&n.length<65536&&(n.head.name+=String.fromCharCode(he));while(he&&w<s);if(n.flags&512&&(n.check=ln(n.check,r,w,a)),s-=w,a+=w,he)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Vg;case Vg:if(n.flags&4096){if(s===0)break e;w=0;do he=r[a+w++],n.head&&he&&n.length<65536&&(n.head.comment+=String.fromCharCode(he));while(he&&w<s);if(n.flags&512&&(n.check=ln(n.check,r,w,a)),s-=w,a+=w,he)break e}else n.head&&(n.head.comment=null);n.mode=Gg;case Gg:if(n.flags&512){for(;f<16;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Ht;break}c=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Lr;break;case Kg:for(;f<32;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}e.adler=n.check=l0(c),c=0,f=0,n.mode=xl;case xl:if(n.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=f,w_;e.adler=n.check=1,n.mode=Lr;case Lr:if(t===m_||t===_l)break e;case wf:if(n.last){c>>>=f&7,f-=f&7,n.mode=_f;break}for(;f<3;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}switch(n.last=c&1,c>>>=1,f-=1,c&3){case 0:n.mode=Zg;break;case 1:if(A_(n),n.mode=bl,t===_l){c>>>=2,f-=2;break e}break;case 2:n.mode=Xg;break;case 3:e.msg="invalid block type",n.mode=Ht}c>>>=2,f-=2;break;case Zg:for(c>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if((c&65535)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ht;break}if(n.length=c&65535,c=0,f=0,n.mode=yf,t===_l)break e;case yf:n.mode=Qg;case Qg:if(w=n.length,w){if(w>s&&(w=s),w>u&&(w=u),w===0)break e;i.set(r.subarray(a,a+w),o),s-=w,a+=w,u-=w,o+=w,n.length-=w;break}n.mode=Lr;break;case Xg:for(;f<14;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(n.nlen=(c&31)+257,c>>>=5,f-=5,n.ndist=(c&31)+1,c>>>=5,f-=5,n.ncode=(c&15)+4,c>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ht;break}n.have=0,n.mode=Yg;case Yg:for(;n.have<n.ncode;){for(;f<3;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.lens[Ye[n.have++]]=c&7,c>>>=3,f-=3}for(;n.have<19;)n.lens[Ye[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ue={bits:n.lenbits},fe=No(g_,n.lens,0,19,n.lencode,0,n.work,ue),n.lenbits=ue.bits,fe){e.msg="invalid code lengths set",n.mode=Ht;break}n.have=0,n.mode=Jg;case Jg:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[c&(1<<n.lenbits)-1],D=A>>>24,O=A>>>16&255,G=A&65535,!(D<=f);){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(G<16)c>>>=D,f-=D,n.lens[n.have++]=G;else{if(G===16){for(Re=D+2;f<Re;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(c>>>=D,f-=D,n.have===0){e.msg="invalid bit length repeat",n.mode=Ht;break}he=n.lens[n.have-1],w=3+(c&3),c>>>=2,f-=2}else if(G===17){for(Re=D+3;f<Re;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}c>>>=D,f-=D,he=0,w=3+(c&7),c>>>=3,f-=3}else{for(Re=D+7;f<Re;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}c>>>=D,f-=D,he=0,w=11+(c&127),c>>>=7,f-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ht;break}for(;w--;)n.lens[n.have++]=he}}if(n.mode===Ht)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Ht;break}if(n.lenbits=9,ue={bits:n.lenbits},fe=No(Ng,n.lens,0,n.nlen,n.lencode,0,n.work,ue),n.lenbits=ue.bits,fe){e.msg="invalid literal/lengths set",n.mode=Ht;break}if(n.distbits=6,n.distcode=n.distdyn,ue={bits:n.distbits},fe=No(Lg,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ue),n.distbits=ue.bits,fe){e.msg="invalid distances set",n.mode=Ht;break}if(n.mode=bl,t===_l)break e;case bl:n.mode=El;case El:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=f,u_(e,p),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,f=n.bits,n.mode===Lr&&(n.back=-1);break}for(n.back=0;A=n.lencode[c&(1<<n.lenbits)-1],D=A>>>24,O=A>>>16&255,G=A&65535,!(D<=f);){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(O&&(O&240)==0){for(W=D,re=O,we=G;A=n.lencode[we+((c&(1<<W+re)-1)>>W)],D=A>>>24,O=A>>>16&255,G=A&65535,!(W+D<=f);){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}c>>>=W,f-=W,n.back+=W}if(c>>>=D,f-=D,n.back+=D,n.length=G,O===0){n.mode=i0;break}if(O&32){n.back=-1,n.mode=Lr;break}if(O&64){e.msg="invalid literal/length code",n.mode=Ht;break}n.extra=O&15,n.mode=e0;case e0:if(n.extra){for(Re=n.extra;f<Re;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=t0;case t0:for(;A=n.distcode[c&(1<<n.distbits)-1],D=A>>>24,O=A>>>16&255,G=A&65535,!(D<=f);){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if((O&240)==0){for(W=D,re=O,we=G;A=n.distcode[we+((c&(1<<W+re)-1)>>W)],D=A>>>24,O=A>>>16&255,G=A&65535,!(W+D<=f);){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}c>>>=W,f-=W,n.back+=W}if(c>>>=D,f-=D,n.back+=D,O&64){e.msg="invalid distance code",n.mode=Ht;break}n.offset=G,n.extra=O&15,n.mode=n0;case n0:if(n.extra){for(Re=n.extra;f<Re;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ht;break}n.mode=r0;case r0:if(u===0)break e;if(w=p-u,n.offset>w){if(w=n.offset-w,w>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ht;break}w>n.wnext?(w-=n.wnext,I=n.wsize-w):I=n.wnext-w,w>n.length&&(w=n.length),R=n.window}else R=i,I=o-n.offset,w=n.length;w>u&&(w=u),u-=w,n.length-=w;do i[o++]=R[I++];while(--w);n.length===0&&(n.mode=El);break;case i0:if(u===0)break e;i[o++]=n.length,u--,n.mode=El;break;case _f:if(n.wrap){for(;f<32;){if(s===0)break e;s--,c|=r[a++]<<f,f+=8}if(p-=u,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?ln(n.check,i,p,o-p):So(n.check,i,p,o-p)),p=u,(n.flags?c:l0(c))!==n.check){e.msg="incorrect data check",n.mode=Ht;break}c=0,f=0}n.mode=a0;case a0:if(n.wrap&&n.flags){for(;f<32;){if(s===0)break e;s--,c+=r[a++]<<f,f+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Ht;break}c=0,f=0}n.mode=o0;case o0:fe=v_;break e;case Ht:fe=$g;break e;case s0:return Pg;case __:default:return Hn}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=f,(n.wsize||p!==e.avail_out&&n.mode<Ht&&(n.mode<_f||t!==Bg))&&p0(e,e.output,e.next_out,p-e.avail_out),v-=e.avail_in,p-=e.avail_out,e.total_in+=v,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?ln(n.check,i,p,e.next_out-p):So(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Lr?128:0)+(n.mode===bl||n.mode===yf?256:0),(v===0&&p===0||t===Bg)&&fe===Pi&&(fe=y_),fe},"inflate$2"),T_=l(e=>{if(!e||!e.state)return Hn;let t=e.state;return t.window&&(t.window=null),e.state=null,Pi},"inflateEnd"),R_=l((e,t)=>{if(!e||!e.state)return Hn;const n=e.state;return(n.wrap&2)==0?Hn:(n.head=t,t.done=!1,Pi)},"inflateGetHeader"),k_=l((e,t)=>{const n=t.length;let r,i,a;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==xl)?Hn:r.mode===xl&&(i=1,i=So(i,t,n,0),i!==r.check)?$g:(a=p0(e,t,n,n),a?(r.mode=s0,Pg):(r.havedict=1,Pi))},"inflateSetDictionary");var D_=u0,F_=f0,N_=c0,L_=C_,B_=d0,$_=I_,P_=T_,M_=R_,O_=k_,U_="pako inflate (from Nodeca project)",Br={inflateReset:D_,inflateReset2:F_,inflateResetKeep:N_,inflateInit:L_,inflateInit2:B_,inflate:$_,inflateEnd:P_,inflateGetHeader:M_,inflateSetDictionary:O_,inflateInfo:U_};function H_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}l(H_,"GZheader");var z_=H_;const g0=Object.prototype.toString,{Z_NO_FLUSH:q_,Z_FINISH:W_,Z_OK:Lo,Z_STREAM_END:Ef,Z_NEED_DICT:Sf,Z_STREAM_ERROR:j_,Z_DATA_ERROR:m0,Z_MEM_ERROR:V_}=Fi;function Bo(e){this.options=vl.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ig,this.strm.avail_out=0;let n=Br.inflateInit2(this.strm,t.windowBits);if(n!==Lo)throw new Error(Di[n]);if(this.header=new z_,Br.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Do.string2buf(t.dictionary):g0.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Br.inflateSetDictionary(this.strm,t.dictionary),n!==Lo)))throw new Error(Di[n])}l(Bo,"Inflate$1"),Bo.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?W_:q_,g0.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Br.inflate(n,o),a===Sf&&i&&(a=Br.inflateSetDictionary(n,i),a===Lo?a=Br.inflate(n,o):a===m0&&(a=Sf));n.avail_in>0&&a===Ef&&n.state.wrap>0&&e[n.next_in]!==0;)Br.inflateReset(n),a=Br.inflate(n,o);switch(a){case j_:case m0:case Sf:case V_:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===Ef))if(this.options.to==="string"){let u=Do.utf8border(n.output,n.next_out),c=n.next_out-u,f=Do.buf2string(n.output,u);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(u,u+c),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Lo&&s===0)){if(a===Ef)return a=Br.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0},Bo.prototype.onData=function(e){this.chunks.push(e)},Bo.prototype.onEnd=function(e){e===Lo&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vl.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Cf(e,t){const n=new Bo(t);if(n.push(e),n.err)throw n.msg||Di[n.err];return n.result}l(Cf,"inflate$1");function G_(e,t){return t=t||{},t.raw=!0,Cf(e,t)}l(G_,"inflateRaw$1");var K_=Bo,Z_=Cf,Q_=G_,X_=Cf,Y_=Fi,J_={Inflate:K_,inflate:Z_,inflateRaw:Q_,ungzip:X_,constants:Y_};const{Deflate:ex,deflate:tx,deflateRaw:nx,gzip:rx}=l_,{Inflate:ix,inflate:ax,inflateRaw:ox,ungzip:sx}=J_;var lx=ex,cx=tx,ux=nx,fx=rx,dx=ix,hx=ax,px=ox,v0=sx,gx=Fi,Ob={Deflate:lx,deflate:cx,deflateRaw:ux,gzip:fx,Inflate:dx,inflate:hx,inflateRaw:px,ungzip:v0,constants:gx},$o;(function(e){e.HasVirtualFolders="remoteHub:hasVirtualFolders",e.VirtualFolderProviders="remoteHub:virtualFolderProviders",e.HasRecentRepositories="remoteHub:hasRecentRepositories",e.HasSearchIndexes="gitHub:hasSearchIndexes",e.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",e.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",e.HasPullRequestExtension="gitHub:hasPullRequestExtension"})($o||($o={}));const w0=new Map;function Ub(e){return e==="isWeb"?isWeb:e==="remoteName"?env.remoteName:e==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():e.startsWith("config.")?configuration.getAny(e.substring(7)):w0.get(e)}l(Ub,"getContext");function Hb(e){return e==="isWeb"||e==="remoteName"||e==="virtualWorkspace"||e.startsWith("config.")||e.startsWith("remoteHub:")||e.startsWith("continueOn:")}l(Hb,"isSupportedContextKey");async function Af(e,t){w0.set(e,t),!e.startsWith("continueOn:")&&await m.commands.executeCommand("setContext",e,t)}l(Af,"setContext");class If{constructor(t){this.bytes=t,this.byteIndexCurrent=0}hasMoreBytes(){return this.byteIndexCurrent<this.bytes.length}readBytes(t){const n=this.byteIndexCurrent;return this.byteIndexCurrent+=t,this.bytes.slice(n,this.byteIndexCurrent)}readByte(){const t=this.bytes[this.byteIndexCurrent];return this.byteIndexCurrent++,t}readString(t){const n=[],r=this.byteIndexCurrent+t;let i=this.byteIndexCurrent;for(;i<r;){const a=this.bytes[i++];if(a===0)break;let o=0,s=0;if((a&128)==0)o=a,s=0;else if((a&224)==192)o=a&31,s=1;else if((a&240)==224)o=a&15,s=2;else if((a&248)==240)o=a&7,s=3;else throw Error(`Invalid unicode, unknown multibyte encoding header ${a.toString(2)} at offset ${i}`);for(;s>0;){const u=this.bytes[i++];if((u&192)!=128)throw Error(`Invalid unicode, unexpected multibyte encoding trailer ${u.toString(2)} at offset ${i}`);o=o<<6|u&63,s--}n.push(String.fromCodePoint(o))}return this.byteIndexCurrent=r,n.join("")}}l(If,"ByteStream");class vn{constructor(t,n){this.value=t,this.id=`_${this.value}`,this.name=n}static Instances(){return vn._instances==null&&(vn._instances=new y0),vn._instances}}l(vn,"TarFileTypeFlag");class y0{constructor(){this.Normal=new vn("0","Normal"),this.HardLink=new vn("1","Hard Link"),this.SymbolicLink=new vn("2","Symbolic Link"),this.CharacterSpecial=new vn("3","Character Special"),this.BlockSpecial=new vn("4","Block Special"),this.Directory=new vn("5","Directory"),this.FIFO=new vn("6","FIFO"),this.ContiguousFile=new vn("7","Contiguous File"),this.LongFilePath=new vn("L","././@LongLink"),this._All=[this.Normal,this.HardLink,this.SymbolicLink,this.CharacterSpecial,this.BlockSpecial,this.Directory,this.FIFO,this.ContiguousFile,this.LongFilePath];for(let t=0;t<this._All.length;t++){const n=this._All[t];this._All[n.id]=n}}}l(y0,"TarFileTypeFlag_Instances");class Sl{constructor(t,n,r,i,a,o,s,u,c,f,v,p,w,I,R,A){this.fileName=t,this.fileMode=n,this.userIDOfOwner=r,this.userIDOfGroup=i,this.fileSizeInBytes=a,this.timeModifiedInUnixFormat=o,this.checksum=s,this.typeFlag=u,this.nameOfLinkedFile=c,this.uStarIndicator=f,this.uStarVersion=v,this.userNameOfOwner=p,this.groupNameOfOwner=w,this.deviceNumberMajor=I,this.deviceNumberMinor=R,this.filenamePrefix=A,this.fullFileName=A.length?A.endsWith("/")?A+t:`${A}/${t}`:t}static fromBytes(t){const n=new If(t),r=n.readString(100).trim(),i=n.readString(8),a=n.readString(8),o=n.readString(8),s=n.readString(12),u=n.readBytes(12),c=n.readString(8),f=n.readString(1),v=n.readString(100),p=n.readString(6),w=n.readString(2),I=n.readString(32),R=n.readString(32),A=n.readString(8),D=n.readString(8),O=n.readString(155),G=n.readBytes(12),W=parseInt(s.trim(),8),re=parseInt(c,8),we=vn.Instances()._All,he=`_${f}`,fe=we[he];return new Sl(r,i,a,o,W,u,re,fe,v,p,w,I,R,A,D,O)}}l(Sl,"TarFileEntryHeader");const _0=512;class Cl{constructor(t,n){this.header=t,this.dataAsBytes=n}static fromBytes(t,n){const r=_0,i=Sl.fromBytes(t),a=i.fileSizeInBytes,s=Math.ceil(a/r)*r,u=n.readBytes(s).slice(0,a);return new Cl(i,u)}}l(Cl,"TarFileEntry");class Al{constructor(t){var n;this.entries=t,this.consolidateLongPathEntries();for(const r of this.entries)((n=r.header.typeFlag)==null?void 0:n.name)==="Normal"&&(r.header.fullFileName=r.header.fullFileName.replace(/^[^/]+\/?/,""));this.entryMap=new Map;for(const r of this.entries)this.entryMap.set(r.header.fullFileName,r)}static async fromBytes(t){const n=new If(t),r=[],i=_0;let a=0,o=0;for(;n.hasMoreBytes()==!0;){++a%1e3==0&&await new Promise(c=>setTimeout(c,10));const s=n.readBytes(i);let u=!0;for(let c=0;c<s.length;c++)if(s[c]!=0){u=!1;break}if(u==!0){if(o++,o==2)break}else{o=0;const c=Cl.fromBytes(s,n);r.push(c)}}return new Al(r)}consolidateLongPathEntries(){var t;const n=vn.Instances().LongFilePath.name,r=this.entries;for(let i=0;i<r.length;i++){const a=r[i];if(((t=a.header.typeFlag)==null?void 0:t.name)==n){const o=r[i+1];o.header.fileName=a.dataAsBytes.reduce((s,u)=>s+=String.fromCharCode(u),""),o.header.fileName=o.header.fileName.replace(/\0/g,""),r.splice(i,1),i--}}}}l(Al,"TarFile");const mx=l(e=>Al.fromBytes(e),"readTar"),zn=_.loadMessageBundle(),Il=new TextDecoder,Tf=new TextEncoder;class x0{constructor(t,n=0){this.retainFor=n;try{this.weakRef=new WeakRef(t)}catch{}this.retain(t)}retain(t){this.retainTimeout&&clearTimeout(this.retainTimeout),this.strongRef=t,this.retainTimeout=setTimeout(()=>{this.strongRef=void 0,this.retainTimeout=void 0},this.retainFor)}deref(){var t,n;const r=(n=this.strongRef)!=null?n:(t=this.weakRef)==null?void 0:t.deref();return r&&this.retain(r),r}}l(x0,"TimedRetainingRef");class b0{constructor(t,n){this.root=t,this.providerService=n,this._onDidChangeIndexingEnablement=new m.EventEmitter,this._onDidDownloadTar=new m.EventEmitter,this.ongoingDiskRequests=new Map,this.ongoingNetworkRequests=new Map,this.indexingDisabled=!1,this.usageFile=m.Uri.joinPath(this.root,"usageHistory.json"),this.indexingAllowanceFile=m.Uri.joinPath(this.root,"indexAllowances.json"),this._disposable=m.Disposable.from(...this.registerCommands()),this.updateContext()}get onDidChangeIndexingEnablement(){return this._onDidChangeIndexingEnablement.event}get onDidDownloadTar(){return this._onDidDownloadTar.event}async updateContext(){await Af($o.HasSearchIndexes,(await this.listTars()).length>0);const t=this.providerService.repositories.map(i=>i.name),n=await this.getIndexingEnabledRepos(),r=n.has("*")||t.every(i=>n.has(i));await Af($o.EnabledSomeSearchIndexes,n.size>0),await Af($o.EnabledAllSearchIndexes,r)}dispose(){this._disposable.dispose()}registerCommands(){return[m.commands.registerCommand("remoteHub.configureIndexingAllowedRepos",async()=>{await this.configureIndexingAllowedRepos()}),m.commands.registerCommand("remoteHub.disableIndexingForSession",()=>(this.temporarilyDisableIndexing(),{triggerSearch:!0})),m.commands.registerCommand("remoteHub.enableIndexing",async()=>(await this.markIndexingEnablementForRepos(!0),{triggerSearch:!0})),m.commands.registerCommand("remoteHub.deleteLocalRepositoryData",async()=>{const t=l(i=>{const a=[{power:9,name:"GB"},{power:6,name:"MB"},{power:3,name:"kB"},{power:0,name:"B"}];for(const o of a)if(i>10**o.power)return`${Math.round(i/10**o.power)} ${o.name}`;return"Unknown size"},"humanReadableSize"),n=await this.listTars();if(n.length===0){await m.window.showInformationMessage("No Repository Indexes Found");return}const r=m.window.createQuickPick();r.canSelectMany=!0,r.items=n.map(({name:i,size:a,path:o})=>({label:i,path:o,description:a?t(a):void 0})),r.show(),r.onDidAccept(async()=>{r.hide();for(const{label:i,path:a}of r.selectedItems){const o=m.workspace.fs.delete(a),s=m.window.setStatusBarMessage(`$(loading) Deleting ${i}`,o);await o,s.dispose()}this.updateContext()}),r.onDidHide(()=>r.dispose())}),m.commands.registerCommand("remoteHub.deleteAllLocalRepositoryData",()=>m.window.withProgress({location:m.ProgressLocation.Notification,title:"Deleting Repository Indexes..."},async()=>{this.lastReadKey=void 0,this.lastReadValue=void 0;try{await Promise.all([m.workspace.fs.delete(this.root,{recursive:!0})])}catch(t){Y.error(t)}finally{this.updateContext()}}))]}getTarFromMemory(t){var n;if(Y.debug(`TarPit.getTarFromMemory(key=${t})`),t===this.lastReadKey){const r=(n=this.lastReadValue)==null?void 0:n.deref();if(r)return r;Y.log("Weakref deallocated.")}}async getTarFromDisk(t){try{const n=await m.workspace.fs.readFile(t);return!n||!n.length?void 0:n}catch(n){(!(n instanceof m.FileSystemError)||n.code!==m.FileSystemError.FileNotFound.name)&&(m.window.showWarningMessage(zn("diskReadUnexpectedError","Unexpected error reading index from disk, attempting to reload from network")),Y.error(n,"Unexpected error reading tarball from disk"));return}}async getTarFromNetwork(t,n,r){try{const i=await this.isIndexingEnabledForRepo(t);try{if(i){const a=await this.providerService.getTarGz(t,n);if(a)return a}else if(i===void 0){const a=Je.get("indexing.maxIndexSize");if(a===null)throw new m.CancellationError;if(a){const o=await this.providerService.getTarGz(t,n,a*1024*1024);if(o)return o}}}catch(a){if(a instanceof m.CancellationError)throw await this.markIndexingEnablementForRepos(!1),a;if(a instanceof Error&&a.message==="LIMIT_HIT")await this.markIndexingEnablementForRepos(!1);else throw a}if(!r){const a={id:"configure",title:zn("configure","Configure Limit")},o={id:"continue",title:zn("continue","Continue"),isCloseAffordance:!0};m.window.showInformationMessage(zn("bigRepo","Repository exceeds download size limit! Continuing with partial text services."),a,o).then(async s=>{s===a&&await m.commands.executeCommand("workbench.action.openSettings","remoteHub.indexing")})}if(r){const a={id:"no",title:zn("cancel","Use Partial Services"),isCloseAffordance:!0},o={id:"configure",title:zn("configure","Configure")},s={id:"repo",title:zn("continue","Download Full Contents")},u=Je.get("indexing.maxIndexSize"),c=u!==null?`${u.toString()}\xA0MB`:"null";switch(await m.window.showWarningMessage(zn("bigRepo","This repository exceeds the download size limit ({0}).",c),{modal:!0,detail:zn("downloadUse","Continue using a partial version of text services like workspace search and global references, or ignore the limit and download this repository's full contents.",c)},a,s,o)){case s:{await this.markIndexingEnablementForRepos(!0);try{const v=await this.providerService.getTarGz(t,n);if(v)return v}catch(v){v instanceof m.CancellationError&&await this.markIndexingEnablementForRepos(!1)}break}case o:await m.commands.executeCommand("workbench.action.openSettings","remoteHub.indexing");break;case a:await this.markIndexingEnablementForRepos(!1)}}throw new m.CancellationError}finally{this.updateContext()}}async getTar(t,n,r){r===void 0&&({HEAD:{sha:r}}=await this.providerService.getMetadata(t));const i=this.getTarStorageUri(t,r),a=await this.getTarCacheKey(t,r);try{let o=this.ongoingNetworkRequests.get(a);return o===void 0&&(o=this.getTarCore(t,r,i,{blocking:n}),this.ongoingNetworkRequests.set(a,o),this.ongoingDiskRequests.set(a,o)),await o}finally{this.ongoingNetworkRequests.delete(a),this.ongoingDiskRequests.delete(a)}}async getInMemoryTar(t,n){return Y.debug(`TarPit.getInMemoryTar(rootUri=${t.toString()}, ref=${n==null?void 0:n.toString()})`),this.getTarFromMemory(await this.getTarCacheKey(t,n))}async getCachedTar(t,n){var r;const i=await this.getTarCacheKey(t,n),a=this.getTarStorageUri(t,n);try{let o=(r=this.ongoingDiskRequests.get(i))!=null?r:this.ongoingNetworkRequests.get(i);return o===void 0&&(o=this.getTarCore(t,n,a,{skipDownload:!0,blocking:!1}),this.ongoingDiskRequests.set(i,o)),await o}finally{this.ongoingDiskRequests.delete(i)}}async getTarCore(t,n,r,i){const a=this.providerService.getCanonicalUri(t),o=`${Z(a,{excludeScheme:!0})}/${n}`,s=new M(`TarPit.getTar(${o})`),u=await this.getTarCacheKey(t,n),c=Date.now();let f,v;try{if(s.logStep("Getting .tar from memory",{suffix:" \u2022 Getting .tar from memory..."}),v=this.getTarFromMemory(u),v)return f=" \u2022 Got .tar from memory",v;s.logStep("Getting .tar from disk",{message:": Not found \u2022",suffix:" \u2022 Getting .tar from disk..."});let p=!1,w=await this.getTarFromDisk(r);if(w==null?void 0:w.length)f=" \u2022 Got .tar from disk";else{if(i==null?void 0:i.skipDownload){f=" \u2022 Skipped download";return}if(await this.isIndexingEnabledForRepo(t)===!1)throw f=" \u2022 Downloading disabled",new m.CancellationError;s.logStep("Getting .tar from network",{message:": Not found \u2022",suffix:" \u2022 Getting .tar from network..."}),w=await this.getTarFromNetwork(t,n,i.blocking),p=!0,f=" \u2022 Got .tar from network",m.workspace.fs.writeFile(r,w).then(()=>Y.debug(`Sucessfully wrote tarball to disk in ${Date.now()-c}ms`),R=>Y.error(R,`Error writing tarball to disk in ${Date.now()-c}ms`))}if(!(w==null?void 0:w.length))throw new Error("Internal Error: Invalid repository index. Try deleting repository data and running operation again: `GitHub Repositories: Delete Local Repository Data...`");s.logStep("Unzipping .tar",{suffix:" \u2022 Unzipping .tar..."});const I=v0(w);return v=await mx(I),s.stop({message:"Finished getting tar"}),this.lastReadValue=new x0(v,10*(Date.now()-c)),this.lastReadKey=u,p&&setTimeout(()=>this._onDidDownloadTar.fire({rootUri:t,sha:n}),0),v}catch(p){throw f=` \u2022 Failed; ${String(p)}`,p}finally{v&&(this.markCacheEntryUsed(`${o}`).catch(p=>Y.log(`Error marking entry used: ${p}`)),this.cleanUpCache().catch(p=>Y.log(`Error cleaning cache: ${p}`))),s.stop(f?{suffix:f}:void 0)}}async getTarCacheKey(t,n){return n===void 0&&({HEAD:{sha:n}}=await this.providerService.getMetadata(t)),this.getTarStorageUri(t,n).toString()}getTarStorageUri(t,n){return m.Uri.joinPath(this.root,"tars",Z(this.providerService.getCanonicalUri(t),{excludeScheme:!0}),n)}async readDir(t){try{return(await m.workspace.fs.readDirectory(t)).map(n=>m.Uri.joinPath(t,n[0]))}catch{return[]}}temporarilyDisableIndexing(){this.indexingDisabled=!0}async isIndexingEnabledForRepo(t){if(this.indexingDisabled)return!1;const n=await this.getIndexingEnabledRepos();if(n.has("*"))return!0;const{name:r}=this.providerService.getVirtualUriMetadata(t);if(!!r){if(n.has(r))return!0;if(n.has(`-${r}`))return!1}}async configureIndexingAllowedRepos(){const t=[...(await this.getIndexingEnabledRepos()).values()],n=await m.window.showQuickPick(t.map(r=>({picked:!0,label:r.startsWith("-")?`${zn("disallowed","Disallowed:")} ${r.slice(1)}`:`${zn("disallowed","Allowed:")} ${r}`})),{canPickMany:!0,title:zn("select repos where indexing is allowed","Repository index allowance overrides")});n&&await this.writeIndexEnablementData(n.map(r=>r.label))}async getIndexingEnabledRepos(){let t;try{t=JSON.parse(Il.decode(await m.workspace.fs.readFile(this.indexingAllowanceFile)))}catch(n){n instanceof m.FileSystemError&&n.code!==m.FileSystemError.FileNotFound().code&&Y.error(n,"Error reading index allowance data."),t=[]}return new Set(t)}async listTars(){const t=await this.readDir(m.Uri.joinPath(this.root,"tars")).catch(()=>[]),n=(await Promise.all(t.map(a=>this.readDir(a)))).flat(),r=(await Promise.all(n.map(a=>this.readDir(a)))).flat(),i=(await Promise.all(r.map(a=>this.readDir(a)))).flat();return Promise.all(i.map(async a=>({name:a.path.replace(/^.*\/tars\//,""),path:a,size:(await m.workspace.fs.stat(a)).size})))}async markIndexingEnablementForRepos(t){let n;try{n=JSON.parse(Il.decode(await m.workspace.fs.readFile(this.indexingAllowanceFile)))}catch(a){a instanceof m.FileSystemError&&a.code!==m.FileSystemError.FileNotFound().code&&Y.error(a,"Error reading index allowance data."),n=[]}const r=t?this.providerService.repositories.map(a=>a.name):[],i=t?[]:this.providerService.repositories.map(a=>a.name);n=[...n,...r].filter(a=>a.startsWith("-")?!r.includes(a.slice(1)):!i.includes(a));for(const a of i)n.push(`-${a}`);this.indexingDisabled=!1,await this.writeIndexEnablementData(n)}async writeIndexEnablementData(t){await m.workspace.fs.writeFile(this.indexingAllowanceFile,Tf.encode(JSON.stringify(t))),await this.updateContext(),setTimeout(()=>this._onDidChangeIndexingEnablement.fire(),0)}async markCacheEntryUsed(t){let n;try{n=JSON.parse(Il.decode(await m.workspace.fs.readFile(this.usageFile)))}catch(r){r instanceof m.FileSystemError&&r.code!==m.FileSystemError.FileNotFound().code&&Y.error(r,"Error reading usage data."),n={}}n[t]=Number(Date.now()),await m.workspace.fs.writeFile(this.usageFile,Tf.encode(JSON.stringify(n)))}async cleanUpCache(){var t,n;Y.log("Cleaning up search cache...");const r=await this.listTars();let i;try{i=JSON.parse(Il.decode(await m.workspace.fs.readFile(this.usageFile)))}catch(w){w instanceof m.FileSystemError&&w.code!==m.FileSystemError.FileNotFound().code&&Y.error(w,"Error reading usage data. All existing indexes will be discarded."),i={}}const a=[];r.forEach(w=>{var I;const R=/^([^/]*\/[^/]*)\//.exec(w.name);if(!R)throw Error("Unexpected repo entry");const A=R[1],D=(I=i[w.name])!=null?I:0;a.push({...w,lastUsed:D,repo:A})}),a.sort((w,I)=>I.lastUsed-w.lastUsed);let o=0;const s=[],u=new Map,c=(t=Je.get("indexing.cacheSizeLimit"))!=null?t:Je.get("search.download.sizeLimit"),f=(n=Je.get("indexing.cacheRepoLimit"))!=null?n:Je.get("search.download.repoLimit"),v=(c!=null?c:100)*1024*1024,p=f!=null?f:4;a.forEach(w=>{var I,R;(w.lastUsed===0||o>v||((I=u.get(w.repo))!=null?I:0)>p)&&s.push(w),o+=w.size,u.set(w.repo,((R=u.get(w.repo))!=null?R:0)+1)}),await Promise.all(s.map(async w=>{try{await m.workspace.fs.delete(w.path,{recursive:!0}),delete i[w.name],Y.log(`Deleted cache entry for ${w.name}`)}catch(I){Y.log(`Deleting cache entry for ${w.name} failed; ${String(I)}`)}})),await m.workspace.fs.writeFile(this.usageFile,Tf.encode(JSON.stringify(i))),await this.updateContext()}}l(b0,"TarPit");const vx=_.loadMessageBundle();async function wx(e,t,n,r,i,a,o){return Rf("provideTextSearchResults",async()=>{const s=yw(r.pattern,Boolean(r.isRegExp),{matchCase:r.isCaseSensitive,wholeWord:r.isWordMatch,multiline:r.isMultiline,global:!0});let u;try{u=await Rf("fetch tarball",()=>n.getTar(i.folder,!0,void 0))}catch(A){if(A instanceof m.CancellationError)throw A;return{limitHit:!1,message:{type:m.TextSearchCompleteMessageType.Warning,trusted:!0,text:vx("indexNotAvailable","Repository index not available. [Retry with indexing disabled]({0}).","command:remoteHub.disableIndexingForSession")}}}if(o.isCancellationRequested)return{limitHit:!1};const{maxResults:c,maxFileSize:f,includes:v,excludes:p}=i,w=await yx(i.folder,e,u,t);if(o.isCancellationRequested)return{limitHit:!0};let I=c;const R=_w(w,v,p,f);return Rf("searchFiles",async()=>{var A,D;let O=0;for(const G of w){if(!R.has(G.path))continue;const W=xw(G.contents,G.path,s,{beforeContext:(A=i.beforeContext)!=null?A:0,afterContext:(D=i.afterContext)!=null?D:0,previewOptions:i.previewOptions,remainingResultQuota:I});for(const re of W)a.report({...re,uri:m.Uri.joinPath(i.folder,re.uri.path)});if(I!==void 0&&(I-=W.length,I<=0))return{limitHit:!0};if(O++,O%1e4==0&&(await new Promise(re=>setTimeout(re,0)),o.isCancellationRequested))return{limitHit:!1}}return{limitHit:!1}})})}l(wx,"provideTextSearchResults");async function yx(e,t,n,r){const i=n.entries,a=t.getVirtualRootUri(e),o=await r.getChanges(a,{predicate:v=>v.fileType===m.FileType.File});if(o.length===0)return i.map(v=>({contents:v.dataAsBytes,path:v.header.fullFileName,size:v.dataAsBytes.byteLength}));const s=await Promise.all(ll(o,v=>{if(v.type===H.Created)return r.getContent(v.uri).then(p=>({path:t.getRelativeFilePath(a,v.uri),size:p.length,contents:p}))})),u=await Promise.all(ll(o,v=>{if(v.type===H.Changed)return r.getContent(v.uri).then(p=>({path:t.getRelativeFilePath(a,v.uri),size:p.length,contents:p}))})),c=new Set(vw(Kp(u,v=>v.path),ll(o,v=>{if(v.type===H.Deleted)return t.getRelativeFilePath(a,v.uri)})));return[...ll(i,v=>{if(!c.has(v.header.fullFileName))return{contents:v.dataAsBytes,path:v.header.fullFileName,size:v.dataAsBytes.byteLength}}),...s,...u]}l(yx,"listAllFiles");function zb(e,t){const n=Date.now(),r=t();return Logger.log(`${e} time: ${Date.now()-n}`),r}l(zb,"timeSync");async function Rf(e,t){const n=Date.now(),r=await t();return Y.log(`${e} time: ${Date.now()-n}`),r}l(Rf,"time");var _x=Object.defineProperty,xx=Object.getOwnPropertyDescriptor,kf=l((e,t,n,r)=>{for(var i=r>1?void 0:r?xx(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_x(t,n,i),i},"fs_decorateClass");const Df=_.loadMessageBundle(),bx=m.FileSystemError.FileNotFound().code,Ex=/(\/|\\)/g,E0=".vscode/.github-pull-request.rec";class Po{constructor(t,n,r,i,a){this.providerService=t,this.github=n,this.changeStore=r,this.tarPit=i,this.telemetryService=a,this._onDidChangeFile=new m.EventEmitter,this.fileSearchCache=new Map,this.pendingUriRequests=new Map,this.pendingUriRequestsEventDelay=10,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.disposable=m.Disposable.from(m.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),m.workspace.registerFileSearchProvider(this.scheme,this),m.workspace.registerTextSearchProvider(this.scheme,this),t.onDidChangeRepository(o=>{o.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([o.repository.uri])}),t.onDidRefresh(o=>this.onRefreshOrRepositoryChanged(o)))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return this.github.scheme}dispose(){var t;(t=this.disposable)==null||t.dispose()}onRefreshOrRepositoryChanged(t){if(t=t.filter(n=>J.getProviderId(n)===this.scheme).map(n=>J.getProviderUri(n)),t.length!==0){Y.log(`GitHubFS.onRefreshOrRepositoryChanged(${t.map(n=>n.toString()).join(", ")})`),this.fileSearchCache.clear();for(const[n,r]of[...this.pendingUriRequests])t.some(i=>P(r.uri,i))&&(this.pendingUriRequests.delete(n),r.outdated=!0);this.updateOpenOrWatchedUris(t)}}updateOpenOrWatchedUris(t){const n=J.getOpenUris(this.scheme,t);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])t.some(o=>P(a,o))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));Y.debug(`GitHubFS.updateOpenOrWatchedUris(${t.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of t)n.set(k(i),i);const r=[...n.values()].map(i=>({type:m.FileChangeType.Changed,uri:i}));setTimeout(()=>{Y.debug(`GitHubFS.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(t,n){const r=k(t);return this.watchedUris.set(r,t),{dispose:()=>{this.watchedUris.delete(r)}}}async stat(t){var n,r;const i=k(t);this.implicitlyWatchedUris.set(i,t);const a=this.providerService.getRelativeFilePath(t),o={uri:t,outdated:!1};try{this.pendingUriRequests.set(`stat:${i}`,o);const s=await this.github.getFileTree(t),u=await s.get(a);if(u==null?void 0:u.stat)return u==null?void 0:u.stat;if(this.implicitlyWatchedUris.delete(i),t.query==="~")return{type:m.FileType.File,size:0,ctime:0,mtime:(n=s.timestamp)!=null?n:Date.now(),permissions:m.FilePermission.Readonly};if(a===E0){const{ref:c}=this.providerService.getVirtualUriMetadata(t);if((c==null?void 0:c.type)===He.PullRequest)return{type:m.FileType.File,size:0,ctime:0,mtime:(r=s.timestamp)!=null?r:Date.now(),permissions:m.FilePermission.Readonly}}throw m.FileSystemError.FileNotFound(t)}finally{this.pendingUriRequests.delete(`stat:${i}`),(o==null?void 0:o.outdated)&&setTimeout(()=>{Y.log(`GitHubFS.stat(${t.toString()}): Repository changed; firing change event...`),this._onDidChangeFile.fire([{type:m.FileChangeType.Changed,uri:t}])},this.pendingUriRequestsEventDelay)}}async readDirectory(t,n){var r;this.implicitlyWatchedUris.set(k(t),t);let i;const a=this.providerService.getRelativeFilePath(t);let o;try{return i=await this.github.getFileTree(t),(await i.getChildren(a,n)).map(([u,{stat:{type:c}}])=>[u,c])}catch(s){throw o=s,a===""&&s instanceof Error&&this.telemetryService.sendErrorEvent("fs.readRootDirectory.error",{errorName:s.name,errorMessage:s.message,errorStack:(r=s.stack)!=null?r:""},void 0,[]),s}finally{a===""&&(M.stop("Time to root directory"),this.telemetryService.reportWorkbenchLoadResult({result:o===void 0?"Success":"Failure",errorMessage:(i==null?void 0:i.hasEntireTree)?"":"Unable to load entire tree",errorDetail:o}))}}createDirectory(t){throw m.FileSystemError.NoPermissions()}async readFile(t){const n=k(t);this.implicitlyWatchedUris.set(n,t);const r={uri:t,outdated:!1};try{return this.pendingUriRequests.set(n,r),await this.github.getFileContent(t)}catch(i){if(this.implicitlyWatchedUris.delete(n),i instanceof m.FileSystemError&&i.code===bx){if(t.query==="~")return new Uint8Array(0);if(this.providerService.getRelativeFilePath(t)===E0){const{ref:o}=this.providerService.getVirtualUriMetadata(t);if((o==null?void 0:o.type)===He.PullRequest)return new Uint8Array(0)}}throw i}finally{this.pendingUriRequests.delete(n),(r==null?void 0:r.outdated)&&setTimeout(()=>{Y.log(`GitHubFS.readFile(${t.toString()}): Repository changed; firing change event...`),this._onDidChangeFile.fire([{type:m.FileChangeType.Changed,uri:t}])},this.pendingUriRequestsEventDelay)}}writeFile(t,n,r){throw m.FileSystemError.NoPermissions()}delete(t,n){throw m.FileSystemError.NoPermissions()}rename(t,n,r){throw m.FileSystemError.NoPermissions()}copy(t,n,r){throw m.FileSystemError.NoPermissions()}async provideFileSearchResults(t,{folder:n,maxResults:r,includes:i,excludes:a},o){const s=`${k(n)}|${JSON.stringify({includes:i,excludes:a})}`;let u=this.fileSearchCache.get(s);if(u===void 0){const f=this.providerService.getRelativeFilePath(n);let v;await this.github.hasFileTree(n)&&(v=await this.github.getFileTree(n));let p;if(v===void 0||v.loading||!v.hasEntireTree?p=await this.github.getFileList(n,f):p=(await v.getChildren(f,{filter:m.FileType.File,recursive:!0})).map(([w])=>w),p.length===0||o.isCancellationRequested)return[];((i==null?void 0:i.length)||(a==null?void 0:a.length))&&(p=[...Yu(p,i,a)]),u=p.map(w=>Qu.prepareSlow(w)),this.fileSearchCache.set(s,u)}let c;return t.pattern===""?c=u.map(f=>m.Uri.joinPath(n,f.target)):(c=Qu.go(t.pattern.replace(Ex,"/"),u,{allowTypo:!0,limit:r}).map(f=>m.Uri.joinPath(n,f.target)),Qu.cleanup()),r!==void 0&&r!==0&&r<c.length&&(c=c.slice(0,r)),c}async provideTextSearchResults(t,n,r,i){const a=[];if(await this.tarPit.isIndexingEnabledForRepo(n.folder)!==!1)try{return await wx(this.providerService,this.changeStore,this.tarPit,t,n,r,i)}catch(c){c instanceof m.CancellationError||a.push({text:Df("index error","Error searching index, falling back to GitHub search. Try [deleting this repo's data]({0}) or [deleting all local data]({1}) to rebuild the index.","command:remoteHub.deleteLocalRepositoryData","command:remoteHub.deleteAllLocalRepositoryData"),type:m.TextSearchCompleteMessageType.Warning})}t.isCaseSensitive||t.isRegExp||t.isWordMatch?a.push({text:Df("flags not supported","Search flags are not supported by GitHub search. [Download full index]({0}) for full search features and exact text searches.","command:remoteHub.enableIndexing"),type:m.TextSearchCompleteMessageType.Warning,trusted:!0}):a.push({text:Df("enable index","Partial results shown. [Download full index]({0}) for exact text searches.","command:remoteHub.enableIndexing"),type:m.TextSearchCompleteMessageType.Information,trusted:!0});const o=await this.github.searchCodeQuery(t.pattern,n.folder,{maxResults:n.maxResults,context:{before:n.beforeContext,after:n.afterContext}});if(o.warnings&&o.warnings.forEach(c=>{a.push({text:c,trusted:!0,type:m.TextSearchCompleteMessageType.Warning})}),o===void 0)return{limitHit:!0,message:a};const s=new Set(Yu(o.matches.map(c=>c.path),n.includes,n.excludes));let u;for(const c of o.matches)s.has(c.path)&&(u=m.Uri.joinPath(n.folder,c.path),r.report({uri:u,ranges:c.ranges,preview:{text:c.preview,matches:c.matches}}));return{limitHit:!1,message:a}}}l(Po,"GitHubFS"),kf([Ju()],Po.prototype,"stat",1),kf([Ju()],Po.prototype,"readDirectory",1),kf([Ju()],Po.prototype,"readFile",1);var Sx=__webpack_require__(6470);const Cx=globalThis.fetch;async function S0(e,t,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(e,{...t,signal:r.signal})}catch(i){throw n.isCancellationRequested?new m.CancellationError:i}}l(S0,"fetchWithCancellation");async function C0(e,t,n,r,i){if(n===0)throw new m.CancellationError;const a=new m.CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const o=await S0(e,t,a.token);if(o.body){const s=[];let u=0;const c=o.body.getReader();let f=3;for(;;){let{done:v,value:p}=await c.read();if(v){const I=s.reduce((D,O)=>D+O.length,0),R=new Uint8Array(I);let A=0;for(const D of s)R.set(D,A),A+=D.length;return R}p&&(s.push(p),u+=p.length);const w=Math.floor(u/(1024*1024));if(f<w){f=w;const I={message:w+" MB"};i.report(I)}if(n!==void 0&&u>n)throw c.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(o){throw r.isCancellationRequested?new m.CancellationError:o}throw new m.CancellationError}l(C0,"fetchUInt8ArrayWithMaxSizeAndCancellation");var Mo=__webpack_require__(4155);function Tl(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof Mo=="object"&&"version"in Mo?`Node.js/${Mo.version.substr(1)} (${Mo.platform}; ${Mo.arch})`:"<environment undetectable>"}l(Tl,"getUserAgent");var Ax=__webpack_require__(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function A0(e){return Object.prototype.toString.call(e)==="[object Object]"}l(A0,"isObject");function I0(e){var t,n;return A0(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(A0(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}l(I0,"isPlainObject");function Ix(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}l(Ix,"lowercaseKeys");function T0(e,t){const n=Object.assign({},e);return Object.keys(t).forEach(r=>{I0(t[r])?r in e?n[r]=T0(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}l(T0,"mergeDeep");function R0(e){for(const t in e)e[t]===void 0&&delete e[t];return e}l(R0,"removeUndefinedProperties");function Ff(e,t,n){if(typeof t=="string"){let[i,a]=t.split(" ");n=Object.assign(a?{method:i,url:a}:{url:i},n)}else n=Object.assign({},t);n.headers=Ix(n.headers),R0(n),R0(n.headers);const r=T0(e||{},n);return e&&e.mediaType.previews.length&&(r.mediaType.previews=e.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=r.mediaType.previews.map(i=>i.replace(/-preview/,"")),r}l(Ff,"dist_web_merge");function Tx(e,t){const n=/\?/.test(e)?"&":"?",r=Object.keys(t);return r.length===0?e:e+n+r.map(i=>i==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(t[i])}`).join("&")}l(Tx,"addQueryParameters");const Rx=/\{[^}]+\}/g;function kx(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}l(kx,"removeNonChars");function Dx(e){const t=e.match(Rx);return t?t.map(kx).reduce((n,r)=>n.concat(r),[]):[]}l(Dx,"extractUrlVariableNames");function k0(e,t){return Object.keys(e).filter(n=>!t.includes(n)).reduce((n,r)=>(n[r]=e[r],n),{})}l(k0,"omit");function D0(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}l(D0,"encodeReserved");function Ea(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}l(Ea,"encodeUnreserved");function Oo(e,t,n){return t=e==="+"||e==="#"?D0(t):Ea(t),n?Ea(n)+"="+t:t}l(Oo,"encodeValue");function Sa(e){return e!=null}l(Sa,"isDefined");function Nf(e){return e===";"||e==="&"||e==="?"}l(Nf,"isKeyOperator");function Fx(e,t,n,r){var i=e[n],a=[];if(Sa(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),a.push(Oo(t,i,Nf(t)?n:""));else if(r==="*")Array.isArray(i)?i.filter(Sa).forEach(function(o){a.push(Oo(t,o,Nf(t)?n:""))}):Object.keys(i).forEach(function(o){Sa(i[o])&&a.push(Oo(t,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Sa).forEach(function(s){o.push(Oo(t,s))}):Object.keys(i).forEach(function(s){Sa(i[s])&&(o.push(Ea(s)),o.push(Oo(t,i[s].toString())))}),Nf(t)?a.push(Ea(n)+"="+o.join(",")):o.length!==0&&a.push(o.join(","))}else t===";"?Sa(i)&&a.push(Ea(n)):i===""&&(t==="&"||t==="?")?a.push(Ea(n)+"="):i===""&&a.push("");return a}l(Fx,"getValues");function Nx(e){return{expand:Lx.bind(null,e)}}l(Nx,"parseUrl");function Lx(e,t){var n=["+","#",".","/",";","?","&"];return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,a){if(i){let s="";const u=[];if(n.indexOf(i.charAt(0))!==-1&&(s=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var f=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);u.push(Fx(t,s,f[1],f[2]||f[3]))}),s&&s!=="+"){var o=",";return s==="?"?o="&":s!=="#"&&(o=s),(u.length!==0?s:"")+u.join(o)}else return u.join(",")}else return D0(a)})}l(Lx,"expand");function F0(e){let t=e.method.toUpperCase(),n=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},e.headers),i,a=k0(e,["method","baseUrl","url","headers","request","mediaType"]);const o=Dx(n);n=Nx(n).expand(a),/^http/.test(n)||(n=e.baseUrl+n);const s=Object.keys(e).filter(f=>o.includes(f)).concat("baseUrl"),u=k0(a,s);if(!/application\/octet-stream/i.test(r.accept)&&(e.mediaType.format&&(r.accept=r.accept.split(/,/).map(f=>f.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),e.mediaType.previews.length)){const f=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=f.concat(e.mediaType.previews).map(v=>{const p=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${v}-preview${p}`}).join(",")}return["GET","HEAD"].includes(t)?n=Tx(n,u):"data"in u?i=u.data:Object.keys(u).length?i=u:r["content-length"]=0,!r["content-type"]&&typeof i!="undefined"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof i=="undefined"&&(i=""),Object.assign({method:t,url:n,headers:r},typeof i!="undefined"?{body:i}:null,e.request?{request:e.request}:null)}l(F0,"parse");function Bx(e,t,n){return F0(Ff(e,t,n))}l(Bx,"endpointWithDefaults");function N0(e,t){const n=Ff(e,t),r=Bx.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:N0.bind(null,n),merge:Ff.bind(null,n),parse:F0})}l(N0,"withDefaults");const $x=`octokit-endpoint.js/6.0.12 ${Tl()}`,Px=N0(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":$x},mediaType:{format:"",previews:[]}});var Mx=__webpack_require__(3300),Ox=__webpack_require__.n(Mx);class Lf extends Error{constructor(t){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}l(Lf,"Deprecation");var Ux=__webpack_require__(447),L0=__webpack_require__.n(Ux);const Hx=L0()(e=>console.warn(e)),zx=L0()(e=>console.warn(e));class $r extends Error{constructor(t,n,r){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=n;let i;"headers"in r&&typeof r.headers!="undefined"&&(i=r.headers),"response"in r&&(this.response=r.response,i=r.response.headers);const a=Object.assign({},r.request);r.request.headers.authorization&&(a.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),a.url=a.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=a,Object.defineProperty(this,"code",{get(){return Hx(new Lf("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),n}}),Object.defineProperty(this,"headers",{get(){return zx(new Lf("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),i||{}}})}}l($r,"RequestError");const qx="5.6.3";function Wx(e){return e.arrayBuffer()}l(Wx,"getBufferResponse");function B0(e){const t=e.request&&e.request.log?e.request.log:console;(I0(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let n={},r,i;return(e.request&&e.request.fetch||Ox())(e.url,Object.assign({method:e.method,body:e.body,headers:e.headers,redirect:e.redirect},e.request)).then(async o=>{i=o.url,r=o.status;for(const s of o.headers)n[s[0]]=s[1];if("deprecation"in n){const s=n.link&&n.link.match(/<([^>]+)>; rel="deprecation"/),u=s&&s.pop();t.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${n.sunset}${u?`. See ${u}`:""}`)}if(!(r===204||r===205)){if(e.method==="HEAD"){if(r<400)return;throw new $r(o.statusText,r,{response:{url:i,status:r,headers:n,data:void 0},request:e})}if(r===304)throw new $r("Not modified",r,{response:{url:i,status:r,headers:n,data:await Bf(o)},request:e});if(r>=400){const s=await Bf(o);throw new $r(jx(s),r,{response:{url:i,status:r,headers:n,data:s},request:e})}return Bf(o)}}).then(o=>({status:r,url:i,headers:n,data:o})).catch(o=>{throw o instanceof $r?o:new $r(o.message,500,{request:e})})}l(B0,"fetchWrapper");async function Bf(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json():!t||/^text\/|charset=utf-8$/.test(t)?e.text():Wx(e)}l(Bf,"getResponseData");function jx(e){return typeof e=="string"?e:"message"in e?Array.isArray(e.errors)?`${e.message}: ${e.errors.map(JSON.stringify).join(", ")}`:e.message:`Unknown error: ${JSON.stringify(e)}`}l(jx,"toErrorMessage");function $f(e,t){const n=e.defaults(t);return Object.assign(l(function(i,a){const o=n.merge(i,a);if(!o.request||!o.request.hook)return B0(n.parse(o));const s=l((u,c)=>B0(n.parse(n.merge(u,c))),"request");return Object.assign(s,{endpoint:n,defaults:$f.bind(null,n)}),o.request.hook(s,o)},"newApi"),{endpoint:n,defaults:$f.bind(null,n)})}l($f,"dist_web_withDefaults");const Rl=$f(Px,{headers:{"user-agent":`octokit-request.js/${qx} ${Tl()}`}}),Vx="4.8.0";function Gx(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}l(Gx,"_buildMessageForResponseErrors");class li extends Error{constructor(t,n,r){super(Gx(r));this.request=t,this.headers=n,this.response=r,this.name="GraphqlResponseError",this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}l(li,"GraphqlResponseError");const Kx=["method","baseUrl","url","headers","request","query","mediaType"],Zx=["query","method","url"],$0=/\/api\/v3\/?$/;function Qx(e,t,n){if(n){if(typeof t=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in n)if(!!Zx.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const r=typeof t=="string"?Object.assign({query:t},n):t,i=Object.keys(r).reduce((o,s)=>Kx.includes(s)?(o[s]=r[s],o):(o.variables||(o.variables={}),o.variables[s]=r[s],o),{}),a=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return $0.test(a)&&(i.url=a.replace($0,"/api/graphql")),e(i).then(o=>{if(o.data.errors){const s={};for(const u of Object.keys(o.headers))s[u]=o.headers[u];throw new li(i,s,o.data)}return o.data.data})}l(Qx,"graphql");function Pf(e,t){const n=e.defaults(t);return Object.assign(l((i,a)=>Qx(n,i,a),"newApi"),{defaults:Pf.bind(null,n),endpoint:Rl.endpoint})}l(Pf,"graphql_dist_web_withDefaults");const jb=Pf(Rl,{headers:{"user-agent":`octokit-graphql.js/${Vx} ${Tl()}`},method:"POST",url:"/graphql"});function Xx(e){return Pf(e,{method:"POST",url:"/graphql"})}l(Xx,"withCustomRequest");const Yx=/^v1\./,Jx=/^ghs_/,eb=/^ghu_/;async function tb(e){const t=e.split(/\./).length===3,n=Yx.test(e)||Jx.test(e),r=eb.test(e);return{type:"token",token:e,tokenType:t?"app":n?"installation":r?"user-to-server":"oauth"}}l(tb,"auth");function nb(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}l(nb,"withAuthorizationPrefix");async function rb(e,t,n,r){const i=t.endpoint.merge(n,r);return i.headers.authorization=nb(e),t(i)}l(rb,"hook");const ib=l(function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(tb.bind(null,t),{hook:rb.bind(null,t)})},"createTokenAuth"),P0="3.5.1";class Uo{constructor(t={}){const n=new Ax.Collection,r={baseUrl:Rl.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=[t.userAgent,`octokit-core.js/${P0} ${Tl()}`].filter(Boolean).join(" "),t.baseUrl&&(r.baseUrl=t.baseUrl),t.previews&&(r.mediaType.previews=t.previews),t.timeZone&&(r.headers["time-zone"]=t.timeZone),this.request=Rl.defaults(r),this.graphql=Xx(this.request).defaults(r),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},t.log),this.hook=n,t.authStrategy){const{authStrategy:a,...o}=t,s=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},t.auth));n.wrap("request",s.hook),this.auth=s}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=ib(t.auth);n.wrap("request",a.hook),this.auth=a}this.constructor.plugins.forEach(a=>{Object.assign(this,a(this,t))})}static defaults(t){return l(class extends this{constructor(...r){const i=r[0]||{};if(typeof t=="function"){super(t(i));return}super(Object.assign({},t,i,i.userAgent&&t.userAgent?{userAgent:`${i.userAgent} ${t.userAgent}`}:null))}},"OctokitWithDefaults")}static plugin(...t){var n;const r=this.plugins;return n=l(class extends this{},"_a"),n.plugins=r.concat(t.filter(a=>!r.includes(a))),n}}l(Uo,"Octokit"),Uo.VERSION=P0,Uo.plugins=[];var M0;(function(e){e[e.Force=0]="Force",e[e.ForceWithLease=1]="ForceWithLease"})(M0||(M0={}));var ci;(function(e){e[e.Head=0]="Head",e[e.RemoteHead=1]="RemoteHead",e[e.Tag=2]="Tag"})(ci||(ci={}));var Ho;(function(e){e[e.INDEX_MODIFIED=0]="INDEX_MODIFIED",e[e.INDEX_ADDED=1]="INDEX_ADDED",e[e.INDEX_DELETED=2]="INDEX_DELETED",e[e.INDEX_RENAMED=3]="INDEX_RENAMED",e[e.INDEX_COPIED=4]="INDEX_COPIED",e[e.MODIFIED=5]="MODIFIED",e[e.DELETED=6]="DELETED",e[e.UNTRACKED=7]="UNTRACKED",e[e.IGNORED=8]="IGNORED",e[e.INTENT_TO_ADD=9]="INTENT_TO_ADD",e[e.ADDED_BY_US=10]="ADDED_BY_US",e[e.ADDED_BY_THEM=11]="ADDED_BY_THEM",e[e.DELETED_BY_US=12]="DELETED_BY_US",e[e.DELETED_BY_THEM=13]="DELETED_BY_THEM",e[e.BOTH_ADDED=14]="BOTH_ADDED",e[e.BOTH_DELETED=15]="BOTH_DELETED",e[e.BOTH_MODIFIED=16]="BOTH_MODIFIED"})(Ho||(Ho={}));var O0;(function(e){e.BadConfigFile="BadConfigFile",e.AuthenticationFailed="AuthenticationFailed",e.NoUserNameConfigured="NoUserNameConfigured",e.NoUserEmailConfigured="NoUserEmailConfigured",e.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",e.NotAGitRepository="NotAGitRepository",e.NotAtRepositoryRoot="NotAtRepositoryRoot",e.Conflict="Conflict",e.StashConflict="StashConflict",e.UnmergedChanges="UnmergedChanges",e.PushRejected="PushRejected",e.RemoteConnectionError="RemoteConnectionError",e.DirtyWorkTree="DirtyWorkTree",e.CantOpenResource="CantOpenResource",e.GitNotFound="GitNotFound",e.CantCreatePipe="CantCreatePipe",e.PermissionDenied="PermissionDenied",e.CantAccessRemote="CantAccessRemote",e.RepositoryNotFound="RepositoryNotFound",e.RepositoryIsLocked="RepositoryIsLocked",e.BranchNotFullyMerged="BranchNotFullyMerged",e.NoRemoteReference="NoRemoteReference",e.InvalidBranchName="InvalidBranchName",e.BranchAlreadyExists="BranchAlreadyExists",e.NoLocalChanges="NoLocalChanges",e.NoStashFound="NoStashFound",e.LocalChangesOverwritten="LocalChangesOverwritten",e.NoUpstreamBranch="NoUpstreamBranch",e.IsInSubmodule="IsInSubmodule",e.WrongCase="WrongCase",e.CantLockRef="CantLockRef",e.CantRebaseMultipleBranches="CantRebaseMultipleBranches",e.PatchDoesNotApply="PatchDoesNotApply",e.NoPathFound="NoPathFound",e.UnknownPath="UnknownPath"})(O0||(O0={}));class Mf{constructor(t,n){this.path=t,this.relativePath=n}}l(Mf,"TrieNode");class U0{constructor(){this.root=new Mf("","")}get(t){var n;t.startsWith("/")?t=t.slice(1,t.endsWith("/")?-1:void 0):t.endsWith("/")&&(t=t.slice(0,-1));let r=this.root;for(const i of t.split("/")){const a=(n=r.children)==null?void 0:n.get(i);if(a===void 0)return;r=a}return r.path===t?r.data:void 0}getChildren(t){var n;t.startsWith("/")?t=t.slice(1,t.endsWith("/")?-1:void 0):t.endsWith("/")&&(t=t.slice(0,-1));let r=this.root;if(t)for(const i of t.split("/")){const a=(n=r.children)==null?void 0:n.get(i);if(a===void 0)return[];r=a}return r.children===void 0?[]:[...r.children.values()].map(i=>[i.relativePath,i.data])}getDescendants(t){var n;t.startsWith("/")?t=t.slice(1,t.endsWith("/")?-1:void 0):t.endsWith("/")&&(t=t.slice(0,-1));let r=this.root;const i=[];if(t)for(const a of t.split("/")){const o=(n=r.children)==null?void 0:n.get(a);if(o===void 0)return i;r=o}if(r.children!==void 0){let a=l(function(o,s,u){for(const c of o.values()){const f=`${s?`${s}/`:""}${c.relativePath}`;c.data&&u.push([f,c.data]),c.children!==void 0&&a(c.children,f,u)}},"getDescendantsCore");a(r.children,"",i)}return i}has(t){var n;t.startsWith("/")?t=t.slice(1,t.endsWith("/")?-1:void 0):t.endsWith("/")&&(t=t.slice(0,-1));let r=this.root;for(const i of t.split("/")){const a=(n=r.children)==null?void 0:n.get(i);if(a===void 0)return!1;r=a}return r.path===t}set(t,n){var r;t.startsWith("/")?t=t.slice(1,t.endsWith("/")?-1:void 0):t.endsWith("/")&&(t=t.slice(0,-1));let i=this.root,a="";for(const o of t.split("/")){let s=(r=i.children)==null?void 0:r.get(o);a=`${a?`${a}/`:""}${o}`,s===void 0&&(i.children===void 0&&(i.children=new Map),s=new Mf(a,o),i.children.set(o,s)),i=s}i.data=n}}l(U0,"Trie");var ab=__webpack_require__(5431),Of=__webpack_require__.n(ab);class Uf{constructor(t,n,r,i,a){if(this.rootUri=t,this.sha=n,this.timestamp=r,this.provider=i,this.trie=new U0,this._hasEntireTree=!1,this._isContentCached=!1,i===void 0)return;const o=[i];i.onDidTriggerContentCaching!==void 0&&i.tryCachingContent!==void 0&&o.push(i.onDidTriggerContentCaching(s=>{(!s||k(s.rootUri)===k(this.rootUri)&&s.sha===this.sha)&&!this.loading&&this.hasEntireTree&&!this.isContentCached&&i.tryCachingContent(this.trie.get.bind(this.trie)).then(u=>this._isContentCached=u,()=>this._isContentCached=!0)})),this._loading=this.load(a==null?void 0:a.path,a==null?void 0:a.recursive).then(s=>(this._hasEntireTree=(s==null?void 0:s.success)?s.recursive:!1,this._hasEntireTree&&setTimeout(()=>{var u;return void((u=i.tryCachingContent)==null?void 0:u.call(i,this.trie.get.bind(this.trie)).then(c=>this._isContentCached=c,()=>this._isContentCached=!0))},0),this._loading=void 0,this.preloading=void 0,this.treeSha=(s==null?void 0:s.success)?s.sha:void 0,this.treeSha)),(a==null?void 0:a.preload)&&(this.preloading=new Map([["",this.load("")],[".vscode",this.load(".vscode")]])),this.disposable=m.Disposable.from(...o)}get hasEntireTree(){return this._hasEntireTree}get isContentCached(){return this._isContentCached}get loading(){return this._loading!==void 0}get permissions(){var t;return(t=this.provider)==null?void 0:t.permissions}dispose(){var t;(t=this.disposable)==null||t.dispose()}async get(t){var n;if(t==="")return{mode:"040000",sha:this.treeSha,stat:{type:m.FileType.Directory,size:0,ctime:0,mtime:(n=this.timestamp)!=null?n:Date.now(),permissions:await this.permissions},getContent:void 0};let r=this.trie.get(t);return r!==void 0||(await this.ensureLoaded(t),r=this.trie.get(t)),r}async getChildren(t,n){await this.ensureLoaded(t,!0);const r=(n==null?void 0:n.recursive)?this.trie.getDescendants(t):this.trie.getChildren(t);return(n==null?void 0:n.filter)===void 0?r:r.filter(([,i])=>i.stat.type===n.filter)}async getTreeSha(){return await this.waitUntilLoaded(),this.treeSha}async waitUntilLoaded(){this._loading!==void 0&&await this._loading}async ensureLoaded(t,n=!1){if(this._loading!==void 0){let i;if(this.preloading!==void 0)if(n)i=this.preloading.get(t);else{const a=mw(this.preloading,([o])=>t.startsWith(o)&&t.lastIndexOf("/")===(o?o.length:-1));i=a==null?void 0:a[1]}await(i!=null?i:this._loading)}if(this.hasEntireTree||t==="")return;let r=this.trie.get(t);if(r)return n&&(r==null?void 0:r.loadChildren)?r.loadChildren():void 0;if(await this.ensureLoaded(t.substr(0,t.lastIndexOf("/")),!0),r=this.trie.get(t),n&&(r==null?void 0:r.loadChildren))return r.loadChildren()}async load(t,n=!1){var r;if(((r=this.provider)==null?void 0:r.getTree)===void 0)return;const i=new M(`FileTree.load(${this.sha}:${t})`);let a;try{i.logStep("Tree query");const o=await this.provider.getTree(t,n);if(o.truncated){Y.warn(`Loading file tree for path=${t} was truncated`),i.logStep("Fixing directories",{message:`: Tree=${o.sha};`,suffix:" \u2022 Fixing directories..."});for(const[u,c]of this.trie.getDescendants(""))c.stat.type===m.FileType.Directory&&(c.loadChildren=Of()(()=>this.load(u).then(()=>c.loadChildren=void 0)));return a=` \u2022 Tree=${o.sha} \u2022 Truncated`,{sha:o.sha,recursive:!1,success:!0}}let s;this.permissions!==void 0&&(i.logStep("Permissions query",{message:`: Tree=${o.sha};`,suffix:" \u2022 Waiting for permissions..."}),s=await this.permissions),i.logStep("Filling trie",{suffix:" \u2022 Filling trie..."});for(let{path:u,item:c}of o.tree)if(u!==void 0){switch(u=t?`${t}/${u}`:u,c.stat.permissions=s,c.stat.type){case m.FileType.File:c.getContent=Of()(()=>this.provider.getContent(c,u));break;case m.FileType.Directory:n||(c.loadChildren=Of()(()=>this.load(u).then(()=>c.loadChildren=void 0)));break}this.trie.set(u,c)}return a=` \u2022 Tree=${o.sha}`,{sha:o.sha,recursive:n,success:!0}}catch(o){return a=`\u2022 Loading for path=${t} failed; ${String(o)}`,{error:o,success:!1}}finally{i.stop(a?{suffix:a}:void 0)}}}l(Uf,"FileTree");var ob=__webpack_require__(7769);const sb="github-pr-owner-number";function lb(e){return`branch.${e}.${sb}`}l(lb,"getMetadataKeyForBranch");const cb=_.loadMessageBundle(),H0=new TextDecoder;class z0{constructor(t,n,r,i,a,o){this.providerService=t,this.rootUri=n,this.sourceControl=r,this.metadata=i,this.changeStore=a,this.github=o,this._onDidChangeSelection=new m.EventEmitter,this._onDidChangeState=new m.EventEmitter,this._objects=new Map,this.disposable=m.Disposable.from(this.sourceControl.onDidChangeSelection(()=>this._onDidChangeSelection.fire()),this.providerService.onDidRefresh(c=>{const f=k(this.rootUri);!c.some(v=>k(v)===f)||this.updateState(this.metadata)}),this.providerService.onDidChangeRepository(async({repository:c})=>{k(this.rootUri)===k(c.uri)&&this.updateState(await c.getMetadata())}),this.changeStore.onDidChange(()=>this.updateState(this.metadata)),this._onDidChangeSelection,this._onDidChangeState),this._inputBox={get value(){return r.inputBox.value},set value(c){r.inputBox.value=c}},this._ui={get selected(){return r.selected},onDidChange:this._onDidChangeSelection.event};const{repo:{owner:s,name:u}}=i;this.remote={name:"origin",fetchUrl:`https://github.com/${s}/${u}.git`,isReadOnly:i.accessLevel<ae.Write},this.remotes=[this.remote],this._state={HEAD:this.getHEADFromMetadata(i),mergeChanges:[],indexChanges:[],workingTreeChanges:[],onDidChange:this._onDidChangeState.event,rebaseCommit:void 0,refs:[],remotes:this.remotes,submodules:[]},this.updateState(i)}dispose(){this.disposable.dispose()}get inputBox(){return this._inputBox}get state(){return this._state}get ui(){return this._ui}getHEADFromMetadata(t){switch(t.HEAD.type){case ne.Branch:return{type:ci.Head,commit:t.HEAD.sha,name:t.HEAD.branch.name,upstream:{name:t.HEAD.branch.name,remote:this.remote.name}};case ne.RemoteBranch:{const n=t.HEAD.branch.remote.repo.owner,r=t.HEAD.branch.remote.accessLevel<ae.Write,i=this.remotes.findIndex(a=>a.name===n);return this.remotes.splice(i===-1?this.remotes.length:i,i===-1?0:1,{name:n,fetchUrl:`https://github.com/${t.HEAD.branch.remote.repo.owner}/${t.HEAD.branch.remote.repo.name}.git`,pushUrl:r?void 0:`https://github.com/${t.HEAD.branch.remote.repo.owner}/${t.HEAD.branch.remote.repo.name}.git`,isReadOnly:r}),{type:ci.RemoteHead,commit:t.HEAD.sha,name:t.HEAD.branch.name,upstream:{name:t.HEAD.branch.name,remote:t.HEAD.branch.remote.repo.owner}}}case ne.Tag:return{type:ci.Tag,name:t.HEAD.detached.name,commit:t.HEAD.sha};case ne.Commit:return{type:ci.Head,commit:t.HEAD.sha}}}async updateState(t){this.metadata=t;const n=await this.changeStore.getGroupedChanges(this.rootUri,{predicate:s=>s.fileType===m.FileType.File}),r=n.conflicts.map(s=>({uri:s.uri,status:Hf(s.type),originalUri:s.uri,renameUri:s.uri})),i=n.staged.map(s=>({uri:s.uri,status:Hf(s.type),originalUri:s.uri,renameUri:s.uri})),a=n.working.map(s=>({uri:s.uri,status:Hf(s.type),originalUri:s.uri,renameUri:s.uri})),o=Je.get("staging.enabled");this._state={...this._state,HEAD:this.getHEADFromMetadata(t),mergeChanges:r,indexChanges:o?i:[],workingTreeChanges:o?a:[...i,...a]},this._onDidChangeState.fire()}getConfigs(){return Promise.resolve([])}getConfig(t){return this.metadata.HEAD.branch&&this.metadata.pullRequest&&t===lb(this.metadata.HEAD.branch.name)?Promise.resolve(`${this.metadata.repo.owner}#${this.metadata.repo.name}#${this.metadata.pullRequest.id}`):Promise.resolve("")}setConfig(t,n){return Promise.resolve("")}getGlobalConfig(t){throw new Error("Method not implemented.")}async getObjectDetails(t,n){const r=new M(`IGit.getObjectDetails(${t}, ${n})`);try{return await this.github.getObjectDetails(this.rootUri,t,this.pathToRelativePath(n))}finally{r.stop()}}async detectObjectType(t){var n;const r=new M(`IGit.detectObjectType(${t})`);try{const i=await this.github.getBlobContent(this.metadata.repo,t);if(!uw(i))return{mimetype:"text/plain"};const o=await(0,ob.fromBuffer)(i);return{mimetype:(n=o==null?void 0:o.mime)!=null?n:"application/octet-stream"}}finally{r.stop()}}async buffer(t,n){const r=new M(`IGit.buffer(${t}, ${n})`);try{return await this.github.getFileContent(this.rootUri,t,this.pathToRelativePath(n))}finally{r.stop()}}async show(t,n){const r=new M(`IGit.show(${t}, ${n})`);try{const i=await this.github.getFileContent(this.rootUri,t,this.pathToRelativePath(n));return H0.decode(i)}finally{r.stop()}}async getCommit(t){const n=new M(`IGit.getCommit(${t})`);try{const r=await this.github.getCommit(this.rootUri,t);if(r===void 0)throw new Error(`Unable to find commit for ref "${t}"`);return r}finally{n.stop()}}clean(t){return this._objects.clear(),Promise.resolve()}async apply(t,n){const r=new M(`IGit.apply(reverse=${n})`);try{return await this.changeStore.applyPatch(this.rootUri,t,n?{reverse:!0}:void 0)}finally{r.stop()}}async diff(t){const n=new M(`IGit.diff(${t})`);try{return await this.changeStore.createPatch(this.rootUri,void 0,t?{staged:!0}:void 0)}finally{n.stop()}}diffWithHEAD(t){return t?this.diffBetween("","HEAD",t):this.diffBetween("","HEAD")}diffWith(t,n){return n?this.diffBetween("",t,n):this.diffBetween("",t)}diffIndexWithHEAD(t){return t?this.diffBetween("~","HEAD",t):this.diffBetween("~","HEAD")}diffIndexWith(t,n){return n?this.diffBetween("~",t,n):this.diffBetween("~",t)}async diffBetween(t,n,r){if(!r)throw new Error("Method not implemented.");const i=new M(`IGit.diffBetween(${t}, ${n}, ${r})`);try{const[a,o]=await Promise.all([this.getContent(t,r),this.getContent(n,r)]);return Ma(r,a,o)}finally{i.stop()}}async diffBlobs(t,n){const r=new M(`IGit.diffBlobs(${t}, ${n})`);try{const i=await this.getBlobContent(t),a=await this.getBlobContent(n),o=Ma("untitled",i,a);return Promise.resolve(o)}finally{r.stop()}}async getBlobContent(t){const n=new M(`IGit.getBlobContent(${t})`);try{const r=this._objects.get(t);if(r)return this._objects.delete(t),r;const{repo:i}=this.providerService.getVirtualUriMetadata(this.rootUri),a=await this.github.getBlobContent(i,t);return H0.decode(a)}finally{n.stop()}}async getContent(t,n){const r=new M(`IGit.getContent(${t}, ${n})`);try{const i=this.pathToRelativeUri(n);if(t===""||t==="~"){const a=await this.changeStore.getChange(i);if(a!==void 0&&(t===""||a.staged))return this.changeStore.getContent(i);t="HEAD"}return await this.show(t==="HEAD"?this.metadata.HEAD.sha:t,n)}finally{r.stop()}}async hashObject(t){const n=new M("IGit.hashObject");try{const r=V(await en(t));return this._objects.set(r,t),r}finally{n.stop()}}async createBranch(t,n,r){const i=new M(`IGit.createBranch(${t}, ${n}, ${r})`);try{r||(r=this.metadata.HEAD.sha);const a=await this.github.createBranch(this.rootUri,t,r);n&&await this.checkout(a)}finally{i.stop()}}deleteBranch(t,n){throw new Error("Method not implemented.")}async getBranch(t){const n=new M(`IGit.getBranch(${t})`);try{const{branches:r}=await this.github.getBranches(this.rootUri,{query:t,limit:1}),[i]=r;if(i===void 0)throw new Error(`Unable to find branch named "${t}"`);return{type:i.type,name:i.name,commit:i.commit,remote:this.remote.name,upstream:{name:i.name,remote:this.remote.name}}}finally{n.stop()}}async getBranches(t){var n,r;const i=(r=(n=t.contains)!=null?n:t.pattern)!=null?r:"",a=new M(`IGit.getBranches(${i})`);try{const{branches:o}=await this.github.getBranches(this.rootUri,{query:i,limit:t.count});if(o.length===0)throw new Error(`Unable to find branches for "${i}"`);return o.map(s=>({type:s.type,name:s.name,commit:s.commit}))}finally{a.stop()}}setBranchUpstream(t,n){throw new Error("Method not implemented.")}getMergeBase(t,n){throw new Error("Method not implemented.")}async status(){}async checkout(t){const n=new M(`IGit.checkout(${t})`);try{if(await this.github.repositoryObjectExists(this.rootUri,t)){const i=await this.github.switchTo(this.rootUri,t,{openInNewWindow:!1});throw i!==void 0&&await this.providerService.openWorkspace(i),new Error("User aborted")}const r=/pr\/(?<remote>.+)\/(?<num>\d+)/.exec(t);if(r==null?void 0:r.groups){const{num:i}=r.groups,{provider:a,repo:o}=this.providerService.getVirtualUriMetadata(this.rootUri),s=this.providerService.getRemoteUri(a.id,{repo:o,pullRequest:{id:i}});if(s!==void 0){const u=await this.providerService.createWorkspaceForRemoteUrl(s.toString());u!==void 0&&await this.providerService.openWorkspace(u)}}throw new Error("User aborted")}finally{n.stop()}}addRemote(t,n){var r;let i;const a=this.remotes.findIndex(o=>o.name===t);return a!==-1&&([i]=this.remotes.splice(a,1)),this.remotes.push({name:t,fetchUrl:n,isReadOnly:(r=i==null?void 0:i.isReadOnly)!=null?r:!1}),Promise.resolve()}removeRemote(t){const n=this.remotes.findIndex(r=>r.name===t);return n!==-1&&this.remotes.splice(n,1),Promise.resolve()}renameRemote(t,n){const r=this.remotes.findIndex(a=>a.name===t);if(r===-1)return Promise.resolve();const[i]=this.remotes.splice(r,1);return this.remotes.push({...i,name:n}),Promise.resolve()}async fetch(t,n,r){const i=new M("IGit.fetch");try{return this.github.fetch(this.rootUri)}finally{i.stop()}}async pull(t){const n=new M("IGit.pull");try{return this.github.sync(this.rootUri,this.changeStore,{conflictResolution:$e.Merge})}finally{n.stop()}}push(t,n,r){return Promise.resolve()}blame(t){throw new Error("Method not implemented.")}async log(t){var n;const r=(t==null?void 0:t.path)?this.pathToRelativePath(t.path):void 0,i=await this.github.getCommits(this.rootUri,{ref:this.metadata.HEAD.sha,path:r,limit:t==null?void 0:t.maxEntries});return(n=i==null?void 0:i.commits)!=null?n:[]}async commit(t,n){const r=new M("IGit.commit");try{if((n==null?void 0:n.amend)!==void 0||(n==null?void 0:n.empty)!==void 0||(n==null?void 0:n.signCommit)!==void 0||(n==null?void 0:n.signoff)!==void 0)throw new Error("The specified commit options are not yet supported.");const i=(await this.providerService.getCommitOperations(this.rootUri,{staged:(n==null?void 0:n.all)===!1})).filter(a=>a.fileType===m.FileType.File);if(!i.length){m.window.showInformationMessage(cb("no changes to commit","There are no changes to commit."));return}await this.github.createAndPushCommit(this.rootUri,t,i,void 0,n)}finally{r.stop()}}pathToRelativePath(t){return this.providerService.getRelativeFilePath(this.rootUri,this.pathToRelativeUri(t))}pathToRelativeUri(t){return q(this.rootUri,db(t))}}l(z0,"GitHubRepository");const ub=/^\/?([a-zA-Z])(?::\/)(.*)$/,fb=/\\/g;function db(e){e=m.Uri.file(e).fsPath.replace(fb,"/");const t=ub.exec(e);return t!==null&&([,,e]=t),e.startsWith("/")?e:`/${e}`}l(db,"normalizePath");function Hf(e){switch(e){case H.Changed:return Ho.MODIFIED;case H.Created:return Ho.INTENT_TO_ADD;case H.Deleted:return Ho.DELETED}}l(Hf,"opTypeToStatus");class kl extends Error{constructor(t,n,r){super(t.message);this.original=t,this.name=n,this.id=r;var i;(i=Error.captureStackTrace)==null||i.call(Error,this,kl)}}l(kl,"PullRequestNotFoundError");class zo extends Error{constructor(t,n){super(t.message);this.original=t,this.name=n;var r;(r=Error.captureStackTrace)==null||r.call(Error,this,zo)}}l(zo,"RepositoryForbiddenError");class qo extends Error{constructor(t,n){super(t.message);this.original=t,this.name=n;var r;(r=Error.captureStackTrace)==null||r.call(Error,this,qo)}}l(qo,"RepositoryNotFoundError");class Dl extends Error{constructor(t,n){super(t.message);this.original=t,this.name=n;var r;(r=Error.captureStackTrace)==null||r.call(Error,this,Dl)}}l(Dl,"RepositoryEmptyError");var hb=Object.defineProperty,pb=Object.getOwnPropertyDescriptor,Pr=l((e,t,n,r)=>{for(var i=r>1?void 0:r?pb(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hb(t,n,i),i},"messages_decorateClass");const qt=_.loadMessageBundle();class er{showGitHubStatus500Message(){return m.window.showErrorMessage(qt("github 500 error notification","GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),qt("ok","OK")),Promise.resolve()}async showStatus401Message(t){if(!t)return void m.window.showErrorMessage(qt("401 error notification","The provided credentials are either invalid or expired."),qt("ok","OK"));const n=qt("401 error notification confirm","Reauthenticate");await m.window.showErrorMessage(qt("401 error notification with reauth","The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&t()}async showStatus403Message(t){if(!t)return void m.window.showErrorMessage(qt("403 error notification","The provided credentials do not have the required access."),qt("ok","OK"));const n=qt("403 error notification confirm","Reauthenticate"),r=qt("403 error notification with reauth","The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await m.window.showErrorMessage(r,n)===n&&t()}async showRepositoryEmptyMessage(t){const n=qt("repository empty open","Open Repository");await m.window.showErrorMessage(qt("repository empty","Repository '{0}' is empty and cannot be opened. Would you like to open another repository?",t),{modal:!0},n)===n&&m.commands.executeCommand("remoteHub.openRepository")}async showPullRequestNotFoundMessage(t,n){const r=qt("pull request not found open","Open Pull Request");await m.window.showErrorMessage(qt("pull request not found","Unable to find pull request {1} on repository '{0}'. Would you like to open another pull request?",t,n),r)===r&&m.commands.executeCommand("remoteHub.openRepository")}async showPullRequestHeadNotFoundMessage(t,n){const r=qt("pull request head not found ok","OK");await m.window.showWarningMessage(qt("pull request head not found","Unable to find the source branch for pull request {1} on repository '{0}'.",t,n),r)}async showRepositoryForbiddenMessage(t,n){const r=qt("repository forbidden open","Open Repository"),i=qt("repository forbidden reauthenticate","Reauthenticate"),a=await m.window.showErrorMessage(qt("repository forbidden","You don't have access to repository '{0}'. Would you like to open another repository or reauthenticate?",t),{modal:!0},r,i);a===r?m.commands.executeCommand("remoteHub.openRepository"):a===i&&n()}async showRepositoryNotFoundMessage(t){const n=qt("repository not found confirm","Open Repository");await m.window.showErrorMessage(qt("repository not found","Unable to find repository '{0}'. Would you like to open another repository?",t),{modal:!0},n)===n&&m.commands.executeCommand("remoteHub.openRepository")}async showUnableToOpenRepositoryMessage(t){const n=qt("unable to open repo confirm","Open Repository");await m.window.showErrorMessage(qt("unable to open repo","Unable to open repository. {0}. Would you like to open another repository?",String(t)),{modal:!0},n)===n&&m.commands.executeCommand("remoteHub.openRepository")}}l(er,"Messages"),Pr([yn(()=>"")],er.prototype,"showGitHubStatus500Message",1),Pr([yn(()=>"")],er.prototype,"showStatus401Message",1),Pr([yn(()=>"")],er.prototype,"showStatus403Message",1),Pr([yn()],er.prototype,"showRepositoryEmptyMessage",1),Pr([yn()],er.prototype,"showPullRequestNotFoundMessage",1),Pr([yn()],er.prototype,"showPullRequestHeadNotFoundMessage",1),Pr([yn()],er.prototype,"showRepositoryForbiddenMessage",1),Pr([yn()],er.prototype,"showRepositoryNotFoundMessage",1),Pr([yn()],er.prototype,"showUnableToOpenRepositoryMessage",1);const $n=new er;var zf=__webpack_require__(4155),gb=Object.defineProperty,mb=Object.getOwnPropertyDescriptor,q0=l((e,t,n,r)=>{for(var i=r>1?void 0:r?mb(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gb(t,n,i),i},"provider_decorateClass");const Ca=_.loadMessageBundle(),W0=/^(?:https?:\/\/)?github\.(?:com|dev)\/(?<owner>[^/]+)\/(?<repo>[^/?#]+)(?:|\.git|\/tree\/(?<tree>[^?#]+)|\/blob\/(?<blob>[^?#]+)|\/commit\/(?<commit>[0-9a-f]{40})|\/pull\/(?<pull>[0-9]+))?(?<extra>[^?#]*)(?:\?(?<query>[^#]*))?(?:#(?<fragment>.*))?$/i,j0=/(?<remoteOwner>[^/:]+)\/?(?<remoteRepo>[^/:]+)?:(?<remoteRef>.*)/,vb=["repo","workflow"],Fl=["repo","workflow","user:email","read:user"],Nl=1,qf=Object.freeze({id:"github",name:"GitHub"});function Mi(e){const{scheme:t,metadata:n}=J.decodeAuthority(e,o=>{if(o.v!==void 0)return o;if(typeof o.pr=="string")return{v:Nl,ref:{type:He.PullRequest,id:o.pr},idx:o.idx};if(typeof o.ref=="string")return{v:Nl,ref:{type:He.Tree,id:o.ref},idx:o.idx}}),[,r,i,...a]=e.path.split("/");return{scheme:t,provider:qf,name:`${r}/${i}`,repo:{owner:r,name:i},path:a.join("/")||"",ref:n==null?void 0:n.ref,idx:n==null?void 0:n.idx}}l(Mi,"getGitHubMetadata");function wb(e,t){const{repo:n}=t!=null?t:Mi(e);return e.with({path:`/${n.owner}/${n.name}`,query:"",fragment:""})}l(wb,"getGitHubRootUri");function Wf(e,t,n){const{repo:{owner:r,name:i}}=e instanceof m.Uri?Mi(e):e;return m.Uri.parse(`github://${J.encodeAuthority("github",{v:Nl,ref:{type:He.Commit,id:t}})}/${r}/${i}/${n}`)}l(Wf,"getGitHubRevisionUri");class V0{constructor(t){if(this.scopes=t,this.id="github",this.account={id:"vscode-remotehub-test",label:"RemoteHub Test"},!zf.env.GITHUB_REMOTEHUB_TEST_PAT)throw new Error("Unable to initialize authentication for integration tests. Please set `process.env.GITHUB_REMOTEHUB_TEST_PAT`.");this.accessToken=zf.env.GITHUB_REMOTEHUB_TEST_PAT}}l(V0,"TestAuthenticationSession");class Ll{constructor(t,n){this.providerService=t,this.tarPit=n,this.fileTreeCache=new Map,this.fileTreesToCache=new Set,this.disposable=m.Disposable.from(t.onDidChangeRepository(r=>{r.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([r.repository.uri])}),t.onDidRefresh(r=>this.onRefreshOrRepositoryChanged(r))),mo&&(this.tarballProxyEndpoint=m.commands.executeCommand("_workbench.getTarballProxyEndpoints").then(r=>r==null?void 0:r["github.com"])),zf.env.GITHUB_REMOTEHUB_TEST_PAT&&(this._session=new V0(vb))}get scheme(){return"github"}get repositories(){return[...this.providerService.getRepositories(qf.id)]}getRemoteSourceProviders(){var t;const n=[];return((t=m.extensions.getExtension("vscode.github"))==null?void 0:t.isActive)||n.push({name:"GitHub",icon:"github",label:Ca("open repo from","Open Repository from {0}","GitHub"),placeholder:Ca("pick repo","Choose a repository"),getRemoteSources:async r=>{r=r!=null?r:"";let i;const a=r==null?void 0:r.indexOf("/");a!==-1&&(i=r.substring(0,a),r=r.substr(a+1));const{results:o}=await this.searchRepositoriesQuery(r,{user:i}),s=[];return s.push(...o.map(u=>({providerId:"github",name:u.repoWithOwner,icon:"repo",description:`${u.fork?`$(repo-forked) ${u.fork}`:""}${u.stars>0?`${u.fork?" \u2022 ":""}$(star-full) ${u.stars}`:""}`,detail:u.description,url:u.url}))),s},getRecentRemoteSources:()=>[]}),n.push({name:"GitHub",icon:"github",label:Ca("open pr from","Open Pull Request from {0}","GitHub"),placeholder:Ca("pick pr","Choose a pull request"),getRemoteSources:async r=>{r=r!=null?r:"";let i;const a=r==null?void 0:r.indexOf("/");a!==-1&&(i=r.substring(0,a),r=r.substr(a+1));const{results:o}=await this.searchPullRequestsQuery(r,{user:i}),s=[];return s.push(...o.map(u=>({providerId:"github",name:u.title,icon:"git-pull-request",description:u.reasons.length!==0?u.reasons.sort().join(", "):void 0,detail:`${u.repoWithOwner} #${u.number}`,url:u.url}))),s}}),n}dispose(){this.disposable.dispose()}onRefreshOrRepositoryChanged(t){t=t.filter(n=>J.getProviderId(n)===this.scheme),t.length!==0&&(this.fileTreeCache.forEach(n=>n.dispose()),this.fileTreeCache.clear())}async ensureAuthenticated(t=!1){const n=new M("GitHub.ensureAuthenticated");try{if(this._session===void 0){async function r(){try{return t?await m.authentication.getSession("github",Fl,{forceNewSession:t}):await m.authentication.getSession("github",Fl,{createIfNone:!0})}catch(a){Y.error(a);try{const o=await m.authentication.getSession("github",Fl,{createIfNone:!1});if(o!==void 0)return o}catch{}return new Promise(o=>{async function s(){const c=await m.authentication.getSession("github",Fl,{createIfNone:!0});c!==void 0&&o(c)}l(s,"getSession");const u=m.authentication.onDidChangeSessions(async c=>{c.provider.id==="github"&&(u.dispose(),await s())})})}}l(r,"waitUntilAuthenticated"),this._session=await r();const i=m.authentication.onDidChangeSessions(a=>{if(this._session===void 0){i.dispose();return}a.provider.id==="github"&&(this.clearAuthenticationSession(),i.dispose())})}return this._session}finally{n.stop()}}async getAuthentication(t){const n=await this.ensureAuthenticated();return{provider:qf,session:n,getRichNavigationHeaders:()=>({"X-Git-GitHub":`Bearer ${n.accessToken}`})}}clearAuthenticationSession(){this._session=void 0,this._octokit=void 0,this._octokitDefaults=void 0}async reauthenticate(){this.clearAuthenticationSession(),await this.ensureAuthenticated(!0)}async octokit(t){if(this._octokitDefaults===void 0){const r=await this.ensureAuthenticated();if(mo){async function i(a,o){if(o.headers!==void 0){const{"user-agent":s,...u}=o.headers;s&&(o.headers=u)}return Cx(a,o)}l(i,"fetchCore"),this._octokitDefaults=Uo.defaults({auth:`token ${r.accessToken}`,request:{fetch:i}})}else this._octokitDefaults=Uo.defaults({auth:`token ${r.accessToken}`})}const n=new this._octokitDefaults(t);return(Y.logLevel===Xe.Debug||Y.isDebugging)&&n.hook.wrap("request",async(r,i)=>{var a;const o=new M(`[GITHUB] ${i.method} ${i.url}`,{log:!1});try{return await r(i)}finally{let s;try{if(typeof i.query=="string"){const u=/(^[^({\n]+)/.exec(i.query);s=` ${(a=u==null?void 0:u[1].trim())!=null?a:i.query}`}}catch{}o.stop({message:s})}}),n}async graphql(t,n,r=!0){this._octokit===void 0&&(this._octokit=await this.octokit());try{return await this._octokit.graphql(t,n)}catch(i){throw r||this.handleRequestErrors(i),Y.error(i),i}}async request(t,n){this._octokit===void 0&&(this._octokit=await this.octokit());try{return await this._octokit.request(t,n)}catch(r){throw this.handleRequestErrors(r),Y.error(r),r}}handleRequestErrors(t){var n,r;if(t instanceof $r)switch(t.status){case 500:return t.response&&$n.showGitHubStatus500Message(),!0;case 401:return $n.showStatus401Message(()=>void this.reauthenticate()),!0;case 403:return $n.showStatus403Message(()=>void this.reauthenticate()),!0}else if(t instanceof li){if(((r=(n=t.errors)==null?void 0:n[0])==null?void 0:r.type)==="FORBIDDEN")return $n.showStatus403Message(()=>void this.reauthenticate()),!0;if(t.headers.status==="500")return $n.showGitHubStatus500Message(),!0}return!1}createIGitRepository(t,n,r,i){return new z0(this.providerService,t,n,r,i,this)}async createMetadata(t,n){var r,i,a,o,s,u;const c=new M(`GitHub.createMetadata(${t.toString()}, ${n})`);let f;try{let{provider:v,name:p,repo:{owner:w,name:I},ref:R}=Mi(t);(!R||R.type===He.Commit&&/HEAD/i.test(R.id))&&(R={type:He.Commit,id:"HEAD"});const A=this.providerService.isInWorkspace(t),D=await this.getRepositoryInfo(w,I,A,R.type===He.PullRequest?{pr:Number(R.id)}:{ref:R.id});if(D===void 0)throw f=" \u2022 Aborted; Unable to get repository info",new Error(`Cannot get metadata for Uri(${t.toString()}); Unable to get repository info`);let O;if(n)O=n;else if(R.type===He.Commit&&R.id!=="HEAD"||R.type===He.Tree&&D.ref===void 0)O=R.id;else if(O=(i=(r=D.ref)==null?void 0:r.sha)!=null?i:D.defaultBranch.sha,O===void 0)throw f=" \u2022 Aborted; Unable to get repository revision",new Error(`Cannot get metadata for Uri(${t.toString()}); Unable to get repository revision`);let G;if(((a=D.ref)==null?void 0:a.prefix)==="refs/heads/")G={type:ne.Branch,name:D.ref.name,sha:O,branch:{name:D.ref.name,sha:D.ref.sha}};else if(((o=D.ref)==null?void 0:o.prefix)==="refs/remotes/"){if(!D.ref.remote)throw f=" \u2022 Aborted; Unable to get remote info",new Error(`Cannot get metadata for Uri(${t.toString()}); Unable to get remote info`);G={type:ne.RemoteBranch,name:`${D.ref.remote.repo.owner}${D.ref.remote.repo.name!==I?`/${D.ref.remote.repo.name}`:""}:${D.ref.name}`,sha:O,branch:{name:D.ref.name,sha:D.ref.sha,remote:D.ref.remote}}}else((s=D.ref)==null?void 0:s.prefix)==="refs/tags/"?G={type:ne.Tag,name:D.ref.name,sha:O,detached:{type:ne.Tag,name:D.ref.name}}:G={type:ne.Commit,name:y(O),sha:O,detached:{type:ne.Commit,name:y(O)}};let W,re;if(Je.get("experimental.prefetch")&&A&&(W=O,c.log({suffix:` \u2022 Prefetching tree for ${W}...`}),this.getFileTree(t,void 0,{recursive:!0,prefetched:{metadata:new Promise(he=>re=he),repo:{owner:w,name:I},HEAD:{sha:W},timestamp:Date.now()}})),W!==void 0&&W!==G.sha){const he=this.asFileTreeKey(t,W),fe=this.fileTreeCache.get(he);fe&&!g(W)&&G.sha===((u=G.branch)==null?void 0:u.sha)?(c.log({suffix:` \u2022 Updating prefetched tree for ${W}, since HEAD was resolved; HEAD=${G.sha}`}),this.fileTreeCache.set(this.asFileTreeKey(t,G.sha),fe),this.fileTreeCache.delete(he)):(c.log({suffix:` \u2022 Removing prefetched tree for ${W}, since the HEAD changed; HEAD=${G.sha}`}),this.fileTreeCache.delete(he),fe==null||fe.dispose())}const we={version:ls.schemaVersion,timestamp:Date.now(),provider:v,name:p,repo:D.repo,cloneUrl:D.cloneUrl,accessLevel:D.accessLevel,HEAD:G,defaultBranch:D.defaultBranch,pullRequest:D.pullRequest};return f=` \u2022 HEAD=${G.sha}`,re==null||re(we),we}finally{c.stop(f?{suffix:f}:void 0)}}getMetadata(t){return this.providerService.getMetadata(t)}canOpenRemoteUrl(t){const n=W0.exec(t);if((n==null?void 0:n.groups)===void 0)return;const{blob:r,commit:i,pull:a,tree:o}=n.groups;return a?Ae.PullRequest:i?Ae.Commit:o?Ae.Branch:r?Ae.File:Ae.Repository}async createWorkspaceForRemoteUrl(t,n=Ke.CurrentWindow){const r=W0.exec(t);if((r==null?void 0:r.groups)===void 0)return;let{owner:i,repo:a,blob:o,commit:s,pull:u,tree:c,fragment:f}=r.groups;a=a.endsWith(".git")?a.slice(0,a.length-4):a;const v=await this.validateOwnerAndRepoAndSplitRefFromPath(i,a,c!=null?c:o);if(v===void 0)return;let p,w;if({owner:i,repo:a,ref:w,path:p}=v,c||o){if(p&&f&&o){const A=/L(?<start>\d+)(?:-L(?<end>\d+))?/.exec(f);if(A==null?void 0:A.groups){const{start:D,end:O}=A.groups;p+=`:${D}${O!==void 0?`-${O}`:""}`}}}else s?w={type:He.Commit,id:s}:u&&(w={type:He.PullRequest,id:u});const I=this.providerService.createVirtualUri("github",{repo:{owner:i,name:a},ref:w}),{name:R}=Mi(J.getVirtualUri(this.getProviderRootUri(I)));return{name:R,uri:I,location:n,filesToOpen:p?[p]:void 0}}createVirtualUri(t,{repo:n,ref:r,idx:i},a){const o=r!==void 0||i!==void 0?{v:Nl}:void 0;return o&&(r&&(o.ref={...r,type:r.type===He.Branch||r.type===He.Tag?He.Tree:r.type}),i&&(o.idx=i)),t.with({authority:J.encodeAuthority("github",o),path:`/${n.owner}/${n.name}${(a==null?void 0:a.startsWith("/"))?a:a?`/${a}`:""}`})}getRemoteUri(t){const n=`https://github.com/${t.repo.owner}/${t.repo.name}`,r=t.path?"blob":"tree",i=t.path?`/${t.path}`:"";return t.pullRequest?m.Uri.parse(`${n}/pull/${t.pullRequest.id}`):t.branch?m.Uri.parse(`${n}/${r}/${t.branch}${i}`):t.tag?m.Uri.parse(`${n}/${r}/${t.tag}${i}`):t.sha?m.Uri.parse(`${n}/${r}/${t.sha}${i}`):m.Uri.parse(n)}getProviderRootUri(t){return t=J.getProviderUri(t),wb(t)}getRelativeFilePath(t,n){let{path:r}=Mi(t);const{path:i}=Mi(q(t,n));return r.length!==0&&i!==r&&i.startsWith(r)?(r=r.endsWith("/")?r:`${r}/`,i.slice(r.length)):i}getVirtualUriMetadata(t){const{provider:n,name:r,repo:i,ref:a}=Mi(t);return{provider:n,name:r,repo:i,ref:a}}async getModeRefType(t,n){const{HEAD:r,pullRequest:i}=await(n!=null?n:this.getMetadata(t));switch(r.type){case ne.Branch:return i!==void 0?Se.PullRequestBranch:Se.Branch;case ne.RemoteBranch:return i!==void 0?Se.PullRequestRemoteBranch:Se.RemoteBranch;case ne.Tag:return Se.Tag;case ne.Commit:return Se.Commit}}async createBranch(t,n,r,i){try{const{repo:{owner:a,name:o}}=i!=null?i:await this.getMetadata(t);return n.startsWith("refs/heads/")||(n=`refs/heads/${n}`),(await this.request("POST /repos/{owner}/{repo}/git/refs",{owner:a,repo:o,ref:n,sha:r})).data.ref.substr(11)}catch(a){throw a instanceof $r&&a.status===422?a.message==="Reference already exists"?We.InvalidBranchNameError(n.substring(11),!0):We.InvalidBranchNameError(n.substring(11),!1):(Y.error(a),a)}}async createAndPushCommit(t,n,r,i,a,o){var s;const u=new M(`GitHub.createAndPushCommit(${t.toString()}${o?`, fork=${o.repo.owner}/${o.repo.name}`:""})`);if(r=r.filter(f=>f.fileType===m.FileType.File),r.length===0&&!(a==null?void 0:a.empty))throw u.stop({message:"Aborted; No changes to commit"}),We.NothingToCommitError("No changes to commit");let c;try{const f=await this.getMetadata(t);let v;if(i!==void 0)v=i;else{if(f.HEAD.detached&&!f.HEAD.branch)throw We.DetachedHEADError("Unable to commit; no current branch");v=f.HEAD.branch.name}let p;if(o)p=`${o.repo.owner}/${o.repo.name}`;else if(f.HEAD.type===ne.RemoteBranch&&f.HEAD.branch.remote.accessLevel>=ae.Write){const{owner:O,name:G}=f.HEAD.branch.remote.repo;p=`${O}/${G}`}else p=`${f.repo.owner}/${f.repo.name}`;const w=[],I=[];for(const O of r)switch(O.type){case H.Created:case H.Changed:{try{const G=await O.content;w.push({path:O.path,contents:os(G)})}catch(G){throw Y.error(G),We.CommitFailedError()}break}case H.Deleted:I.push({path:O.path});break}const R={branch:{branchName:v,repositoryNameWithOwner:p},message:{headline:n},fileChanges:{additions:w,deletions:I},expectedHeadOid:f.HEAD.sha},A=`mutation CreateCommitOnBranch ($commitInput: CreateCommitOnBranchInput!) {
	createCommitOnBranch(input: $commitInput) {
		commit {
			oid
		}
		ref {
			name
		}
	}
}`,D=await this.graphql(A,{commitInput:R});if(c=D==null?void 0:D.createCommitOnBranch.commit.oid,!c)throw We.CommitFailedError();return i===void 0&&!f.HEAD.detached&&c!==void 0&&await this.fastForwardTo(t,c,f),c}catch(f){if(f instanceof li){const v=(s=f.errors)==null?void 0:s[0];if((v==null?void 0:v.type)==="STALE_DATA"&&v.message.includes("Pull and try again"))throw We.MergeConflictError(f)}throw Y.error(f),f}finally{u.stop(c?{message:`: Created and pushed commit ${c}`}:void 0)}}async createPullRequest(t,n,r,i,a){var o,s,u;const c=new M(`GitHub.createPullRequest(${t.toString()}, ${n}${a?`, fork=${a.repo.owner}/${a.repo.name}`:""})`);try{const{repo:{owner:f,name:v},HEAD:{branch:p},defaultBranch:w}=await this.getMetadata(t),I=await this.request("POST /repos/{owner}/{repo}/pulls",{owner:f,repo:v,base:`refs/heads/${(o=p==null?void 0:p.name)!=null?o:w.name}`,head:a?`${a.repo.owner}:${n}`:n,title:r,draft:(s=i==null?void 0:i.draft)!=null?s:!1,maintainer_can_modify:(u=i==null?void 0:i.canMaintainerModify)!=null?u:!0});return{id:I.data.number.toString(),uri:m.Uri.parse(I.data.html_url)}}catch(f){throw Y.error(f),f}finally{c.stop()}}async fetch(t,n){const{fetched:r,metadata:i}=await this.fetchCore(t,!1,n);r&&await this.providerService.updateMetadata(t,i)}async fetchCore(t,n,r){var i,a,o,s,u,c,f,v,p;const{force:w,to:I}={...r,force:n||(r==null?void 0:r.force)},R=new M(`GitHub.fetch(${t.toString()}, force=${w}, to=${I})`);let A;try{const D=await this.getMetadata(t);if(D.HEAD.detached)return A=" \u2022 Skipped; detached HEAD",{fetched:!1,metadata:D};const O=await this.getBranchTips(t);if(!O)throw A=" \u2022 Unable to fetch branch tips",We.SyncOrFetchError(n);if(!w&&!I&&((i=O.defaultBranch)==null?void 0:i.sha)!==void 0&&O.defaultBranch.sha===D.defaultBranch.sha&&((a=O.branch)==null?void 0:a.sha)!==void 0&&O.branch.sha===D.HEAD.branch.sha&&(D.HEAD.sha===D.HEAD.branch.sha||D.state!==void 0))return A=" \u2022 No changes detected",{fetched:!1,metadata:D};let G;if(((o=O.defaultBranch)==null?void 0:o.sha)!==void 0&&O.defaultBranch.sha!==D.defaultBranch.sha&&(G={defaultBranch:{...D.defaultBranch,sha:O.defaultBranch.sha}}),((s=O.branch)==null?void 0:s.sha)===void 0){if(A=" \u2022 Unable to find branch tip",w)throw We.SyncOrFetchError(n);return G!==void 0?{fetched:!0,metadata:{...D,...G}}:{fetched:!1,metadata:D}}if(O.branch.sha!==D.HEAD.branch.sha&&(G={...G,HEAD:{...D.HEAD,branch:{...D.HEAD.branch,sha:O.branch.sha},detached:void 0}}),O.branch.sha===((u=r==null?void 0:r.to)!=null?u:D.HEAD.sha))return A=" \u2022 Up to date",D.state!==void 0||G!==void 0?{fetched:!0,metadata:{...D,...G,state:void 0}}:{fetched:!1,metadata:D};R.logStep("Fetching upstream changes");try{const W=await this.getAheadBehindState(t,D,{base:(c=r==null?void 0:r.to)!=null?c:D.HEAD.sha,head:(p=(v=(f=G==null?void 0:G.HEAD)==null?void 0:f.branch)==null?void 0:v.sha)!=null?p:D.HEAD.branch.sha});return A=` \u2022 Changes detected; ${W==null?void 0:W.behind} commits behind`,{fetched:!0,metadata:{...D,...G,state:W?{ahead:W.ahead,behind:W.behind,incomingChanges:W.incomingChanges}:void 0}}}catch(W){if(A=` \u2022 Failed fetching upstream changes; ${String(W)}`,w)throw We.SyncOrFetchError(n);return G!==void 0?{fetched:!0,metadata:{...D,...G}}:{fetched:!1,metadata:D}}}finally{R.stop(A?{suffix:A}:void 0)}}async fork(t){try{const{repo:{owner:n,name:r}}=await this.getMetadata(t),i=await this.request("POST /repos/{owner}/{repo}/forks",{owner:n,repo:r});let a;for(;;){try{if(a=await this.getRepositoryInfo(i.data.owner.login,i.data.name,!1),a!==void 0)break}catch{}await new Promise(o=>setTimeout(o,250))}return{name:`${i.data.owner.login}/${i.data.name}`,repo:{owner:i.data.owner.login,name:i.data.name},url:i.data.url}}catch(n){throw Y.error(n),n}}async getBranches(t,n){var r,i,a;try{const{repo:{owner:o,name:s}}=await this.getMetadata(t),u=`query getBranches(
	$owner: String!
	$repo: String!
	$branchQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $branchQuery, refPrefix: "refs/heads/", first: $limit, after: $cursor) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
					commitUrl
				}
			}
		}
	}
}`,c=await this.graphql(u,{owner:o,repo:s,branchQuery:(r=n==null?void 0:n.query)!=null?r:"",cursor:n==null?void 0:n.cursor,limit:Math.min(100,(i=n==null?void 0:n.limit)!=null?i:100)});if(c===void 0)return{branches:[]};const f=(a=c.repository)==null?void 0:a.refs;if(f===void 0)return{branches:[]};const v=f.nodes.map(p=>({type:ci.Head,name:p.name,commit:p.target.oid,commitUrl:p.target.commitUrl}));return{paging:{cursor:f.pageInfo.endCursor,more:f.pageInfo.hasNextPage},branches:v}}catch(o){return{branches:[]}}}async getCommit(t,n){var r;try{const{HEAD:i,repo:{owner:a,name:o}}=await this.getMetadata(t),s=`query getCommit(
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
) {
	repository(name: $repo owner: $owner) {
		object(oid: $ref) {
			...on Commit {
				oid
				message
				parents(first: 100) {
					nodes {
						oid
					}
				}
				author {
					date
					email
					name
				}
				committer {
					date
				}
			}
		}
	}
}`;n.toUpperCase()==="HEAD"&&(n=i.sha);const u=await this.graphql(s,{owner:a,repo:o,ref:n});if(u===void 0)return;const c=(r=u.repository)==null?void 0:r.object;return c===void 0?void 0:{hash:c.oid,message:c.message,parents:c.parents.nodes.map(f=>f.oid),authorDate:new Date(c.author.date),authorEmail:c.author.email,authorName:c.author.name,commitDate:new Date(c.committer.date)}}catch(i){return}}async getCommits(t,n){var r,i,a;try{const{HEAD:o,repo:{owner:s,name:u}}=await this.getMetadata(t),c=`query getCommits(
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
	$path: String
	$cursor: String
	$limit: Int = 100
) {
	repository(name: $repo, owner: $owner) {
		object(oid: $ref) {
			... on Commit {
				history(first: $limit, path: $path, after: $cursor) {
					pageInfo {
						endCursor
						hasNextPage
					}
					nodes {
						... on Commit {
							...commit
						}
					}
				}
			}
		}
	}
}

fragment commit on Commit {
	oid
	message
	parents(first: 100) {
		nodes {
			oid
		}
	}
	author {
		date
		email
		name
	}
	committer {
		date
	}
}
`;let f=n==null?void 0:n.ref;(f==null?void 0:f.toUpperCase())==="HEAD"&&(f=o.sha);const v=await this.graphql(c,{owner:s,repo:u,ref:f,cursor:n==null?void 0:n.cursor,path:n==null?void 0:n.path,limit:Math.min(100,(r=n==null?void 0:n.limit)!=null?r:100)});if(v===void 0)return;const p=(a=(i=v.repository)==null?void 0:i.object)==null?void 0:a.history;if(p===void 0)return;const w=p.nodes.map(I=>({hash:I.oid,message:I.message,parents:I.parents.nodes.map(R=>R.oid),authorDate:new Date(I.author.date),authorEmail:I.author.email,authorName:I.author.name,commitDate:new Date(I.committer.date)}));return{paging:{cursor:p.pageInfo.endCursor,more:p.pageInfo.hasNextPage},commits:w}}catch(o){return}}async getBlobContent(t,n){try{const r=await this.request("GET /repos/{owner}/{repo}/git/blobs/{file_sha}",{owner:t.owner,repo:t.name,file_sha:n});return Vn(r.data.content)}catch(r){throw Y.logLevel===Xe.Debug&&Y.error(r),r}}async getFileContent(t,n,r){try{let i;if(n&&r&&!this.hasFileTree(t,n)){const a=this.getProviderRootUri(t);r.startsWith("/")&&(r=r.slice(1));let o=(0,Sx.dirname)(r);(o==="."||o==="/")&&(o=""),i=await(await this.getFileTree(a,n,{path:o,recursive:!1})).get(r)}else{const[a,{path:o}]=await Promise.all([this.getFileTree(t,n),r?{path:void 0}:this.providerService.getMetadata(t)]);i=await a.get(r!=null?r:o)}if((i==null?void 0:i.sha)===void 0)throw m.FileSystemError.FileNotFound(t);return await i.getContent()}catch(i){throw Y.logLevel===Xe.Debug&&Y.error(i),i}}async getFileList(t,n,r){const i=new M(`GitHub.getFileList(${t.toString()}${r?`, ${r}`:""})`);try{const{repo:{owner:a,name:o},HEAD:{sha:s}}=await this.getMetadata(t),u=await this.request("GET /repos/{owner}/{repo}/git/tree-file-list/{treeish}",{owner:a,repo:o,treeish:`${r!=null?r:s}${n?`:${n}`:""}`});return u.status!==200?[]:u.data}catch(a){return Y.error(a),[]}finally{i.stop()}}hasFileTree(t,n){return n?this.fileTreeCache.has(this.asFileTreeKey(t,n)):this.getMetadata(t).then(r=>this.fileTreeCache.has(this.asFileTreeKey(t,r.HEAD.sha)))}async getFileTree(t,n,r){var i,a,o,s;const u=this.providerService.isInWorkspace(t);let c=u,f,v,p;if(c||!n){const A=(a=(i=r==null?void 0:r.prefetched)==null?void 0:i.metadata)!=null?a:this.getMetadata(t);f=u?this.getFileTreePermissions(t,A):void 0;let D;({repo:v,HEAD:{sha:D},timestamp:p}=(o=r==null?void 0:r.prefetched)!=null?o:await A),n&&D!==n?this.fileTreesToCache.has(this.asFileTreeKey(t,n))?c=!0:(c=!1,p=Date.now()):n=D}else({repo:v}=(s=r==null?void 0:r.prefetched)!=null?s:this.providerService.getVirtualUriMetadata(t)),p=Date.now();const w=this.asFileTreeKey(t,n);this.fileTreesToCache.add(w);const I=this.getProviderRootUri(t),R=new M(`GitHub.getFileTree(${w}): ${t.toString()}`,{log:!1,logLevel:Xe.Debug});try{let A=l(function(){var O;const G=new M(`GitHub.createFileTree(${w})`);let W,re;c&&u&&(W=new m.EventEmitter,re=m.Disposable.from(this.tarPit.onDidChangeIndexingEnablement(()=>W.fire()),this.tarPit.onDidDownloadTar(he=>W.fire({rootUri:this.getProviderRootUri(he.rootUri),sha:he.sha}))));const we={dispose:()=>re==null?void 0:re.dispose(),permissions:f,getContent:async(he,fe)=>{const Ee=new M("getFileContents"),ue=Je.get("experimental.fs.useTars");if(ue==="always"||ue==="ifAvailable"){const Ye=await this.tarPit.getInMemoryTar(I,n);if(Ye){const _t=Ye.entryMap.get(fe);if(_t)return Ee.stop({message:`Retrieved ${fe} from in-memory tar with rootUri=${I.toString()}, ref=${n==null?void 0:n.toString()}`}),_t.dataAsBytes}}let Re=!1;return new Promise((Ye,_t)=>{this.getBlobContent(v,he.sha).then(ie=>{Re||(Ee.stop({message:`Retrieved ${fe} from web`}),Re=!0,Ye(ie))},ie=>_t(ie)),ue!=="never"&&this.tarPit.getCachedTar(I,n).then(ie=>ie===void 0&&ue==="always"&&!Re?this.tarPit.getTar(I,!1,n):ie).then(ie=>{var xe;const Ie=(xe=ie==null?void 0:ie.entryMap.get(fe))==null?void 0:xe.dataAsBytes;Ie&&!Re&&(Ee.stop({message:`Retrieved ${fe} from tar`}),Re=!0,Ye(Ie))},ie=>{})})},getTree:async(he,fe)=>{const Ee=await this.request("GET /repos/{owner}/{repo}/git/trees/{tree_sha}",{owner:v.owner,repo:v.name,recursive:fe?"1":void 0,tree_sha:`${n}${he?`:${he}`:""}`});return Ee.data.truncated?{sha:Ee.data.sha,truncated:!0}:{sha:Ee.data.sha,truncated:!1,tree:Kp(Ee.data.tree,ue=>{var Re;return{path:ue.path,item:{mode:ue.mode,sha:ue.sha,stat:{type:_b(ue.type),size:(Re=ue.size)!=null?Re:0,ctime:0,mtime:p,permissions:void 0}}}})}},onDidTriggerContentCaching:W==null?void 0:W.event,tryCachingContent:c&&u?async he=>{const fe=Je.get("experimental.fs.useTars");if(fe!=="always"&&fe!=="ifAvailable")return!1;const Ee=new M(`FileTree.loadAllContent(${n})`);let ue;try{let Re;if(fe==="ifAvailable"){if(Ee.logStep("Tar cache query"),Re=await this.tarPit.getCachedTar(I,n),Re===void 0)return ue=" \u2022 No cached Tar",!1}else Ee.logStep("Tar query"),Re=await this.tarPit.getTar(I,!1,n);Ee.logStep("Updating content",{suffix:" \u2022 Updating content..."});for(const Ye of Re.entries){const _t=he(Ye.header.fullFileName);if(_t===void 0)continue;const ie=Ye.dataAsBytes;_t.getContent=()=>ie}return!0}catch(Re){return ue=` \u2022 Failed ${String(Re)}`,!1}finally{Ee.stop(ue?{suffix:ue}:void 0)}}:void 0};try{return new Uf(I,n,p,we,{path:r==null?void 0:r.path,recursive:(O=r==null?void 0:r.recursive)!=null?O:c,preload:c||(r==null?void 0:r.recursive)})}catch(he){return Y.error(he),new Uf(I,n,p,void 0)}finally{G.stop()}},"createFileTree"),D=this.fileTreeCache.get(w);return D!==void 0||(D=A.call(this),c&&this.fileTreeCache.set(w,D)),D}finally{R.stop()}}async getFileTreePermissions(t,n){if(this.providerService.getModeConfig(t,await this.getModeRefType(t,n)).display===se.Edit)return;const i=await this.providerService.getIndexMetadata(t);return ce.isActive(i)?m.FilePermission.Readonly:void 0}async getFork(t){var n,r,i;try{const{repo:{owner:a,name:o}}=await this.getMetadata(t),s=`query getFork(
	$owner: String!
	$repo: String!
) {
	repository(owner: $owner, name: $repo) {
		forks(affiliations: OWNER, first: 1) {
			nodes {
				owner {
					login
				}
				name
				url
			}
		}
	}
}`,u=await this.graphql(s,{owner:a,repo:o});if(u===void 0)return;const[c]=(i=(r=(n=u.repository)==null?void 0:n.forks)==null?void 0:r.nodes)!=null?i:[];return c===void 0?void 0:{name:`${c.owner.login}/${c.name}`,repo:{owner:c.owner.login,name:c.name},url:c.url}}catch(a){return}}async getIncomingChanges(t){var n,r;return(r=(n=(await this.getMetadata(t)).state)==null?void 0:n.incomingChanges)!=null?r:[]}async compareCommits(t,n){const r=await this.getMetadata(t),i=await this.getAheadBehindState(t,r,{base:n.base,head:n.compare});return i==null?void 0:i.incomingChanges}async getAheadBehindState(t,n,r){var i,a,o,s,u;const{base:c,head:f}={base:n.HEAD.sha,head:(i=n.HEAD.branch)==null?void 0:i.sha,...r},v=new M(`GitHub.getAheadBehindState(${t.toString()}, base=${c}, head=${f})`);let p,w;try{if(!f){p=` \u2022 Skipped; Unsupported HEAD type (${n.HEAD.type})`;return}const I=await this.request("GET /repos/{owner}/{repo}/compare/{base}...{head}",{owner:n.repo.owner,repo:n.repo.name,base:c,head:f}),R=[];for(const A of(a=I.data.files)!=null?a:[])switch(A.status){case"added":case"copied":R.push({uri:m.Uri.joinPath(t,A.filename),type:H.Created});break;case"removed":R.push({uri:m.Uri.joinPath(t,A.filename),type:H.Deleted});break;case"modified":R.push({uri:m.Uri.joinPath(t,A.filename),type:H.Changed});break;case"renamed":R.push({uri:m.Uri.joinPath(t,A.filename),type:H.Created}),R.push({uri:m.Uri.joinPath(t,A.previous_filename),type:H.Deleted});break;default:Y.warn(`GitHub.getAheadBehindState(${t.toString()}, base=${c}, head=${f}): Unknown file status encountered '${A.status}'`);break}return w={ahead:(o=I.data.behind_by)!=null?o:0,behind:(s=I.data.ahead_by)!=null?s:0,incomingChanges:R},w}catch(I){throw p=` \u2022 Failed; ${String(I)}`,Y.error(I),I}finally{v.stop({suffix:p!=null?p:` \u2022 ${(u=w==null?void 0:w.behind)!=null?u:0} commits behind`})}}async getObjectDetails(t,n,r){var i;try{const a=await this.getFileTree(t,n);r?r=this.providerService.getRelativeFilePath(t,this.providerService.createRelativeUri(t,r)):{path:r}=await this.providerService.getMetadata(t);const o=await a.get(r);if((o==null?void 0:o.mode)===void 0||(o==null?void 0:o.sha)===void 0)throw new Error(`Cannot get details of ${r} in ${n}`);return{mode:o.mode,object:o.sha,size:(i=o.stat.size)!=null?i:0}}catch(a){throw Y.error(a),a}}async getPullRequest(t,n){const{repo:{owner:r,name:i}}=await this.getMetadata(t);return this.getPullRequestCore(r,i,n)}async getPullRequestCore(t,n,r){var i,a,o,s,u,c,f;try{const v=`query getPullRequest(
	$owner: String!
	$repo: String!
	$pr: Int!
) {
	repository(name: $repo, owner: $owner) {
		pullRequest(number: $pr) {
			author {
				login
				avatarUrl
				url
			}
			permalink
			number
			title
			state
			updatedAt
			closedAt
			mergedAt
			repository {
				name
				owner {
					login
				}
			}
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
			}
			headRepositoryOwner {
				login
			}
		}
	}
}`,p=await this.graphql(v,{owner:t,repo:n,number:Number(r)}),w=(i=p==null?void 0:p.repository)==null?void 0:i.pullRequest;return w?{author:{name:w.author.login,avatarUrl:w.author.avatarUrl,url:w.author.url},closedAt:w.closedAt?new Date(w.closedAt):void 0,mergedAt:w.mergedAt?new Date(w.mergedAt):void 0,id:w.number.toString(),repo:{name:w.repository.name,owner:w.repository.owner.login},state:jf(w.state),title:w.title,updatedAt:new Date(w.updatedAt),url:w.permalink,refs:{base:{owner:w.baseRepository.owner.login,repo:w.baseRepository.name,branch:w.baseRefName,sha:w.baseRefOid,exists:w.baseRef!=null},head:{owner:(u=(s=(a=w.headRepository)==null?void 0:a.owner.login)!=null?s:(o=w.headRepositoryOwner)==null?void 0:o.login)!=null?u:"<unknown>",repo:(f=(c=w.headRepository)==null?void 0:c.name)!=null?f:w.baseRepository.name,branch:w.headRefName,sha:w.headRefOid,exists:w.headRef!=null}}}:void 0}catch(v){Y.error(v);return}}async getPullRequestForBranch(t,n,r){var i,a,o,s,u;try{const{repo:{owner:c,name:f}}=await this.getMetadata(t),v=`query getPullRequestForBranch(
	$owner: String!
	$repo: String!
	$branch: String!
	$maxCount: Int!
	$states: [PullRequestState!]
) {
	repository(name: $repo, owner: $owner) {
		refs(query: $branch, refPrefix: "refs/heads/", first: 1) {
			nodes {
				associatedPullRequests(first: $maxCount, orderBy: {field: UPDATED_AT, direction: DESC}, states: $states) {
					nodes {
						author {
							login
							avatarUrl
							url
						}
						permalink
						number
						title
						state
						updatedAt
						closedAt
						mergedAt
						repository {
							isFork
							name
							owner {
								login
							}
						}
					}
				}
			}
		}
	}
}`,p=await this.graphql(v,{owner:c,repo:f,branch:n,maxCount:(i=r==null?void 0:r.maxCount)!=null?i:1,states:yb(r==null?void 0:r.include)}),w=(u=(s=(o=(a=p==null?void 0:p.repository)==null?void 0:a.refs.nodes[0])==null?void 0:o.associatedPullRequests)==null?void 0:s.nodes)==null?void 0:u.filter(R=>!R.repository.isFork||R.repository.owner.login===c);if(w==null||w.length===0)return;w.length>1&&w.sort((R,A)=>(R.repository.owner.login===c?-1:1)-(A.repository.owner.login===c?-1:1)||(R.state==="OPEN"?-1:1)-(A.state==="OPEN"?-1:1)||new Date(A.updatedAt).getTime()-new Date(R.updatedAt).getTime());const[I]=w;return{author:{name:I.author.login,avatarUrl:I.author.avatarUrl,url:I.author.url},closedAt:I.closedAt?new Date(I.closedAt):void 0,mergedAt:I.mergedAt?new Date(I.mergedAt):void 0,id:I.number.toString(),repo:{name:I.repository.name,owner:I.repository.owner.login},state:jf(I.state),title:I.title,updatedAt:new Date(I.updatedAt),url:I.permalink}}catch(c){Y.error(c);return}}async getTags(t,n){var r,i,a;try{const{repo:{owner:o,name:s}}=await this.getMetadata(t),u=`query getTags(
	$owner: String!
	$repo: String!
	$tagQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $tagQuery, refPrefix: "refs/tags/", first: $limit, after: $cursor, orderBy: { field: TAG_COMMIT_DATE, direction: DESC }) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,c=await this.graphql(u,{owner:o,repo:s,tagQuery:(r=n==null?void 0:n.query)!=null?r:"",cursor:n==null?void 0:n.cursor,limit:Math.min(100,(i=n==null?void 0:n.limit)!=null?i:100)});if(c===void 0)return{tags:[]};const f=(a=c.repository)==null?void 0:a.refs;if(f===void 0)return{tags:[]};const v=f.nodes.map(p=>({type:ci.Tag,name:p.name,commit:p.target.oid,commitUrl:p.target.commitUrl}));return{paging:{cursor:f.pageInfo.endCursor,more:f.pageInfo.hasNextPage},tags:v}}catch(o){return{tags:[]}}}async loadWorkspaceContents(t){try{return await this.tarPit.getTar(t,!1,void 0),!0}catch(n){return Y.error(n),!1}}async getTarGz(t,n,r){const{repo:{owner:i,name:a}}=await this.getMetadata(t),o=await this.ensureAuthenticated(),s=Je.get("indexing.verboseDownloadNotification");return m.window.withProgress({location:s?m.ProgressLocation.Notification:m.ProgressLocation.Window,cancellable:!0,title:Ca("fetching index","Downloading repository index")},async(u,c)=>{try{if(mo){let p;try{const A=await this.tarballProxyEndpoint;A!==void 0&&(p=A.replace("{owner}",i).replace("{repo}",a).replace("{sha}",n))}catch{}if(!p)throw new Error("Workbench embedder must set `_tarballProxyEndpoints` in workbench construction options to enable GitHub fulltext search.");const I=await(await S0(p,{headers:{"x-proxy-authorization":`Bearer ${o.accessToken}`},credentials:"include"},c)).text();return await C0(I,{},r,c,u)}const f=`https://api.github.com/repos/${i}/${a}/tarball/${n}`;return await C0(f,{headers:{Authorization:`Bearer ${o.accessToken}`}},r,c,u)}catch(f){throw Y.error(f),f}})}async queryRepositoryObject(t,n,r,i){var a,o;try{const{repo:{owner:s,name:u},HEAD:{sha:c},path:f}=await this.providerService.getMetadata(t),v=`query ${n}(
	$owner: String!
	$repo: String!
	$expression: String
) {
	repository(owner: $owner, name: $repo) {
		object(expression: $expression) {
			${r}
		}
	}
}`,p=await this.graphql(v,{owner:s,repo:u,expression:i!=null?i:`${c}:${f}`});return(o=(a=p==null?void 0:p.repository)==null?void 0:a.object)!=null?o:void 0}catch(s){Y.error(s);return}}async repositoryObjectExists(t,n){return await this.queryRepositoryObject(t,"exists","			__typename",n)!==void 0}async searchPullRequestsQuery(t,n){var r;function i(a){function o(s,u){return{number:s.number,title:s.title,repoWithOwner:s.repository.nameWithOwner,reasons:u?[u]:[],url:s.url}}return l(o,"toResult"),Ku([...a.assigned.nodes.filter(s=>s!==null).map(s=>o(s,"assigned")),...a.reviewRequested.nodes.filter(s=>s!==null).map(s=>o(s,"review requested")),...a.mentioned.nodes.filter(s=>s!==null).map(s=>o(s,"mentioned")),...a.authored.nodes.filter(s=>s!==null).map(s=>o(s,"authored")),...gw(a.viewer.repositories.nodes,s=>s.pullRequests.nodes.filter(u=>u!==null).map(u=>o(u)))],s=>s.url,(s,u)=>(u.reasons.length!==0&&s.reasons.push(...u.reasons),s))}l(i,"processQueryResults");try{const a=`query searchPullRequests(
	$authored: String!
	$assigned: String!
	$reviewRequested: String!
	$mentioned: String!
) {
	viewer {
		repositories(first: 100, orderBy: { field: STARGAZERS, direction: DESC }) {
			nodes {
				pullRequests(first: 100, states: OPEN, orderBy: { field: UPDATED_AT, direction: DESC }) {
					nodes {
						number
						title
						url
						repository {
							nameWithOwner
						}
					}
				}
			}
		}
	}
	authored: search(first: 100, query: $authored, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	assigned: search(first: 100, query: $assigned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	reviewRequested: search(first: 100, query: $reviewRequested, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	mentioned: search(first: 100, query: $mentioned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
}`;t=t.trim(),(n==null?void 0:n.user)&&(t+=` user:${n.user}`);const o=await this.graphql(a,{authored:(t?`${t} is:pr is:open archived:false author:@me`:"is:pr is:open archived:false author:@me").trim(),assigned:(t?`${t} is:pr is:open archived:false assignee:@me`:"is:pr is:open archived:false assignee:@me").trim(),reviewRequested:(t?`${t} is:pr is:open archived:false review-requested:@me`:"is:pr is:open archived:false review-requested:@me").trim(),mentioned:(t?`${t} is:pr is:open archived:false mentions:@me`:"is:pr is:open archived:false mentions:@me").trim()},!0);return o===void 0?{results:[],hasSAMLProtectedResults:!1}:{results:i(o),hasSAMLProtectedResults:!1}}catch(a){return a instanceof li?{results:i(a.data),hasSAMLProtectedResults:((r=a.errors)==null?void 0:r.find(o=>o.type==="FORBIDDEN"))!==void 0}:(this.handleRequestErrors(a),{results:[],hasSAMLProtectedResults:!1})}}async searchRepositoriesQuery(t,n){var r;function i(a){var o,s,u;const c=Ku((n==null?void 0:n.user)?[...a.search.nodes,...a.viewer.repositories.nodes]:[...a.viewer.repositories.nodes,...a.search.nodes],v=>v==null?void 0:v.url),f=[];for(const v of c)v!==null&&f.push({repoWithOwner:v.nameWithOwner,description:(o=v.description)!=null?o:void 0,url:v.url,fork:(u=(s=v.parent)==null?void 0:s.nameWithOwner)!=null?u:void 0,stars:v.stargazerCount});return f}l(i,"processQueryResults");try{const a=`query searchRepositories(
	$search: String!
) {
	viewer {
		repositories(first: 100, orderBy: { field: UPDATED_AT, direction: DESC }) {
			nodes {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
	search(first: 100, query: $search, type: REPOSITORY) {
		nodes {
			...on Repository {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
}`;(n==null?void 0:n.user)&&(t+=` user:${n.user}`),(n==null?void 0:n.sort)&&(t+=` sort:${n.sort}`),t+=" fork:true";const o=await this.graphql(a,{search:t.trim()},!0);return o===void 0?{results:[],hasSAMLProtectedResults:!1}:{results:i(o),hasSAMLProtectedResults:!1}}catch(a){return a instanceof li?{results:i(a.data),hasSAMLProtectedResults:((r=a.errors)==null?void 0:r.find(o=>o.type==="FORBIDDEN"))!==void 0}:(this.handleRequestErrors(a),{results:[],hasSAMLProtectedResults:!1})}}async searchCodeQuery(t,n,r){var i,a,o;const{repo:{owner:s,name:u},HEAD:c,defaultBranch:f}=await this.getMetadata(n),v=[];((i=c.branch)==null?void 0:i.name)!==f.name&&v.push(Ca("Cant search branch","Unable to search {0} without index, falling back to {1}.",(o=(a=c.branch)==null?void 0:a.name)!=null?o:c.detached.name,f.name));try{const w=await(await this.octokit({request:{headers:{authorization:`Bearer ${(await this.ensureAuthenticated()).accessToken}`,accept:"application/vnd.github.v3.text-match+json"}}})).request("GET /search/code",{q:`${t} repo:${s}/${u}`}),I=new m.Range(0,0,0,0),R=[];let A=0,D;for(const O of w.data.items)for(const G of O.text_matches){if(A++,r.maxResults!==void 0&&A>r.maxResults)return{matches:R,limitHit:!0};D={path:O.path,ranges:[],preview:G.fragment,matches:[]};for(const W of G.matches){let re=0,we=0,he=0;for(let fe=0;fe<W.indices[1];fe++)fe===W.indices[0]&&(we=he),G.fragment[fe]===`
`?(re++,he=0):he++;D.ranges.push(I),D.matches.push(new m.Range(re,we,re,he))}R.push(D)}return{matches:R,limitHit:!1,warnings:v}}catch(p){return{matches:[],limitHit:!0}}}async switchTo(t,n,r){const{name:i,repo:a,HEAD:{branch:o}}=await this.getMetadata(t);let s;if(!(n!==void 0&&(typeof n=="string"?(n==null?void 0:n.startsWith("refs/heads/"))?(s={type:He.Tree,id:n.substr(11)},n=n.substr(11)):(n==null?void 0:n.startsWith("refs/tags/"))?s={type:He.Tree,id:n.substr(10)}:s={type:He.Tree,id:n}:s={...n,type:n.type===He.Branch||n.type===He.Tag?He.Tree:n.type},(o==null?void 0:o.name)===s.id)))return{name:i,uri:this.providerService.createVirtualUri(t,{repo:a,ref:s}),location:(r==null?void 0:r.openInNewWindow)?Ke.NewWindow:Ke.CurrentWindow}}async sync(t,n,r){var i,a,o,s,u,c;const f=new M(`GitHub.sync(${t.toString()}, resolution=${r.conflictResolution}, to=${r.to})`);let v;try{const{metadata:p}=await this.fetchCore(t,!0,{to:r.to});if(p.HEAD.detached){v=" \u2022 Skipped; detached HEAD";return}if(((a=(i=p==null?void 0:p.state)==null?void 0:i.behind)!=null?a:0)>0&&await n.hasChanges(t)){f.logStep("Fetching upstream changes");const w=[],I=(s=(o=p.state)==null?void 0:o.incomingChanges)!=null?s:[];if(I.length>0){const R=await n.getChanges(t);for(const A of R){const D=this.providerService.getRelativeFilePath(t,A.uri),O=I.find(G=>this.providerService.getRelativeFilePath(t,G.uri)===D);O!==void 0&&w.push({path:D,current:A,incomingType:O.type})}}if(w.length>0)switch(r.conflictResolution){case $e.KeepCurrent:f.logStep("Syncing (keep) upstream changes",{message:`: ${w.length} conflicts; \u2022`,suffix:" \u2022 Syncing (keep) upstream changes..."});for(const R of w)await n.keep(R.current.uri,{type:R.incomingType,providerUri:Wf(p,p.HEAD.branch.sha,R.path)});break;case $e.DiscardCurrent:f.logStep("Syncing (discard) upstream changes",{message:`: ${w.length} conflicts; \u2022`,suffix:" \u2022 Syncing (discard) upstream changes..."});for(const R of w)await n.discard(R.current.uri);break;case $e.Merge:f.logStep("Syncing (merge) upstream changes",{message:`: ${w.length} conflicts; \u2022`,suffix:" \u2022 Syncing (merge) upstream changes..."});for(const R of w)await n.merge(R.current.uri,{type:R.incomingType,providerUri:Wf(p,p.HEAD.branch.sha,R.path)},{providerUri:Wf(p,p.HEAD.sha,R.path)},Je.get("experimental.useSimplifiedMerge"));break;case $e.Abort:default:throw f.logStep("Syncing (abort) upstream changes",{message:`: ${w.length} conflicts; \u2022`,suffix:" \u2022 Syncing (abort) upstream changes..."}),await this.providerService.updateMetadata(t,p),We.SyncConflictsError()}}v=` \u2022 to=${(u=r.to)!=null?u:p.HEAD.branch.sha}`,await this.fastForwardTo(t,(c=r.to)!=null?c:p.HEAD.branch.sha,p)}finally{f.stop(v?{suffix:v}:void 0)}}async fastForwardTo(t,n,r){if(r.HEAD.detached)throw We.DetachedHEADError("Unable to fast-forward; no current branch");if(r.HEAD.sha===n&&r.state===void 0)return;const i=this.asFileTreeKey(t,r.HEAD.sha),a=this.fileTreeCache.get(i);this.fileTreeCache.delete(i),a==null||a.dispose(),Y.log(`Fast forward to ${n}; rootUri=${t.toString()}`),await this.providerService.updateMetadata(t,{...r,HEAD:{...r.HEAD,detached:void 0,sha:n},state:n!==r.HEAD.branch.sha?r.state:void 0,timestamp:Date.now()}),n!==r.HEAD.branch.sha&&r.state===void 0&&await this.fetchCore(t,!1,{to:n})}async getBranchTips(t,n){try{const{repo:{owner:r,name:i},HEAD:a}=await this.getMetadata(t);n===void 0&&(a.type===ne.RemoteBranch?n=`${a.branch.remote.repo.owner}/${a.branch.remote.repo.name}:refs/heads/${a.branch.name}`:n=a.branch?`refs/heads/${a.branch.name}`:"");const o=j0.exec(n);if(o==null?void 0:o.groups)return this.getRemoteBranchTips(r,i,n);const s=`query getBranchTips(
	$owner: String!
	$repo: String!
	$ref: String!
) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			target {
				oid
			}
		}
	}
}`,u=await this.graphql(s,{owner:r,repo:i,ref:n});if((u==null?void 0:u.repository)==null)return;const{defaultBranchRef:c,ref:f}=u.repository;return!c&&!f?void 0:{defaultBranch:c?{sha:c.target.oid}:void 0,branch:f?{sha:f.target.oid}:void 0}}catch(r){return}}async getRemoteBranchTips(t,n,r){try{const i=j0.exec(r);if((i==null?void 0:i.groups)==null)return;let{remoteOwner:a,remoteRepo:o,remoteRef:s}=i.groups;o||(o=n);const u=`query getRemoteBranchTips(
	$owner: String!
	$repo: String!
	$remoteOwner: String!
	$remoteRepo: String!
	$remoteRef: String!
) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
	}
	remote: repository(owner: $remoteOwner, name: $remoteRepo) {
		ref(qualifiedName: $remoteRef) {
			target {
				oid
			}
		}
	}
}`,c=await this.graphql(u,{owner:t,repo:n,remoteOwner:a,remoteRepo:o,remoteRef:s});if((c==null?void 0:c.repository)==null||(c==null?void 0:c.remote)==null)return;const{repository:{defaultBranchRef:f},remote:{ref:v}}=c;return!f&&!v?void 0:{defaultBranch:f?{sha:f.target.oid}:void 0,branch:v?{sha:v.target.oid}:void 0}}catch(i){return}}async getRepositoryInfo(t,n,r,i){var a,o,s,u,c,f,v,p,w,I,R,A,D,O,G,W;try{const re=`number
title
state
maintainerCanModify
baseRef { name }
baseRefName
baseRefOid
baseRepository {
	name
	owner { login }
	defaultBranchRef {
		name
		target { oid }
	}
	viewerPermission
}
headRef { name }
headRefName
headRefOid
headRepository {
	name
	owner { login }
	defaultBranchRef {
		name
		target { oid }
	}
	viewerPermission
}
mergeCommit { oid }
`,we=`query getRepository(
	$owner: String!
	$repo: String!
	$ref: String = ""
	$has_pr: Boolean!
	$pr: Int = 0
) {
	viewer { login }
	repository(owner: $owner, name: $repo) {
		name
		owner { login }
		defaultBranchRef {
			name
			target { oid }
		}
		ref(qualifiedName: $ref) {
			name
			prefix
			target {
				... on Tag {
                    target {
                        ... on Commit {
                            oid
                        }
                    }
                }
				... on Tree {
					oid
				}
				... on Blob {
					oid
				}
                ... on Commit {
                    oid
                }
			}
		}
		url
		sshUrl
		viewerPermission
		pullRequest(number: $pr) @include(if: $has_pr) {
			${re}
		}
	}
}`;let he,fe;try{const Ye=await this.graphql(we,{owner:t,repo:n,ref:(i==null?void 0:i.ref)!=="HEAD"?i==null?void 0:i.ref:void 0,has_pr:Boolean(i==null?void 0:i.pr),pr:(a=i==null?void 0:i.pr)!=null?a:0});if((Ye==null?void 0:Ye.repository)==null)return;({repository:fe,viewer:{login:he}}=Ye)}catch(Ye){if((i==null?void 0:i.pr)&&Ye instanceof li&&((s=(o=Ye.errors)==null?void 0:o[0])==null?void 0:s.type)==="NOT_FOUND"&&((u=Ye.errors[0])==null?void 0:u.message.includes("Could not resolve to a PullRequest"))){({repository:fe,viewer:{login:he}}=Ye.data);try{const _t=await this.graphql(`query getPullRequestFromParentRepository(
	$owner: String!
	$repo: String!
	$pr: Int!
) {
	repository(owner: $owner, name: $repo) {
		parent {
			pullRequest(number: $pr) {
				${re}
			}
		}
	}
}`,{owner:t,repo:n,pr:i==null?void 0:i.pr});if(((f=(c=_t==null?void 0:_t.repository)==null?void 0:c.parent)==null?void 0:f.pullRequest)==null)throw Ye;fe.pullRequest=_t.repository.parent.pullRequest}catch{throw Ye}}else throw Ye}const Ee=(v=fe.defaultBranchRef)!=null?v:void 0;if((Ee==null?void 0:Ee.name)==null)return;const ue=fe.pullRequest;let Re;if(fe==null?void 0:fe.ref)Re={prefix:fe.ref.prefix,name:fe.ref.name,sha:"oid"in fe.ref.target?fe.ref.target.oid:fe.ref.target.target.oid};else if(ue==null?void 0:ue.headRef){let Ye=Vf(ue.headRepository.viewerPermission);Ye<ae.Write&&ue.maintainerCanModify&&Vf(fe.viewerPermission)>=ae.Write&&(Ye=ae.WriteToPullRequest),Re=ue.headRepository.owner.login===t?{prefix:"refs/heads/",name:ue==null?void 0:ue.headRef.name,sha:(w=(p=ue.mergeCommit)==null?void 0:p.oid)!=null?w:ue==null?void 0:ue.headRefOid}:{prefix:"refs/remotes/",name:ue==null?void 0:ue.headRef.name,sha:(R=(I=ue.mergeCommit)==null?void 0:I.oid)!=null?R:ue==null?void 0:ue.headRefOid,remote:{name:`${ue.headRepository.owner.login}/${ue.headRepository.name}`,accessLevel:Ye,repo:{owner:ue.headRepository.owner.login,name:ue.headRepository.name}}}}else(ue==null?void 0:ue.baseRef)?(Re={prefix:"refs/heads/",name:ue==null?void 0:ue.baseRef.name,sha:(D=(A=ue.mergeCommit)==null?void 0:A.oid)!=null?D:ue==null?void 0:ue.baseRefOid},r&&(Y.log("Did not find a headRef for PR, falling back to baseRef",ue.baseRef),$n.showPullRequestHeadNotFoundMessage(`${t}/${n}`,`#${i==null?void 0:i.pr}`))):(i==null?void 0:i.ref)==="HEAD"&&(Re={prefix:"refs/heads/",name:Ee.name,sha:Ee.target.oid});return{user:he,repo:{owner:fe.owner.login,name:fe.name},accessLevel:Vf(fe.viewerPermission),ref:Re,defaultBranch:{name:Ee.name,sha:Ee.target.oid},cloneUrl:{http:fe.url,ssh:fe.sshUrl},pullRequest:ue?{id:ue.number.toString(),state:jf(ue.state),title:ue.title}:void 0}}catch(re){if(re instanceof li)switch((G=(O=re.errors)==null?void 0:O[0])==null?void 0:G.type){case"NOT_FOUND":{if((i==null?void 0:i.pr)&&((W=re.errors[0])==null?void 0:W.message.includes("Could not resolve to a PullRequest"))){const he=new kl(re,`${t}/${n}`,`#${i==null?void 0:i.pr}`);throw r&&$n.showPullRequestNotFoundMessage(he.name,he.id),he}const we=new qo(re,`${t}/${n}`);throw r&&$n.showRepositoryNotFoundMessage(we.name),we}case"FORBIDDEN":{const we=new zo(re,`${t}/${n}`);throw r&&$n.showRepositoryForbiddenMessage(we.name,()=>this.reauthenticate()),we}}Y.error(re,`Failed to get repository info for '${t}/${n}'`),!this.handleRequestErrors(re)&&r&&$n.showUnableToOpenRepositoryMessage(re);return}}async validateOwnerAndRepoAndSplitRefFromPath(t,n,r){try{const i=await this.request(`GET /repos/{owner}/{repo}/git/extract-ref/${r!=null?r:"HEAD"}`,{owner:t,repo:n});return[t,n]=i.data.name_with_owner.split("/"),r?{owner:t,repo:n,ref:{type:He.Tree,id:i.data.ref},path:i.data.path}:{owner:t,repo:n}}catch(i){if(i instanceof $r)switch(i.status){case 401:throw We.InvalidCredentialsError(i,()=>void this.reauthenticate());case 403:throw $n.showRepositoryForbiddenMessage(`${t}/${n}`,()=>this.reauthenticate()),new zo(i,`${t}/${n}`);case 404:throw $n.showRepositoryNotFoundMessage(`${t}/${n}`),new qo(i,`${t}/${n}`);case 409:throw $n.showRepositoryEmptyMessage(`${t}/${n}`),new Dl(i,`${t}/${n}`)}return}}asFileTreeKey(t,n){return`${T(this.getProviderRootUri(t))}:${n}`}}l(Ll,"GitHubRepositoryProvider"),q0([yn()],Ll.prototype,"ensureAuthenticated",1),q0([yn()],Ll.prototype,"octokit",1);function jf(e){switch(e){case"OPEN":return Be.Open;case"CLOSED":return Be.Closed;case"MERGED":return Be.Merged}}l(jf,"toPullRequestState");function yb(e){if(e!==void 0)return e.map(t=>{switch(t){case Be.Open:return"OPEN";case Be.Closed:return"CLOSED";case Be.Merged:return"MERGED"}})}l(yb,"fromPullRequestStates");var Oi;(function(e){e.ADMIN="ADMIN",e.MAINTAIN="MAINTAIN",e.WRITE="WRITE",e.TRIAGE="TRIAGE",e.READ="READ",e.NONE="NONE"})(Oi||(Oi={}));function Vf(e){switch(e){case Oi.ADMIN:return ae.Admin;case Oi.MAINTAIN:return ae.Maintain;case Oi.WRITE:return ae.Write;case Oi.TRIAGE:return ae.Triage;case Oi.READ:return ae.Read;default:return ae.None}}l(Vf,"permissionToAccessLevel");function _b(e){switch(e&&(e=e.toLocaleLowerCase()),e){case"blob":return m.FileType.File;case"tree":return m.FileType.Directory;default:return m.FileType.Unknown}}l(_b,"typenameToFileType");function xb(e){return{registerVirtualProviderService:function(t){Yt.configure("githubRepositories",e),Y.configure(e,"GitHub Repositories",Je.get("logLevel")),M.start("Time to root directory",{log:!1});const n=Gu.configure(e),r=new Vp(e);try{const i=new cs(e.globalState),a=i.with(n),o=new us(e.globalStorageUri,n),s=new ls(a),u=new ss(t,a,o,r,n);u.getWorkspacesWithChanges();const c=new Zu(t,i,u,n),f=new b0(e.globalStorageUri,t),v=new Ll(t,f),p=new Po(t,v,u,f,r);e.subscriptions.push(t.register("github","GitHub",v,p,i,u,s,c),v,p,new et(v))}catch(i){throw Y.error(i),i}}}}l(xb,"activate")})(),module.exports=__webpack_exports__})();
