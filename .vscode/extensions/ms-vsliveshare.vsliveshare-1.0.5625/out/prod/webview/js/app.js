(function(e){function t(t){for(var s,o,r=t[0],u=t[1],c=t[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},a={app:0},i=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("64a9")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("a026"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.cssProps,attrs:{id:"app"}},[n("div",{staticClass:"vue-container"},[n("messages-section",{attrs:{messages:e.messages,users:e.users}}),n("form-section",{ref:"formSection",attrs:{window:e.window,users:e.users,atMentions:e.atMentions,status:e.statusText}}),n("div",{class:e.setInfoBoxStyle},[e.window.infoMessage?n("markdown-element",{attrs:{text:e.window.infoMessage,inline:!1}}):e._e()],1)],1)])},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"messages-section"},e._l(e.messages,(function(e){return n("messages-date-group",{key:e.date,attrs:{groups:e.groups,date:e.date}})})),1)},r=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"messages-date-section"},[n("h3",{staticClass:"date-heading"},[e._v(e._s(e.dateString))]),e._l(e.groups,(function(e){return n("message-group",{key:e.key,attrs:{messages:e.messages,userId:e.userId,user:e.user,timestamp:e.minTimestamp}})}))],2)},c=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-group"},[n("div",{staticClass:"message-group-image"},[n("img",{attrs:{src:e.user?e.user.avatarUri:null}})]),n("div",{staticClass:"message-group-content"},[n("div",[n("strong",{staticClass:"username",on:{click:e.followUserFunc}},[e._v(e._s(e.userName))]),e._v("\n            Â \n            "),n("span",{staticClass:"timestamp"},[e._v(e._s(e.readableTimestamp))])]),n("ul",{staticClass:"message-list"},e._l(e.messages,(function(e){return n("message-item",{key:e.timestamp,attrs:{message:e}})})),1)])])},d=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:{unread:e.message.isUnread}},[n("markdown-element",{attrs:{inline:!1,text:e.message.text}})],1)},m=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.html?n("div",{style:e.inlineStyleObject,domProps:{innerHTML:e._s(e.html)}}):e._e()},h=[],g=n("d4cd"),v=n("5371"),b={name:"markdown-element",props:["text","inline"],computed:{html:function(){var e=new g({breaks:!0}).use(v);return this.inline?e.renderInline(this.text):e.render(this.text)},inlineStyleObject:function(){return{display:this.inline?"inline":"block"}}}},w=b,y=n("2877"),x=Object(y["a"])(w,f,h,!1,null,null,null),_=x.exports,O={name:"message-item",props:["message"],components:{MarkdownElement:_}},T=O,S=Object(y["a"])(T,p,m,!1,null,null,null),j=S.exports,M=acquireVsCodeApi();function k(e,t){M.postMessage({type:e,body:t})}function C(e){var t=new Date(1e3*+e);return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function E(e){return k("follow",e)}var I={name:"message-group",props:["messages","userId","user","timestamp"],computed:{readableTimestamp:function(){return C(this.timestamp)},userName:function(){return this.user?this.user.displayName:this.userId}},components:{MessageItem:j},methods:{followUserFunc:function(){E(this.userId)}}},$=I,L=Object(y["a"])($,l,d,!1,null,null,null),P=L.exports,D={props:["groups","date"],components:{MessageGroup:P},computed:{dateString:function(){var e={weekday:"long",month:"long",day:"numeric",timeZone:"UTC"};return new Date(this.date).toLocaleDateString("en-US",e)}}},F=D,K=Object(y["a"])(F,u,c,!1,null,null,null),U=K.exports,N={name:"messages-section",props:["messages"],components:{MessagesDateGroup:U},data:function(){return{messagesLength:0}},updated:function(){var e=this.messages.map((function(e){return e.groups})),t=[].concat.apply([],e),n=t.reduce((function(e,t){return e+t.messages.length}),0);n!==this.messagesLength&&(this.messagesLength=n,this.$el.scrollTop=this.$el.scrollHeight)}},B=N,H=Object(y["a"])(B,o,r,!1,null,null,null),z=H.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-section"},[n("div",{class:e.isDisabled},[n("message-input",{attrs:{onSubmit:e.onSubmit,users:e.users,placeholderText:e.placeholder}}),n("div",{staticClass:"status-text"},[e._v(e._s(e.status))])],1)])},G=[],J=(n("f559"),n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-tribute",{attrs:{options:e.tributeOptions}},[n("p",{directives:[{name:"focus",rawName:"v-focus"}],ref:"messageInput",staticClass:"editable",attrs:{contenteditable:"","data-ph":e.placeholderText},on:{keydown:function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.onKeydown(t)},focus:e.onFocus,input:e.onInput,"tribute-replaced":e.onTributeReplaced}})])}),R=[],V=(n("8615"),n("ac6a"),n("456d"),n("24cb")),q={name:"message-input",props:["placeholderText","users","onSubmit"],components:{VueTribute:V["a"]},watch:{users:function(e,t){var n=this;Object.keys(e).length!==Object.keys(t).length&&setTimeout((function(){n.tributeOptions.values=Object.values(e).map((function(e){return{key:e.name,value:e.name}}))}),200)}},data:function(){return{text:"",inComposition:!1,sendTypingEvents:!0,tributeOptions:{values:[],selectTemplate:function(e){return'<span class="at-mention" contenteditable="false">@'.concat(e.original.value,"</span>")}}}},mounted:function(){var e=this;this.$refs.messageInput.addEventListener("compositionstart",(function(t){e.inComposition=!0})),this.$refs.messageInput.addEventListener("compositionend",(function(t){e.inComposition=!1}))},methods:{onSubmitFunc:function(e){this.onSubmit(this.text),this.clearInput()},onFocus:function(e){return k("is_focused")},onKeydown:function(e){var t=this;"Enter"!==e.code||e.shiftKey||this.inComposition?this.sendTypingEvents&&(this.sendTypingEvents=!1,k("typing"),setTimeout((function(){t.sendTypingEvents=!0}),300)):(e.preventDefault(),this.text&&this.onSubmitFunc())},clearInput:function(){this.text="",this.$refs.messageInput.innerHTML=""},onInput:function(e){this.text=e.target.innerText},onTributeReplaced:function(e){console.log("replaced",e.detail)}}};s["a"].directive("focus",{inserted:function(e){e.focus()}});var W=q,Z=(n("dabf"),Object(y["a"])(W,J,R,!1,null,null,null)),Q=Z.exports,X={name:"form-section",props:["window","users","status"],components:{MessageInput:Q},computed:{placeholder:function(){return"Message ".concat(this.window?this.window.name:"")},isDisabled:function(){return this.window&&this.window.isDisabled?"disabled":""}},methods:{onSubmit:function(e){var t=e.startsWith("/")?"command":"text";k(t,e)}},mounted:function(){return k("is_ready")}},Y=X,ee=(n("de93"),Object(y["a"])(Y,A,G,!1,null,null,null)),te=ee.exports,ne={name:"app",props:["data"],components:{MessagesSection:z,FormSection:te,MarkdownElement:_},computed:{messages:function(){return this.data?this.data.messages:[]},users:function(){return this.data?this.data.users:{}},window:function(){return this.data?this.data.window:{}},statusText:function(){return this.data?this.data.statusText:""},atMentions:function(){return this.data?this.data.atMentions:[]},setInfoBoxStyle:function(){return this.data&&this.data.window&&this.data.window.infoMessage?"infoBox":"disabled"},cssProps:function(){return{"--chat-code-font-family":this.data?this.data.fontFamily:"monospace","--chat-font-size":this.data?"".concat(this.data.fontSize,"px"):"12px"}}}},se=ne,ae=(n("034f"),Object(y["a"])(se,a,i,!1,null,null,null)),ie=ae.exports,oe=new s["a"]({template:'<app :data="data"> </app>',props:["data"],components:{App:ie},el:"#app"});window.addEventListener("message",(function(e){oe.data=e.data}))},"64a9":function(e,t,n){},b7c1:function(e,t,n){},c756:function(e,t,n){},dabf:function(e,t,n){"use strict";n("c756")},de93:function(e,t,n){"use strict";n("b7c1")}});
//# sourceMappingURL=app.js.map